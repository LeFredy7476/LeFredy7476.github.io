var NR=Object.defineProperty;var IR=(ki,hi,ln)=>hi in ki?NR(ki,hi,{enumerable:!0,configurable:!0,writable:!0,value:ln}):ki[hi]=ln;var V1=(ki,hi,ln)=>IR(ki,typeof hi!="symbol"?hi+"":hi,ln);(function(){"use strict";var ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ln(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var l=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:function(){return n[s]}})}),e}var ju={exports:{}},ca={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function $1(){if(Sp)return ca;Sp=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,l,o){var h=null;if(o!==void 0&&(h=""+o),l.key!==void 0&&(h=""+l.key),"key"in l){o={};for(var c in l)c!=="key"&&(o[c]=l[c])}else o=l;return l=o.ref,{$$typeof:n,type:s,key:h,ref:l!==void 0?l:null,props:o}}return ca.Fragment=t,ca.jsx=e,ca.jsxs=e,ca}var wp;function Z1(){return wp||(wp=1,ju.exports=$1()),ju.exports}var Dl=Z1(),Yu={exports:{}},Pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function K1(){if(Rp)return Pt;Rp=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),h=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,T={};function b(A,D,G){this.props=A,this.context=D,this.refs=T,this.updater=G||_}b.prototype.isReactComponent={},b.prototype.setState=function(A,D){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,D,"setState")},b.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function w(){}w.prototype=b.prototype;function U(A,D,G){this.props=A,this.context=D,this.refs=T,this.updater=G||_}var N=U.prototype=new w;N.constructor=U,v(N,b.prototype),N.isPureReactComponent=!0;var L=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function O(A,D,G,F,Z,it){return G=it.ref,{$$typeof:n,type:A,key:D,ref:G!==void 0?G:null,props:it}}function q(A,D){return O(A.type,D,void 0,void 0,void 0,A.props)}function rt(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function lt(A){var D={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(G){return D[G]})}var ft=/\/+/g;function z(A,D){return typeof A=="object"&&A!==null&&A.key!=null?lt(""+A.key):D.toString(36)}function W(){}function tt(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(W,W):(A.status="pending",A.then(function(D){A.status==="pending"&&(A.status="fulfilled",A.value=D)},function(D){A.status==="pending"&&(A.status="rejected",A.reason=D)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function ut(A,D,G,F,Z){var it=typeof A;(it==="undefined"||it==="boolean")&&(A=null);var nt=!1;if(A===null)nt=!0;else switch(it){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(A.$$typeof){case n:case t:nt=!0;break;case g:return nt=A._init,ut(nt(A._payload),D,G,F,Z)}}if(nt)return Z=Z(A),nt=F===""?"."+z(A,0):F,L(Z)?(G="",nt!=null&&(G=nt.replace(ft,"$&/")+"/"),ut(Z,D,G,"",function(yt){return yt})):Z!=null&&(rt(Z)&&(Z=q(Z,G+(Z.key==null||A&&A.key===Z.key?"":(""+Z.key).replace(ft,"$&/")+"/")+nt)),D.push(Z)),1;nt=0;var dt=F===""?".":F+":";if(L(A))for(var ct=0;ct<A.length;ct++)F=A[ct],it=dt+z(F,ct),nt+=ut(F,D,G,it,Z);else if(ct=x(A),typeof ct=="function")for(A=ct.call(A),ct=0;!(F=A.next()).done;)F=F.value,it=dt+z(F,ct++),nt+=ut(F,D,G,it,Z);else if(it==="object"){if(typeof A.then=="function")return ut(tt(A),D,G,F,Z);throw D=String(A),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return nt}function S(A,D,G){if(A==null)return A;var F=[],Z=0;return ut(A,F,"","",function(it){return D.call(G,it,Z++)}),F}function M(A){if(A._status===-1){var D=A._result;D=D(),D.then(function(G){(A._status===0||A._status===-1)&&(A._status=1,A._result=G)},function(G){(A._status===0||A._status===-1)&&(A._status=2,A._result=G)}),A._status===-1&&(A._status=0,A._result=D)}if(A._status===1)return A._result.default;throw A._result}var C=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function H(){}return Pt.Children={map:S,forEach:function(A,D,G){S(A,function(){D.apply(this,arguments)},G)},count:function(A){var D=0;return S(A,function(){D++}),D},toArray:function(A){return S(A,function(D){return D})||[]},only:function(A){if(!rt(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Pt.Component=b,Pt.Fragment=e,Pt.Profiler=l,Pt.PureComponent=U,Pt.StrictMode=s,Pt.Suspense=d,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(A){return B.H.useMemoCache(A)}},Pt.cache=function(A){return function(){return A.apply(null,arguments)}},Pt.cloneElement=function(A,D,G){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var F=v({},A.props),Z=A.key,it=void 0;if(D!=null)for(nt in D.ref!==void 0&&(it=void 0),D.key!==void 0&&(Z=""+D.key),D)!j.call(D,nt)||nt==="key"||nt==="__self"||nt==="__source"||nt==="ref"&&D.ref===void 0||(F[nt]=D[nt]);var nt=arguments.length-2;if(nt===1)F.children=G;else if(1<nt){for(var dt=Array(nt),ct=0;ct<nt;ct++)dt[ct]=arguments[ct+2];F.children=dt}return O(A.type,Z,void 0,void 0,it,F)},Pt.createContext=function(A){return A={$$typeof:h,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:o,_context:A},A},Pt.createElement=function(A,D,G){var F,Z={},it=null;if(D!=null)for(F in D.key!==void 0&&(it=""+D.key),D)j.call(D,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(Z[F]=D[F]);var nt=arguments.length-2;if(nt===1)Z.children=G;else if(1<nt){for(var dt=Array(nt),ct=0;ct<nt;ct++)dt[ct]=arguments[ct+2];Z.children=dt}if(A&&A.defaultProps)for(F in nt=A.defaultProps,nt)Z[F]===void 0&&(Z[F]=nt[F]);return O(A,it,void 0,void 0,null,Z)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(A){return{$$typeof:c,render:A}},Pt.isValidElement=rt,Pt.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:M}},Pt.memo=function(A,D){return{$$typeof:m,type:A,compare:D===void 0?null:D}},Pt.startTransition=function(A){var D=B.T,G={};B.T=G;try{var F=A(),Z=B.S;Z!==null&&Z(G,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(H,C)}catch(it){C(it)}finally{B.T=D}},Pt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Pt.use=function(A){return B.H.use(A)},Pt.useActionState=function(A,D,G){return B.H.useActionState(A,D,G)},Pt.useCallback=function(A,D){return B.H.useCallback(A,D)},Pt.useContext=function(A){return B.H.useContext(A)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(A,D){return B.H.useDeferredValue(A,D)},Pt.useEffect=function(A,D,G){var F=B.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(A,D)},Pt.useId=function(){return B.H.useId()},Pt.useImperativeHandle=function(A,D,G){return B.H.useImperativeHandle(A,D,G)},Pt.useInsertionEffect=function(A,D){return B.H.useInsertionEffect(A,D)},Pt.useLayoutEffect=function(A,D){return B.H.useLayoutEffect(A,D)},Pt.useMemo=function(A,D){return B.H.useMemo(A,D)},Pt.useOptimistic=function(A,D){return B.H.useOptimistic(A,D)},Pt.useReducer=function(A,D,G){return B.H.useReducer(A,D,G)},Pt.useRef=function(A){return B.H.useRef(A)},Pt.useState=function(A){return B.H.useState(A)},Pt.useSyncExternalStore=function(A,D,G){return B.H.useSyncExternalStore(A,D,G)},Pt.useTransition=function(){return B.H.useTransition()},Pt.version="19.1.0",Pt}var Cp;function qu(){return Cp||(Cp=1,Yu.exports=K1()),Yu.exports}var Q1=qu();const Hi=hi(Q1);var Wu={exports:{}},fa={},$u={exports:{}},Zu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function J1(){return Mp||(Mp=1,function(n){function t(S,M){var C=S.length;S.push(M);t:for(;0<C;){var H=C-1>>>1,A=S[H];if(0<l(A,M))S[H]=M,S[C]=A,C=H;else break t}}function e(S){return S.length===0?null:S[0]}function s(S){if(S.length===0)return null;var M=S[0],C=S.pop();if(C!==M){S[0]=C;t:for(var H=0,A=S.length,D=A>>>1;H<D;){var G=2*(H+1)-1,F=S[G],Z=G+1,it=S[Z];if(0>l(F,C))Z<A&&0>l(it,F)?(S[H]=it,S[Z]=C,H=Z):(S[H]=F,S[G]=C,H=G);else if(Z<A&&0>l(it,C))S[H]=it,S[Z]=C,H=Z;else break t}}return M}function l(S,M){var C=S.sortIndex-M.sortIndex;return C!==0?C:S.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var h=Date,c=h.now();n.unstable_now=function(){return h.now()-c}}var d=[],m=[],g=1,y=null,x=3,_=!1,v=!1,T=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function L(S){for(var M=e(m);M!==null;){if(M.callback===null)s(m);else if(M.startTime<=S)s(m),M.sortIndex=M.expirationTime,t(d,M);else break;M=e(m)}}function B(S){if(T=!1,L(S),!v)if(e(d)!==null)v=!0,j||(j=!0,z());else{var M=e(m);M!==null&&ut(B,M.startTime-S)}}var j=!1,O=-1,q=5,rt=-1;function lt(){return b?!0:!(n.unstable_now()-rt<q)}function ft(){if(b=!1,j){var S=n.unstable_now();rt=S;var M=!0;try{t:{v=!1,T&&(T=!1,U(O),O=-1),_=!0;var C=x;try{e:{for(L(S),y=e(d);y!==null&&!(y.expirationTime>S&&lt());){var H=y.callback;if(typeof H=="function"){y.callback=null,x=y.priorityLevel;var A=H(y.expirationTime<=S);if(S=n.unstable_now(),typeof A=="function"){y.callback=A,L(S),M=!0;break e}y===e(d)&&s(d),L(S)}else s(d);y=e(d)}if(y!==null)M=!0;else{var D=e(m);D!==null&&ut(B,D.startTime-S),M=!1}}break t}finally{y=null,x=C,_=!1}M=void 0}}finally{M?z():j=!1}}}var z;if(typeof N=="function")z=function(){N(ft)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,tt=W.port2;W.port1.onmessage=ft,z=function(){tt.postMessage(null)}}else z=function(){w(ft,0)};function ut(S,M){O=w(function(){S(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(S){S.callback=null},n.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<S?Math.floor(1e3/S):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(S){switch(x){case 1:case 2:case 3:var M=3;break;default:M=x}var C=x;x=M;try{return S()}finally{x=C}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(S,M){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var C=x;x=S;try{return M()}finally{x=C}},n.unstable_scheduleCallback=function(S,M,C){var H=n.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?H+C:H):C=H,S){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=C+A,S={id:g++,callback:M,priorityLevel:S,startTime:C,expirationTime:A,sortIndex:-1},C>H?(S.sortIndex=C,t(m,S),e(d)===null&&S===e(m)&&(T?(U(O),O=-1):T=!0,ut(B,C-H))):(S.sortIndex=A,t(d,S),v||_||(v=!0,j||(j=!0,z()))),S},n.unstable_shouldYield=lt,n.unstable_wrapCallback=function(S){var M=x;return function(){var C=x;x=M;try{return S.apply(this,arguments)}finally{x=C}}}}(Zu)),Zu}var Dp;function tx(){return Dp||(Dp=1,$u.exports=J1()),$u.exports}var Ku={exports:{}},He={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op;function ex(){if(Op)return He;Op=1;var n=qu();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(d,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:d,containerInfo:m,implementation:g}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return He.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,He.createPortal=function(d,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,g)},He.flushSync=function(d){var m=h.T,g=s.p;try{if(h.T=null,s.p=2,d)return d()}finally{h.T=m,s.p=g,s.d.f()}},He.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(d,m))},He.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},He.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var g=m.as,y=c(g,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?s.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:_}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},He.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=c(m.as,m.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(d)},He.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=c(g,m.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},He.preloadModule=function(d,m){if(typeof d=="string")if(m){var g=c(m.as,m.crossOrigin);s.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(d)},He.requestFormReset=function(d){s.d.r(d)},He.unstable_batchedUpdates=function(d,m){return d(m)},He.useFormState=function(d,m,g){return h.H.useFormState(d,m,g)},He.useFormStatus=function(){return h.H.useHostTransitionStatus()},He.version="19.1.0",He}var Bp;function ix(){if(Bp)return Ku.exports;Bp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ku.exports=ex(),Ku.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function rx(){if(Np)return fa;Np=1;var n=tx(),t=qu(),e=ix();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function h(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(s(188))}function d(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return c(f),i;if(p===u)return c(f),r;p=p.sibling}throw Error(s(188))}if(a.return!==u.return)a=f,u=p;else{for(var E=!1,R=f.child;R;){if(R===a){E=!0,a=f,u=p;break}if(R===u){E=!0,u=f,a=p;break}R=R.sibling}if(!E){for(R=p.child;R;){if(R===a){E=!0,a=p,u=f;break}if(R===u){E=!0,u=p,a=f;break}R=R.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function m(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=m(i),r!==null)return r;i=i.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),rt=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=ft&&i[ft]||i["@@iterator"],typeof i=="function"?i:null)}var W=Symbol.for("react.client.reference");function tt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===W?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case v:return"Fragment";case b:return"Profiler";case T:return"StrictMode";case B:return"Suspense";case j:return"SuspenseList";case rt:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case N:return(i.displayName||"Context")+".Provider";case U:return(i._context.displayName||"Context")+".Consumer";case L:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return r=i.displayName||null,r!==null?r:tt(i.type)||"Memo";case q:r=i._payload,i=i._init;try{return tt(i(r))}catch{}}return null}var ut=Array.isArray,S=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C={pending:!1,data:null,method:null,action:null},H=[],A=-1;function D(i){return{current:i}}function G(i){0>A||(i.current=H[A],H[A]=null,A--)}function F(i,r){A++,H[A]=i.current,i.current=r}var Z=D(null),it=D(null),nt=D(null),dt=D(null);function ct(i,r){switch(F(nt,r),F(it,i),F(Z,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?v1(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=v1(r),i=_1(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(Z),F(Z,i)}function yt(){G(Z),G(it),G(nt)}function ot(i){i.memoizedState!==null&&F(dt,i);var r=Z.current,a=_1(r,i.type);r!==a&&(F(it,i),F(Z,a))}function vt(i){it.current===i&&(G(Z),G(it)),dt.current===i&&(G(dt),xl._currentValue=C)}var Et=Object.prototype.hasOwnProperty,Ot=n.unstable_scheduleCallback,Ft=n.unstable_cancelCallback,Tt=n.unstable_shouldYield,St=n.unstable_requestPaint,qt=n.unstable_now,ve=n.unstable_getCurrentPriorityLevel,gr=n.unstable_ImmediatePriority,Ni=n.unstable_UserBlockingPriority,ze=n.unstable_NormalPriority,$r=n.unstable_LowPriority,yr=n.unstable_IdlePriority,Zr=n.log,hf=n.unstable_setDisableYieldValue,ks=null,Xe=null;function Ji(i){if(typeof Zr=="function"&&hf(i),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(ks,i)}catch{}}var we=Math.clz32?Math.clz32:cf,Ma=Math.log,Co=Math.LN2;function cf(i){return i>>>=0,i===0?32:31-(Ma(i)/Co|0)|0}var wn=256,Kr=4194304;function mi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function $(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var R=u&134217727;return R!==0?(u=R&~p,u!==0?f=mi(u):(E&=R,E!==0?f=mi(E):a||(a=R&~i,a!==0&&(f=mi(a))))):(R=u&~p,R!==0?f=mi(R):E!==0?f=mi(E):a||(a=u&~i,a!==0&&(f=mi(a)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:f}function J(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Yt(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(){var i=wn;return wn<<=1,(wn&4194048)===0&&(wn=256),i}function te(){var i=Kr;return Kr<<=1,(Kr&62914560)===0&&(Kr=4194304),i}function It(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function $e(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function vr(i,r,a,u,f,p){var E=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var R=i.entanglements,P=i.expirationTimes,Y=i.hiddenUpdates;for(a=E&~a;0<a;){var et=31-we(a),at=1<<et;R[et]=0,P[et]=-1;var K=Y[et];if(K!==null)for(Y[et]=null,et=0;et<K.length;et++){var Q=K[et];Q!==null&&(Q.lane&=-536870913)}a&=~at}u!==0&&Ve(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(E&~r))}function Ve(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-we(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&4194090}function Ii(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-we(a),f=1<<u;f&r|i[u]&r&&(i[u]|=r),a&=~f}}function Hs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function tr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ze(){var i=M.p;return i!==0?i:(i=window.event,i===void 0?32:F1(i.type))}function Mo(i,r){var a=M.p;try{return M.p=i,r()}finally{M.p=a}}var Ui=Math.random().toString(36).slice(2),Re="__reactFiber$"+Ui,Ee="__reactProps$"+Ui,er="__reactContainer$"+Ui,Qr="__reactEvents$"+Ui,Da="__reactListeners$"+Ui,Oa="__reactHandles$"+Ui,Ba="__reactResources$"+Ui,Jr="__reactMarker$"+Ui;function zs(i){delete i[Re],delete i[Ee],delete i[Qr],delete i[Da],delete i[Oa]}function _r(i){var r=i[Re];if(r)return r;for(var a=i.parentNode;a;){if(r=a[er]||a[Re]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=T1(i);i!==null;){if(a=i[Re])return a;i=T1(i)}return r}i=a,a=i.parentNode}return null}function ir(i){if(i=i[Re]||i[er]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function ts(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function es(i){var r=i[Ba];return r||(r=i[Ba]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function de(i){i[Jr]=!0}var xr=new Set,Xs={};function br(i,r){Er(i,r),Er(i+"Capture",r)}function Er(i,r){for(Xs[i]=r,i=0;i<r.length;i++)xr.add(r[i])}var SS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uy={},hy={};function wS(i){return Et.call(hy,i)?!0:Et.call(uy,i)?!1:SS.test(i)?hy[i]=!0:(uy[i]=!0,!1)}function Do(i,r,a){if(wS(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Oo(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Tr(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}var ff,cy;function Rn(i){if(ff===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ff=r&&r[1]||"",cy=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ff+i+cy}var df=!1;function pf(i,r){if(!i||df)return"";df=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(Q){var K=Q}Reflect.construct(i,[],at)}else{try{at.call()}catch(Q){K=Q}i.call(at.prototype)}}else{try{throw Error()}catch(Q){K=Q}(at=i())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],R=p[1];if(E&&R){var P=E.split(`
`),Y=R.split(`
`);for(f=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(u===P.length||f===Y.length)for(u=P.length-1,f=Y.length-1;1<=u&&0<=f&&P[u]!==Y[f];)f--;for(;1<=u&&0<=f;u--,f--)if(P[u]!==Y[f]){if(u!==1||f!==1)do if(u--,f--,0>f||P[u]!==Y[f]){var et=`
`+P[u].replace(" at new "," at ");return i.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",i.displayName)),et}while(1<=u&&0<=f);break}}}finally{df=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Rn(a):""}function RS(i){switch(i.tag){case 26:case 27:case 5:return Rn(i.type);case 16:return Rn("Lazy");case 13:return Rn("Suspense");case 19:return Rn("SuspenseList");case 0:case 15:return pf(i.type,!1);case 11:return pf(i.type.render,!1);case 1:return pf(i.type,!0);case 31:return Rn("Activity");default:return""}}function fy(i){try{var r="";do r+=RS(i),i=i.return;while(i);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function gi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function dy(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function CS(i){var r=dy(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),u=""+i[r];if(!i.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(i,r,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Bo(i){i._valueTracker||(i._valueTracker=CS(i))}function py(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=dy(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function No(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var MS=/[\n"\\]/g;function yi(i){return i.replace(MS,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function mf(i,r,a,u,f,p,E,R){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),r!=null?E==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+gi(r)):i.value!==""+gi(r)&&(i.value=""+gi(r)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),r!=null?gf(i,E,gi(r)):a!=null?gf(i,E,gi(a)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+gi(R):i.removeAttribute("name")}function my(i,r,a,u,f,p,E,R){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;a=a!=null?""+gi(a):"",r=r!=null?""+gi(r):a,R||r===i.value||(i.value=r),i.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=R?i.checked:!!u,i.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E)}function gf(i,r,a){r==="number"&&No(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Cn(i,r,a,u){if(i=i.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=r.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&u&&(i[a].defaultSelected=!0)}else{for(a=""+gi(a),r=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function gy(i,r,a){if(r!=null&&(r=""+gi(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+gi(a):""}function yy(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(ut(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=gi(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u)}function Mn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var DS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vy(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||DS.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function _y(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&a[f]!==u&&vy(i,f,u)}else for(var p in r)r.hasOwnProperty(p)&&vy(i,p,r[p])}function yf(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Io(i){return BS.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var vf=null;function _f(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Dn=null,On=null;function xy(i){var r=ir(i);if(r&&(i=r.stateNode)){var a=i[Ee]||null;t:switch(i=r.stateNode,r.type){case"input":if(mf(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yi(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var f=u[Ee]||null;if(!f)throw Error(s(90));mf(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&py(u)}break t;case"textarea":gy(i,a.value,a.defaultValue);break t;case"select":r=a.value,r!=null&&Cn(i,!!a.multiple,r,!1)}}}var xf=!1;function by(i,r,a){if(xf)return i(r,a);xf=!0;try{var u=i(r);return u}finally{if(xf=!1,(Dn!==null||On!==null)&&(_u(),Dn&&(r=Dn,i=On,On=Dn=null,xy(r),i)))for(r=0;r<i.length;r++)xy(i[r])}}function Na(i,r){var a=i.stateNode;if(a===null)return null;var u=a[Ee]||null;if(u===null)return null;a=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bf=!1;if(Ar)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){bf=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{bf=!1}var is=null,Ef=null,Uo=null;function Ey(){if(Uo)return Uo;var i,r=Ef,a=r.length,u,f="value"in is?is.value:is.textContent,p=f.length;for(i=0;i<a&&r[i]===f[i];i++);var E=a-i;for(u=1;u<=E&&r[a-u]===f[p-u];u++);return Uo=f.slice(i,1<u?1-u:void 0)}function Po(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Lo(){return!0}function Ty(){return!1}function Ke(i){function r(a,u,f,p,E){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(a=i[R],this[R]=a?a(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Lo:Ty,this.isPropagationStopped=Ty,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Lo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Lo)},persist:function(){},isPersistent:Lo}),r}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fo=Ke(Vs),Ua=g({},Vs,{view:0,detail:0}),NS=Ke(Ua),Tf,Af,Pa,Go=g({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wf,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Pa&&(Pa&&i.type==="mousemove"?(Tf=i.screenX-Pa.screenX,Af=i.screenY-Pa.screenY):Af=Tf=0,Pa=i),Tf)},movementY:function(i){return"movementY"in i?i.movementY:Af}}),Ay=Ke(Go),IS=g({},Go,{dataTransfer:0}),US=Ke(IS),PS=g({},Ua,{relatedTarget:0}),Sf=Ke(PS),LS=g({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),FS=Ke(LS),GS=g({},Vs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),kS=Ke(GS),HS=g({},Vs,{data:0}),Sy=Ke(HS),zS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jS(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=VS[i])?!!r[i]:!1}function wf(){return jS}var YS=g({},Ua,{key:function(i){if(i.key){var r=zS[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Po(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?XS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wf,charCode:function(i){return i.type==="keypress"?Po(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Po(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),qS=Ke(YS),WS=g({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=Ke(WS),$S=g({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wf}),ZS=Ke($S),KS=g({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),QS=Ke(KS),JS=g({},Go,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tw=Ke(JS),ew=g({},Vs,{newState:0,oldState:0}),iw=Ke(ew),rw=[9,13,27,32],Rf=Ar&&"CompositionEvent"in window,La=null;Ar&&"documentMode"in document&&(La=document.documentMode);var sw=Ar&&"TextEvent"in window&&!La,Ry=Ar&&(!Rf||La&&8<La&&11>=La),Cy=" ",My=!1;function Dy(i,r){switch(i){case"keyup":return rw.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Bn=!1;function nw(i,r){switch(i){case"compositionend":return Oy(r);case"keypress":return r.which!==32?null:(My=!0,Cy);case"textInput":return i=r.data,i===Cy&&My?null:i;default:return null}}function aw(i,r){if(Bn)return i==="compositionend"||!Rf&&Dy(i,r)?(i=Ey(),Uo=Ef=is=null,Bn=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ry&&r.locale!=="ko"?null:r.data;default:return null}}var lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function By(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!lw[i.type]:r==="textarea"}function Ny(i,r,a,u){Dn?On?On.push(u):On=[u]:Dn=u,r=Su(r,"onChange"),0<r.length&&(a=new Fo("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var Fa=null,Ga=null;function ow(i){d1(i,0)}function ko(i){var r=ts(i);if(py(r))return i}function Iy(i,r){if(i==="change")return r}var Uy=!1;if(Ar){var Cf;if(Ar){var Mf="oninput"in document;if(!Mf){var Py=document.createElement("div");Py.setAttribute("oninput","return;"),Mf=typeof Py.oninput=="function"}Cf=Mf}else Cf=!1;Uy=Cf&&(!document.documentMode||9<document.documentMode)}function Ly(){Fa&&(Fa.detachEvent("onpropertychange",Fy),Ga=Fa=null)}function Fy(i){if(i.propertyName==="value"&&ko(Ga)){var r=[];Ny(r,Ga,i,_f(i)),by(ow,r)}}function uw(i,r,a){i==="focusin"?(Ly(),Fa=r,Ga=a,Fa.attachEvent("onpropertychange",Fy)):i==="focusout"&&Ly()}function hw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ko(Ga)}function cw(i,r){if(i==="click")return ko(r)}function fw(i,r){if(i==="input"||i==="change")return ko(r)}function dw(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var ii=typeof Object.is=="function"?Object.is:dw;function ka(i,r){if(ii(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!Et.call(r,f)||!ii(i[f],r[f]))return!1}return!0}function Gy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ky(i,r){var a=Gy(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Gy(a)}}function Hy(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Hy(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function zy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=No(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=No(i.document)}return r}function Df(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var pw=Ar&&"documentMode"in document&&11>=document.documentMode,Nn=null,Of=null,Ha=null,Bf=!1;function Xy(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Bf||Nn==null||Nn!==No(u)||(u=Nn,"selectionStart"in u&&Df(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ha&&ka(Ha,u)||(Ha=u,u=Su(Of,"onSelect"),0<u.length&&(r=new Fo("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=Nn)))}function js(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var In={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionrun:js("Transition","TransitionRun"),transitionstart:js("Transition","TransitionStart"),transitioncancel:js("Transition","TransitionCancel"),transitionend:js("Transition","TransitionEnd")},Nf={},Vy={};Ar&&(Vy=document.createElement("div").style,"AnimationEvent"in window||(delete In.animationend.animation,delete In.animationiteration.animation,delete In.animationstart.animation),"TransitionEvent"in window||delete In.transitionend.transition);function Ys(i){if(Nf[i])return Nf[i];if(!In[i])return i;var r=In[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Vy)return Nf[i]=r[a];return i}var jy=Ys("animationend"),Yy=Ys("animationiteration"),qy=Ys("animationstart"),mw=Ys("transitionrun"),gw=Ys("transitionstart"),yw=Ys("transitioncancel"),Wy=Ys("transitionend"),$y=new Map,If="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");If.push("scrollEnd");function Pi(i,r){$y.set(i,r),br(r,[i])}var Zy=new WeakMap;function vi(i,r){if(typeof i=="object"&&i!==null){var a=Zy.get(i);return a!==void 0?a:(r={value:i,source:r,stack:fy(r)},Zy.set(i,r),r)}return{value:i,source:r,stack:fy(r)}}var _i=[],Un=0,Uf=0;function Ho(){for(var i=Un,r=Uf=Un=0;r<i;){var a=_i[r];_i[r++]=null;var u=_i[r];_i[r++]=null;var f=_i[r];_i[r++]=null;var p=_i[r];if(_i[r++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}p!==0&&Ky(a,f,p)}}function zo(i,r,a,u){_i[Un++]=i,_i[Un++]=r,_i[Un++]=a,_i[Un++]=u,Uf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Pf(i,r,a,u){return zo(i,r,a,u),Xo(i)}function Pn(i,r){return zo(i,null,null,r),Xo(i)}function Ky(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var f=!1,p=i.return;p!==null;)p.childLanes|=a,u=p.alternate,u!==null&&(u.childLanes|=a),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&r!==null&&(f=31-we(a),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[r]:u.push(r),r.lane=a|536870912),p):null}function Xo(i){if(50<fl)throw fl=0,zd=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Ln={};function vw(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(i,r,a,u){return new vw(i,r,a,u)}function Lf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Sr(i,r){var a=i.alternate;return a===null?(a=ri(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Qy(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Vo(i,r,a,u,f,p){var E=0;if(u=i,typeof i=="function")Lf(i)&&(E=1);else if(typeof i=="string")E=xR(i,a,Z.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case rt:return i=ri(31,a,r,f),i.elementType=rt,i.lanes=p,i;case v:return qs(a.children,f,p,r);case T:E=8,f|=24;break;case b:return i=ri(12,a,r,f|2),i.elementType=b,i.lanes=p,i;case B:return i=ri(13,a,r,f),i.elementType=B,i.lanes=p,i;case j:return i=ri(19,a,r,f),i.elementType=j,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case w:case N:E=10;break t;case U:E=9;break t;case L:E=11;break t;case O:E=14;break t;case q:E=16,u=null;break t}E=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=ri(E,a,r,f),r.elementType=i,r.type=u,r.lanes=p,r}function qs(i,r,a,u){return i=ri(7,i,u,r),i.lanes=a,i}function Ff(i,r,a){return i=ri(6,i,null,r),i.lanes=a,i}function Gf(i,r,a){return r=ri(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Fn=[],Gn=0,jo=null,Yo=0,xi=[],bi=0,Ws=null,wr=1,Rr="";function $s(i,r){Fn[Gn++]=Yo,Fn[Gn++]=jo,jo=i,Yo=r}function Jy(i,r,a){xi[bi++]=wr,xi[bi++]=Rr,xi[bi++]=Ws,Ws=i;var u=wr;i=Rr;var f=32-we(u)-1;u&=~(1<<f),a+=1;var p=32-we(r)+f;if(30<p){var E=f-f%5;p=(u&(1<<E)-1).toString(32),u>>=E,f-=E,wr=1<<32-we(r)+f|a<<f|u,Rr=p+i}else wr=1<<p|a<<f|u,Rr=i}function kf(i){i.return!==null&&($s(i,1),Jy(i,1,0))}function Hf(i){for(;i===jo;)jo=Fn[--Gn],Fn[Gn]=null,Yo=Fn[--Gn],Fn[Gn]=null;for(;i===Ws;)Ws=xi[--bi],xi[bi]=null,Rr=xi[--bi],xi[bi]=null,wr=xi[--bi],xi[bi]=null}var qe=null,pe=null,$t=!1,Zs=null,rr=!1,zf=Error(s(519));function Ks(i){var r=Error(s(418,""));throw Va(vi(r,i)),zf}function tv(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[Re]=i,r[Ee]=u,a){case"dialog":Xt("cancel",r),Xt("close",r);break;case"iframe":case"object":case"embed":Xt("load",r);break;case"video":case"audio":for(a=0;a<pl.length;a++)Xt(pl[a],r);break;case"source":Xt("error",r);break;case"img":case"image":case"link":Xt("error",r),Xt("load",r);break;case"details":Xt("toggle",r);break;case"input":Xt("invalid",r),my(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Bo(r);break;case"select":Xt("invalid",r);break;case"textarea":Xt("invalid",r),yy(r,u.value,u.defaultValue,u.children),Bo(r)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||y1(r.textContent,a)?(u.popover!=null&&(Xt("beforetoggle",r),Xt("toggle",r)),u.onScroll!=null&&Xt("scroll",r),u.onScrollEnd!=null&&Xt("scrollend",r),u.onClick!=null&&(r.onclick=wu),r=!0):r=!1,r||Ks(i)}function ev(i){for(qe=i.return;qe;)switch(qe.tag){case 5:case 13:rr=!1;return;case 27:case 3:rr=!0;return;default:qe=qe.return}}function za(i){if(i!==qe)return!1;if(!$t)return ev(i),$t=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||sp(i.type,i.memoizedProps)),a=!a),a&&pe&&Ks(i),ev(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));t:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(r===0){pe=Fi(i.nextSibling);break t}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;i=i.nextSibling}pe=null}}else r===27?(r=pe,vs(i.type)?(i=op,op=null,pe=i):pe=r):pe=qe?Fi(i.stateNode.nextSibling):null;return!0}function Xa(){pe=qe=null,$t=!1}function iv(){var i=Zs;return i!==null&&(ti===null?ti=i:ti.push.apply(ti,i),Zs=null),i}function Va(i){Zs===null?Zs=[i]:Zs.push(i)}var Xf=D(null),Qs=null,Cr=null;function rs(i,r,a){F(Xf,r._currentValue),r._currentValue=a}function Mr(i){i._currentValue=Xf.current,G(Xf)}function Vf(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function jf(i,r,a,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;t:for(;p!==null;){var R=p;p=f;for(var P=0;P<r.length;P++)if(R.context===r[P]){p.lanes|=a,R=p.alternate,R!==null&&(R.lanes|=a),Vf(p.return,a,i),u||(E=null);break t}p=R.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=a,p=E.alternate,p!==null&&(p.lanes|=a),Vf(E,a,i),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===i){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function ja(i,r,a,u){i=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var R=f.type;ii(f.pendingProps.value,E.value)||(i!==null?i.push(R):i=[R])}}else if(f===dt.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(xl):i=[xl])}f=f.return}i!==null&&jf(r,i,a,u),r.flags|=262144}function qo(i){for(i=i.firstContext;i!==null;){if(!ii(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Js(i){Qs=i,Cr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function je(i){return rv(Qs,i)}function Wo(i,r){return Qs===null&&Js(i),rv(i,r)}function rv(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Cr===null){if(i===null)throw Error(s(308));Cr=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Cr=Cr.next=r;return a}var _w=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},xw=n.unstable_scheduleCallback,bw=n.unstable_NormalPriority,Ce={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new _w,data:new Map,refCount:0}}function Ya(i){i.refCount--,i.refCount===0&&xw(bw,function(){i.controller.abort()})}var qa=null,qf=0,kn=0,Hn=null;function Ew(i,r){if(qa===null){var a=qa=[];qf=0,kn=$d(),Hn={status:"pending",value:void 0,then:function(u){a.push(u)}}}return qf++,r.then(sv,sv),r}function sv(){if(--qf===0&&qa!==null){Hn!==null&&(Hn.status="fulfilled");var i=qa;qa=null,kn=0,Hn=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function Tw(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),u}var nv=S.S;S.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ew(i,r),nv!==null&&nv(i,r)};var tn=D(null);function Wf(){var i=tn.current;return i!==null?i:ne.pooledCache}function $o(i,r){r===null?F(tn,tn.current):F(tn,r.pool)}function av(){var i=Wf();return i===null?null:{parent:Ce._currentValue,pool:i}}var Wa=Error(s(460)),lv=Error(s(474)),Zo=Error(s(542)),$f={then:function(){}};function ov(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ko(){}function uv(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Ko,Ko),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,cv(i),i;default:if(typeof r.status=="string")r.then(Ko,Ko);else{if(i=ne,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,cv(i),i}throw $a=r,Wa}}var $a=null;function hv(){if($a===null)throw Error(s(459));var i=$a;return $a=null,i}function cv(i){if(i===Wa||i===Zo)throw Error(s(483))}var ss=!1;function Zf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ns(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function as(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Kt&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=Xo(i),Ky(i,null,a),r}return zo(i,u,r,a),Xo(i)}function Za(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Ii(i,a)}}function Qf(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,a=a.next}while(a!==null);p===null?f=p=r:p=p.next=r}else f=p=r;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Jf=!1;function Ka(){if(Jf){var i=Hn;if(i!==null)throw i}}function Qa(i,r,a,u){Jf=!1;var f=i.updateQueue;ss=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var P=R,Y=P.next;P.next=null,E===null?p=Y:E.next=Y,E=P;var et=i.alternate;et!==null&&(et=et.updateQueue,R=et.lastBaseUpdate,R!==E&&(R===null?et.firstBaseUpdate=Y:R.next=Y,et.lastBaseUpdate=P))}if(p!==null){var at=f.baseState;E=0,et=Y=P=null,R=p;do{var K=R.lane&-536870913,Q=K!==R.lane;if(Q?(jt&K)===K:(u&K)===K){K!==0&&K===kn&&(Jf=!0),et!==null&&(et=et.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var Bt=i,Ct=R;K=r;var re=a;switch(Ct.tag){case 1:if(Bt=Ct.payload,typeof Bt=="function"){at=Bt.call(re,at,K);break t}at=Bt;break t;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=Ct.payload,K=typeof Bt=="function"?Bt.call(re,at,K):Bt,K==null)break t;at=g({},at,K);break t;case 2:ss=!0}}K=R.callback,K!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:R.tag,payload:R.payload,callback:R.callback,next:null},et===null?(Y=et=Q,P=at):et=et.next=Q,E|=K;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;Q=R,R=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);et===null&&(P=at),f.baseState=P,f.firstBaseUpdate=Y,f.lastBaseUpdate=et,p===null&&(f.shared.lanes=0),ps|=E,i.lanes=E,i.memoizedState=at}}function fv(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function dv(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)fv(a[i],r)}var zn=D(null),Qo=D(0);function pv(i,r){i=Pr,F(Qo,i),F(zn,r),Pr=i|r.baseLanes}function td(){F(Qo,Pr),F(zn,zn.current)}function ed(){Pr=Qo.current,G(zn),G(Qo)}var ls=0,Gt=null,ee=null,Te=null,Jo=!1,Xn=!1,en=!1,tu=0,Ja=0,Vn=null,Aw=0;function _e(){throw Error(s(321))}function id(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!ii(i[a],r[a]))return!1;return!0}function rd(i,r,a,u,f,p){return ls=p,Gt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,S.H=i===null||i.memoizedState===null?Kv:Qv,en=!1,p=a(u,f),en=!1,Xn&&(p=gv(r,a,u,f)),mv(i),p}function mv(i){S.H=au;var r=ee!==null&&ee.next!==null;if(ls=0,Te=ee=Gt=null,Jo=!1,Ja=0,Vn=null,r)throw Error(s(300));i===null||Ne||(i=i.dependencies,i!==null&&qo(i)&&(Ne=!0))}function gv(i,r,a,u){Gt=i;var f=0;do{if(Xn&&(Vn=null),Ja=0,Xn=!1,25<=f)throw Error(s(301));if(f+=1,Te=ee=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}S.H=Ow,p=r(a,u)}while(Xn);return p}function Sw(){var i=S.H,r=i.useState()[0];return r=typeof r.then=="function"?tl(r):r,i=i.useState()[0],(ee!==null?ee.memoizedState:null)!==i&&(Gt.flags|=1024),r}function sd(){var i=tu!==0;return tu=0,i}function nd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function ad(i){if(Jo){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Jo=!1}ls=0,Te=ee=Gt=null,Xn=!1,Ja=tu=0,Vn=null}function Qe(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?Gt.memoizedState=Te=i:Te=Te.next=i,Te}function Ae(){if(ee===null){var i=Gt.alternate;i=i!==null?i.memoizedState:null}else i=ee.next;var r=Te===null?Gt.memoizedState:Te.next;if(r!==null)Te=r,ee=i;else{if(i===null)throw Gt.alternate===null?Error(s(467)):Error(s(310));ee=i,i={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},Te===null?Gt.memoizedState=Te=i:Te=Te.next=i}return Te}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(i){var r=Ja;return Ja+=1,Vn===null&&(Vn=[]),i=uv(Vn,i,r),r=Gt,(Te===null?r.memoizedState:Te.next)===null&&(r=r.alternate,S.H=r===null||r.memoizedState===null?Kv:Qv),i}function eu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return tl(i);if(i.$$typeof===N)return je(i)}throw Error(s(438,String(i)))}function od(i){var r=null,a=Gt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Gt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=ld(),Gt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=lt;return r.index++,a}function Dr(i,r){return typeof r=="function"?r(i):r}function iu(i){var r=Ae();return ud(r,ee,i)}function ud(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}r.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{r=f.next;var R=E=null,P=null,Y=r,et=!1;do{var at=Y.lane&-536870913;if(at!==Y.lane?(jt&at)===at:(ls&at)===at){var K=Y.revertLane;if(K===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),at===kn&&(et=!0);else if((ls&K)===K){Y=Y.next,K===kn&&(et=!0);continue}else at={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(R=P=at,E=p):P=P.next=at,Gt.lanes|=K,ps|=K;at=Y.action,en&&a(p,at),p=Y.hasEagerState?Y.eagerState:a(p,at)}else K={lane:at,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(R=P=K,E=p):P=P.next=K,Gt.lanes|=at,ps|=at;Y=Y.next}while(Y!==null&&Y!==r);if(P===null?E=p:P.next=R,!ii(p,i.memoizedState)&&(Ne=!0,et&&(a=Hn,a!==null)))throw a;i.memoizedState=p,i.baseState=E,i.baseQueue=P,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function hd(i){var r=Ae(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,f=a.pending,p=r.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do p=i(p,E.action),E=E.next;while(E!==f);ii(p,r.memoizedState)||(Ne=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,u]}function yv(i,r,a){var u=Gt,f=Ae(),p=$t;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!ii((ee||f).memoizedState,a);E&&(f.memoizedState=a,Ne=!0),f=f.queue;var R=xv.bind(null,u,f,i);if(el(2048,8,R,[i]),f.getSnapshot!==r||E||Te!==null&&Te.memoizedState.tag&1){if(u.flags|=2048,jn(9,ru(),_v.bind(null,u,f,a,r),null),ne===null)throw Error(s(349));p||(ls&124)!==0||vv(u,r,a)}return a}function vv(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Gt.updateQueue,r===null?(r=ld(),Gt.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function _v(i,r,a,u){r.value=a,r.getSnapshot=u,bv(r)&&Ev(i)}function xv(i,r,a){return a(function(){bv(r)&&Ev(i)})}function bv(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!ii(i,a)}catch{return!0}}function Ev(i){var r=Pn(i,2);r!==null&&oi(r,i,2)}function cd(i){var r=Qe();if(typeof i=="function"){var a=i;if(i=a(),en){Ji(!0);try{a()}finally{Ji(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:i},r}function Tv(i,r,a,u){return i.baseState=a,ud(i,ee,typeof u=="function"?u:Dr)}function ww(i,r,a,u,f){if(nu(i))throw Error(s(485));if(i=r.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};S.T!==null?a(!0):p.isTransition=!1,u(p),a=r.pending,a===null?(p.next=r.pending=p,Av(r,p)):(p.next=a.next,r.pending=a.next=p)}}function Av(i,r){var a=r.action,u=r.payload,f=i.state;if(r.isTransition){var p=S.T,E={};S.T=E;try{var R=a(f,u),P=S.S;P!==null&&P(E,R),Sv(i,r,R)}catch(Y){fd(i,r,Y)}finally{S.T=p}}else try{p=a(f,u),Sv(i,r,p)}catch(Y){fd(i,r,Y)}}function Sv(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){wv(i,r,u)},function(u){return fd(i,r,u)}):wv(i,r,a)}function wv(i,r,a){r.status="fulfilled",r.value=a,Rv(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Av(i,a)))}function fd(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,Rv(r),r=r.next;while(r!==u)}i.action=null}function Rv(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Cv(i,r){return r}function Mv(i,r){if($t){var a=ne.formState;if(a!==null){t:{var u=Gt;if($t){if(pe){e:{for(var f=pe,p=rr;f.nodeType!==8;){if(!p){f=null;break e}if(f=Fi(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){pe=Fi(f.nextSibling),u=f.data==="F!";break t}}Ks(u)}u=!1}u&&(r=a[0])}}return a=Qe(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cv,lastRenderedState:r},a.queue=u,a=Wv.bind(null,Gt,u),u.dispatch=a,u=cd(!1),p=yd.bind(null,Gt,!1,u.queue),u=Qe(),f={state:r,dispatch:null,action:i,pending:null},u.queue=f,a=ww.bind(null,Gt,f,p,a),f.dispatch=a,u.memoizedState=i,[r,a,!1]}function Dv(i){var r=Ae();return Ov(r,ee,i)}function Ov(i,r,a){if(r=ud(i,r,Cv)[0],i=iu(Dr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=tl(r)}catch(E){throw E===Wa?Zo:E}else u=r;r=Ae();var f=r.queue,p=f.dispatch;return a!==r.memoizedState&&(Gt.flags|=2048,jn(9,ru(),Rw.bind(null,f,a),null)),[u,p,i]}function Rw(i,r){i.action=r}function Bv(i){var r=Ae(),a=ee;if(a!==null)return Ov(r,a,i);Ae(),r=r.memoizedState,a=Ae();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function jn(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Gt.updateQueue,r===null&&(r=ld(),Gt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function ru(){return{destroy:void 0,resource:void 0}}function Nv(){return Ae().memoizedState}function su(i,r,a,u){var f=Qe();u=u===void 0?null:u,Gt.flags|=i,f.memoizedState=jn(1|r,ru(),a,u)}function el(i,r,a,u){var f=Ae();u=u===void 0?null:u;var p=f.memoizedState.inst;ee!==null&&u!==null&&id(u,ee.memoizedState.deps)?f.memoizedState=jn(r,p,a,u):(Gt.flags|=i,f.memoizedState=jn(1|r,p,a,u))}function Iv(i,r){su(8390656,8,i,r)}function Uv(i,r){el(2048,8,i,r)}function Pv(i,r){return el(4,2,i,r)}function Lv(i,r){return el(4,4,i,r)}function Fv(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Gv(i,r,a){a=a!=null?a.concat([i]):null,el(4,4,Fv.bind(null,r,i),a)}function dd(){}function kv(i,r){var a=Ae();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&id(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function Hv(i,r){var a=Ae();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&id(r,u[1]))return u[0];if(u=i(),en){Ji(!0);try{i()}finally{Ji(!1)}}return a.memoizedState=[u,r],u}function pd(i,r,a){return a===void 0||(ls&1073741824)!==0?i.memoizedState=r:(i.memoizedState=a,i=V_(),Gt.lanes|=i,ps|=i,a)}function zv(i,r,a,u){return ii(a,r)?a:zn.current!==null?(i=pd(i,a,u),ii(i,r)||(Ne=!0),i):(ls&42)===0?(Ne=!0,i.memoizedState=a):(i=V_(),Gt.lanes|=i,ps|=i,r)}function Xv(i,r,a,u,f){var p=M.p;M.p=p!==0&&8>p?p:8;var E=S.T,R={};S.T=R,yd(i,!1,r,a);try{var P=f(),Y=S.S;if(Y!==null&&Y(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var et=Tw(P,u);il(i,r,et,li(i))}else il(i,r,u,li(i))}catch(at){il(i,r,{then:function(){},status:"rejected",reason:at},li())}finally{M.p=p,S.T=E}}function Cw(){}function md(i,r,a,u){if(i.tag!==5)throw Error(s(476));var f=Vv(i).queue;Xv(i,f,r,C,a===null?Cw:function(){return jv(i),a(u)})}function Vv(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:C},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function jv(i){var r=Vv(i).next.queue;il(i,r,{},li())}function gd(){return je(xl)}function Yv(){return Ae().memoizedState}function qv(){return Ae().memoizedState}function Mw(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=li();i=ns(a);var u=as(r,i,a);u!==null&&(oi(u,r,a),Za(u,r,a)),r={cache:Yf()},i.payload=r;return}r=r.return}}function Dw(i,r,a){var u=li();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},nu(i)?$v(r,a):(a=Pf(i,r,a,u),a!==null&&(oi(a,i,u),Zv(a,r,u)))}function Wv(i,r,a){var u=li();il(i,r,a,u)}function il(i,r,a,u){var f={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(nu(i))$v(r,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var E=r.lastRenderedState,R=p(E,a);if(f.hasEagerState=!0,f.eagerState=R,ii(R,E))return zo(i,r,f,0),ne===null&&Ho(),!1}catch{}finally{}if(a=Pf(i,r,f,u),a!==null)return oi(a,i,u),Zv(a,r,u),!0}return!1}function yd(i,r,a,u){if(u={lane:2,revertLane:$d(),action:u,hasEagerState:!1,eagerState:null,next:null},nu(i)){if(r)throw Error(s(479))}else r=Pf(i,a,u,2),r!==null&&oi(r,i,2)}function nu(i){var r=i.alternate;return i===Gt||r!==null&&r===Gt}function $v(i,r){Xn=Jo=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Zv(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Ii(i,a)}}var au={readContext:je,use:eu,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},Kv={readContext:je,use:eu,useCallback:function(i,r){return Qe().memoizedState=[i,r===void 0?null:r],i},useContext:je,useEffect:Iv,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,su(4194308,4,Fv.bind(null,r,i),a)},useLayoutEffect:function(i,r){return su(4194308,4,i,r)},useInsertionEffect:function(i,r){su(4,2,i,r)},useMemo:function(i,r){var a=Qe();r=r===void 0?null:r;var u=i();if(en){Ji(!0);try{i()}finally{Ji(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=Qe();if(a!==void 0){var f=a(r);if(en){Ji(!0);try{a(r)}finally{Ji(!1)}}}else f=r;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=Dw.bind(null,Gt,i),[u.memoizedState,i]},useRef:function(i){var r=Qe();return i={current:i},r.memoizedState=i},useState:function(i){i=cd(i);var r=i.queue,a=Wv.bind(null,Gt,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:dd,useDeferredValue:function(i,r){var a=Qe();return pd(a,i,r)},useTransition:function(){var i=cd(!1);return i=Xv.bind(null,Gt,i.queue,!0,!1),Qe().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Gt,f=Qe();if($t){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ne===null)throw Error(s(349));(jt&124)!==0||vv(u,r,a)}f.memoizedState=a;var p={value:a,getSnapshot:r};return f.queue=p,Iv(xv.bind(null,u,p,i),[i]),u.flags|=2048,jn(9,ru(),_v.bind(null,u,p,a,r),null),a},useId:function(){var i=Qe(),r=ne.identifierPrefix;if($t){var a=Rr,u=wr;a=(u&~(1<<32-we(u)-1)).toString(32)+a,r=""+r+"R"+a,a=tu++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=Aw++,r=""+r+"r"+a.toString(32)+"";return i.memoizedState=r},useHostTransitionStatus:gd,useFormState:Mv,useActionState:Mv,useOptimistic:function(i){var r=Qe();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=yd.bind(null,Gt,!0,a),a.dispatch=r,[i,r]},useMemoCache:od,useCacheRefresh:function(){return Qe().memoizedState=Mw.bind(null,Gt)}},Qv={readContext:je,use:eu,useCallback:kv,useContext:je,useEffect:Uv,useImperativeHandle:Gv,useInsertionEffect:Pv,useLayoutEffect:Lv,useMemo:Hv,useReducer:iu,useRef:Nv,useState:function(){return iu(Dr)},useDebugValue:dd,useDeferredValue:function(i,r){var a=Ae();return zv(a,ee.memoizedState,i,r)},useTransition:function(){var i=iu(Dr)[0],r=Ae().memoizedState;return[typeof i=="boolean"?i:tl(i),r]},useSyncExternalStore:yv,useId:Yv,useHostTransitionStatus:gd,useFormState:Dv,useActionState:Dv,useOptimistic:function(i,r){var a=Ae();return Tv(a,ee,i,r)},useMemoCache:od,useCacheRefresh:qv},Ow={readContext:je,use:eu,useCallback:kv,useContext:je,useEffect:Uv,useImperativeHandle:Gv,useInsertionEffect:Pv,useLayoutEffect:Lv,useMemo:Hv,useReducer:hd,useRef:Nv,useState:function(){return hd(Dr)},useDebugValue:dd,useDeferredValue:function(i,r){var a=Ae();return ee===null?pd(a,i,r):zv(a,ee.memoizedState,i,r)},useTransition:function(){var i=hd(Dr)[0],r=Ae().memoizedState;return[typeof i=="boolean"?i:tl(i),r]},useSyncExternalStore:yv,useId:Yv,useHostTransitionStatus:gd,useFormState:Bv,useActionState:Bv,useOptimistic:function(i,r){var a=Ae();return ee!==null?Tv(a,ee,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:od,useCacheRefresh:qv},Yn=null,rl=0;function lu(i){var r=rl;return rl+=1,Yn===null&&(Yn=[]),uv(Yn,i,r)}function sl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ou(i,r){throw r.$$typeof===y?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Jv(i){var r=i._init;return r(i._payload)}function t_(i){function r(X,k){if(i){var V=X.deletions;V===null?(X.deletions=[k],X.flags|=16):V.push(k)}}function a(X,k){if(!i)return null;for(;k!==null;)r(X,k),k=k.sibling;return null}function u(X){for(var k=new Map;X!==null;)X.key!==null?k.set(X.key,X):k.set(X.index,X),X=X.sibling;return k}function f(X,k){return X=Sr(X,k),X.index=0,X.sibling=null,X}function p(X,k,V){return X.index=V,i?(V=X.alternate,V!==null?(V=V.index,V<k?(X.flags|=67108866,k):V):(X.flags|=67108866,k)):(X.flags|=1048576,k)}function E(X){return i&&X.alternate===null&&(X.flags|=67108866),X}function R(X,k,V,st){return k===null||k.tag!==6?(k=Ff(V,X.mode,st),k.return=X,k):(k=f(k,V),k.return=X,k)}function P(X,k,V,st){var _t=V.type;return _t===v?et(X,k,V.props.children,st,V.key):k!==null&&(k.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===q&&Jv(_t)===k.type)?(k=f(k,V.props),sl(k,V),k.return=X,k):(k=Vo(V.type,V.key,V.props,null,X.mode,st),sl(k,V),k.return=X,k)}function Y(X,k,V,st){return k===null||k.tag!==4||k.stateNode.containerInfo!==V.containerInfo||k.stateNode.implementation!==V.implementation?(k=Gf(V,X.mode,st),k.return=X,k):(k=f(k,V.children||[]),k.return=X,k)}function et(X,k,V,st,_t){return k===null||k.tag!==7?(k=qs(V,X.mode,st,_t),k.return=X,k):(k=f(k,V),k.return=X,k)}function at(X,k,V){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Ff(""+k,X.mode,V),k.return=X,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case x:return V=Vo(k.type,k.key,k.props,null,X.mode,V),sl(V,k),V.return=X,V;case _:return k=Gf(k,X.mode,V),k.return=X,k;case q:var st=k._init;return k=st(k._payload),at(X,k,V)}if(ut(k)||z(k))return k=qs(k,X.mode,V,null),k.return=X,k;if(typeof k.then=="function")return at(X,lu(k),V);if(k.$$typeof===N)return at(X,Wo(X,k),V);ou(X,k)}return null}function K(X,k,V,st){var _t=k!==null?k.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return _t!==null?null:R(X,k,""+V,st);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return V.key===_t?P(X,k,V,st):null;case _:return V.key===_t?Y(X,k,V,st):null;case q:return _t=V._init,V=_t(V._payload),K(X,k,V,st)}if(ut(V)||z(V))return _t!==null?null:et(X,k,V,st,null);if(typeof V.then=="function")return K(X,k,lu(V),st);if(V.$$typeof===N)return K(X,k,Wo(X,V),st);ou(X,V)}return null}function Q(X,k,V,st,_t){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return X=X.get(V)||null,R(k,X,""+st,_t);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case x:return X=X.get(st.key===null?V:st.key)||null,P(k,X,st,_t);case _:return X=X.get(st.key===null?V:st.key)||null,Y(k,X,st,_t);case q:var kt=st._init;return st=kt(st._payload),Q(X,k,V,st,_t)}if(ut(st)||z(st))return X=X.get(V)||null,et(k,X,st,_t,null);if(typeof st.then=="function")return Q(X,k,V,lu(st),_t);if(st.$$typeof===N)return Q(X,k,V,Wo(k,st),_t);ou(k,st)}return null}function Bt(X,k,V,st){for(var _t=null,kt=null,Rt=k,Dt=k=0,Ue=null;Rt!==null&&Dt<V.length;Dt++){Rt.index>Dt?(Ue=Rt,Rt=null):Ue=Rt.sibling;var Wt=K(X,Rt,V[Dt],st);if(Wt===null){Rt===null&&(Rt=Ue);break}i&&Rt&&Wt.alternate===null&&r(X,Rt),k=p(Wt,k,Dt),kt===null?_t=Wt:kt.sibling=Wt,kt=Wt,Rt=Ue}if(Dt===V.length)return a(X,Rt),$t&&$s(X,Dt),_t;if(Rt===null){for(;Dt<V.length;Dt++)Rt=at(X,V[Dt],st),Rt!==null&&(k=p(Rt,k,Dt),kt===null?_t=Rt:kt.sibling=Rt,kt=Rt);return $t&&$s(X,Dt),_t}for(Rt=u(Rt);Dt<V.length;Dt++)Ue=Q(Rt,X,Dt,V[Dt],st),Ue!==null&&(i&&Ue.alternate!==null&&Rt.delete(Ue.key===null?Dt:Ue.key),k=p(Ue,k,Dt),kt===null?_t=Ue:kt.sibling=Ue,kt=Ue);return i&&Rt.forEach(function(Ts){return r(X,Ts)}),$t&&$s(X,Dt),_t}function Ct(X,k,V,st){if(V==null)throw Error(s(151));for(var _t=null,kt=null,Rt=k,Dt=k=0,Ue=null,Wt=V.next();Rt!==null&&!Wt.done;Dt++,Wt=V.next()){Rt.index>Dt?(Ue=Rt,Rt=null):Ue=Rt.sibling;var Ts=K(X,Rt,Wt.value,st);if(Ts===null){Rt===null&&(Rt=Ue);break}i&&Rt&&Ts.alternate===null&&r(X,Rt),k=p(Ts,k,Dt),kt===null?_t=Ts:kt.sibling=Ts,kt=Ts,Rt=Ue}if(Wt.done)return a(X,Rt),$t&&$s(X,Dt),_t;if(Rt===null){for(;!Wt.done;Dt++,Wt=V.next())Wt=at(X,Wt.value,st),Wt!==null&&(k=p(Wt,k,Dt),kt===null?_t=Wt:kt.sibling=Wt,kt=Wt);return $t&&$s(X,Dt),_t}for(Rt=u(Rt);!Wt.done;Dt++,Wt=V.next())Wt=Q(Rt,X,Dt,Wt.value,st),Wt!==null&&(i&&Wt.alternate!==null&&Rt.delete(Wt.key===null?Dt:Wt.key),k=p(Wt,k,Dt),kt===null?_t=Wt:kt.sibling=Wt,kt=Wt);return i&&Rt.forEach(function(BR){return r(X,BR)}),$t&&$s(X,Dt),_t}function re(X,k,V,st){if(typeof V=="object"&&V!==null&&V.type===v&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case x:t:{for(var _t=V.key;k!==null;){if(k.key===_t){if(_t=V.type,_t===v){if(k.tag===7){a(X,k.sibling),st=f(k,V.props.children),st.return=X,X=st;break t}}else if(k.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===q&&Jv(_t)===k.type){a(X,k.sibling),st=f(k,V.props),sl(st,V),st.return=X,X=st;break t}a(X,k);break}else r(X,k);k=k.sibling}V.type===v?(st=qs(V.props.children,X.mode,st,V.key),st.return=X,X=st):(st=Vo(V.type,V.key,V.props,null,X.mode,st),sl(st,V),st.return=X,X=st)}return E(X);case _:t:{for(_t=V.key;k!==null;){if(k.key===_t)if(k.tag===4&&k.stateNode.containerInfo===V.containerInfo&&k.stateNode.implementation===V.implementation){a(X,k.sibling),st=f(k,V.children||[]),st.return=X,X=st;break t}else{a(X,k);break}else r(X,k);k=k.sibling}st=Gf(V,X.mode,st),st.return=X,X=st}return E(X);case q:return _t=V._init,V=_t(V._payload),re(X,k,V,st)}if(ut(V))return Bt(X,k,V,st);if(z(V)){if(_t=z(V),typeof _t!="function")throw Error(s(150));return V=_t.call(V),Ct(X,k,V,st)}if(typeof V.then=="function")return re(X,k,lu(V),st);if(V.$$typeof===N)return re(X,k,Wo(X,V),st);ou(X,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,k!==null&&k.tag===6?(a(X,k.sibling),st=f(k,V),st.return=X,X=st):(a(X,k),st=Ff(V,X.mode,st),st.return=X,X=st),E(X)):a(X,k)}return function(X,k,V,st){try{rl=0;var _t=re(X,k,V,st);return Yn=null,_t}catch(Rt){if(Rt===Wa||Rt===Zo)throw Rt;var kt=ri(29,Rt,null,X.mode);return kt.lanes=st,kt.return=X,kt}finally{}}}var qn=t_(!0),e_=t_(!1),Ei=D(null),sr=null;function os(i){var r=i.alternate;F(Me,Me.current&1),F(Ei,i),sr===null&&(r===null||zn.current!==null||r.memoizedState!==null)&&(sr=i)}function i_(i){if(i.tag===22){if(F(Me,Me.current),F(Ei,i),sr===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(sr=i)}}else us()}function us(){F(Me,Me.current),F(Ei,Ei.current)}function Or(i){G(Ei),sr===i&&(sr=null),G(Me)}var Me=D(0);function uu(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||lp(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function vd(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:g({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var _d={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=li(),f=ns(u);f.payload=r,a!=null&&(f.callback=a),r=as(i,f,u),r!==null&&(oi(r,i,u),Za(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=li(),f=ns(u);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=as(i,f,u),r!==null&&(oi(r,i,u),Za(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=li(),u=ns(a);u.tag=2,r!=null&&(u.callback=r),r=as(i,u,a),r!==null&&(oi(r,i,a),Za(r,i,a))}};function r_(i,r,a,u,f,p,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,E):r.prototype&&r.prototype.isPureReactComponent?!ka(a,u)||!ka(f,p):!0}function s_(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&_d.enqueueReplaceState(r,r.state,null)}function rn(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=g({},a));for(var f in i)a[f]===void 0&&(a[f]=i[f])}return a}var hu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function n_(i){hu(i)}function a_(i){console.error(i)}function l_(i){hu(i)}function cu(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function o_(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xd(i,r,a){return a=ns(a),a.tag=3,a.payload={element:null},a.callback=function(){cu(i,r)},a}function u_(i){return i=ns(i),i.tag=3,i}function h_(i,r,a,u){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){o_(r,a,u)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){o_(r,a,u),typeof f!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function Bw(i,r,a,u,f){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&ja(r,a,f,!0),a=Ei.current,a!==null){switch(a.tag){case 13:return sr===null?Vd():a.alternate===null&&me===0&&(me=3),a.flags&=-257,a.flags|=65536,a.lanes=f,u===$f?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Yd(i,u,f)),!1;case 22:return a.flags|=65536,u===$f?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Yd(i,u,f)),!1}throw Error(s(435,a.tag))}return Yd(i,u,f),Vd(),!1}if($t)return r=Ei.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==zf&&(i=Error(s(422),{cause:u}),Va(vi(i,a)))):(u!==zf&&(r=Error(s(423),{cause:u}),Va(vi(r,a))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=vi(u,a),f=xd(i.stateNode,u,f),Qf(i,f),me!==4&&(me=2)),!1;var p=Error(s(520),{cause:u});if(p=vi(p,a),cl===null?cl=[p]:cl.push(p),me!==4&&(me=2),r===null)return!0;u=vi(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=f&-f,a.lanes|=i,i=xd(a.stateNode,u,i),Qf(a,i),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ms===null||!ms.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=u_(f),h_(f,i,a,u),Qf(a,f),!1}a=a.return}while(a!==null);return!1}var c_=Error(s(461)),Ne=!1;function Fe(i,r,a,u){r.child=i===null?e_(r,null,a,u):qn(r,i.child,a,u)}function f_(i,r,a,u,f){a=a.render;var p=r.ref;if("ref"in u){var E={};for(var R in u)R!=="ref"&&(E[R]=u[R])}else E=u;return Js(r),u=rd(i,r,a,E,p,f),R=sd(),i!==null&&!Ne?(nd(i,r,f),Br(i,r,f)):($t&&R&&kf(r),r.flags|=1,Fe(i,r,u,f),r.child)}function d_(i,r,a,u,f){if(i===null){var p=a.type;return typeof p=="function"&&!Lf(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,p_(i,r,p,u,f)):(i=Vo(a.type,null,u,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(p=i.child,!Cd(i,f)){var E=p.memoizedProps;if(a=a.compare,a=a!==null?a:ka,a(E,u)&&i.ref===r.ref)return Br(i,r,f)}return r.flags|=1,i=Sr(p,u),i.ref=r.ref,i.return=r,r.child=i}function p_(i,r,a,u,f){if(i!==null){var p=i.memoizedProps;if(ka(p,u)&&i.ref===r.ref)if(Ne=!1,r.pendingProps=u=p,Cd(i,f))(i.flags&131072)!==0&&(Ne=!0);else return r.lanes=i.lanes,Br(i,r,f)}return bd(i,r,a,u,f)}function m_(i,r,a){var u=r.pendingProps,f=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=p!==null?p.baseLanes|a:a,i!==null){for(f=r.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;r.childLanes=p&~u}else r.childLanes=0,r.child=null;return g_(i,r,u,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&$o(r,p!==null?p.cachePool:null),p!==null?pv(r,p):td(),i_(r);else return r.lanes=r.childLanes=536870912,g_(i,r,p!==null?p.baseLanes|a:a,a)}else p!==null?($o(r,p.cachePool),pv(r,p),us(),r.memoizedState=null):(i!==null&&$o(r,null),td(),us());return Fe(i,r,f,a),r.child}function g_(i,r,a,u){var f=Wf();return f=f===null?null:{parent:Ce._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},i!==null&&$o(r,null),td(),i_(r),i!==null&&ja(i,r,u,!0),null}function fu(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function bd(i,r,a,u,f){return Js(r),a=rd(i,r,a,u,void 0,f),u=sd(),i!==null&&!Ne?(nd(i,r,f),Br(i,r,f)):($t&&u&&kf(r),r.flags|=1,Fe(i,r,a,f),r.child)}function y_(i,r,a,u,f,p){return Js(r),r.updateQueue=null,a=gv(r,u,a,f),mv(i),u=sd(),i!==null&&!Ne?(nd(i,r,p),Br(i,r,p)):($t&&u&&kf(r),r.flags|=1,Fe(i,r,a,p),r.child)}function v_(i,r,a,u,f){if(Js(r),r.stateNode===null){var p=Ln,E=a.contextType;typeof E=="object"&&E!==null&&(p=je(E)),p=new a(u,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=_d,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=u,p.state=r.memoizedState,p.refs={},Zf(r),E=a.contextType,p.context=typeof E=="object"&&E!==null?je(E):Ln,p.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(vd(r,a,E,u),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&_d.enqueueReplaceState(p,p.state,null),Qa(r,u,p,f),Ka(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){p=r.stateNode;var R=r.memoizedProps,P=rn(a,R);p.props=P;var Y=p.context,et=a.contextType;E=Ln,typeof et=="object"&&et!==null&&(E=je(et));var at=a.getDerivedStateFromProps;et=typeof at=="function"||typeof p.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,et||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(R||Y!==E)&&s_(r,p,u,E),ss=!1;var K=r.memoizedState;p.state=K,Qa(r,u,p,f),Ka(),Y=r.memoizedState,R||K!==Y||ss?(typeof at=="function"&&(vd(r,a,at,u),Y=r.memoizedState),(P=ss||r_(r,a,P,u,K,Y,E))?(et||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=Y),p.props=u,p.state=Y,p.context=E,u=P):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{p=r.stateNode,Kf(i,r),E=r.memoizedProps,et=rn(a,E),p.props=et,at=r.pendingProps,K=p.context,Y=a.contextType,P=Ln,typeof Y=="object"&&Y!==null&&(P=je(Y)),R=a.getDerivedStateFromProps,(Y=typeof R=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==at||K!==P)&&s_(r,p,u,P),ss=!1,K=r.memoizedState,p.state=K,Qa(r,u,p,f),Ka();var Q=r.memoizedState;E!==at||K!==Q||ss||i!==null&&i.dependencies!==null&&qo(i.dependencies)?(typeof R=="function"&&(vd(r,a,R,u),Q=r.memoizedState),(et=ss||r_(r,a,et,u,K,Q,P)||i!==null&&i.dependencies!==null&&qo(i.dependencies))?(Y||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Q,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Q,P)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Q),p.props=u,p.state=Q,p.context=P,u=et):(typeof p.componentDidUpdate!="function"||E===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),u=!1)}return p=u,fu(i,r),u=(r.flags&128)!==0,p||u?(p=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,i!==null&&u?(r.child=qn(r,i.child,null,f),r.child=qn(r,null,a,f)):Fe(i,r,a,f),r.memoizedState=p.state,i=r.child):i=Br(i,r,f),i}function __(i,r,a,u){return Xa(),r.flags|=256,Fe(i,r,a,u),r.child}var Ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Td(i){return{baseLanes:i,cachePool:av()}}function Ad(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Ti),i}function x_(i,r,a){var u=r.pendingProps,f=!1,p=(r.flags&128)!==0,E;if((E=p)||(E=i!==null&&i.memoizedState===null?!1:(Me.current&2)!==0),E&&(f=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,i===null){if($t){if(f?os(r):us(),$t){var R=pe,P;if(P=R){t:{for(P=R,R=rr;P.nodeType!==8;){if(!R){R=null;break t}if(P=Fi(P.nextSibling),P===null){R=null;break t}}R=P}R!==null?(r.memoizedState={dehydrated:R,treeContext:Ws!==null?{id:wr,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},P=ri(18,null,null,0),P.stateNode=R,P.return=r,r.child=P,qe=r,pe=null,P=!0):P=!1}P||Ks(r)}if(R=r.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return lp(R)?r.lanes=32:r.lanes=536870912,null;Or(r)}return R=u.children,u=u.fallback,f?(us(),f=r.mode,R=du({mode:"hidden",children:R},f),u=qs(u,f,a,null),R.return=r,u.return=r,R.sibling=u,r.child=R,f=r.child,f.memoizedState=Td(a),f.childLanes=Ad(i,E,a),r.memoizedState=Ed,u):(os(r),Sd(r,R))}if(P=i.memoizedState,P!==null&&(R=P.dehydrated,R!==null)){if(p)r.flags&256?(os(r),r.flags&=-257,r=wd(i,r,a)):r.memoizedState!==null?(us(),r.child=i.child,r.flags|=128,r=null):(us(),f=u.fallback,R=r.mode,u=du({mode:"visible",children:u.children},R),f=qs(f,R,a,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,qn(r,i.child,null,a),u=r.child,u.memoizedState=Td(a),u.childLanes=Ad(i,E,a),r.memoizedState=Ed,r=f);else if(os(r),lp(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var Y=E.dgst;E=Y,u=Error(s(419)),u.stack="",u.digest=E,Va({value:u,source:null,stack:null}),r=wd(i,r,a)}else if(Ne||ja(i,r,a,!1),E=(a&i.childLanes)!==0,Ne||E){if(E=ne,E!==null&&(u=a&-a,u=(u&42)!==0?1:Hs(u),u=(u&(E.suspendedLanes|a))!==0?0:u,u!==0&&u!==P.retryLane))throw P.retryLane=u,Pn(i,u),oi(E,i,u),c_;R.data==="$?"||Vd(),r=wd(i,r,a)}else R.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=P.treeContext,pe=Fi(R.nextSibling),qe=r,$t=!0,Zs=null,rr=!1,i!==null&&(xi[bi++]=wr,xi[bi++]=Rr,xi[bi++]=Ws,wr=i.id,Rr=i.overflow,Ws=r),r=Sd(r,u.children),r.flags|=4096);return r}return f?(us(),f=u.fallback,R=r.mode,P=i.child,Y=P.sibling,u=Sr(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,Y!==null?f=Sr(Y,f):(f=qs(f,R,a,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,R=i.child.memoizedState,R===null?R=Td(a):(P=R.cachePool,P!==null?(Y=Ce._currentValue,P=P.parent!==Y?{parent:Y,pool:Y}:P):P=av(),R={baseLanes:R.baseLanes|a,cachePool:P}),f.memoizedState=R,f.childLanes=Ad(i,E,a),r.memoizedState=Ed,u):(os(r),a=i.child,i=a.sibling,a=Sr(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(E=r.deletions,E===null?(r.deletions=[i],r.flags|=16):E.push(i)),r.child=a,r.memoizedState=null,a)}function Sd(i,r){return r=du({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function du(i,r){return i=ri(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function wd(i,r,a){return qn(r,i.child,null,a),i=Sd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function b_(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Vf(i.return,r,a)}function Rd(i,r,a,u,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailMode=f)}function E_(i,r,a){var u=r.pendingProps,f=u.revealOrder,p=u.tail;if(Fe(i,r,u.children,a),u=Me.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&b_(i,a,r);else if(i.tag===19)b_(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(F(Me,u),f){case"forwards":for(a=r.child,f=null;a!==null;)i=a.alternate,i!==null&&uu(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Rd(r,!1,f,a,p);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&uu(i)===null){r.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}Rd(r,!0,a,null,p);break;case"together":Rd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Br(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),ps|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(ja(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Sr(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Sr(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Cd(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&qo(i)))}function Nw(i,r,a){switch(r.tag){case 3:ct(r,r.stateNode.containerInfo),rs(r,Ce,i.memoizedState.cache),Xa();break;case 27:case 5:ot(r);break;case 4:ct(r,r.stateNode.containerInfo);break;case 10:rs(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(os(r),r.flags|=128,null):(a&r.child.childLanes)!==0?x_(i,r,a):(os(r),i=Br(i,r,a),i!==null?i.sibling:null);os(r);break;case 19:var f=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(ja(i,r,a,!1),u=(a&r.childLanes)!==0),f){if(u)return E_(i,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),F(Me,Me.current),u)break;return null;case 22:case 23:return r.lanes=0,m_(i,r,a);case 24:rs(r,Ce,i.memoizedState.cache)}return Br(i,r,a)}function T_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Ne=!0;else{if(!Cd(i,a)&&(r.flags&128)===0)return Ne=!1,Nw(i,r,a);Ne=(i.flags&131072)!==0}else Ne=!1,$t&&(r.flags&1048576)!==0&&Jy(r,Yo,r.index);switch(r.lanes=0,r.tag){case 16:t:{i=r.pendingProps;var u=r.elementType,f=u._init;if(u=f(u._payload),r.type=u,typeof u=="function")Lf(u)?(i=rn(u,i),r.tag=1,r=v_(null,r,u,i,a)):(r.tag=0,r=bd(null,r,u,i,a));else{if(u!=null){if(f=u.$$typeof,f===L){r.tag=11,r=f_(null,r,u,i,a);break t}else if(f===O){r.tag=14,r=d_(null,r,u,i,a);break t}}throw r=tt(u)||u,Error(s(306,r,""))}}return r;case 0:return bd(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,f=rn(u,r.pendingProps),v_(i,r,u,f,a);case 3:t:{if(ct(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var p=r.memoizedState;f=p.element,Kf(i,r),Qa(r,u,null,a);var E=r.memoizedState;if(u=E.cache,rs(r,Ce,u),u!==p.cache&&jf(r,[Ce],a,!0),Ka(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=__(i,r,u,a);break t}else if(u!==f){f=vi(Error(s(424)),r),Va(f),r=__(i,r,u,a);break t}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(pe=Fi(i.firstChild),qe=r,$t=!0,Zs=null,rr=!0,a=e_(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Xa(),u===f){r=Br(i,r,a);break t}Fe(i,r,u,a)}r=r.child}return r;case 26:return fu(i,r),i===null?(a=R1(r.type,null,r.pendingProps,null))?r.memoizedState=a:$t||(a=r.type,i=r.pendingProps,u=Ru(nt.current).createElement(a),u[Re]=r,u[Ee]=i,ke(u,a,i),de(u),r.stateNode=u):r.memoizedState=R1(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return ot(r),i===null&&$t&&(u=r.stateNode=A1(r.type,r.pendingProps,nt.current),qe=r,rr=!0,f=pe,vs(r.type)?(op=f,pe=Fi(u.firstChild)):pe=f),Fe(i,r,r.pendingProps.children,a),fu(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&$t&&((f=u=pe)&&(u=lR(u,r.type,r.pendingProps,rr),u!==null?(r.stateNode=u,qe=r,pe=Fi(u.firstChild),rr=!1,f=!0):f=!1),f||Ks(r)),ot(r),f=r.type,p=r.pendingProps,E=i!==null?i.memoizedProps:null,u=p.children,sp(f,p)?u=null:E!==null&&sp(f,E)&&(r.flags|=32),r.memoizedState!==null&&(f=rd(i,r,Sw,null,null,a),xl._currentValue=f),fu(i,r),Fe(i,r,u,a),r.child;case 6:return i===null&&$t&&((i=a=pe)&&(a=oR(a,r.pendingProps,rr),a!==null?(r.stateNode=a,qe=r,pe=null,i=!0):i=!1),i||Ks(r)),null;case 13:return x_(i,r,a);case 4:return ct(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=qn(r,null,u,a):Fe(i,r,u,a),r.child;case 11:return f_(i,r,r.type,r.pendingProps,a);case 7:return Fe(i,r,r.pendingProps,a),r.child;case 8:return Fe(i,r,r.pendingProps.children,a),r.child;case 12:return Fe(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,rs(r,r.type,u.value),Fe(i,r,u.children,a),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Js(r),f=je(f),u=u(f),r.flags|=1,Fe(i,r,u,a),r.child;case 14:return d_(i,r,r.type,r.pendingProps,a);case 15:return p_(i,r,r.type,r.pendingProps,a);case 19:return E_(i,r,a);case 31:return u=r.pendingProps,a=r.mode,u={mode:u.mode,children:u.children},i===null?(a=du(u,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Sr(i.child,u),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return m_(i,r,a);case 24:return Js(r),u=je(Ce),i===null?(f=Wf(),f===null&&(f=ne,p=Yf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),r.memoizedState={parent:u,cache:f},Zf(r),rs(r,Ce,f)):((i.lanes&a)!==0&&(Kf(i,r),Qa(r,null,null,a),Ka()),f=i.memoizedState,p=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),rs(r,Ce,u)):(u=p.cache,rs(r,Ce,u),u!==f.cache&&jf(r,[Ce],a,!0))),Fe(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Nr(i){i.flags|=4}function A_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!B1(r)){if(r=Ei.current,r!==null&&((jt&4194048)===jt?sr!==null:(jt&62914560)!==jt&&(jt&536870912)===0||r!==sr))throw $a=$f,lv;i.flags|=8192}}function pu(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?te():536870912,i.lanes|=r,Kn|=r)}function nl(i,r){if(!$t)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ce(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function Iw(i,r,a){var u=r.pendingProps;switch(Hf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(r),null;case 1:return ce(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Mr(Ce),yt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(za(r)?Nr(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,iv())),ce(r),null;case 26:return a=r.memoizedState,i===null?(Nr(r),a!==null?(ce(r),A_(r,a)):(ce(r),r.flags&=-16777217)):a?a!==i.memoizedState?(Nr(r),ce(r),A_(r,a)):(ce(r),r.flags&=-16777217):(i.memoizedProps!==u&&Nr(r),ce(r),r.flags&=-16777217),null;case 27:vt(r),a=nt.current;var f=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Nr(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ce(r),null}i=Z.current,za(r)?tv(r):(i=A1(f,u,a),r.stateNode=i,Nr(r))}return ce(r),null;case 5:if(vt(r),a=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Nr(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ce(r),null}if(i=Z.current,za(r))tv(r);else{switch(f=Ru(nt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(a,{is:u.is}):f.createElement(a)}}i[Re]=r,i[Ee]=u;t:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break t;for(;f.sibling===null;){if(f.return===null||f.return===r)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=i;t:switch(ke(i,a,u),a){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Nr(r)}}return ce(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Nr(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=nt.current,za(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,f=qe,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Re]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||y1(i.nodeValue,a)),i||Ks(r)}else i=Ru(i).createTextNode(u),i[Re]=r,r.stateNode=i}return ce(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=za(r),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Re]=r}else Xa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ce(r),f=!1}else f=iv(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Or(r),r):(Or(r),null)}if(Or(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=u!==null,i=i!==null&&i.memoizedState!==null,a){u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return a!==i&&a&&(r.child.flags|=8192),pu(r,r.updateQueue),ce(r),null;case 4:return yt(),i===null&&Jd(r.stateNode.containerInfo),ce(r),null;case 10:return Mr(r.type),ce(r),null;case 19:if(G(Me),f=r.memoizedState,f===null)return ce(r),null;if(u=(r.flags&128)!==0,p=f.rendering,p===null)if(u)nl(f,!1);else{if(me!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(p=uu(i),p!==null){for(r.flags|=128,nl(f,!1),i=p.updateQueue,r.updateQueue=i,pu(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Qy(a,i),a=a.sibling;return F(Me,Me.current&1|2),r.child}i=i.sibling}f.tail!==null&&qt()>yu&&(r.flags|=128,u=!0,nl(f,!1),r.lanes=4194304)}else{if(!u)if(i=uu(p),i!==null){if(r.flags|=128,u=!0,i=i.updateQueue,r.updateQueue=i,pu(r,i),nl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!$t)return ce(r),null}else 2*qt()-f.renderingStartTime>yu&&a!==536870912&&(r.flags|=128,u=!0,nl(f,!1),r.lanes=4194304);f.isBackwards?(p.sibling=r.child,r.child=p):(i=f.last,i!==null?i.sibling=p:r.child=p,f.last=p)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=qt(),r.sibling=null,i=Me.current,F(Me,u?i&1|2:i&1),r):(ce(r),null);case 22:case 23:return Or(r),ed(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ce(r),r.subtreeFlags&6&&(r.flags|=8192)):ce(r),a=r.updateQueue,a!==null&&pu(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&G(tn),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Mr(Ce),ce(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function Uw(i,r){switch(Hf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Mr(Ce),yt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return vt(r),null;case 13:if(Or(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Xa()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return G(Me),null;case 4:return yt(),null;case 10:return Mr(r.type),null;case 22:case 23:return Or(r),ed(),i!==null&&G(tn),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Mr(Ce),null;case 25:return null;default:return null}}function S_(i,r){switch(Hf(r),r.tag){case 3:Mr(Ce),yt();break;case 26:case 27:case 5:vt(r);break;case 4:yt();break;case 13:Or(r);break;case 19:G(Me);break;case 10:Mr(r.type);break;case 22:case 23:Or(r),ed(),i!==null&&G(tn);break;case 24:Mr(Ce)}}function al(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&i)===i){u=void 0;var p=a.create,E=a.inst;u=p(),E.destroy=u}a=a.next}while(a!==f)}}catch(R){se(r,r.return,R)}}function hs(i,r,a){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var E=u.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,f=r;var P=a,Y=R;try{Y()}catch(et){se(f,P,et)}}}u=u.next}while(u!==p)}}catch(et){se(r,r.return,et)}}function w_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{dv(r,a)}catch(u){se(i,i.return,u)}}}function R_(i,r,a){a.props=rn(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){se(i,r,u)}}function ll(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(f){se(i,r,f)}}function nr(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(f){se(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){se(i,r,f)}else a.current=null}function C_(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break t;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(f){se(i,i.return,f)}}function Md(i,r,a){try{var u=i.stateNode;iR(u,i.type,a,r),u[Ee]=r}catch(f){se(i,i.return,f)}}function M_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&vs(i.type)||i.tag===4}function Dd(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||M_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&vs(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Od(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=wu));else if(u!==4&&(u===27&&vs(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Od(i,r,a),i=i.sibling;i!==null;)Od(i,r,a),i=i.sibling}function mu(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&vs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(mu(i,r,a),i=i.sibling;i!==null;)mu(i,r,a),i=i.sibling}function D_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);ke(r,u,a),r[Re]=i,r[Ee]=a}catch(p){se(i,i.return,p)}}var Ir=!1,xe=!1,Bd=!1,O_=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Pw(i,r){if(i=i.containerInfo,ip=Nu,i=zy(i),Df(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else t:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var E=0,R=-1,P=-1,Y=0,et=0,at=i,K=null;e:for(;;){for(var Q;at!==a||f!==0&&at.nodeType!==3||(R=E+f),at!==p||u!==0&&at.nodeType!==3||(P=E+u),at.nodeType===3&&(E+=at.nodeValue.length),(Q=at.firstChild)!==null;)K=at,at=Q;for(;;){if(at===i)break e;if(K===a&&++Y===f&&(R=E),K===p&&++et===u&&(P=E),(Q=at.nextSibling)!==null)break;at=K,K=at.parentNode}at=Q}a=R===-1||P===-1?null:{start:R,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(rp={focusedElem:i,selectionRange:a},Nu=!1,Ie=r;Ie!==null;)if(r=Ie,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,Ie=i;else for(;Ie!==null;){switch(r=Ie,p=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,a=r,f=p.memoizedProps,p=p.memoizedState,u=a.stateNode;try{var Bt=rn(a.type,f,a.elementType===a.type);i=u.getSnapshotBeforeUpdate(Bt,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ct){se(a,a.return,Ct)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)ap(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ap(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Ie=i;break}Ie=r.return}}function B_(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:cs(i,a),u&4&&al(5,a);break;case 1:if(cs(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(E){se(a,a.return,E)}else{var f=rn(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(E){se(a,a.return,E)}}u&64&&w_(a),u&512&&ll(a,a.return);break;case 3:if(cs(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{dv(i,r)}catch(E){se(a,a.return,E)}}break;case 27:r===null&&u&4&&D_(a);case 26:case 5:cs(i,a),r===null&&u&4&&C_(a),u&512&&ll(a,a.return);break;case 12:cs(i,a);break;case 13:cs(i,a),u&4&&U_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=jw.bind(null,a),uR(i,a))));break;case 22:if(u=a.memoizedState!==null||Ir,!u){r=r!==null&&r.memoizedState!==null||xe,f=Ir;var p=xe;Ir=u,(xe=r)&&!p?fs(i,a,(a.subtreeFlags&8772)!==0):cs(i,a),Ir=f,xe=p}break;case 30:break;default:cs(i,a)}}function N_(i){var r=i.alternate;r!==null&&(i.alternate=null,N_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&zs(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var oe=null,Je=!1;function Ur(i,r,a){for(a=a.child;a!==null;)I_(i,r,a),a=a.sibling}function I_(i,r,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(ks,a)}catch{}switch(a.tag){case 26:xe||nr(a,r),Ur(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xe||nr(a,r);var u=oe,f=Je;vs(a.type)&&(oe=a.stateNode,Je=!1),Ur(i,r,a),gl(a.stateNode),oe=u,Je=f;break;case 5:xe||nr(a,r);case 6:if(u=oe,f=Je,oe=null,Ur(i,r,a),oe=u,Je=f,oe!==null)if(Je)try{(oe.nodeType===9?oe.body:oe.nodeName==="HTML"?oe.ownerDocument.body:oe).removeChild(a.stateNode)}catch(p){se(a,r,p)}else try{oe.removeChild(a.stateNode)}catch(p){se(a,r,p)}break;case 18:oe!==null&&(Je?(i=oe,E1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Al(i)):E1(oe,a.stateNode));break;case 4:u=oe,f=Je,oe=a.stateNode.containerInfo,Je=!0,Ur(i,r,a),oe=u,Je=f;break;case 0:case 11:case 14:case 15:xe||hs(2,a,r),xe||hs(4,a,r),Ur(i,r,a);break;case 1:xe||(nr(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&R_(a,r,u)),Ur(i,r,a);break;case 21:Ur(i,r,a);break;case 22:xe=(u=xe)||a.memoizedState!==null,Ur(i,r,a),xe=u;break;default:Ur(i,r,a)}}function U_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Al(i)}catch(a){se(r,r.return,a)}}function Lw(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new O_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new O_),r;default:throw Error(s(435,i.tag))}}function Nd(i,r){var a=Lw(i);r.forEach(function(u){var f=Yw.bind(null,i,u);a.has(u)||(a.add(u),u.then(f,f))})}function si(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u],p=i,E=r,R=E;t:for(;R!==null;){switch(R.tag){case 27:if(vs(R.type)){oe=R.stateNode,Je=!1;break t}break;case 5:oe=R.stateNode,Je=!1;break t;case 3:case 4:oe=R.stateNode.containerInfo,Je=!0;break t}R=R.return}if(oe===null)throw Error(s(160));I_(p,E,f),oe=null,Je=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)P_(r,i),r=r.sibling}var Li=null;function P_(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:si(r,i),ni(i),u&4&&(hs(3,i,i.return),al(3,i),hs(5,i,i.return));break;case 1:si(r,i),ni(i),u&512&&(xe||a===null||nr(a,a.return)),u&64&&Ir&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var f=Li;if(si(r,i),ni(i),u&512&&(xe||a===null||nr(a,a.return)),u&4){var p=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){t:{u=i.type,a=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Jr]||p[Re]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),ke(p,u,a),p[Re]=i,de(p),u=p;break t;case"link":var E=D1("link","href",f).get(u+(a.href||""));if(E){for(var R=0;R<E.length;R++)if(p=E[R],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(R,1);break e}}p=f.createElement(u),ke(p,u,a),f.head.appendChild(p);break;case"meta":if(E=D1("meta","content",f).get(u+(a.content||""))){for(R=0;R<E.length;R++)if(p=E[R],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(R,1);break e}}p=f.createElement(u),ke(p,u,a),f.head.appendChild(p);break;default:throw Error(s(468,u))}p[Re]=i,de(p),u=p}i.stateNode=u}else O1(f,i.type,i.stateNode);else i.stateNode=M1(f,u,i.memoizedProps);else p!==u?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,u===null?O1(f,i.type,i.stateNode):M1(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Md(i,i.memoizedProps,a.memoizedProps)}break;case 27:si(r,i),ni(i),u&512&&(xe||a===null||nr(a,a.return)),a!==null&&u&4&&Md(i,i.memoizedProps,a.memoizedProps);break;case 5:if(si(r,i),ni(i),u&512&&(xe||a===null||nr(a,a.return)),i.flags&32){f=i.stateNode;try{Mn(f,"")}catch(Q){se(i,i.return,Q)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,Md(i,f,a!==null?a.memoizedProps:f)),u&1024&&(Bd=!0);break;case 6:if(si(r,i),ni(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(Q){se(i,i.return,Q)}}break;case 3:if(Du=null,f=Li,Li=Cu(r.containerInfo),si(r,i),Li=f,ni(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Al(r.containerInfo)}catch(Q){se(i,i.return,Q)}Bd&&(Bd=!1,L_(i));break;case 4:u=Li,Li=Cu(i.stateNode.containerInfo),si(r,i),ni(i),Li=u;break;case 12:si(r,i),ni(i);break;case 13:si(r,i),ni(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Gd=qt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Nd(i,u)));break;case 22:f=i.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,Y=Ir,et=xe;if(Ir=Y||f,xe=et||P,si(r,i),xe=et,Ir=Y,ni(i),u&8192)t:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||P||Ir||xe||sn(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){P=a=r;try{if(p=P.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=P.stateNode;var at=P.memoizedProps.style,K=at!=null&&at.hasOwnProperty("display")?at.display:null;R.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){se(P,P.return,Q)}}}else if(r.tag===6){if(a===null){P=r;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Q){se(P,P.return,Q)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Nd(i,a))));break;case 19:si(r,i),ni(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Nd(i,u)));break;case 30:break;case 21:break;default:si(r,i),ni(i)}}function ni(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(M_(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=Dd(i);mu(i,p,f);break;case 5:var E=a.stateNode;a.flags&32&&(Mn(E,""),a.flags&=-33);var R=Dd(i);mu(i,R,E);break;case 3:case 4:var P=a.stateNode.containerInfo,Y=Dd(i);Od(i,Y,P);break;default:throw Error(s(161))}}catch(et){se(i,i.return,et)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function L_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;L_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function cs(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)B_(i,r.alternate,r),r=r.sibling}function sn(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:hs(4,r,r.return),sn(r);break;case 1:nr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&R_(r,r.return,a),sn(r);break;case 27:gl(r.stateNode);case 26:case 5:nr(r,r.return),sn(r);break;case 22:r.memoizedState===null&&sn(r);break;case 30:sn(r);break;default:sn(r)}i=i.sibling}}function fs(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=i,p=r,E=p.flags;switch(p.tag){case 0:case 11:case 15:fs(f,p,a),al(4,p);break;case 1:if(fs(f,p,a),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){se(u,u.return,Y)}if(u=p,f=u.updateQueue,f!==null){var R=u.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)fv(P[f],R)}catch(Y){se(u,u.return,Y)}}a&&E&64&&w_(p),ll(p,p.return);break;case 27:D_(p);case 26:case 5:fs(f,p,a),a&&u===null&&E&4&&C_(p),ll(p,p.return);break;case 12:fs(f,p,a);break;case 13:fs(f,p,a),a&&E&4&&U_(f,p);break;case 22:p.memoizedState===null&&fs(f,p,a),ll(p,p.return);break;case 30:break;default:fs(f,p,a)}r=r.sibling}}function Id(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ya(a))}function Ud(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ya(i))}function ar(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)F_(i,r,a,u),r=r.sibling}function F_(i,r,a,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ar(i,r,a,u),f&2048&&al(9,r);break;case 1:ar(i,r,a,u);break;case 3:ar(i,r,a,u),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ya(i)));break;case 12:if(f&2048){ar(i,r,a,u),i=r.stateNode;try{var p=r.memoizedProps,E=p.id,R=p.onPostCommit;typeof R=="function"&&R(E,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){se(r,r.return,P)}}else ar(i,r,a,u);break;case 13:ar(i,r,a,u);break;case 23:break;case 22:p=r.stateNode,E=r.alternate,r.memoizedState!==null?p._visibility&2?ar(i,r,a,u):ol(i,r):p._visibility&2?ar(i,r,a,u):(p._visibility|=2,Wn(i,r,a,u,(r.subtreeFlags&10256)!==0)),f&2048&&Id(E,r);break;case 24:ar(i,r,a,u),f&2048&&Ud(r.alternate,r);break;default:ar(i,r,a,u)}}function Wn(i,r,a,u,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=i,E=r,R=a,P=u,Y=E.flags;switch(E.tag){case 0:case 11:case 15:Wn(p,E,R,P,f),al(8,E);break;case 23:break;case 22:var et=E.stateNode;E.memoizedState!==null?et._visibility&2?Wn(p,E,R,P,f):ol(p,E):(et._visibility|=2,Wn(p,E,R,P,f)),f&&Y&2048&&Id(E.alternate,E);break;case 24:Wn(p,E,R,P,f),f&&Y&2048&&Ud(E.alternate,E);break;default:Wn(p,E,R,P,f)}r=r.sibling}}function ol(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,f=u.flags;switch(u.tag){case 22:ol(a,u),f&2048&&Id(u.alternate,u);break;case 24:ol(a,u),f&2048&&Ud(u.alternate,u);break;default:ol(a,u)}r=r.sibling}}var ul=8192;function $n(i){if(i.subtreeFlags&ul)for(i=i.child;i!==null;)G_(i),i=i.sibling}function G_(i){switch(i.tag){case 26:$n(i),i.flags&ul&&i.memoizedState!==null&&ER(Li,i.memoizedState,i.memoizedProps);break;case 5:$n(i);break;case 3:case 4:var r=Li;Li=Cu(i.stateNode.containerInfo),$n(i),Li=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=ul,ul=16777216,$n(i),ul=r):$n(i));break;default:$n(i)}}function k_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function hl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ie=u,z_(u,i)}k_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)H_(i),i=i.sibling}function H_(i){switch(i.tag){case 0:case 11:case 15:hl(i),i.flags&2048&&hs(9,i,i.return);break;case 3:hl(i);break;case 12:hl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,gu(i)):hl(i);break;default:hl(i)}}function gu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ie=u,z_(u,i)}k_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:hs(8,r,r.return),gu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,gu(r));break;default:gu(r)}i=i.sibling}}function z_(i,r){for(;Ie!==null;){var a=Ie;switch(a.tag){case 0:case 11:case 15:hs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ya(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ie=u;else t:for(a=i;Ie!==null;){u=Ie;var f=u.sibling,p=u.return;if(N_(u),u===a){Ie=null;break t}if(f!==null){f.return=p,Ie=f;break t}Ie=p}}}var Fw={getCacheForType:function(i){var r=je(Ce),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a}},Gw=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ne=null,zt=null,jt=0,Qt=0,ai=null,ds=!1,Zn=!1,Pd=!1,Pr=0,me=0,ps=0,nn=0,Ld=0,Ti=0,Kn=0,cl=null,ti=null,Fd=!1,Gd=0,yu=1/0,vu=null,ms=null,Ge=0,gs=null,Qn=null,Jn=0,kd=0,Hd=null,X_=null,fl=0,zd=null;function li(){if((Kt&2)!==0&&jt!==0)return jt&-jt;if(S.T!==null){var i=kn;return i!==0?i:$d()}return Ze()}function V_(){Ti===0&&(Ti=(jt&536870912)===0||$t?Zt():536870912);var i=Ei.current;return i!==null&&(i.flags|=32),Ti}function oi(i,r,a){(i===ne&&(Qt===2||Qt===9)||i.cancelPendingCommit!==null)&&(ta(i,0),ys(i,jt,Ti,!1)),$e(i,a),((Kt&2)===0||i!==ne)&&(i===ne&&((Kt&2)===0&&(nn|=a),me===4&&ys(i,jt,Ti,!1)),lr(i))}function j_(i,r,a){if((Kt&6)!==0)throw Error(s(327));var u=!a&&(r&124)===0&&(r&i.expiredLanes)===0||J(i,r),f=u?zw(i,r):jd(i,r,!0),p=u;do{if(f===0){Zn&&!u&&ys(i,r,0,!1);break}else{if(a=i.current.alternate,p&&!kw(a)){f=jd(i,r,!1),p=!1;continue}if(f===2){if(p=r,i.errorRecoveryDisabledLanes&p)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;t:{var R=i;f=cl;var P=R.current.memoizedState.isDehydrated;if(P&&(ta(R,E).flags|=256),E=jd(R,E,!1),E!==2){if(Pd&&!P){R.errorRecoveryDisabledLanes|=p,nn|=p,f=4;break t}p=ti,ti=f,p!==null&&(ti===null?ti=p:ti.push.apply(ti,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){ta(i,0),ys(i,r,0,!0);break}t:{switch(u=i,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ys(u,r,Ti,!ds);break t;case 2:ti=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Gd+300-qt(),10<f)){if(ys(u,r,Ti,!ds),$(u,0,!0)!==0)break t;u.timeoutHandle=x1(Y_.bind(null,u,a,ti,vu,Fd,r,Ti,nn,Kn,ds,p,2,-0,0),f);break t}Y_(u,a,ti,vu,Fd,r,Ti,nn,Kn,ds,p,0,-0,0)}}break}while(!0);lr(i)}function Y_(i,r,a,u,f,p,E,R,P,Y,et,at,K,Q){if(i.timeoutHandle=-1,at=r.subtreeFlags,(at&8192||(at&16785408)===16785408)&&(_l={stylesheets:null,count:0,unsuspend:bR},G_(r),at=TR(),at!==null)){i.cancelPendingCommit=at(J_.bind(null,i,r,p,a,u,f,E,R,P,et,1,K,Q)),ys(i,p,E,!Y);return}J_(i,r,p,a,u,f,E,R,P)}function kw(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var f=a[u],p=f.getSnapshot;f=f.value;try{if(!ii(p(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ys(i,r,a,u){r&=~Ld,r&=~nn,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var f=r;0<f;){var p=31-we(f),E=1<<p;u[p]=-1,f&=~E}a!==0&&Ve(i,a,r)}function _u(){return(Kt&6)===0?(dl(0),!1):!0}function Xd(){if(zt!==null){if(Qt===0)var i=zt.return;else i=zt,Cr=Qs=null,ad(i),Yn=null,rl=0,i=zt;for(;i!==null;)S_(i.alternate,i),i=i.return;zt=null}}function ta(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,sR(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Xd(),ne=i,zt=a=Sr(i.current,null),jt=r,Qt=0,ai=null,ds=!1,Zn=J(i,r),Pd=!1,Kn=Ti=Ld=nn=ps=me=0,ti=cl=null,Fd=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var f=31-we(u),p=1<<f;r|=i[f],u&=~p}return Pr=r,Ho(),a}function q_(i,r){Gt=null,S.H=au,r===Wa||r===Zo?(r=hv(),Qt=3):r===lv?(r=hv(),Qt=4):Qt=r===c_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ai=r,zt===null&&(me=1,cu(i,vi(r,i.current)))}function W_(){var i=S.H;return S.H=au,i===null?au:i}function $_(){var i=S.A;return S.A=Fw,i}function Vd(){me=4,ds||(jt&4194048)!==jt&&Ei.current!==null||(Zn=!0),(ps&134217727)===0&&(nn&134217727)===0||ne===null||ys(ne,jt,Ti,!1)}function jd(i,r,a){var u=Kt;Kt|=2;var f=W_(),p=$_();(ne!==i||jt!==r)&&(vu=null,ta(i,r)),r=!1;var E=me;t:do try{if(Qt!==0&&zt!==null){var R=zt,P=ai;switch(Qt){case 8:Xd(),E=6;break t;case 3:case 2:case 9:case 6:Ei.current===null&&(r=!0);var Y=Qt;if(Qt=0,ai=null,ea(i,R,P,Y),a&&Zn){E=0;break t}break;default:Y=Qt,Qt=0,ai=null,ea(i,R,P,Y)}}Hw(),E=me;break}catch(et){q_(i,et)}while(!0);return r&&i.shellSuspendCounter++,Cr=Qs=null,Kt=u,S.H=f,S.A=p,zt===null&&(ne=null,jt=0,Ho()),E}function Hw(){for(;zt!==null;)Z_(zt)}function zw(i,r){var a=Kt;Kt|=2;var u=W_(),f=$_();ne!==i||jt!==r?(vu=null,yu=qt()+500,ta(i,r)):Zn=J(i,r);t:do try{if(Qt!==0&&zt!==null){r=zt;var p=ai;e:switch(Qt){case 1:Qt=0,ai=null,ea(i,r,p,1);break;case 2:case 9:if(ov(p)){Qt=0,ai=null,K_(r);break}r=function(){Qt!==2&&Qt!==9||ne!==i||(Qt=7),lr(i)},p.then(r,r);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:ov(p)?(Qt=0,ai=null,K_(r)):(Qt=0,ai=null,ea(i,r,p,7));break;case 5:var E=null;switch(zt.tag){case 26:E=zt.memoizedState;case 5:case 27:var R=zt;if(!E||B1(E)){Qt=0,ai=null;var P=R.sibling;if(P!==null)zt=P;else{var Y=R.return;Y!==null?(zt=Y,xu(Y)):zt=null}break e}}Qt=0,ai=null,ea(i,r,p,5);break;case 6:Qt=0,ai=null,ea(i,r,p,6);break;case 8:Xd(),me=6;break t;default:throw Error(s(462))}}Xw();break}catch(et){q_(i,et)}while(!0);return Cr=Qs=null,S.H=u,S.A=f,Kt=a,zt!==null?0:(ne=null,jt=0,Ho(),me)}function Xw(){for(;zt!==null&&!Tt();)Z_(zt)}function Z_(i){var r=T_(i.alternate,i,Pr);i.memoizedProps=i.pendingProps,r===null?xu(i):zt=r}function K_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=y_(a,r,r.pendingProps,r.type,void 0,jt);break;case 11:r=y_(a,r,r.pendingProps,r.type.render,r.ref,jt);break;case 5:ad(r);default:S_(a,r),r=zt=Qy(r,Pr),r=T_(a,r,Pr)}i.memoizedProps=i.pendingProps,r===null?xu(i):zt=r}function ea(i,r,a,u){Cr=Qs=null,ad(r),Yn=null,rl=0;var f=r.return;try{if(Bw(i,f,r,a,jt)){me=1,cu(i,vi(a,i.current)),zt=null;return}}catch(p){if(f!==null)throw zt=f,p;me=1,cu(i,vi(a,i.current)),zt=null;return}r.flags&32768?($t||u===1?i=!0:Zn||(jt&536870912)!==0?i=!1:(ds=i=!0,(u===2||u===9||u===3||u===6)&&(u=Ei.current,u!==null&&u.tag===13&&(u.flags|=16384))),Q_(r,i)):xu(r)}function xu(i){var r=i;do{if((r.flags&32768)!==0){Q_(r,ds);return}i=r.return;var a=Iw(r.alternate,r,Pr);if(a!==null){zt=a;return}if(r=r.sibling,r!==null){zt=r;return}zt=r=i}while(r!==null);me===0&&(me=5)}function Q_(i,r){do{var a=Uw(i.alternate,i);if(a!==null){a.flags&=32767,zt=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){zt=i;return}zt=i=a}while(i!==null);me=6,zt=null}function J_(i,r,a,u,f,p,E,R,P){i.cancelPendingCommit=null;do bu();while(Ge!==0);if((Kt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(p=r.lanes|r.childLanes,p|=Uf,vr(i,a,p,E,R,P),i===ne&&(zt=ne=null,jt=0),Qn=r,gs=i,Jn=a,kd=p,Hd=f,X_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,qw(ze,function(){return s1(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=S.T,S.T=null,f=M.p,M.p=2,E=Kt,Kt|=4;try{Pw(i,r,a)}finally{Kt=E,M.p=f,S.T=u}}Ge=1,t1(),e1(),i1()}}function t1(){if(Ge===1){Ge=0;var i=gs,r=Qn,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=S.T,S.T=null;var u=M.p;M.p=2;var f=Kt;Kt|=4;try{P_(r,i);var p=rp,E=zy(i.containerInfo),R=p.focusedElem,P=p.selectionRange;if(E!==R&&R&&R.ownerDocument&&Hy(R.ownerDocument.documentElement,R)){if(P!==null&&Df(R)){var Y=P.start,et=P.end;if(et===void 0&&(et=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(et,R.value.length);else{var at=R.ownerDocument||document,K=at&&at.defaultView||window;if(K.getSelection){var Q=K.getSelection(),Bt=R.textContent.length,Ct=Math.min(P.start,Bt),re=P.end===void 0?Ct:Math.min(P.end,Bt);!Q.extend&&Ct>re&&(E=re,re=Ct,Ct=E);var X=ky(R,Ct),k=ky(R,re);if(X&&k&&(Q.rangeCount!==1||Q.anchorNode!==X.node||Q.anchorOffset!==X.offset||Q.focusNode!==k.node||Q.focusOffset!==k.offset)){var V=at.createRange();V.setStart(X.node,X.offset),Q.removeAllRanges(),Ct>re?(Q.addRange(V),Q.extend(k.node,k.offset)):(V.setEnd(k.node,k.offset),Q.addRange(V))}}}}for(at=[],Q=R;Q=Q.parentNode;)Q.nodeType===1&&at.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<at.length;R++){var st=at[R];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}Nu=!!ip,rp=ip=null}finally{Kt=f,M.p=u,S.T=a}}i.current=r,Ge=2}}function e1(){if(Ge===2){Ge=0;var i=gs,r=Qn,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=S.T,S.T=null;var u=M.p;M.p=2;var f=Kt;Kt|=4;try{B_(i,r.alternate,r)}finally{Kt=f,M.p=u,S.T=a}}Ge=3}}function i1(){if(Ge===4||Ge===3){Ge=0,St();var i=gs,r=Qn,a=Jn,u=X_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ge=5:(Ge=0,Qn=gs=null,r1(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(ms=null),tr(a),r=r.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(ks,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=S.T,f=M.p,M.p=2,S.T=null;try{for(var p=i.onRecoverableError,E=0;E<u.length;E++){var R=u[E];p(R.value,{componentStack:R.stack})}}finally{S.T=r,M.p=f}}(Jn&3)!==0&&bu(),lr(i),f=i.pendingLanes,(a&4194090)!==0&&(f&42)!==0?i===zd?fl++:(fl=0,zd=i):fl=0,dl(0)}}function r1(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Ya(r)))}function bu(i){return t1(),e1(),i1(),s1()}function s1(){if(Ge!==5)return!1;var i=gs,r=kd;kd=0;var a=tr(Jn),u=S.T,f=M.p;try{M.p=32>a?32:a,S.T=null,a=Hd,Hd=null;var p=gs,E=Jn;if(Ge=0,Qn=gs=null,Jn=0,(Kt&6)!==0)throw Error(s(331));var R=Kt;if(Kt|=4,H_(p.current),F_(p,p.current,E,a),Kt=R,dl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(ks,p)}catch{}return!0}finally{M.p=f,S.T=u,r1(i,r)}}function n1(i,r,a){r=vi(a,r),r=xd(i.stateNode,r,2),i=as(i,r,2),i!==null&&($e(i,2),lr(i))}function se(i,r,a){if(i.tag===3)n1(i,i,a);else for(;r!==null;){if(r.tag===3){n1(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ms===null||!ms.has(u))){i=vi(a,i),a=u_(2),u=as(r,a,2),u!==null&&(h_(a,u,r,i),$e(u,2),lr(u));break}}r=r.return}}function Yd(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new Gw;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(a)||(Pd=!0,f.add(a),i=Vw.bind(null,i,r,a),r.then(i,i))}function Vw(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ne===i&&(jt&a)===a&&(me===4||me===3&&(jt&62914560)===jt&&300>qt()-Gd?(Kt&2)===0&&ta(i,0):Ld|=a,Kn===jt&&(Kn=0)),lr(i)}function a1(i,r){r===0&&(r=te()),i=Pn(i,r),i!==null&&($e(i,r),lr(i))}function jw(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),a1(i,a)}function Yw(i,r){var a=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),a1(i,a)}function qw(i,r){return Ot(i,r)}var Eu=null,ia=null,qd=!1,Tu=!1,Wd=!1,an=0;function lr(i){i!==ia&&i.next===null&&(ia===null?Eu=ia=i:ia=ia.next=i),Tu=!0,qd||(qd=!0,$w())}function dl(i,r){if(!Wd&&Tu){Wd=!0;do for(var a=!1,u=Eu;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var E=u.suspendedLanes,R=u.pingedLanes;p=(1<<31-we(42|i)+1)-1,p&=f&~(E&~R),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,h1(u,p))}else p=jt,p=$(u,u===ne?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||J(u,p)||(a=!0,h1(u,p));u=u.next}while(a);Wd=!1}}function Ww(){l1()}function l1(){Tu=qd=!1;var i=0;an!==0&&(rR()&&(i=an),an=0);for(var r=qt(),a=null,u=Eu;u!==null;){var f=u.next,p=o1(u,r);p===0?(u.next=null,a===null?Eu=f:a.next=f,f===null&&(ia=a)):(a=u,(i!==0||(p&3)!==0)&&(Tu=!0)),u=f}dl(i)}function o1(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var E=31-we(p),R=1<<E,P=f[E];P===-1?((R&a)===0||(R&u)!==0)&&(f[E]=Yt(R,r)):P<=r&&(i.expiredLanes|=R),p&=~R}if(r=ne,a=jt,a=$(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(Qt===2||Qt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ft(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||J(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&Ft(u),tr(a)){case 2:case 8:a=Ni;break;case 32:a=ze;break;case 268435456:a=yr;break;default:a=ze}return u=u1.bind(null,i),a=Ot(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&Ft(u),i.callbackPriority=2,i.callbackNode=null,2}function u1(i,r){if(Ge!==0&&Ge!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(bu()&&i.callbackNode!==a)return null;var u=jt;return u=$(i,i===ne?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(j_(i,u,r),o1(i,qt()),i.callbackNode!=null&&i.callbackNode===a?u1.bind(null,i):null)}function h1(i,r){if(bu())return null;j_(i,r,!0)}function $w(){nR(function(){(Kt&6)!==0?Ot(gr,Ww):l1()})}function $d(){return an===0&&(an=Zt()),an}function c1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Io(""+i)}function f1(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function Zw(i,r,a,u,f){if(r==="submit"&&a&&a.stateNode===f){var p=c1((f[Ee]||null).action),E=u.submitter;E&&(r=(r=E[Ee]||null)?c1(r.formAction):E.getAttribute("formAction"),r!==null&&(p=r,E=null));var R=new Fo("action","action",null,u,f);i.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(an!==0){var P=E?f1(f,E):new FormData(f);md(a,{pending:!0,data:P,method:f.method,action:p},null,P)}}else typeof p=="function"&&(R.preventDefault(),P=E?f1(f,E):new FormData(f),md(a,{pending:!0,data:P,method:f.method,action:p},p,P))},currentTarget:f}]})}}for(var Zd=0;Zd<If.length;Zd++){var Kd=If[Zd],Kw=Kd.toLowerCase(),Qw=Kd[0].toUpperCase()+Kd.slice(1);Pi(Kw,"on"+Qw)}Pi(jy,"onAnimationEnd"),Pi(Yy,"onAnimationIteration"),Pi(qy,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(mw,"onTransitionRun"),Pi(gw,"onTransitionStart"),Pi(yw,"onTransitionCancel"),Pi(Wy,"onTransitionEnd"),Er("onMouseEnter",["mouseout","mouseover"]),Er("onMouseLeave",["mouseout","mouseover"]),Er("onPointerEnter",["pointerout","pointerover"]),Er("onPointerLeave",["pointerout","pointerover"]),br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),br("onBeforeInput",["compositionend","keypress","textInput","paste"]),br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pl));function d1(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],f=u.event;u=u.listeners;t:{var p=void 0;if(r)for(var E=u.length-1;0<=E;E--){var R=u[E],P=R.instance,Y=R.currentTarget;if(R=R.listener,P!==p&&f.isPropagationStopped())break t;p=R,f.currentTarget=Y;try{p(f)}catch(et){hu(et)}f.currentTarget=null,p=P}else for(E=0;E<u.length;E++){if(R=u[E],P=R.instance,Y=R.currentTarget,R=R.listener,P!==p&&f.isPropagationStopped())break t;p=R,f.currentTarget=Y;try{p(f)}catch(et){hu(et)}f.currentTarget=null,p=P}}}}function Xt(i,r){var a=r[Qr];a===void 0&&(a=r[Qr]=new Set);var u=i+"__bubble";a.has(u)||(p1(r,i,2,!1),a.add(u))}function Qd(i,r,a){var u=0;r&&(u|=4),p1(a,i,u,r)}var Au="_reactListening"+Math.random().toString(36).slice(2);function Jd(i){if(!i[Au]){i[Au]=!0,xr.forEach(function(a){a!=="selectionchange"&&(Jw.has(a)||Qd(a,!1,i),Qd(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Au]||(r[Au]=!0,Qd("selectionchange",!1,r))}}function p1(i,r,a,u){switch(F1(r)){case 2:var f=wR;break;case 8:f=RR;break;default:f=dp}a=f.bind(null,r,a,i),f=void 0,!bf||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(r,a,{capture:!0,passive:f}):i.addEventListener(r,a,!0):f!==void 0?i.addEventListener(r,a,{passive:f}):i.addEventListener(r,a,!1)}function tp(i,r,a,u,f){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var R=u.stateNode.containerInfo;if(R===f)break;if(E===4)for(E=u.return;E!==null;){var P=E.tag;if((P===3||P===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;R!==null;){if(E=_r(R),E===null)return;if(P=E.tag,P===5||P===6||P===26||P===27){u=p=E;continue t}R=R.parentNode}}u=u.return}by(function(){var Y=p,et=_f(a),at=[];t:{var K=$y.get(i);if(K!==void 0){var Q=Fo,Bt=i;switch(i){case"keypress":if(Po(a)===0)break t;case"keydown":case"keyup":Q=qS;break;case"focusin":Bt="focus",Q=Sf;break;case"focusout":Bt="blur",Q=Sf;break;case"beforeblur":case"afterblur":Q=Sf;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Ay;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=US;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=ZS;break;case jy:case Yy:case qy:Q=FS;break;case Wy:Q=QS;break;case"scroll":case"scrollend":Q=NS;break;case"wheel":Q=tw;break;case"copy":case"cut":case"paste":Q=kS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=wy;break;case"toggle":case"beforetoggle":Q=iw}var Ct=(r&4)!==0,re=!Ct&&(i==="scroll"||i==="scrollend"),X=Ct?K!==null?K+"Capture":null:K;Ct=[];for(var k=Y,V;k!==null;){var st=k;if(V=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||V===null||X===null||(st=Na(k,X),st!=null&&Ct.push(ml(k,st,V))),re)break;k=k.return}0<Ct.length&&(K=new Q(K,Bt,null,a,et),at.push({event:K,listeners:Ct}))}}if((r&7)===0){t:{if(K=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",K&&a!==vf&&(Bt=a.relatedTarget||a.fromElement)&&(_r(Bt)||Bt[er]))break t;if((Q||K)&&(K=et.window===et?et:(K=et.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(Bt=a.relatedTarget||a.toElement,Q=Y,Bt=Bt?_r(Bt):null,Bt!==null&&(re=o(Bt),Ct=Bt.tag,Bt!==re||Ct!==5&&Ct!==27&&Ct!==6)&&(Bt=null)):(Q=null,Bt=Y),Q!==Bt)){if(Ct=Ay,st="onMouseLeave",X="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Ct=wy,st="onPointerLeave",X="onPointerEnter",k="pointer"),re=Q==null?K:ts(Q),V=Bt==null?K:ts(Bt),K=new Ct(st,k+"leave",Q,a,et),K.target=re,K.relatedTarget=V,st=null,_r(et)===Y&&(Ct=new Ct(X,k+"enter",Bt,a,et),Ct.target=V,Ct.relatedTarget=re,st=Ct),re=st,Q&&Bt)e:{for(Ct=Q,X=Bt,k=0,V=Ct;V;V=ra(V))k++;for(V=0,st=X;st;st=ra(st))V++;for(;0<k-V;)Ct=ra(Ct),k--;for(;0<V-k;)X=ra(X),V--;for(;k--;){if(Ct===X||X!==null&&Ct===X.alternate)break e;Ct=ra(Ct),X=ra(X)}Ct=null}else Ct=null;Q!==null&&m1(at,K,Q,Ct,!1),Bt!==null&&re!==null&&m1(at,re,Bt,Ct,!0)}}t:{if(K=Y?ts(Y):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var _t=Iy;else if(By(K))if(Uy)_t=fw;else{_t=hw;var kt=uw}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&yf(Y.elementType)&&(_t=Iy):_t=cw;if(_t&&(_t=_t(i,Y))){Ny(at,_t,a,et);break t}kt&&kt(i,K,Y),i==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&gf(K,"number",K.value)}switch(kt=Y?ts(Y):window,i){case"focusin":(By(kt)||kt.contentEditable==="true")&&(Nn=kt,Of=Y,Ha=null);break;case"focusout":Ha=Of=Nn=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,Xy(at,a,et);break;case"selectionchange":if(pw)break;case"keydown":case"keyup":Xy(at,a,et)}var Rt;if(Rf)t:{switch(i){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else Bn?Dy(i,a)&&(Dt="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Dt="onCompositionStart");Dt&&(Ry&&a.locale!=="ko"&&(Bn||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Bn&&(Rt=Ey()):(is=et,Ef="value"in is?is.value:is.textContent,Bn=!0)),kt=Su(Y,Dt),0<kt.length&&(Dt=new Sy(Dt,i,null,a,et),at.push({event:Dt,listeners:kt}),Rt?Dt.data=Rt:(Rt=Oy(a),Rt!==null&&(Dt.data=Rt)))),(Rt=sw?nw(i,a):aw(i,a))&&(Dt=Su(Y,"onBeforeInput"),0<Dt.length&&(kt=new Sy("onBeforeInput","beforeinput",null,a,et),at.push({event:kt,listeners:Dt}),kt.data=Rt)),Zw(at,i,Y,a,et)}d1(at,r)})}function ml(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Su(i,r){for(var a=r+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Na(i,a),f!=null&&u.unshift(ml(i,f,p)),f=Na(i,r),f!=null&&u.push(ml(i,f,p))),i.tag===3)return u;i=i.return}return[]}function ra(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function m1(i,r,a,u,f){for(var p=r._reactName,E=[];a!==null&&a!==u;){var R=a,P=R.alternate,Y=R.stateNode;if(R=R.tag,P!==null&&P===u)break;R!==5&&R!==26&&R!==27||Y===null||(P=Y,f?(Y=Na(a,p),Y!=null&&E.unshift(ml(a,Y,P))):f||(Y=Na(a,p),Y!=null&&E.push(ml(a,Y,P)))),a=a.return}E.length!==0&&i.push({event:r,listeners:E})}var tR=/\r\n?/g,eR=/\u0000|\uFFFD/g;function g1(i){return(typeof i=="string"?i:""+i).replace(tR,`
`).replace(eR,"")}function y1(i,r){return r=g1(r),g1(i)===r}function wu(){}function ie(i,r,a,u,f,p){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Mn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Mn(i,""+u);break;case"className":Oo(i,"class",u);break;case"tabIndex":Oo(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Oo(i,a,u);break;case"style":_y(i,u,p);break;case"data":if(r!=="object"){Oo(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Io(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&ie(i,r,"name",f.name,f,null),ie(i,r,"formEncType",f.formEncType,f,null),ie(i,r,"formMethod",f.formMethod,f,null),ie(i,r,"formTarget",f.formTarget,f,null)):(ie(i,r,"encType",f.encType,f,null),ie(i,r,"method",f.method,f,null),ie(i,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Io(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=wu);break;case"onScroll":u!=null&&Xt("scroll",i);break;case"onScrollEnd":u!=null&&Xt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=Io(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Xt("beforetoggle",i),Xt("toggle",i),Do(i,"popover",u);break;case"xlinkActuate":Tr(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Tr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Tr(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Tr(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Tr(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Tr(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Tr(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Tr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Tr(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Do(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=OS.get(a)||a,Do(i,a,u))}}function ep(i,r,a,u,f,p){switch(a){case"style":_y(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?Mn(i,u):(typeof u=="number"||typeof u=="bigint")&&Mn(i,""+u);break;case"onScroll":u!=null&&Xt("scroll",i);break;case"onScrollEnd":u!=null&&Xt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=wu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),p=i[Ee]||null,p=p!=null?p[a]:null,typeof p=="function"&&i.removeEventListener(r,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,f);break t}a in i?i[a]=u:u===!0?i.setAttribute(a,""):Do(i,a,u)}}}function ke(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xt("error",i),Xt("load",i);var u=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var E=a[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ie(i,r,p,E,a,null)}}f&&ie(i,r,"srcSet",a.srcSet,a,null),u&&ie(i,r,"src",a.src,a,null);return;case"input":Xt("invalid",i);var R=p=E=f=null,P=null,Y=null;for(u in a)if(a.hasOwnProperty(u)){var et=a[u];if(et!=null)switch(u){case"name":f=et;break;case"type":E=et;break;case"checked":P=et;break;case"defaultChecked":Y=et;break;case"value":p=et;break;case"defaultValue":R=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,r));break;default:ie(i,r,u,et,a,null)}}my(i,p,R,P,Y,E,f,!1),Bo(i);return;case"select":Xt("invalid",i),u=E=p=null;for(f in a)if(a.hasOwnProperty(f)&&(R=a[f],R!=null))switch(f){case"value":p=R;break;case"defaultValue":E=R;break;case"multiple":u=R;default:ie(i,r,f,R,a,null)}r=p,a=E,i.multiple=!!u,r!=null?Cn(i,!!u,r,!1):a!=null&&Cn(i,!!u,a,!0);return;case"textarea":Xt("invalid",i),p=f=u=null;for(E in a)if(a.hasOwnProperty(E)&&(R=a[E],R!=null))switch(E){case"value":u=R;break;case"defaultValue":f=R;break;case"children":p=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:ie(i,r,E,R,a,null)}yy(i,u,f,p),Bo(i);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(u=a[P],u!=null))switch(P){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ie(i,r,P,u,a,null)}return;case"dialog":Xt("beforetoggle",i),Xt("toggle",i),Xt("cancel",i),Xt("close",i);break;case"iframe":case"object":Xt("load",i);break;case"video":case"audio":for(u=0;u<pl.length;u++)Xt(pl[u],i);break;case"image":Xt("error",i),Xt("load",i);break;case"details":Xt("toggle",i);break;case"embed":case"source":case"link":Xt("error",i),Xt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(u=a[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ie(i,r,Y,u,a,null)}return;default:if(yf(r)){for(et in a)a.hasOwnProperty(et)&&(u=a[et],u!==void 0&&ep(i,r,et,u,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(u=a[R],u!=null&&ie(i,r,R,u,a,null))}function iR(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,R=null,P=null,Y=null,et=null;for(Q in a){var at=a[Q];if(a.hasOwnProperty(Q)&&at!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":P=at;default:u.hasOwnProperty(Q)||ie(i,r,Q,null,u,at)}}for(var K in u){var Q=u[K];if(at=a[K],u.hasOwnProperty(K)&&(Q!=null||at!=null))switch(K){case"type":p=Q;break;case"name":f=Q;break;case"checked":Y=Q;break;case"defaultChecked":et=Q;break;case"value":E=Q;break;case"defaultValue":R=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==at&&ie(i,r,K,Q,u,at)}}mf(i,E,R,P,Y,et,p,f);return;case"select":Q=E=R=K=null;for(p in a)if(P=a[p],a.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":Q=P;default:u.hasOwnProperty(p)||ie(i,r,p,null,u,P)}for(f in u)if(p=u[f],P=a[f],u.hasOwnProperty(f)&&(p!=null||P!=null))switch(f){case"value":K=p;break;case"defaultValue":R=p;break;case"multiple":E=p;default:p!==P&&ie(i,r,f,p,u,P)}r=R,a=E,u=Q,K!=null?Cn(i,!!a,K,!1):!!u!=!!a&&(r!=null?Cn(i,!!a,r,!0):Cn(i,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(R in a)if(f=a[R],a.hasOwnProperty(R)&&f!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ie(i,r,R,null,u,f)}for(E in u)if(f=u[E],p=a[E],u.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":K=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&ie(i,r,E,f,u,p)}gy(i,K,Q);return;case"option":for(var Bt in a)if(K=a[Bt],a.hasOwnProperty(Bt)&&K!=null&&!u.hasOwnProperty(Bt))switch(Bt){case"selected":i.selected=!1;break;default:ie(i,r,Bt,null,u,K)}for(P in u)if(K=u[P],Q=a[P],u.hasOwnProperty(P)&&K!==Q&&(K!=null||Q!=null))switch(P){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ie(i,r,P,K,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in a)K=a[Ct],a.hasOwnProperty(Ct)&&K!=null&&!u.hasOwnProperty(Ct)&&ie(i,r,Ct,null,u,K);for(Y in u)if(K=u[Y],Q=a[Y],u.hasOwnProperty(Y)&&K!==Q&&(K!=null||Q!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:ie(i,r,Y,K,u,Q)}return;default:if(yf(r)){for(var re in a)K=a[re],a.hasOwnProperty(re)&&K!==void 0&&!u.hasOwnProperty(re)&&ep(i,r,re,void 0,u,K);for(et in u)K=u[et],Q=a[et],!u.hasOwnProperty(et)||K===Q||K===void 0&&Q===void 0||ep(i,r,et,K,u,Q);return}}for(var X in a)K=a[X],a.hasOwnProperty(X)&&K!=null&&!u.hasOwnProperty(X)&&ie(i,r,X,null,u,K);for(at in u)K=u[at],Q=a[at],!u.hasOwnProperty(at)||K===Q||K==null&&Q==null||ie(i,r,at,K,u,Q)}var ip=null,rp=null;function Ru(i){return i.nodeType===9?i:i.ownerDocument}function v1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _1(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function sp(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var np=null;function rR(){var i=window.event;return i&&i.type==="popstate"?i===np?!1:(np=i,!0):(np=null,!1)}var x1=typeof setTimeout=="function"?setTimeout:void 0,sR=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,nR=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(i){return b1.resolve(null).then(i).catch(aR)}:x1;function aR(i){setTimeout(function(){throw i})}function vs(i){return i==="head"}function E1(i,r){var a=r,u=0,f=0;do{var p=a.nextSibling;if(i.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<u&&8>u){a=u;var E=i.ownerDocument;if(a&1&&gl(E.documentElement),a&2&&gl(E.body),a&4)for(a=E.head,gl(a),E=a.firstChild;E;){var R=E.nextSibling,P=E.nodeName;E[Jr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=R}}if(f===0){i.removeChild(p),Al(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:u=a.charCodeAt(0)-48;else u=0;a=p}while(a);Al(r)}function ap(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ap(a),zs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function lR(i,r,a,u){for(;i.nodeType===1;){var f=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Jr])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Fi(i.nextSibling),i===null)break}return null}function oR(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Fi(i.nextSibling),i===null))return null;return i}function lp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function uR(i,r){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Fi(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var op=null;function T1(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return i;r--}else a==="/$"&&r++}i=i.previousSibling}return null}function A1(i,r,a){switch(r=Ru(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function gl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);zs(i)}var Ai=new Map,S1=new Set;function Cu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Lr=M.d;M.d={f:hR,r:cR,D:fR,C:dR,L:pR,m:mR,X:yR,S:gR,M:vR};function hR(){var i=Lr.f(),r=_u();return i||r}function cR(i){var r=ir(i);r!==null&&r.tag===5&&r.type==="form"?jv(r):Lr.r(i)}var sa=typeof document>"u"?null:document;function w1(i,r,a){var u=sa;if(u&&typeof r=="string"&&r){var f=yi(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),S1.has(f)||(S1.add(f),i={rel:i,crossOrigin:a,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),ke(r,"link",i),de(r),u.head.appendChild(r)))}}function fR(i){Lr.D(i),w1("dns-prefetch",i,null)}function dR(i,r){Lr.C(i,r),w1("preconnect",i,r)}function pR(i,r,a){Lr.L(i,r,a);var u=sa;if(u&&i&&r){var f='link[rel="preload"][as="'+yi(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+yi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+yi(a.imageSizes)+'"]')):f+='[href="'+yi(i)+'"]';var p=f;switch(r){case"style":p=na(i);break;case"script":p=aa(i)}Ai.has(p)||(i=g({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Ai.set(p,i),u.querySelector(f)!==null||r==="style"&&u.querySelector(yl(p))||r==="script"&&u.querySelector(vl(p))||(r=u.createElement("link"),ke(r,"link",i),de(r),u.head.appendChild(r)))}}function mR(i,r){Lr.m(i,r);var a=sa;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+yi(u)+'"][href="'+yi(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=aa(i)}if(!Ai.has(p)&&(i=g({rel:"modulepreload",href:i},r),Ai.set(p,i),a.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vl(p)))return}u=a.createElement("link"),ke(u,"link",i),de(u),a.head.appendChild(u)}}}function gR(i,r,a){Lr.S(i,r,a);var u=sa;if(u&&i){var f=es(u).hoistableStyles,p=na(i);r=r||"default";var E=f.get(p);if(!E){var R={loading:0,preload:null};if(E=u.querySelector(yl(p)))R.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Ai.get(p))&&up(i,a);var P=E=u.createElement("link");de(P),ke(P,"link",i),P._p=new Promise(function(Y,et){P.onload=Y,P.onerror=et}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Mu(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:R},f.set(p,E)}}}function yR(i,r){Lr.X(i,r);var a=sa;if(a&&i){var u=es(a).hoistableScripts,f=aa(i),p=u.get(f);p||(p=a.querySelector(vl(f)),p||(i=g({src:i,async:!0},r),(r=Ai.get(f))&&hp(i,r),p=a.createElement("script"),de(p),ke(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function vR(i,r){Lr.M(i,r);var a=sa;if(a&&i){var u=es(a).hoistableScripts,f=aa(i),p=u.get(f);p||(p=a.querySelector(vl(f)),p||(i=g({src:i,async:!0,type:"module"},r),(r=Ai.get(f))&&hp(i,r),p=a.createElement("script"),de(p),ke(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function R1(i,r,a,u){var f=(f=nt.current)?Cu(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=na(a.href),a=es(f).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=na(a.href);var p=es(f).hoistableStyles,E=p.get(i);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,E),(p=f.querySelector(yl(i)))&&!p._p&&(E.instance=p,E.state.loading=5),Ai.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ai.set(i,a),p||_R(f,i,a,E.state))),r&&u===null)throw Error(s(528,""));return E}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=aa(a),a=es(f).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function na(i){return'href="'+yi(i)+'"'}function yl(i){return'link[rel="stylesheet"]['+i+"]"}function C1(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function _R(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),ke(r,"link",a),de(r),i.head.appendChild(r))}function aa(i){return'[src="'+yi(i)+'"]'}function vl(i){return"script[async]"+i}function M1(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+yi(a.href)+'"]');if(u)return r.instance=u,de(u),u;var f=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),de(u),ke(u,"style",f),Mu(u,a.precedence,i),r.instance=u;case"stylesheet":f=na(a.href);var p=i.querySelector(yl(f));if(p)return r.state.loading|=4,r.instance=p,de(p),p;u=C1(a),(f=Ai.get(f))&&up(u,f),p=(i.ownerDocument||i).createElement("link"),de(p);var E=p;return E._p=new Promise(function(R,P){E.onload=R,E.onerror=P}),ke(p,"link",u),r.state.loading|=4,Mu(p,a.precedence,i),r.instance=p;case"script":return p=aa(a.src),(f=i.querySelector(vl(p)))?(r.instance=f,de(f),f):(u=a,(f=Ai.get(p))&&(u=g({},a),hp(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),de(f),ke(f,"link",u),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Mu(u,a.precedence,i));return r.instance}function Mu(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,E=0;E<u.length;E++){var R=u[E];if(R.dataset.precedence===r)p=R;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function up(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function hp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Du=null;function D1(i,r,a){if(Du===null){var u=new Map,f=Du=new Map;f.set(a,u)}else f=Du,u=f.get(a),u||(u=new Map,f.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),f=0;f<a.length;f++){var p=a[f];if(!(p[Jr]||p[Re]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(r)||"";E=i+E;var R=u.get(E);R?R.push(p):u.set(E,[p])}}return u}function O1(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function xR(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function B1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var _l=null;function bR(){}function ER(i,r,a){if(_l===null)throw Error(s(475));var u=_l;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=na(a.href),p=i.querySelector(yl(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Ou.bind(u),i.then(u,u)),r.state.loading|=4,r.instance=p,de(p);return}p=i.ownerDocument||i,a=C1(a),(f=Ai.get(f))&&up(a,f),p=p.createElement("link"),de(p);var E=p;E._p=new Promise(function(R,P){E.onload=R,E.onerror=P}),ke(p,"link",a),r.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Ou.bind(u),i.addEventListener("load",r),i.addEventListener("error",r))}}function TR(){if(_l===null)throw Error(s(475));var i=_l;return i.stylesheets&&i.count===0&&cp(i,i.stylesheets),0<i.count?function(r){var a=setTimeout(function(){if(i.stylesheets&&cp(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(a)}}:null}function Ou(){if(this.count--,this.count===0){if(this.stylesheets)cp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bu=null;function cp(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bu=new Map,r.forEach(AR,i),Bu=null,Ou.call(i))}function AR(i,r){if(!(r.state.loading&4)){var a=Bu.get(i);if(a)var u=a.get(null);else{a=new Map,Bu.set(i,a);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),u=E)}u&&a.set(null,u)}f=r.instance,E=f.getAttribute("data-precedence"),p=a.get(E)||u,p===u&&a.set(null,f),a.set(E,f),this.count++,u=Ou.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var xl={$$typeof:N,Provider:null,Consumer:null,_currentValue:C,_currentValue2:C,_threadCount:0};function SR(i,r,a,u,f,p,E,R){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=It(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.hiddenUpdates=It(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function N1(i,r,a,u,f,p,E,R,P,Y,et,at){return i=new SR(i,r,a,E,R,P,Y,at),r=1,p===!0&&(r|=24),p=ri(3,null,null,r),i.current=p,p.stateNode=i,r=Yf(),r.refCount++,i.pooledCache=r,r.refCount++,p.memoizedState={element:u,isDehydrated:a,cache:r},Zf(p),i}function I1(i){return i?(i=Ln,i):Ln}function U1(i,r,a,u,f,p){f=I1(f),u.context===null?u.context=f:u.pendingContext=f,u=ns(r),u.payload={element:a},p=p===void 0?null:p,p!==null&&(u.callback=p),a=as(i,u,r),a!==null&&(oi(a,i,r),Za(a,i,r))}function P1(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function fp(i,r){P1(i,r),(i=i.alternate)&&P1(i,r)}function L1(i){if(i.tag===13){var r=Pn(i,67108864);r!==null&&oi(r,i,67108864),fp(i,67108864)}}var Nu=!0;function wR(i,r,a,u){var f=S.T;S.T=null;var p=M.p;try{M.p=2,dp(i,r,a,u)}finally{M.p=p,S.T=f}}function RR(i,r,a,u){var f=S.T;S.T=null;var p=M.p;try{M.p=8,dp(i,r,a,u)}finally{M.p=p,S.T=f}}function dp(i,r,a,u){if(Nu){var f=pp(u);if(f===null)tp(i,r,u,Iu,a),G1(i,u);else if(MR(f,i,r,a,u))u.stopPropagation();else if(G1(i,u),r&4&&-1<CR.indexOf(i)){for(;f!==null;){var p=ir(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=mi(p.pendingLanes);if(E!==0){var R=p;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var P=1<<31-we(E);R.entanglements[1]|=P,E&=~P}lr(p),(Kt&6)===0&&(yu=qt()+500,dl(0))}}break;case 13:R=Pn(p,2),R!==null&&oi(R,p,2),_u(),fp(p,2)}if(p=pp(u),p===null&&tp(i,r,u,Iu,a),p===f)break;f=p}f!==null&&u.stopPropagation()}else tp(i,r,u,null,a)}}function pp(i){return i=_f(i),mp(i)}var Iu=null;function mp(i){if(Iu=null,i=_r(i),i!==null){var r=o(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=h(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Iu=i,null}function F1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case gr:return 2;case Ni:return 8;case ze:case $r:return 32;case yr:return 268435456;default:return 32}default:return 32}}var gp=!1,_s=null,xs=null,bs=null,bl=new Map,El=new Map,Es=[],CR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G1(i,r){switch(i){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":bl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(r.pointerId)}}function Tl(i,r,a,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},r!==null&&(r=ir(r),r!==null&&L1(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function MR(i,r,a,u,f){switch(r){case"focusin":return _s=Tl(_s,i,r,a,u,f),!0;case"dragenter":return xs=Tl(xs,i,r,a,u,f),!0;case"mouseover":return bs=Tl(bs,i,r,a,u,f),!0;case"pointerover":var p=f.pointerId;return bl.set(p,Tl(bl.get(p)||null,i,r,a,u,f)),!0;case"gotpointercapture":return p=f.pointerId,El.set(p,Tl(El.get(p)||null,i,r,a,u,f)),!0}return!1}function k1(i){var r=_r(i.target);if(r!==null){var a=o(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){i.blockedOn=r,Mo(i.priority,function(){if(a.tag===13){var u=li();u=Hs(u);var f=Pn(a,u);f!==null&&oi(f,a,u),fp(a,u)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Uu(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=pp(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);vf=u,a.target.dispatchEvent(u),vf=null}else return r=ir(a),r!==null&&L1(r),i.blockedOn=a,!1;r.shift()}return!0}function H1(i,r,a){Uu(i)&&a.delete(r)}function DR(){gp=!1,_s!==null&&Uu(_s)&&(_s=null),xs!==null&&Uu(xs)&&(xs=null),bs!==null&&Uu(bs)&&(bs=null),bl.forEach(H1),El.forEach(H1)}function Pu(i,r){i.blockedOn===r&&(i.blockedOn=null,gp||(gp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,DR)))}var Lu=null;function z1(i){Lu!==i&&(Lu=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Lu===i&&(Lu=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],f=i[r+2];if(typeof u!="function"){if(mp(u||a)===null)continue;break}var p=ir(a);p!==null&&(i.splice(r,3),r-=3,md(p,{pending:!0,data:f,method:a.method,action:u},u,f))}}))}function Al(i){function r(P){return Pu(P,i)}_s!==null&&Pu(_s,i),xs!==null&&Pu(xs,i),bs!==null&&Pu(bs,i),bl.forEach(r),El.forEach(r);for(var a=0;a<Es.length;a++){var u=Es[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Es.length&&(a=Es[0],a.blockedOn===null);)k1(a),a.blockedOn===null&&Es.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var f=a[u],p=a[u+1],E=f[Ee]||null;if(typeof p=="function")E||z1(a);else if(E){var R=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[Ee]||null)R=E.formAction;else if(mp(f)!==null)continue}else R=E.action;typeof R=="function"?a[u+1]=R:(a.splice(u,3),u-=3),z1(a)}}}function yp(i){this._internalRoot=i}Fu.prototype.render=yp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=li();U1(a,u,i,r,null,null)},Fu.prototype.unmount=yp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;U1(i.current,2,null,i,null,null),_u(),r[er]=null}};function Fu(i){this._internalRoot=i}Fu.prototype.unstable_scheduleHydration=function(i){if(i){var r=Ze();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Es.length&&r!==0&&r<Es[a].priority;a++);Es.splice(a,0,i),a===0&&k1(i)}};var X1=t.version;if(X1!=="19.1.0")throw Error(s(527,X1,"19.1.0"));M.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=d(r),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var OR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{ks=Gu.inject(OR),Xe=Gu}catch{}}return fa.createRoot=function(i,r){if(!l(i))throw Error(s(299));var a=!1,u="",f=n_,p=a_,E=l_,R=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(R=r.unstable_transitionCallbacks)),r=N1(i,1,!1,null,null,a,u,f,p,E,R,null),i[er]=r.current,Jd(i),new yp(r)},fa.hydrateRoot=function(i,r,a){if(!l(i))throw Error(s(299));var u=!1,f="",p=n_,E=a_,R=l_,P=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),r=N1(i,1,!0,r,a??null,u,f,p,E,R,P,Y),r.context=I1(null),a=r.current,u=li(),u=Hs(u),f=ns(u),f.callback=null,as(a,f,u),a=u,r.current.lanes=a,$e(r,a),lr(r),i[er]=r.current,Jd(i),new Fu(r)},fa.version="19.1.0",fa}var Ip;function sx(){if(Ip)return Wu.exports;Ip=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Wu.exports=rx(),Wu.exports}var nx=sx();const ax=hi(nx);var As=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(As||{}),Qu=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(Qu||{}),Ju=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(Ju||{}),Mt=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(Mt||{}),zi=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(zi||{}),ht=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(ht||{}),on=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(on||{}),wt=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(wt||{}),gt=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(gt||{}),Xi=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(Xi||{}),Fr=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(Fr||{}),Vi=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(Vi||{}),We=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(We||{}),ji=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(ji||{}),th=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(th||{}),ci=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(ci||{}),Se=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(Se||{}),be=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(be||{}),Yi=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(Yi||{});const mt={ADAPTER:{createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")},RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var eh=/iPhone/i,Up=/iPod/i,Pp=/iPad/i,Lp=/\biOS-universal(?:.+)Mac\b/i,ih=/\bAndroid(?:.+)Mobile\b/i,Fp=/Android/i,un=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ol=/Silk/i,ur=/Windows Phone/i,Gp=/\bWindows(?:.+)ARM\b/i,kp=/BlackBerry/i,Hp=/BB10/i,zp=/Opera Mini/i,Xp=/\b(CriOS|Chrome)(?:.+)Mobile/i,Vp=/Mobile(?:.+)Firefox\b/i,jp=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function lx(n){return function(t){return t.test(n)}}function Yp(n){var t={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?t.userAgent=n:n&&n.userAgent&&(t={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var e=t.userAgent,s=e.split("[FBAN");typeof s[1]<"u"&&(e=s[0]),s=e.split("Twitter"),typeof s[1]<"u"&&(e=s[0]);var l=lx(e),o={apple:{phone:l(eh)&&!l(ur),ipod:l(Up),tablet:!l(eh)&&(l(Pp)||jp(t))&&!l(ur),universal:l(Lp),device:(l(eh)||l(Up)||l(Pp)||l(Lp)||jp(t))&&!l(ur)},amazon:{phone:l(un),tablet:!l(un)&&l(Ol),device:l(un)||l(Ol)},android:{phone:!l(ur)&&l(un)||!l(ur)&&l(ih),tablet:!l(ur)&&!l(un)&&!l(ih)&&(l(Ol)||l(Fp)),device:!l(ur)&&(l(un)||l(Ol)||l(ih)||l(Fp))||l(/\bokhttp\b/i)},windows:{phone:l(ur),tablet:l(Gp),device:l(ur)||l(Gp)},other:{blackberry:l(kp),blackberry10:l(Hp),opera:l(zp),firefox:l(Vp),chrome:l(Xp),device:l(kp)||l(Hp)||l(zp)||l(Vp)||l(Xp)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const ox=Yp.default??Yp,hr=ox(globalThis.navigator);mt.RETINA_PREFIX=/@([0-9\.]+)x/,mt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var rh={exports:{}},qp;function ux(){return qp||(qp=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function l(d,m,g){this.fn=d,this.context=m,this.once=g||!1}function o(d,m,g,y,x){if(typeof g!="function")throw new TypeError("The listener must be a function");var _=new l(g,y||d,x),v=e?e+m:m;return d._events[v]?d._events[v].fn?d._events[v]=[d._events[v],_]:d._events[v].push(_):(d._events[v]=_,d._eventsCount++),d}function h(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],g,y;if(this._eventsCount===0)return m;for(y in g=this._events)t.call(g,y)&&m.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},c.prototype.listeners=function(m){var g=e?e+m:m,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var x=0,_=y.length,v=new Array(_);x<_;x++)v[x]=y[x].fn;return v},c.prototype.listenerCount=function(m){var g=e?e+m:m,y=this._events[g];return y?y.fn?1:y.length:0},c.prototype.emit=function(m,g,y,x,_,v){var T=e?e+m:m;if(!this._events[T])return!1;var b=this._events[T],w=arguments.length,U,N;if(b.fn){switch(b.once&&this.removeListener(m,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,g),!0;case 3:return b.fn.call(b.context,g,y),!0;case 4:return b.fn.call(b.context,g,y,x),!0;case 5:return b.fn.call(b.context,g,y,x,_),!0;case 6:return b.fn.call(b.context,g,y,x,_,v),!0}for(N=1,U=new Array(w-1);N<w;N++)U[N-1]=arguments[N];b.fn.apply(b.context,U)}else{var L=b.length,B;for(N=0;N<L;N++)switch(b[N].once&&this.removeListener(m,b[N].fn,void 0,!0),w){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,g);break;case 3:b[N].fn.call(b[N].context,g,y);break;case 4:b[N].fn.call(b[N].context,g,y,x);break;default:if(!U)for(B=1,U=new Array(w-1);B<w;B++)U[B-1]=arguments[B];b[N].fn.apply(b[N].context,U)}}return!0},c.prototype.on=function(m,g,y){return o(this,m,g,y,!1)},c.prototype.once=function(m,g,y){return o(this,m,g,y,!0)},c.prototype.removeListener=function(m,g,y,x){var _=e?e+m:m;if(!this._events[_])return this;if(!g)return h(this,_),this;var v=this._events[_];if(v.fn)v.fn===g&&(!x||v.once)&&(!y||v.context===y)&&h(this,_);else{for(var T=0,b=[],w=v.length;T<w;T++)(v[T].fn!==g||x&&!v[T].once||y&&v[T].context!==y)&&b.push(v[T]);b.length?this._events[_]=b.length===1?b[0]:b:h(this,_)}return this},c.prototype.removeAllListeners=function(m){var g;return m?(g=e?e+m:m,this._events[g]&&h(this,g)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c}(rh)),rh.exports}var hx=ux();const da=hi(hx);var Bl={exports:{}},Wp;function cx(){if(Wp)return Bl.exports;Wp=1,Bl.exports=n,Bl.exports.default=n;function n(S,M,C){C=C||2;var H=M&&M.length,A=H?M[0]*C:S.length,D=t(S,0,A,C,!0),G=[];if(!D||D.next===D.prev)return G;var F,Z,it,nt,dt,ct,yt;if(H&&(D=d(S,M,D,C)),S.length>80*C){F=it=S[0],Z=nt=S[1];for(var ot=C;ot<A;ot+=C)dt=S[ot],ct=S[ot+1],dt<F&&(F=dt),ct<Z&&(Z=ct),dt>it&&(it=dt),ct>nt&&(nt=ct);yt=Math.max(it-F,nt-Z),yt=yt!==0?32767/yt:0}return s(D,G,C,F,Z,yt,0),G}function t(S,M,C,H,A){var D,G;if(A===ut(S,M,C,H)>0)for(D=M;D<C;D+=H)G=z(D,S[D],S[D+1],G);else for(D=C-H;D>=M;D-=H)G=z(D,S[D],S[D+1],G);return G&&L(G,G.next)&&(W(G),G=G.next),G}function e(S,M){if(!S)return S;M||(M=S);var C=S,H;do if(H=!1,!C.steiner&&(L(C,C.next)||N(C.prev,C,C.next)===0)){if(W(C),C=M=C.prev,C===C.next)break;H=!0}else C=C.next;while(H||C!==M);return M}function s(S,M,C,H,A,D,G){if(S){!G&&D&&_(S,H,A,D);for(var F=S,Z,it;S.prev!==S.next;){if(Z=S.prev,it=S.next,D?o(S,H,A,D):l(S)){M.push(Z.i/C|0),M.push(S.i/C|0),M.push(it.i/C|0),W(S),S=it.next,F=it.next;continue}if(S=it,S===F){G?G===1?(S=h(e(S),M,C),s(S,M,C,H,A,D,2)):G===2&&c(S,M,C,H,A,D):s(e(S),M,C,H,A,D,1);break}}}}function l(S){var M=S.prev,C=S,H=S.next;if(N(M,C,H)>=0)return!1;for(var A=M.x,D=C.x,G=H.x,F=M.y,Z=C.y,it=H.y,nt=A<D?A<G?A:G:D<G?D:G,dt=F<Z?F<it?F:it:Z<it?Z:it,ct=A>D?A>G?A:G:D>G?D:G,yt=F>Z?F>it?F:it:Z>it?Z:it,ot=H.next;ot!==M;){if(ot.x>=nt&&ot.x<=ct&&ot.y>=dt&&ot.y<=yt&&w(A,F,D,Z,G,it,ot.x,ot.y)&&N(ot.prev,ot,ot.next)>=0)return!1;ot=ot.next}return!0}function o(S,M,C,H){var A=S.prev,D=S,G=S.next;if(N(A,D,G)>=0)return!1;for(var F=A.x,Z=D.x,it=G.x,nt=A.y,dt=D.y,ct=G.y,yt=F<Z?F<it?F:it:Z<it?Z:it,ot=nt<dt?nt<ct?nt:ct:dt<ct?dt:ct,vt=F>Z?F>it?F:it:Z>it?Z:it,Et=nt>dt?nt>ct?nt:ct:dt>ct?dt:ct,Ot=T(yt,ot,M,C,H),Ft=T(vt,Et,M,C,H),Tt=S.prevZ,St=S.nextZ;Tt&&Tt.z>=Ot&&St&&St.z<=Ft;){if(Tt.x>=yt&&Tt.x<=vt&&Tt.y>=ot&&Tt.y<=Et&&Tt!==A&&Tt!==G&&w(F,nt,Z,dt,it,ct,Tt.x,Tt.y)&&N(Tt.prev,Tt,Tt.next)>=0||(Tt=Tt.prevZ,St.x>=yt&&St.x<=vt&&St.y>=ot&&St.y<=Et&&St!==A&&St!==G&&w(F,nt,Z,dt,it,ct,St.x,St.y)&&N(St.prev,St,St.next)>=0))return!1;St=St.nextZ}for(;Tt&&Tt.z>=Ot;){if(Tt.x>=yt&&Tt.x<=vt&&Tt.y>=ot&&Tt.y<=Et&&Tt!==A&&Tt!==G&&w(F,nt,Z,dt,it,ct,Tt.x,Tt.y)&&N(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.prevZ}for(;St&&St.z<=Ft;){if(St.x>=yt&&St.x<=vt&&St.y>=ot&&St.y<=Et&&St!==A&&St!==G&&w(F,nt,Z,dt,it,ct,St.x,St.y)&&N(St.prev,St,St.next)>=0)return!1;St=St.nextZ}return!0}function h(S,M,C){var H=S;do{var A=H.prev,D=H.next.next;!L(A,D)&&B(A,H,H.next,D)&&rt(A,D)&&rt(D,A)&&(M.push(A.i/C|0),M.push(H.i/C|0),M.push(D.i/C|0),W(H),W(H.next),H=S=D),H=H.next}while(H!==S);return e(H)}function c(S,M,C,H,A,D){var G=S;do{for(var F=G.next.next;F!==G.prev;){if(G.i!==F.i&&U(G,F)){var Z=ft(G,F);G=e(G,G.next),Z=e(Z,Z.next),s(G,M,C,H,A,D,0),s(Z,M,C,H,A,D,0);return}F=F.next}G=G.next}while(G!==S)}function d(S,M,C,H){var A=[],D,G,F,Z,it;for(D=0,G=M.length;D<G;D++)F=M[D]*H,Z=D<G-1?M[D+1]*H:S.length,it=t(S,F,Z,H,!1),it===it.next&&(it.steiner=!0),A.push(b(it));for(A.sort(m),D=0;D<A.length;D++)C=g(A[D],C);return C}function m(S,M){return S.x-M.x}function g(S,M){var C=y(S,M);if(!C)return M;var H=ft(C,S);return e(H,H.next),e(C,C.next)}function y(S,M){var C=M,H=S.x,A=S.y,D=-1/0,G;do{if(A<=C.y&&A>=C.next.y&&C.next.y!==C.y){var F=C.x+(A-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(F<=H&&F>D&&(D=F,G=C.x<C.next.x?C:C.next,F===H))return G}C=C.next}while(C!==M);if(!G)return null;var Z=G,it=G.x,nt=G.y,dt=1/0,ct;C=G;do H>=C.x&&C.x>=it&&H!==C.x&&w(A<nt?H:D,A,it,nt,A<nt?D:H,A,C.x,C.y)&&(ct=Math.abs(A-C.y)/(H-C.x),rt(C,S)&&(ct<dt||ct===dt&&(C.x>G.x||C.x===G.x&&x(G,C)))&&(G=C,dt=ct)),C=C.next;while(C!==Z);return G}function x(S,M){return N(S.prev,S,M.prev)<0&&N(M.next,S,S.next)<0}function _(S,M,C,H){var A=S;do A.z===0&&(A.z=T(A.x,A.y,M,C,H)),A.prevZ=A.prev,A.nextZ=A.next,A=A.next;while(A!==S);A.prevZ.nextZ=null,A.prevZ=null,v(A)}function v(S){var M,C,H,A,D,G,F,Z,it=1;do{for(C=S,S=null,D=null,G=0;C;){for(G++,H=C,F=0,M=0;M<it&&(F++,H=H.nextZ,!!H);M++);for(Z=it;F>0||Z>0&&H;)F!==0&&(Z===0||!H||C.z<=H.z)?(A=C,C=C.nextZ,F--):(A=H,H=H.nextZ,Z--),D?D.nextZ=A:S=A,A.prevZ=D,D=A;C=H}D.nextZ=null,it*=2}while(G>1);return S}function T(S,M,C,H,A){return S=(S-C)*A|0,M=(M-H)*A|0,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,M=(M|M<<8)&16711935,M=(M|M<<4)&252645135,M=(M|M<<2)&858993459,M=(M|M<<1)&1431655765,S|M<<1}function b(S){var M=S,C=S;do(M.x<C.x||M.x===C.x&&M.y<C.y)&&(C=M),M=M.next;while(M!==S);return C}function w(S,M,C,H,A,D,G,F){return(A-G)*(M-F)>=(S-G)*(D-F)&&(S-G)*(H-F)>=(C-G)*(M-F)&&(C-G)*(D-F)>=(A-G)*(H-F)}function U(S,M){return S.next.i!==M.i&&S.prev.i!==M.i&&!q(S,M)&&(rt(S,M)&&rt(M,S)&&lt(S,M)&&(N(S.prev,S,M.prev)||N(S,M.prev,M))||L(S,M)&&N(S.prev,S,S.next)>0&&N(M.prev,M,M.next)>0)}function N(S,M,C){return(M.y-S.y)*(C.x-M.x)-(M.x-S.x)*(C.y-M.y)}function L(S,M){return S.x===M.x&&S.y===M.y}function B(S,M,C,H){var A=O(N(S,M,C)),D=O(N(S,M,H)),G=O(N(C,H,S)),F=O(N(C,H,M));return!!(A!==D&&G!==F||A===0&&j(S,C,M)||D===0&&j(S,H,M)||G===0&&j(C,S,H)||F===0&&j(C,M,H))}function j(S,M,C){return M.x<=Math.max(S.x,C.x)&&M.x>=Math.min(S.x,C.x)&&M.y<=Math.max(S.y,C.y)&&M.y>=Math.min(S.y,C.y)}function O(S){return S>0?1:S<0?-1:0}function q(S,M){var C=S;do{if(C.i!==S.i&&C.next.i!==S.i&&C.i!==M.i&&C.next.i!==M.i&&B(C,C.next,S,M))return!0;C=C.next}while(C!==S);return!1}function rt(S,M){return N(S.prev,S,S.next)<0?N(S,M,S.next)>=0&&N(S,S.prev,M)>=0:N(S,M,S.prev)<0||N(S,S.next,M)<0}function lt(S,M){var C=S,H=!1,A=(S.x+M.x)/2,D=(S.y+M.y)/2;do C.y>D!=C.next.y>D&&C.next.y!==C.y&&A<(C.next.x-C.x)*(D-C.y)/(C.next.y-C.y)+C.x&&(H=!H),C=C.next;while(C!==S);return H}function ft(S,M){var C=new tt(S.i,S.x,S.y),H=new tt(M.i,M.x,M.y),A=S.next,D=M.prev;return S.next=M,M.prev=S,C.next=A,A.prev=C,H.next=C,C.prev=H,D.next=H,H.prev=D,H}function z(S,M,C,H){var A=new tt(S,M,C);return H?(A.next=H.next,A.prev=H,H.next.prev=A,H.next=A):(A.prev=A,A.next=A),A}function W(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function tt(S,M,C){this.i=S,this.x=M,this.y=C,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(S,M,C,H){var A=M&&M.length,D=A?M[0]*C:S.length,G=Math.abs(ut(S,0,D,C));if(A)for(var F=0,Z=M.length;F<Z;F++){var it=M[F]*C,nt=F<Z-1?M[F+1]*C:S.length;G-=Math.abs(ut(S,it,nt,C))}var dt=0;for(F=0;F<H.length;F+=3){var ct=H[F]*C,yt=H[F+1]*C,ot=H[F+2]*C;dt+=Math.abs((S[ct]-S[ot])*(S[yt+1]-S[ct+1])-(S[ct]-S[yt])*(S[ot+1]-S[ct+1]))}return G===0&&dt===0?0:Math.abs((dt-G)/G)};function ut(S,M,C,H){for(var A=0,D=M,G=C-H;D<C;D+=H)A+=(S[G]-S[D])*(S[D+1]+S[G+1]),G=D;return A}return n.flatten=function(S){for(var M=S[0][0].length,C={vertices:[],holes:[],dimensions:M},H=0,A=0;A<S.length;A++){for(var D=0;D<S[A].length;D++)for(var G=0;G<M;G++)C.vertices.push(S[A][D][G]);A>0&&(H+=S[A-1].length,C.holes.push(H))}return C},Bl.exports}var fx=cx();const dx=hi(fx);var Ss={},pa={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var px=pa.exports,$p;function mx(){return $p||($p=1,function(n,t){(function(e){var s=t&&!t.nodeType&&t,l=n&&!n.nodeType&&n,o=typeof ki=="object"&&ki;(o.global===o||o.window===o||o.self===o)&&(e=o);var h,c=2147483647,d=36,m=1,g=26,y=38,x=700,_=72,v=128,T="-",b=/^xn--/,w=/[^\x20-\x7E]/,U=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=d-m,B=Math.floor,j=String.fromCharCode,O;function q(A){throw new RangeError(N[A])}function rt(A,D){for(var G=A.length,F=[];G--;)F[G]=D(A[G]);return F}function lt(A,D){var G=A.split("@"),F="";G.length>1&&(F=G[0]+"@",A=G[1]),A=A.replace(U,".");var Z=A.split("."),it=rt(Z,D).join(".");return F+it}function ft(A){for(var D=[],G=0,F=A.length,Z,it;G<F;)Z=A.charCodeAt(G++),Z>=55296&&Z<=56319&&G<F?(it=A.charCodeAt(G++),(it&64512)==56320?D.push(((Z&1023)<<10)+(it&1023)+65536):(D.push(Z),G--)):D.push(Z);return D}function z(A){return rt(A,function(D){var G="";return D>65535&&(D-=65536,G+=j(D>>>10&1023|55296),D=56320|D&1023),G+=j(D),G}).join("")}function W(A){return A-48<10?A-22:A-65<26?A-65:A-97<26?A-97:d}function tt(A,D){return A+22+75*(A<26)-((D!=0)<<5)}function ut(A,D,G){var F=0;for(A=G?B(A/x):A>>1,A+=B(A/D);A>L*g>>1;F+=d)A=B(A/L);return B(F+(L+1)*A/(A+y))}function S(A){var D=[],G=A.length,F,Z=0,it=v,nt=_,dt,ct,yt,ot,vt,Et,Ot,Ft,Tt;for(dt=A.lastIndexOf(T),dt<0&&(dt=0),ct=0;ct<dt;++ct)A.charCodeAt(ct)>=128&&q("not-basic"),D.push(A.charCodeAt(ct));for(yt=dt>0?dt+1:0;yt<G;){for(ot=Z,vt=1,Et=d;yt>=G&&q("invalid-input"),Ot=W(A.charCodeAt(yt++)),(Ot>=d||Ot>B((c-Z)/vt))&&q("overflow"),Z+=Ot*vt,Ft=Et<=nt?m:Et>=nt+g?g:Et-nt,!(Ot<Ft);Et+=d)Tt=d-Ft,vt>B(c/Tt)&&q("overflow"),vt*=Tt;F=D.length+1,nt=ut(Z-ot,F,ot==0),B(Z/F)>c-it&&q("overflow"),it+=B(Z/F),Z%=F,D.splice(Z++,0,it)}return z(D)}function M(A){var D,G,F,Z,it,nt,dt,ct,yt,ot,vt,Et=[],Ot,Ft,Tt,St;for(A=ft(A),Ot=A.length,D=v,G=0,it=_,nt=0;nt<Ot;++nt)vt=A[nt],vt<128&&Et.push(j(vt));for(F=Z=Et.length,Z&&Et.push(T);F<Ot;){for(dt=c,nt=0;nt<Ot;++nt)vt=A[nt],vt>=D&&vt<dt&&(dt=vt);for(Ft=F+1,dt-D>B((c-G)/Ft)&&q("overflow"),G+=(dt-D)*Ft,D=dt,nt=0;nt<Ot;++nt)if(vt=A[nt],vt<D&&++G>c&&q("overflow"),vt==D){for(ct=G,yt=d;ot=yt<=it?m:yt>=it+g?g:yt-it,!(ct<ot);yt+=d)St=ct-ot,Tt=d-ot,Et.push(j(tt(ot+St%Tt,0))),ct=B(St/Tt);Et.push(j(tt(ct,0))),it=ut(G,Ft,F==Z),G=0,++F}++G,++D}return Et.join("")}function C(A){return lt(A,function(D){return b.test(D)?S(D.slice(4).toLowerCase()):D})}function H(A){return lt(A,function(D){return w.test(D)?"xn--"+M(D):D})}if(h={version:"1.4.1",ucs2:{decode:ft,encode:z},decode:S,encode:M,toASCII:H,toUnicode:C},s&&l)if(n.exports==s)l.exports=h;else for(O in h)h.hasOwnProperty(O)&&(s[O]=h[O]);else e.punycode=h})(px)}(pa,pa.exports)),pa.exports}var sh,Zp;function hn(){return Zp||(Zp=1,sh=TypeError),sh}const gx=ln(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var nh,Kp;function Nl(){if(Kp)return nh;Kp=1;var n=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=n&&t&&typeof t.get=="function"?t.get:null,s=n&&Map.prototype.forEach,l=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=l&&o&&typeof o.get=="function"?o.get:null,c=l&&Set.prototype.forEach,d=typeof WeakMap=="function"&&WeakMap.prototype,m=d?WeakMap.prototype.has:null,g=typeof WeakSet=="function"&&WeakSet.prototype,y=g?WeakSet.prototype.has:null,x=typeof WeakRef=="function"&&WeakRef.prototype,_=x?WeakRef.prototype.deref:null,v=Boolean.prototype.valueOf,T=Object.prototype.toString,b=Function.prototype.toString,w=String.prototype.match,U=String.prototype.slice,N=String.prototype.replace,L=String.prototype.toUpperCase,B=String.prototype.toLowerCase,j=RegExp.prototype.test,O=Array.prototype.concat,q=Array.prototype.join,rt=Array.prototype.slice,lt=Math.floor,ft=typeof BigInt=="function"?BigInt.prototype.valueOf:null,z=Object.getOwnPropertySymbols,W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,tt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ut=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===tt||!0)?Symbol.toStringTag:null,S=Object.prototype.propertyIsEnumerable,M=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function($){return $.__proto__}:null);function C($,J){if($===1/0||$===-1/0||$!==$||$&&$>-1e3&&$<1e3||j.call(/e/,J))return J;var Yt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof $=="number"){var Zt=$<0?-lt(-$):lt($);if(Zt!==$){var te=String(Zt),It=U.call(J,te.length+1);return N.call(te,Yt,"$&_")+"."+N.call(N.call(It,/([0-9]{3})/g,"$&_"),/_$/,"")}}return N.call(J,Yt,"$&_")}var H=gx,A=H.custom,D=Ft(A)?A:null,G={__proto__:null,double:'"',single:"'"},F={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};nh=function $(J,Yt,Zt,te){var It=Yt||{};if(qt(It,"quoteStyle")&&!qt(G,It.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(qt(It,"maxStringLength")&&(typeof It.maxStringLength=="number"?It.maxStringLength<0&&It.maxStringLength!==1/0:It.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var $e=qt(It,"customInspect")?It.customInspect:!0;if(typeof $e!="boolean"&&$e!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(qt(It,"indent")&&It.indent!==null&&It.indent!=="	"&&!(parseInt(It.indent,10)===It.indent&&It.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(qt(It,"numericSeparator")&&typeof It.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var vr=It.numericSeparator;if(typeof J>"u")return"undefined";if(J===null)return"null";if(typeof J=="boolean")return J?"true":"false";if(typeof J=="string")return Xe(J,It);if(typeof J=="number"){if(J===0)return 1/0/J>0?"0":"-0";var Ve=String(J);return vr?C(J,Ve):Ve}if(typeof J=="bigint"){var Ii=String(J)+"n";return vr?C(J,Ii):Ii}var Hs=typeof It.depth>"u"?5:It.depth;if(typeof Zt>"u"&&(Zt=0),Zt>=Hs&&Hs>0&&typeof J=="object")return dt(J)?"[Array]":"[Object]";var tr=wn(It,Zt);if(typeof te>"u")te=[];else if(Ni(te,J)>=0)return"[Circular]";function Ze(xr,Xs,br){if(Xs&&(te=rt.call(te),te.push(Xs)),br){var Er={depth:It.depth};return qt(It,"quoteStyle")&&(Er.quoteStyle=It.quoteStyle),$(xr,Er,Zt+1,te)}return $(xr,It,Zt+1,te)}if(typeof J=="function"&&!yt(J)){var Mo=gr(J),Ui=mi(J,Ze);return"[Function"+(Mo?": "+Mo:" (anonymous)")+"]"+(Ui.length>0?" { "+q.call(Ui,", ")+" }":"")}if(Ft(J)){var Re=tt?N.call(String(J),/^(Symbol\(.*\))_[^)]*$/,"$1"):W.call(J);return typeof J=="object"&&!tt?we(Re):Re}if(ks(J)){for(var Ee="<"+B.call(String(J.nodeName)),er=J.attributes||[],Qr=0;Qr<er.length;Qr++)Ee+=" "+er[Qr].name+"="+Z(it(er[Qr].value),"double",It);return Ee+=">",J.childNodes&&J.childNodes.length&&(Ee+="..."),Ee+="</"+B.call(String(J.nodeName))+">",Ee}if(dt(J)){if(J.length===0)return"[]";var Da=mi(J,Ze);return tr&&!cf(Da)?"["+Kr(Da,tr)+"]":"[ "+q.call(Da,", ")+" ]"}if(ot(J)){var Oa=mi(J,Ze);return!("cause"in Error.prototype)&&"cause"in J&&!S.call(J,"cause")?"{ ["+String(J)+"] "+q.call(O.call("[cause]: "+Ze(J.cause),Oa),", ")+" }":Oa.length===0?"["+String(J)+"]":"{ ["+String(J)+"] "+q.call(Oa,", ")+" }"}if(typeof J=="object"&&$e){if(D&&typeof J[D]=="function"&&H)return H(J,{depth:Hs-Zt});if($e!=="symbol"&&typeof J.inspect=="function")return J.inspect()}if(ze(J)){var Ba=[];return s&&s.call(J,function(xr,Xs){Ba.push(Ze(Xs,J,!0)+" => "+Ze(xr,J))}),Co("Map",e.call(J),Ba,tr)}if(Zr(J)){var Jr=[];return c&&c.call(J,function(xr){Jr.push(Ze(xr,J))}),Co("Set",h.call(J),Jr,tr)}if($r(J))return Ma("WeakMap");if(hf(J))return Ma("WeakSet");if(yr(J))return Ma("WeakRef");if(Et(J))return we(Ze(Number(J)));if(Tt(J))return we(Ze(ft.call(J)));if(Ot(J))return we(v.call(J));if(vt(J))return we(Ze(String(J)));if(typeof window<"u"&&J===window)return"{ [object Window] }";if(typeof globalThis<"u"&&J===globalThis||typeof ki<"u"&&J===ki)return"{ [object globalThis] }";if(!ct(J)&&!yt(J)){var zs=mi(J,Ze),_r=M?M(J)===Object.prototype:J instanceof Object||J.constructor===Object,ir=J instanceof Object?"":"null prototype",ts=!_r&&ut&&Object(J)===J&&ut in J?U.call(ve(J),8,-1):ir?"Object":"",es=_r||typeof J.constructor!="function"?"":J.constructor.name?J.constructor.name+" ":"",de=es+(ts||ir?"["+q.call(O.call([],ts||[],ir||[]),": ")+"] ":"");return zs.length===0?de+"{}":tr?de+"{"+Kr(zs,tr)+"}":de+"{ "+q.call(zs,", ")+" }"}return String(J)};function Z($,J,Yt){var Zt=Yt.quoteStyle||J,te=G[Zt];return te+$+te}function it($){return N.call(String($),/"/g,"&quot;")}function nt($){return!ut||!(typeof $=="object"&&(ut in $||typeof $[ut]<"u"))}function dt($){return ve($)==="[object Array]"&&nt($)}function ct($){return ve($)==="[object Date]"&&nt($)}function yt($){return ve($)==="[object RegExp]"&&nt($)}function ot($){return ve($)==="[object Error]"&&nt($)}function vt($){return ve($)==="[object String]"&&nt($)}function Et($){return ve($)==="[object Number]"&&nt($)}function Ot($){return ve($)==="[object Boolean]"&&nt($)}function Ft($){if(tt)return $&&typeof $=="object"&&$ instanceof Symbol;if(typeof $=="symbol")return!0;if(!$||typeof $!="object"||!W)return!1;try{return W.call($),!0}catch{}return!1}function Tt($){if(!$||typeof $!="object"||!ft)return!1;try{return ft.call($),!0}catch{}return!1}var St=Object.prototype.hasOwnProperty||function($){return $ in this};function qt($,J){return St.call($,J)}function ve($){return T.call($)}function gr($){if($.name)return $.name;var J=w.call(b.call($),/^function\s*([\w$]+)/);return J?J[1]:null}function Ni($,J){if($.indexOf)return $.indexOf(J);for(var Yt=0,Zt=$.length;Yt<Zt;Yt++)if($[Yt]===J)return Yt;return-1}function ze($){if(!e||!$||typeof $!="object")return!1;try{e.call($);try{h.call($)}catch{return!0}return $ instanceof Map}catch{}return!1}function $r($){if(!m||!$||typeof $!="object")return!1;try{m.call($,m);try{y.call($,y)}catch{return!0}return $ instanceof WeakMap}catch{}return!1}function yr($){if(!_||!$||typeof $!="object")return!1;try{return _.call($),!0}catch{}return!1}function Zr($){if(!h||!$||typeof $!="object")return!1;try{h.call($);try{e.call($)}catch{return!0}return $ instanceof Set}catch{}return!1}function hf($){if(!y||!$||typeof $!="object")return!1;try{y.call($,y);try{m.call($,m)}catch{return!0}return $ instanceof WeakSet}catch{}return!1}function ks($){return!$||typeof $!="object"?!1:typeof HTMLElement<"u"&&$ instanceof HTMLElement?!0:typeof $.nodeName=="string"&&typeof $.getAttribute=="function"}function Xe($,J){if($.length>J.maxStringLength){var Yt=$.length-J.maxStringLength,Zt="... "+Yt+" more character"+(Yt>1?"s":"");return Xe(U.call($,0,J.maxStringLength),J)+Zt}var te=F[J.quoteStyle||"single"];te.lastIndex=0;var It=N.call(N.call($,te,"\\$1"),/[\x00-\x1f]/g,Ji);return Z(It,"single",J)}function Ji($){var J=$.charCodeAt(0),Yt={8:"b",9:"t",10:"n",12:"f",13:"r"}[J];return Yt?"\\"+Yt:"\\x"+(J<16?"0":"")+L.call(J.toString(16))}function we($){return"Object("+$+")"}function Ma($){return $+" { ? }"}function Co($,J,Yt,Zt){var te=Zt?Kr(Yt,Zt):q.call(Yt,", ");return $+" ("+J+") {"+te+"}"}function cf($){for(var J=0;J<$.length;J++)if(Ni($[J],`
`)>=0)return!1;return!0}function wn($,J){var Yt;if($.indent==="	")Yt="	";else if(typeof $.indent=="number"&&$.indent>0)Yt=q.call(Array($.indent+1)," ");else return null;return{base:Yt,prev:q.call(Array(J+1),Yt)}}function Kr($,J){if($.length===0)return"";var Yt=`
`+J.prev+J.base;return Yt+q.call($,","+Yt)+`
`+J.prev}function mi($,J){var Yt=dt($),Zt=[];if(Yt){Zt.length=$.length;for(var te=0;te<$.length;te++)Zt[te]=qt($,te)?J($[te],$):""}var It=typeof z=="function"?z($):[],$e;if(tt){$e={};for(var vr=0;vr<It.length;vr++)$e["$"+It[vr]]=It[vr]}for(var Ve in $)qt($,Ve)&&(Yt&&String(Number(Ve))===Ve&&Ve<$.length||tt&&$e["$"+Ve]instanceof Symbol||(j.call(/[^\w$]/,Ve)?Zt.push(J(Ve,$)+": "+J($[Ve],$)):Zt.push(Ve+": "+J($[Ve],$))));if(typeof z=="function")for(var Ii=0;Ii<It.length;Ii++)S.call($,It[Ii])&&Zt.push("["+J(It[Ii])+"]: "+J($[It[Ii]],$));return Zt}return nh}var ah,Qp;function yx(){if(Qp)return ah;Qp=1;var n=Nl(),t=hn(),e=function(c,d,m){for(var g=c,y;(y=g.next)!=null;g=y)if(y.key===d)return g.next=y.next,m||(y.next=c.next,c.next=y),y},s=function(c,d){if(c){var m=e(c,d);return m&&m.value}},l=function(c,d,m){var g=e(c,d);g?g.value=m:c.next={key:d,next:c.next,value:m}},o=function(c,d){return c?!!e(c,d):!1},h=function(c,d){if(c)return e(c,d,!0)};return ah=function(){var d,m={assert:function(g){if(!m.has(g))throw new t("Side channel does not contain "+n(g))},delete:function(g){var y=d&&d.next,x=h(d,g);return x&&y&&y===x&&(d=void 0),!!x},get:function(g){return s(d,g)},has:function(g){return o(d,g)},set:function(g,y){d||(d={next:void 0}),l(d,g,y)}};return m},ah}var lh,Jp;function tm(){return Jp||(Jp=1,lh=Object),lh}var oh,em;function vx(){return em||(em=1,oh=Error),oh}var uh,im;function _x(){return im||(im=1,uh=EvalError),uh}var hh,rm;function xx(){return rm||(rm=1,hh=RangeError),hh}var ch,sm;function bx(){return sm||(sm=1,ch=ReferenceError),ch}var fh,nm;function Ex(){return nm||(nm=1,fh=SyntaxError),fh}var dh,am;function Tx(){return am||(am=1,dh=URIError),dh}var ph,lm;function Ax(){return lm||(lm=1,ph=Math.abs),ph}var mh,om;function Sx(){return om||(om=1,mh=Math.floor),mh}var gh,um;function wx(){return um||(um=1,gh=Math.max),gh}var yh,hm;function Rx(){return hm||(hm=1,yh=Math.min),yh}var vh,cm;function Cx(){return cm||(cm=1,vh=Math.pow),vh}var _h,fm;function Mx(){return fm||(fm=1,_h=Math.round),_h}var xh,dm;function Dx(){return dm||(dm=1,xh=Number.isNaN||function(t){return t!==t}),xh}var bh,pm;function Ox(){if(pm)return bh;pm=1;var n=Dx();return bh=function(e){return n(e)||e===0?e:e<0?-1:1},bh}var Eh,mm;function Bx(){return mm||(mm=1,Eh=Object.getOwnPropertyDescriptor),Eh}var Th,gm;function ym(){if(gm)return Th;gm=1;var n=Bx();if(n)try{n([],"length")}catch{n=null}return Th=n,Th}var Ah,vm;function Nx(){if(vm)return Ah;vm=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return Ah=n,Ah}var Sh,_m;function Ix(){return _m||(_m=1,Sh=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),s=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var l=42;t[e]=l;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var h=Object.getOwnPropertySymbols(t);if(h.length!==1||h[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,e);if(c.value!==l||c.enumerable!==!0)return!1}return!0}),Sh}var wh,xm;function Ux(){if(xm)return wh;xm=1;var n=typeof Symbol<"u"&&Symbol,t=Ix();return wh=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},wh}var Rh,bm;function Em(){return bm||(bm=1,Rh=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Rh}var Ch,Tm;function Am(){if(Tm)return Ch;Tm=1;var n=tm();return Ch=n.getPrototypeOf||null,Ch}var Mh,Sm;function Px(){if(Sm)return Mh;Sm=1;var n="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,e=Math.max,s="[object Function]",l=function(d,m){for(var g=[],y=0;y<d.length;y+=1)g[y]=d[y];for(var x=0;x<m.length;x+=1)g[x+d.length]=m[x];return g},o=function(d,m){for(var g=[],y=m,x=0;y<d.length;y+=1,x+=1)g[x]=d[y];return g},h=function(c,d){for(var m="",g=0;g<c.length;g+=1)m+=c[g],g+1<c.length&&(m+=d);return m};return Mh=function(d){var m=this;if(typeof m!="function"||t.apply(m)!==s)throw new TypeError(n+m);for(var g=o(arguments,1),y,x=function(){if(this instanceof y){var w=m.apply(this,l(g,arguments));return Object(w)===w?w:this}return m.apply(d,l(g,arguments))},_=e(0,m.length-g.length),v=[],T=0;T<_;T++)v[T]="$"+T;if(y=Function("binder","return function ("+h(v,",")+"){ return binder.apply(this,arguments); }")(x),m.prototype){var b=function(){};b.prototype=m.prototype,y.prototype=new b,b.prototype=null}return y},Mh}var Dh,wm;function Il(){if(wm)return Dh;wm=1;var n=Px();return Dh=Function.prototype.bind||n,Dh}var Oh,Rm;function Bh(){return Rm||(Rm=1,Oh=Function.prototype.call),Oh}var Nh,Cm;function Mm(){return Cm||(Cm=1,Nh=Function.prototype.apply),Nh}var Ih,Dm;function Lx(){return Dm||(Dm=1,Ih=typeof Reflect<"u"&&Reflect&&Reflect.apply),Ih}var Uh,Om;function Fx(){if(Om)return Uh;Om=1;var n=Il(),t=Mm(),e=Bh(),s=Lx();return Uh=s||n.call(e,t),Uh}var Ph,Bm;function Nm(){if(Bm)return Ph;Bm=1;var n=Il(),t=hn(),e=Bh(),s=Fx();return Ph=function(o){if(o.length<1||typeof o[0]!="function")throw new t("a function is required");return s(n,e,o)},Ph}var Lh,Im;function Gx(){if(Im)return Lh;Im=1;var n=Nm(),t=ym(),e;try{e=[].__proto__===Array.prototype}catch(h){if(!h||typeof h!="object"||!("code"in h)||h.code!=="ERR_PROTO_ACCESS")throw h}var s=!!e&&t&&t(Object.prototype,"__proto__"),l=Object,o=l.getPrototypeOf;return Lh=s&&typeof s.get=="function"?n([s.get]):typeof o=="function"?function(c){return o(c==null?c:l(c))}:!1,Lh}var Fh,Um;function kx(){if(Um)return Fh;Um=1;var n=Em(),t=Am(),e=Gx();return Fh=n?function(l){return n(l)}:t?function(l){if(!l||typeof l!="object"&&typeof l!="function")throw new TypeError("getProto: not an object");return t(l)}:e?function(l){return e(l)}:null,Fh}var Gh,Pm;function Hx(){if(Pm)return Gh;Pm=1;var n=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=Il();return Gh=e.call(n,t),Gh}var kh,Lm;function Hh(){if(Lm)return kh;Lm=1;var n,t=tm(),e=vx(),s=_x(),l=xx(),o=bx(),h=Ex(),c=hn(),d=Tx(),m=Ax(),g=Sx(),y=wx(),x=Rx(),_=Cx(),v=Mx(),T=Ox(),b=Function,w=function(yt){try{return b('"use strict"; return ('+yt+").constructor;")()}catch{}},U=ym(),N=Nx(),L=function(){throw new c},B=U?function(){try{return arguments.callee,L}catch{try{return U(arguments,"callee").get}catch{return L}}}():L,j=Ux()(),O=kx(),q=Am(),rt=Em(),lt=Mm(),ft=Bh(),z={},W=typeof Uint8Array>"u"||!O?n:O(Uint8Array),tt={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":j&&O?O([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":s,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":z,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":j&&O?O(O([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!j||!O?n:O(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":U,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":l,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!j||!O?n:O(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":j&&O?O(""[Symbol.iterator]()):n,"%Symbol%":j?Symbol:n,"%SyntaxError%":h,"%ThrowTypeError%":B,"%TypedArray%":W,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":ft,"%Function.prototype.apply%":lt,"%Object.defineProperty%":N,"%Object.getPrototypeOf%":q,"%Math.abs%":m,"%Math.floor%":g,"%Math.max%":y,"%Math.min%":x,"%Math.pow%":_,"%Math.round%":v,"%Math.sign%":T,"%Reflect.getPrototypeOf%":rt};if(O)try{null.error}catch(yt){var ut=O(O(yt));tt["%Error.prototype%"]=ut}var S=function yt(ot){var vt;if(ot==="%AsyncFunction%")vt=w("async function () {}");else if(ot==="%GeneratorFunction%")vt=w("function* () {}");else if(ot==="%AsyncGeneratorFunction%")vt=w("async function* () {}");else if(ot==="%AsyncGenerator%"){var Et=yt("%AsyncGeneratorFunction%");Et&&(vt=Et.prototype)}else if(ot==="%AsyncIteratorPrototype%"){var Ot=yt("%AsyncGenerator%");Ot&&O&&(vt=O(Ot.prototype))}return tt[ot]=vt,vt},M={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=Il(),H=Hx(),A=C.call(ft,Array.prototype.concat),D=C.call(lt,Array.prototype.splice),G=C.call(ft,String.prototype.replace),F=C.call(ft,String.prototype.slice),Z=C.call(ft,RegExp.prototype.exec),it=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,nt=/\\(\\)?/g,dt=function(ot){var vt=F(ot,0,1),Et=F(ot,-1);if(vt==="%"&&Et!=="%")throw new h("invalid intrinsic syntax, expected closing `%`");if(Et==="%"&&vt!=="%")throw new h("invalid intrinsic syntax, expected opening `%`");var Ot=[];return G(ot,it,function(Ft,Tt,St,qt){Ot[Ot.length]=St?G(qt,nt,"$1"):Tt||Ft}),Ot},ct=function(ot,vt){var Et=ot,Ot;if(H(M,Et)&&(Ot=M[Et],Et="%"+Ot[0]+"%"),H(tt,Et)){var Ft=tt[Et];if(Ft===z&&(Ft=S(Et)),typeof Ft>"u"&&!vt)throw new c("intrinsic "+ot+" exists, but is not available. Please file an issue!");return{alias:Ot,name:Et,value:Ft}}throw new h("intrinsic "+ot+" does not exist!")};return kh=function(ot,vt){if(typeof ot!="string"||ot.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof vt!="boolean")throw new c('"allowMissing" argument must be a boolean');if(Z(/^%?[^%]*%?$/,ot)===null)throw new h("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Et=dt(ot),Ot=Et.length>0?Et[0]:"",Ft=ct("%"+Ot+"%",vt),Tt=Ft.name,St=Ft.value,qt=!1,ve=Ft.alias;ve&&(Ot=ve[0],D(Et,A([0,1],ve)));for(var gr=1,Ni=!0;gr<Et.length;gr+=1){var ze=Et[gr],$r=F(ze,0,1),yr=F(ze,-1);if(($r==='"'||$r==="'"||$r==="`"||yr==='"'||yr==="'"||yr==="`")&&$r!==yr)throw new h("property names with quotes must have matching quotes");if((ze==="constructor"||!Ni)&&(qt=!0),Ot+="."+ze,Tt="%"+Ot+"%",H(tt,Tt))St=tt[Tt];else if(St!=null){if(!(ze in St)){if(!vt)throw new c("base intrinsic for "+ot+" exists, but the property is not available.");return}if(U&&gr+1>=Et.length){var Zr=U(St,ze);Ni=!!Zr,Ni&&"get"in Zr&&!("originalValue"in Zr.get)?St=Zr.get:St=St[ze]}else Ni=H(St,ze),St=St[ze];Ni&&!qt&&(tt[Tt]=St)}}return St},kh}var zh,Fm;function Gm(){if(Fm)return zh;Fm=1;var n=Hh(),t=Nm(),e=t([n("%String.prototype.indexOf%")]);return zh=function(l,o){var h=n(l,!!o);return typeof h=="function"&&e(l,".prototype.")>-1?t([h]):h},zh}var Xh,km;function Hm(){if(km)return Xh;km=1;var n=Hh(),t=Gm(),e=Nl(),s=hn(),l=n("%Map%",!0),o=t("Map.prototype.get",!0),h=t("Map.prototype.set",!0),c=t("Map.prototype.has",!0),d=t("Map.prototype.delete",!0),m=t("Map.prototype.size",!0);return Xh=!!l&&function(){var y,x={assert:function(_){if(!x.has(_))throw new s("Side channel does not contain "+e(_))},delete:function(_){if(y){var v=d(y,_);return m(y)===0&&(y=void 0),v}return!1},get:function(_){if(y)return o(y,_)},has:function(_){return y?c(y,_):!1},set:function(_,v){y||(y=new l),h(y,_,v)}};return x},Xh}var Vh,zm;function zx(){if(zm)return Vh;zm=1;var n=Hh(),t=Gm(),e=Nl(),s=Hm(),l=hn(),o=n("%WeakMap%",!0),h=t("WeakMap.prototype.get",!0),c=t("WeakMap.prototype.set",!0),d=t("WeakMap.prototype.has",!0),m=t("WeakMap.prototype.delete",!0);return Vh=o?function(){var y,x,_={assert:function(v){if(!_.has(v))throw new l("Side channel does not contain "+e(v))},delete:function(v){if(o&&v&&(typeof v=="object"||typeof v=="function")){if(y)return m(y,v)}else if(s&&x)return x.delete(v);return!1},get:function(v){return o&&v&&(typeof v=="object"||typeof v=="function")&&y?h(y,v):x&&x.get(v)},has:function(v){return o&&v&&(typeof v=="object"||typeof v=="function")&&y?d(y,v):!!x&&x.has(v)},set:function(v,T){o&&v&&(typeof v=="object"||typeof v=="function")?(y||(y=new o),c(y,v,T)):s&&(x||(x=s()),x.set(v,T))}};return _}:s,Vh}var jh,Xm;function Xx(){if(Xm)return jh;Xm=1;var n=hn(),t=Nl(),e=yx(),s=Hm(),l=zx(),o=l||s||e;return jh=function(){var c,d={assert:function(m){if(!d.has(m))throw new n("Side channel does not contain "+t(m))},delete:function(m){return!!c&&c.delete(m)},get:function(m){return c&&c.get(m)},has:function(m){return!!c&&c.has(m)},set:function(m,g){c||(c=o()),c.set(m,g)}};return d},jh}var Yh,Vm;function qh(){if(Vm)return Yh;Vm=1;var n=String.prototype.replace,t=/%20/g,e={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Yh={default:e.RFC3986,formatters:{RFC1738:function(s){return n.call(s,t,"+")},RFC3986:function(s){return String(s)}},RFC1738:e.RFC1738,RFC3986:e.RFC3986},Yh}var Wh,jm;function Ym(){if(jm)return Wh;jm=1;var n=qh(),t=Object.prototype.hasOwnProperty,e=Array.isArray,s=function(){for(var b=[],w=0;w<256;++w)b.push("%"+((w<16?"0":"")+w.toString(16)).toUpperCase());return b}(),l=function(w){for(;w.length>1;){var U=w.pop(),N=U.obj[U.prop];if(e(N)){for(var L=[],B=0;B<N.length;++B)typeof N[B]<"u"&&L.push(N[B]);U.obj[U.prop]=L}}},o=function(w,U){for(var N=U&&U.plainObjects?{__proto__:null}:{},L=0;L<w.length;++L)typeof w[L]<"u"&&(N[L]=w[L]);return N},h=function b(w,U,N){if(!U)return w;if(typeof U!="object"&&typeof U!="function"){if(e(w))w.push(U);else if(w&&typeof w=="object")(N&&(N.plainObjects||N.allowPrototypes)||!t.call(Object.prototype,U))&&(w[U]=!0);else return[w,U];return w}if(!w||typeof w!="object")return[w].concat(U);var L=w;return e(w)&&!e(U)&&(L=o(w,N)),e(w)&&e(U)?(U.forEach(function(B,j){if(t.call(w,j)){var O=w[j];O&&typeof O=="object"&&B&&typeof B=="object"?w[j]=b(O,B,N):w.push(B)}else w[j]=B}),w):Object.keys(U).reduce(function(B,j){var O=U[j];return t.call(B,j)?B[j]=b(B[j],O,N):B[j]=O,B},L)},c=function(w,U){return Object.keys(U).reduce(function(N,L){return N[L]=U[L],N},w)},d=function(b,w,U){var N=b.replace(/\+/g," ");if(U==="iso-8859-1")return N.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(N)}catch{return N}},m=1024,g=function(w,U,N,L,B){if(w.length===0)return w;var j=w;if(typeof w=="symbol"?j=Symbol.prototype.toString.call(w):typeof w!="string"&&(j=String(w)),N==="iso-8859-1")return escape(j).replace(/%u[0-9a-f]{4}/gi,function(W){return"%26%23"+parseInt(W.slice(2),16)+"%3B"});for(var O="",q=0;q<j.length;q+=m){for(var rt=j.length>=m?j.slice(q,q+m):j,lt=[],ft=0;ft<rt.length;++ft){var z=rt.charCodeAt(ft);if(z===45||z===46||z===95||z===126||z>=48&&z<=57||z>=65&&z<=90||z>=97&&z<=122||B===n.RFC1738&&(z===40||z===41)){lt[lt.length]=rt.charAt(ft);continue}if(z<128){lt[lt.length]=s[z];continue}if(z<2048){lt[lt.length]=s[192|z>>6]+s[128|z&63];continue}if(z<55296||z>=57344){lt[lt.length]=s[224|z>>12]+s[128|z>>6&63]+s[128|z&63];continue}ft+=1,z=65536+((z&1023)<<10|rt.charCodeAt(ft)&1023),lt[lt.length]=s[240|z>>18]+s[128|z>>12&63]+s[128|z>>6&63]+s[128|z&63]}O+=lt.join("")}return O},y=function(w){for(var U=[{obj:{o:w},prop:"o"}],N=[],L=0;L<U.length;++L)for(var B=U[L],j=B.obj[B.prop],O=Object.keys(j),q=0;q<O.length;++q){var rt=O[q],lt=j[rt];typeof lt=="object"&&lt!==null&&N.indexOf(lt)===-1&&(U.push({obj:j,prop:rt}),N.push(lt))}return l(U),w},x=function(w){return Object.prototype.toString.call(w)==="[object RegExp]"},_=function(w){return!w||typeof w!="object"?!1:!!(w.constructor&&w.constructor.isBuffer&&w.constructor.isBuffer(w))},v=function(w,U){return[].concat(w,U)},T=function(w,U){if(e(w)){for(var N=[],L=0;L<w.length;L+=1)N.push(U(w[L]));return N}return U(w)};return Wh={arrayToObject:o,assign:c,combine:v,compact:y,decode:d,encode:g,isBuffer:_,isRegExp:x,maybeMap:T,merge:h},Wh}var $h,qm;function Vx(){if(qm)return $h;qm=1;var n=Xx(),t=Ym(),e=qh(),s=Object.prototype.hasOwnProperty,l={brackets:function(b){return b+"[]"},comma:"comma",indices:function(b,w){return b+"["+w+"]"},repeat:function(b){return b}},o=Array.isArray,h=Array.prototype.push,c=function(T,b){h.apply(T,o(b)?b:[b])},d=Date.prototype.toISOString,m=e.default,g={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:m,formatter:e.formatters[m],indices:!1,serializeDate:function(b){return d.call(b)},skipNulls:!1,strictNullHandling:!1},y=function(b){return typeof b=="string"||typeof b=="number"||typeof b=="boolean"||typeof b=="symbol"||typeof b=="bigint"},x={},_=function T(b,w,U,N,L,B,j,O,q,rt,lt,ft,z,W,tt,ut,S,M){for(var C=b,H=M,A=0,D=!1;(H=H.get(x))!==void 0&&!D;){var G=H.get(b);if(A+=1,typeof G<"u"){if(G===A)throw new RangeError("Cyclic object value");D=!0}typeof H.get(x)>"u"&&(A=0)}if(typeof rt=="function"?C=rt(w,C):C instanceof Date?C=z(C):U==="comma"&&o(C)&&(C=t.maybeMap(C,function(Tt){return Tt instanceof Date?z(Tt):Tt})),C===null){if(B)return q&&!ut?q(w,g.encoder,S,"key",W):w;C=""}if(y(C)||t.isBuffer(C)){if(q){var F=ut?w:q(w,g.encoder,S,"key",W);return[tt(F)+"="+tt(q(C,g.encoder,S,"value",W))]}return[tt(w)+"="+tt(String(C))]}var Z=[];if(typeof C>"u")return Z;var it;if(U==="comma"&&o(C))ut&&q&&(C=t.maybeMap(C,q)),it=[{value:C.length>0?C.join(",")||null:void 0}];else if(o(rt))it=rt;else{var nt=Object.keys(C);it=lt?nt.sort(lt):nt}var dt=O?String(w).replace(/\./g,"%2E"):String(w),ct=N&&o(C)&&C.length===1?dt+"[]":dt;if(L&&o(C)&&C.length===0)return ct+"[]";for(var yt=0;yt<it.length;++yt){var ot=it[yt],vt=typeof ot=="object"&&ot&&typeof ot.value<"u"?ot.value:C[ot];if(!(j&&vt===null)){var Et=ft&&O?String(ot).replace(/\./g,"%2E"):String(ot),Ot=o(C)?typeof U=="function"?U(ct,Et):ct:ct+(ft?"."+Et:"["+Et+"]");M.set(b,A);var Ft=n();Ft.set(x,M),c(Z,T(vt,Ot,U,N,L,B,j,O,U==="comma"&&ut&&o(C)?null:q,rt,lt,ft,z,W,tt,ut,S,Ft))}}return Z},v=function(b){if(!b)return g;if(typeof b.allowEmptyArrays<"u"&&typeof b.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof b.encodeDotInKeys<"u"&&typeof b.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(b.encoder!==null&&typeof b.encoder<"u"&&typeof b.encoder!="function")throw new TypeError("Encoder has to be a function.");var w=b.charset||g.charset;if(typeof b.charset<"u"&&b.charset!=="utf-8"&&b.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var U=e.default;if(typeof b.format<"u"){if(!s.call(e.formatters,b.format))throw new TypeError("Unknown format option provided.");U=b.format}var N=e.formatters[U],L=g.filter;(typeof b.filter=="function"||o(b.filter))&&(L=b.filter);var B;if(b.arrayFormat in l?B=b.arrayFormat:"indices"in b?B=b.indices?"indices":"repeat":B=g.arrayFormat,"commaRoundTrip"in b&&typeof b.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var j=typeof b.allowDots>"u"?b.encodeDotInKeys===!0?!0:g.allowDots:!!b.allowDots;return{addQueryPrefix:typeof b.addQueryPrefix=="boolean"?b.addQueryPrefix:g.addQueryPrefix,allowDots:j,allowEmptyArrays:typeof b.allowEmptyArrays=="boolean"?!!b.allowEmptyArrays:g.allowEmptyArrays,arrayFormat:B,charset:w,charsetSentinel:typeof b.charsetSentinel=="boolean"?b.charsetSentinel:g.charsetSentinel,commaRoundTrip:!!b.commaRoundTrip,delimiter:typeof b.delimiter>"u"?g.delimiter:b.delimiter,encode:typeof b.encode=="boolean"?b.encode:g.encode,encodeDotInKeys:typeof b.encodeDotInKeys=="boolean"?b.encodeDotInKeys:g.encodeDotInKeys,encoder:typeof b.encoder=="function"?b.encoder:g.encoder,encodeValuesOnly:typeof b.encodeValuesOnly=="boolean"?b.encodeValuesOnly:g.encodeValuesOnly,filter:L,format:U,formatter:N,serializeDate:typeof b.serializeDate=="function"?b.serializeDate:g.serializeDate,skipNulls:typeof b.skipNulls=="boolean"?b.skipNulls:g.skipNulls,sort:typeof b.sort=="function"?b.sort:null,strictNullHandling:typeof b.strictNullHandling=="boolean"?b.strictNullHandling:g.strictNullHandling}};return $h=function(T,b){var w=T,U=v(b),N,L;typeof U.filter=="function"?(L=U.filter,w=L("",w)):o(U.filter)&&(L=U.filter,N=L);var B=[];if(typeof w!="object"||w===null)return"";var j=l[U.arrayFormat],O=j==="comma"&&U.commaRoundTrip;N||(N=Object.keys(w)),U.sort&&N.sort(U.sort);for(var q=n(),rt=0;rt<N.length;++rt){var lt=N[rt],ft=w[lt];U.skipNulls&&ft===null||c(B,_(ft,lt,j,O,U.allowEmptyArrays,U.strictNullHandling,U.skipNulls,U.encodeDotInKeys,U.encode?U.encoder:null,U.filter,U.sort,U.allowDots,U.serializeDate,U.format,U.formatter,U.encodeValuesOnly,U.charset,q))}var z=B.join(U.delimiter),W=U.addQueryPrefix===!0?"?":"";return U.charsetSentinel&&(U.charset==="iso-8859-1"?W+="utf8=%26%2310003%3B&":W+="utf8=%E2%9C%93&"),z.length>0?W+z:""},$h}var Zh,Wm;function jx(){if(Wm)return Zh;Wm=1;var n=Ym(),t=Object.prototype.hasOwnProperty,e=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},l=function(x){return x.replace(/&#(\d+);/g,function(_,v){return String.fromCharCode(parseInt(v,10))})},o=function(x,_,v){if(x&&typeof x=="string"&&_.comma&&x.indexOf(",")>-1)return x.split(",");if(_.throwOnLimitExceeded&&v>=_.arrayLimit)throw new RangeError("Array limit exceeded. Only "+_.arrayLimit+" element"+(_.arrayLimit===1?"":"s")+" allowed in an array.");return x},h="utf8=%26%2310003%3B",c="utf8=%E2%9C%93",d=function(_,v){var T={__proto__:null},b=v.ignoreQueryPrefix?_.replace(/^\?/,""):_;b=b.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var w=v.parameterLimit===1/0?void 0:v.parameterLimit,U=b.split(v.delimiter,v.throwOnLimitExceeded?w+1:w);if(v.throwOnLimitExceeded&&U.length>w)throw new RangeError("Parameter limit exceeded. Only "+w+" parameter"+(w===1?"":"s")+" allowed.");var N=-1,L,B=v.charset;if(v.charsetSentinel)for(L=0;L<U.length;++L)U[L].indexOf("utf8=")===0&&(U[L]===c?B="utf-8":U[L]===h&&(B="iso-8859-1"),N=L,L=U.length);for(L=0;L<U.length;++L)if(L!==N){var j=U[L],O=j.indexOf("]="),q=O===-1?j.indexOf("="):O+1,rt,lt;q===-1?(rt=v.decoder(j,s.decoder,B,"key"),lt=v.strictNullHandling?null:""):(rt=v.decoder(j.slice(0,q),s.decoder,B,"key"),lt=n.maybeMap(o(j.slice(q+1),v,e(T[rt])?T[rt].length:0),function(z){return v.decoder(z,s.decoder,B,"value")})),lt&&v.interpretNumericEntities&&B==="iso-8859-1"&&(lt=l(String(lt))),j.indexOf("[]=")>-1&&(lt=e(lt)?[lt]:lt);var ft=t.call(T,rt);ft&&v.duplicates==="combine"?T[rt]=n.combine(T[rt],lt):(!ft||v.duplicates==="last")&&(T[rt]=lt)}return T},m=function(x,_,v,T){var b=0;if(x.length>0&&x[x.length-1]==="[]"){var w=x.slice(0,-1).join("");b=Array.isArray(_)&&_[w]?_[w].length:0}for(var U=T?_:o(_,v,b),N=x.length-1;N>=0;--N){var L,B=x[N];if(B==="[]"&&v.parseArrays)L=v.allowEmptyArrays&&(U===""||v.strictNullHandling&&U===null)?[]:n.combine([],U);else{L=v.plainObjects?{__proto__:null}:{};var j=B.charAt(0)==="["&&B.charAt(B.length-1)==="]"?B.slice(1,-1):B,O=v.decodeDotInKeys?j.replace(/%2E/g,"."):j,q=parseInt(O,10);!v.parseArrays&&O===""?L={0:U}:!isNaN(q)&&B!==O&&String(q)===O&&q>=0&&v.parseArrays&&q<=v.arrayLimit?(L=[],L[q]=U):O!=="__proto__"&&(L[O]=U)}U=L}return U},g=function(_,v,T,b){if(_){var w=T.allowDots?_.replace(/\.([^.[]+)/g,"[$1]"):_,U=/(\[[^[\]]*])/,N=/(\[[^[\]]*])/g,L=T.depth>0&&U.exec(w),B=L?w.slice(0,L.index):w,j=[];if(B){if(!T.plainObjects&&t.call(Object.prototype,B)&&!T.allowPrototypes)return;j.push(B)}for(var O=0;T.depth>0&&(L=N.exec(w))!==null&&O<T.depth;){if(O+=1,!T.plainObjects&&t.call(Object.prototype,L[1].slice(1,-1))&&!T.allowPrototypes)return;j.push(L[1])}if(L){if(T.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+T.depth+" and strictDepth is true");j.push("["+w.slice(L.index)+"]")}return m(j,v,T,b)}},y=function(_){if(!_)return s;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.decodeDotInKeys<"u"&&typeof _.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(_.decoder!==null&&typeof _.decoder<"u"&&typeof _.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof _.throwOnLimitExceeded<"u"&&typeof _.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var v=typeof _.charset>"u"?s.charset:_.charset,T=typeof _.duplicates>"u"?s.duplicates:_.duplicates;if(T!=="combine"&&T!=="first"&&T!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var b=typeof _.allowDots>"u"?_.decodeDotInKeys===!0?!0:s.allowDots:!!_.allowDots;return{allowDots:b,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:typeof _.allowPrototypes=="boolean"?_.allowPrototypes:s.allowPrototypes,allowSparse:typeof _.allowSparse=="boolean"?_.allowSparse:s.allowSparse,arrayLimit:typeof _.arrayLimit=="number"?_.arrayLimit:s.arrayLimit,charset:v,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:s.charsetSentinel,comma:typeof _.comma=="boolean"?_.comma:s.comma,decodeDotInKeys:typeof _.decodeDotInKeys=="boolean"?_.decodeDotInKeys:s.decodeDotInKeys,decoder:typeof _.decoder=="function"?_.decoder:s.decoder,delimiter:typeof _.delimiter=="string"||n.isRegExp(_.delimiter)?_.delimiter:s.delimiter,depth:typeof _.depth=="number"||_.depth===!1?+_.depth:s.depth,duplicates:T,ignoreQueryPrefix:_.ignoreQueryPrefix===!0,interpretNumericEntities:typeof _.interpretNumericEntities=="boolean"?_.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof _.parameterLimit=="number"?_.parameterLimit:s.parameterLimit,parseArrays:_.parseArrays!==!1,plainObjects:typeof _.plainObjects=="boolean"?_.plainObjects:s.plainObjects,strictDepth:typeof _.strictDepth=="boolean"?!!_.strictDepth:s.strictDepth,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:s.strictNullHandling,throwOnLimitExceeded:typeof _.throwOnLimitExceeded=="boolean"?_.throwOnLimitExceeded:!1}};return Zh=function(x,_){var v=y(_);if(x===""||x===null||typeof x>"u")return v.plainObjects?{__proto__:null}:{};for(var T=typeof x=="string"?d(x,v):x,b=v.plainObjects?{__proto__:null}:{},w=Object.keys(T),U=0;U<w.length;++U){var N=w[U],L=g(N,T[N],v,typeof x=="string");b=n.merge(b,L,v)}return v.allowSparse===!0?b:n.compact(b)},Zh}var Kh,$m;function Yx(){if($m)return Kh;$m=1;var n=Vx(),t=jx(),e=qh();return Kh={formats:e,parse:t,stringify:n},Kh}var Zm;function qx(){if(Zm)return Ss;Zm=1;var n=mx();function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var e=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],h=["{","}","|","\\","^","`"].concat(o),c=["'"].concat(h),d=["%","/","?",";","#"].concat(c),m=["/","?","#"],g=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=Yx();function w(B,j,O){if(B&&typeof B=="object"&&B instanceof t)return B;var q=new t;return q.parse(B,j,O),q}t.prototype.parse=function(B,j,O){if(typeof B!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof B);var q=B.indexOf("?"),rt=q!==-1&&q<B.indexOf("#")?"?":"#",lt=B.split(rt),ft=/\\/g;lt[0]=lt[0].replace(ft,"/"),B=lt.join(rt);var z=B;if(z=z.trim(),!O&&B.split("#").length===1){var W=l.exec(z);if(W)return this.path=z,this.href=z,this.pathname=W[1],W[2]?(this.search=W[2],j?this.query=b.parse(this.search.substr(1)):this.query=this.search.substr(1)):j&&(this.search="",this.query={}),this}var tt=e.exec(z);if(tt){tt=tt[0];var ut=tt.toLowerCase();this.protocol=ut,z=z.substr(tt.length)}if(O||tt||z.match(/^\/\/[^@/]+@[^@/]+/)){var S=z.substr(0,2)==="//";S&&!(tt&&v[tt])&&(z=z.substr(2),this.slashes=!0)}if(!v[tt]&&(S||tt&&!T[tt])){for(var M=-1,C=0;C<m.length;C++){var H=z.indexOf(m[C]);H!==-1&&(M===-1||H<M)&&(M=H)}var A,D;M===-1?D=z.lastIndexOf("@"):D=z.lastIndexOf("@",M),D!==-1&&(A=z.slice(0,D),z=z.slice(D+1),this.auth=decodeURIComponent(A)),M=-1;for(var C=0;C<d.length;C++){var H=z.indexOf(d[C]);H!==-1&&(M===-1||H<M)&&(M=H)}M===-1&&(M=z.length),this.host=z.slice(0,M),z=z.slice(M),this.parseHost(),this.hostname=this.hostname||"";var G=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!G)for(var F=this.hostname.split(/\./),C=0,Z=F.length;C<Z;C++){var it=F[C];if(it&&!it.match(y)){for(var nt="",dt=0,ct=it.length;dt<ct;dt++)it.charCodeAt(dt)>127?nt+="x":nt+=it[dt];if(!nt.match(y)){var yt=F.slice(0,C),ot=F.slice(C+1),vt=it.match(x);vt&&(yt.push(vt[1]),ot.unshift(vt[2])),ot.length&&(z="/"+ot.join(".")+z),this.hostname=yt.join(".");break}}}this.hostname.length>g?this.hostname="":this.hostname=this.hostname.toLowerCase(),G||(this.hostname=n.toASCII(this.hostname));var Et=this.port?":"+this.port:"",Ot=this.hostname||"";this.host=Ot+Et,this.href+=this.host,G&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),z[0]!=="/"&&(z="/"+z))}if(!_[ut])for(var C=0,Z=c.length;C<Z;C++){var Ft=c[C];if(z.indexOf(Ft)!==-1){var Tt=encodeURIComponent(Ft);Tt===Ft&&(Tt=escape(Ft)),z=z.split(Ft).join(Tt)}}var St=z.indexOf("#");St!==-1&&(this.hash=z.substr(St),z=z.slice(0,St));var qt=z.indexOf("?");if(qt!==-1?(this.search=z.substr(qt),this.query=z.substr(qt+1),j&&(this.query=b.parse(this.query)),z=z.slice(0,qt)):j&&(this.search="",this.query={}),z&&(this.pathname=z),T[ut]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Et=this.pathname||"",ve=this.search||"";this.path=Et+ve}return this.href=this.format(),this};function U(B){return typeof B=="string"&&(B=w(B)),B instanceof t?B.format():t.prototype.format.call(B)}t.prototype.format=function(){var B=this.auth||"";B&&(B=encodeURIComponent(B),B=B.replace(/%3A/i,":"),B+="@");var j=this.protocol||"",O=this.pathname||"",q=this.hash||"",rt=!1,lt="";this.host?rt=B+this.host:this.hostname&&(rt=B+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(rt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(lt=b.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var ft=this.search||lt&&"?"+lt||"";return j&&j.substr(-1)!==":"&&(j+=":"),this.slashes||(!j||T[j])&&rt!==!1?(rt="//"+(rt||""),O&&O.charAt(0)!=="/"&&(O="/"+O)):rt||(rt=""),q&&q.charAt(0)!=="#"&&(q="#"+q),ft&&ft.charAt(0)!=="?"&&(ft="?"+ft),O=O.replace(/[?#]/g,function(z){return encodeURIComponent(z)}),ft=ft.replace("#","%23"),j+rt+O+ft+q};function N(B,j){return w(B,!1,!0).resolve(j)}t.prototype.resolve=function(B){return this.resolveObject(w(B,!1,!0)).format()};function L(B,j){return B?w(B,!1,!0).resolveObject(j):j}return t.prototype.resolveObject=function(B){if(typeof B=="string"){var j=new t;j.parse(B,!1,!0),B=j}for(var O=new t,q=Object.keys(this),rt=0;rt<q.length;rt++){var lt=q[rt];O[lt]=this[lt]}if(O.hash=B.hash,B.href==="")return O.href=O.format(),O;if(B.slashes&&!B.protocol){for(var ft=Object.keys(B),z=0;z<ft.length;z++){var W=ft[z];W!=="protocol"&&(O[W]=B[W])}return T[O.protocol]&&O.hostname&&!O.pathname&&(O.pathname="/",O.path=O.pathname),O.href=O.format(),O}if(B.protocol&&B.protocol!==O.protocol){if(!T[B.protocol]){for(var tt=Object.keys(B),ut=0;ut<tt.length;ut++){var S=tt[ut];O[S]=B[S]}return O.href=O.format(),O}if(O.protocol=B.protocol,!B.host&&!v[B.protocol]){for(var Z=(B.pathname||"").split("/");Z.length&&!(B.host=Z.shift()););B.host||(B.host=""),B.hostname||(B.hostname=""),Z[0]!==""&&Z.unshift(""),Z.length<2&&Z.unshift(""),O.pathname=Z.join("/")}else O.pathname=B.pathname;if(O.search=B.search,O.query=B.query,O.host=B.host||"",O.auth=B.auth,O.hostname=B.hostname||B.host,O.port=B.port,O.pathname||O.search){var M=O.pathname||"",C=O.search||"";O.path=M+C}return O.slashes=O.slashes||B.slashes,O.href=O.format(),O}var H=O.pathname&&O.pathname.charAt(0)==="/",A=B.host||B.pathname&&B.pathname.charAt(0)==="/",D=A||H||O.host&&B.pathname,G=D,F=O.pathname&&O.pathname.split("/")||[],Z=B.pathname&&B.pathname.split("/")||[],it=O.protocol&&!T[O.protocol];if(it&&(O.hostname="",O.port=null,O.host&&(F[0]===""?F[0]=O.host:F.unshift(O.host)),O.host="",B.protocol&&(B.hostname=null,B.port=null,B.host&&(Z[0]===""?Z[0]=B.host:Z.unshift(B.host)),B.host=null),D=D&&(Z[0]===""||F[0]==="")),A)O.host=B.host||B.host===""?B.host:O.host,O.hostname=B.hostname||B.hostname===""?B.hostname:O.hostname,O.search=B.search,O.query=B.query,F=Z;else if(Z.length)F||(F=[]),F.pop(),F=F.concat(Z),O.search=B.search,O.query=B.query;else if(B.search!=null){if(it){O.host=F.shift(),O.hostname=O.host;var nt=O.host&&O.host.indexOf("@")>0?O.host.split("@"):!1;nt&&(O.auth=nt.shift(),O.hostname=nt.shift(),O.host=O.hostname)}return O.search=B.search,O.query=B.query,(O.pathname!==null||O.search!==null)&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.href=O.format(),O}if(!F.length)return O.pathname=null,O.search?O.path="/"+O.search:O.path=null,O.href=O.format(),O;for(var dt=F.slice(-1)[0],ct=(O.host||B.host||F.length>1)&&(dt==="."||dt==="..")||dt==="",yt=0,ot=F.length;ot>=0;ot--)dt=F[ot],dt==="."?F.splice(ot,1):dt===".."?(F.splice(ot,1),yt++):yt&&(F.splice(ot,1),yt--);if(!D&&!G)for(;yt--;yt)F.unshift("..");D&&F[0]!==""&&(!F[0]||F[0].charAt(0)!=="/")&&F.unshift(""),ct&&F.join("/").substr(-1)!=="/"&&F.push("");var vt=F[0]===""||F[0]&&F[0].charAt(0)==="/";if(it){O.hostname=vt?"":F.length?F.shift():"",O.host=O.hostname;var nt=O.host&&O.host.indexOf("@")>0?O.host.split("@"):!1;nt&&(O.auth=nt.shift(),O.hostname=nt.shift(),O.host=O.hostname)}return D=D||O.host&&F.length,D&&!vt&&F.unshift(""),F.length>0?O.pathname=F.join("/"):(O.pathname=null,O.path=null),(O.pathname!==null||O.search!==null)&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.auth=B.auth||O.auth,O.slashes=O.slashes||B.slashes,O.href=O.format(),O},t.prototype.parseHost=function(){var B=this.host,j=s.exec(B);j&&(j=j[0],j!==":"&&(this.port=j.substr(1)),B=B.substr(0,B.length-j.length)),B&&(this.hostname=B)},Ss.parse=w,Ss.resolve=N,Ss.resolveObject=L,Ss.format=U,Ss.Url=t,Ss}qx();const Km={};function Ht(n,t,e=3){if(Km[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(s=s.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(s))),Km[t]=!0}function Si(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function ma(n){return n.split("?")[0].split("#")[0]}function Wx(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $x(n,t,e){return n.replace(new RegExp(Wx(t),"g"),e)}function Zx(n,t){let e="",s=0,l=-1,o=0,h=-1;for(let c=0;c<=n.length;++c){if(c<n.length)h=n.charCodeAt(c);else{if(h===47)break;h=47}if(h===47){if(!(l===c-1||o===1))if(l!==c-1&&o===2){if(e.length<2||s!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const d=e.lastIndexOf("/");if(d!==e.length-1){d===-1?(e="",s=0):(e=e.slice(0,d),s=e.length-1-e.lastIndexOf("/")),l=c,o=0;continue}}else if(e.length===2||e.length===1){e="",s=0,l=c,o=0;continue}}}else e.length>0?e+=`/${n.slice(l+1,c)}`:e=n.slice(l+1,c),s=c-l-1;l=c,o=0}else h===46&&o!==-1?++o:o=-1}return e}const De={toPosix(n){return $x(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Si(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(Si(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const s=ma(this.toPosix(t??mt.ADAPTER.getBaseUrl())),l=ma(this.toPosix(e??this.rootname(s)));return n=this.toPosix(n),n.startsWith("/")?De.join(l,n.slice(1)):this.isAbsolute(n)?n:this.join(s,n)},normalize(n){if(Si(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const s=n.endsWith("/");return n=Zx(n),n.length>0&&s&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return Si(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const s=n[e];if(Si(s),s.length>0)if(t===void 0)t=s;else{const l=n[e-1]??"";this.joinExtensions.includes(this.extname(l).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(Si(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let s=-1,l=!0;const o=this.getProtocol(n),h=n;n=n.slice(o.length);for(let c=n.length-1;c>=1;--c)if(t=n.charCodeAt(c),t===47){if(!l){s=c;break}}else l=!1;return s===-1?e?"/":this.isUrl(h)?o+n:o:e&&s===1?"//":o+n.slice(0,s)},rootname(n){Si(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){Si(n),t&&Si(t),n=ma(this.toPosix(n));let e=0,s=-1,l=!0,o;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let h=t.length-1,c=-1;for(o=n.length-1;o>=0;--o){const d=n.charCodeAt(o);if(d===47){if(!l){e=o+1;break}}else c===-1&&(l=!1,c=o+1),h>=0&&(d===t.charCodeAt(h)?--h===-1&&(s=o):(h=-1,s=c))}return e===s?s=c:s===-1&&(s=n.length),n.slice(e,s)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===47){if(!l){e=o+1;break}}else s===-1&&(l=!1,s=o+1);return s===-1?"":n.slice(e,s)},extname(n){Si(n),n=ma(this.toPosix(n));let t=-1,e=0,s=-1,l=!0,o=0;for(let h=n.length-1;h>=0;--h){const c=n.charCodeAt(h);if(c===47){if(!l){e=h+1;break}continue}s===-1&&(l=!1,s=h+1),c===46?t===-1?t=h:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===e+1?"":n.slice(t,s)},parse(n){Si(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=ma(this.toPosix(n));let e=n.charCodeAt(0);const s=this.isAbsolute(n);let l;t.root=this.rootname(n),s||this.hasProtocol(n)?l=1:l=0;let o=-1,h=0,c=-1,d=!0,m=n.length-1,g=0;for(;m>=l;--m){if(e=n.charCodeAt(m),e===47){if(!d){h=m+1;break}continue}c===-1&&(d=!1,c=m+1),e===46?o===-1?o=m:g!==1&&(g=1):o!==-1&&(g=-1)}return o===-1||c===-1||g===0||g===1&&o===c-1&&o===h+1?c!==-1&&(h===0&&s?t.base=t.name=n.slice(1,c):t.base=t.name=n.slice(h,c)):(h===0&&s?(t.name=n.slice(1,o),t.base=n.slice(1,c)):(t.name=n.slice(h,o),t.base=n.slice(h,c)),t.ext=n.slice(o,c)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let Qh;async function Kx(){return Qh??(Qh=(async()=>{var o;const n=document.createElement("canvas").getContext("webgl");if(!n)return We.UNPACK;const t=await new Promise(h=>{const c=document.createElement("video");c.onloadeddata=()=>h(c),c.onerror=()=>h(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!t)return We.UNPACK;const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);const s=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,s),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,l),n.deleteFramebuffer(s),n.deleteTexture(e),(o=n.getExtension("WEBGL_lose_context"))==null||o.loseContext(),l[0]<=l[3]?We.PMA:We.UNPACK})()),Qh}let Jh;function Qx(){return typeof Jh>"u"&&(Jh=function(){var t;const n={stencil:!0,failIfMajorPerformanceCaveat:mt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!mt.ADAPTER.getWebGLRenderingContext())return!1;const e=mt.ADAPTER.createCanvas();let s=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);const l=!!((t=s==null?void 0:s.getContextAttributes())!=null&&t.stencil);if(s){const o=s.getExtension("WEBGL_lose_context");o&&o.loseContext()}return s=null,l}catch{return!1}}()),Jh}var Jx={grad:.9,turn:360,rad:360/(2*Math.PI)},cr=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Oe=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},fi=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},Qm=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Jm=function(n){return{r:fi(n.r,0,255),g:fi(n.g,0,255),b:fi(n.b,0,255),a:fi(n.a)}},tc=function(n){return{r:Oe(n.r),g:Oe(n.g),b:Oe(n.b),a:Oe(n.a,3)}},tb=/^#([0-9a-f]{3,8})$/i,Ul=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},t0=function(n){var t=n.r,e=n.g,s=n.b,l=n.a,o=Math.max(t,e,s),h=o-Math.min(t,e,s),c=h?o===t?(e-s)/h:o===e?2+(s-t)/h:4+(t-e)/h:0;return{h:60*(c<0?c+6:c),s:o?h/o*100:0,v:o/255*100,a:l}},e0=function(n){var t=n.h,e=n.s,s=n.v,l=n.a;t=t/360*6,e/=100,s/=100;var o=Math.floor(t),h=s*(1-e),c=s*(1-(t-o)*e),d=s*(1-(1-t+o)*e),m=o%6;return{r:255*[s,c,h,h,d,s][m],g:255*[d,s,s,c,h,h][m],b:255*[h,h,d,s,s,c][m],a:l}},i0=function(n){return{h:Qm(n.h),s:fi(n.s,0,100),l:fi(n.l,0,100),a:fi(n.a)}},r0=function(n){return{h:Oe(n.h),s:Oe(n.s),l:Oe(n.l),a:Oe(n.a,3)}},s0=function(n){return e0((e=(t=n).s,{h:t.h,s:(e*=((s=t.l)<50?s:100-s)/100)>0?2*e/(s+e)*100:0,v:s+e,a:t.a}));var t,e,s},ga=function(n){return{h:(t=t0(n)).h,s:(l=(200-(e=t.s))*(s=t.v)/100)>0&&l<200?e*s/100/(l<=100?l:200-l)*100:0,l:l/2,a:t.a};var t,e,s,l},eb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ib=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ec={string:[[function(n){var t=tb.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Oe(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Oe(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=rb.exec(n)||sb.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:Jm({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=eb.exec(n)||ib.exec(n);if(!t)return null;var e,s,l=i0({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(Jx[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return s0(l)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,s=n.b,l=n.a,o=l===void 0?1:l;return cr(t)&&cr(e)&&cr(s)?Jm({r:Number(t),g:Number(e),b:Number(s),a:Number(o)}):null},"rgb"],[function(n){var t=n.h,e=n.s,s=n.l,l=n.a,o=l===void 0?1:l;if(!cr(t)||!cr(e)||!cr(s))return null;var h=i0({h:Number(t),s:Number(e),l:Number(s),a:Number(o)});return s0(h)},"hsl"],[function(n){var t=n.h,e=n.s,s=n.v,l=n.a,o=l===void 0?1:l;if(!cr(t)||!cr(e)||!cr(s))return null;var h=function(c){return{h:Qm(c.h),s:fi(c.s,0,100),v:fi(c.v,0,100),a:fi(c.a)}}({h:Number(t),s:Number(e),v:Number(s),a:Number(o)});return e0(h)},"hsv"]]},n0=function(n,t){for(var e=0;e<t.length;e++){var s=t[e][0](n);if(s)return[s,t[e][1]]}return[null,void 0]},nb=function(n){return typeof n=="string"?n0(n.trim(),ec.string):typeof n=="object"&&n!==null?n0(n,ec.object):[null,void 0]},ic=function(n,t){var e=ga(n);return{h:e.h,s:fi(e.s+100*t,0,100),l:e.l,a:e.a}},rc=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},a0=function(n,t){var e=ga(n);return{h:e.h,s:e.s,l:fi(e.l+100*t,0,100),a:e.a}},sc=function(){function n(t){this.parsed=nb(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Oe(rc(this.rgba),2)},n.prototype.isDark=function(){return rc(this.rgba)<.5},n.prototype.isLight=function(){return rc(this.rgba)>=.5},n.prototype.toHex=function(){return t=tc(this.rgba),e=t.r,s=t.g,l=t.b,h=(o=t.a)<1?Ul(Oe(255*o)):"","#"+Ul(e)+Ul(s)+Ul(l)+h;var t,e,s,l,o,h},n.prototype.toRgb=function(){return tc(this.rgba)},n.prototype.toRgbString=function(){return t=tc(this.rgba),e=t.r,s=t.g,l=t.b,(o=t.a)<1?"rgba("+e+", "+s+", "+l+", "+o+")":"rgb("+e+", "+s+", "+l+")";var t,e,s,l,o},n.prototype.toHsl=function(){return r0(ga(this.rgba))},n.prototype.toHslString=function(){return t=r0(ga(this.rgba)),e=t.h,s=t.s,l=t.l,(o=t.a)<1?"hsla("+e+", "+s+"%, "+l+"%, "+o+")":"hsl("+e+", "+s+"%, "+l+"%)";var t,e,s,l,o},n.prototype.toHsv=function(){return t=t0(this.rgba),{h:Oe(t.h),s:Oe(t.s),v:Oe(t.v),a:Oe(t.a,3)};var t},n.prototype.invert=function(){return qi({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),qi(ic(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),qi(ic(this.rgba,-t))},n.prototype.grayscale=function(){return qi(ic(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),qi(a0(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),qi(a0(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?qi({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Oe(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=ga(this.rgba);return typeof t=="number"?qi({h:t,s:e.s,l:e.l,a:e.a}):Oe(e.h)},n.prototype.isEqual=function(t){return this.toHex()===qi(t).toHex()},n}(),qi=function(n){return n instanceof sc?n:new sc(n)},l0=[],ab=function(n){n.forEach(function(t){l0.indexOf(t)<0&&(t(sc,ec),l0.push(t))})};function lb(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var l in e)s[e[l]]=l;var o={};n.prototype.toName=function(h){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,d,m=s[this.toHex()];if(m)return m;if(h!=null&&h.closest){var g=this.toRgb(),y=1/0,x="black";if(!o.length)for(var _ in e)o[_]=new n(e[_]).toRgb();for(var v in e){var T=(c=g,d=o[v],Math.pow(c.r-d.r,2)+Math.pow(c.g-d.g,2)+Math.pow(c.b-d.b,2));T<y&&(y=T,x=v)}return x}},t.string.push([function(h){var c=h.toLowerCase(),d=c==="transparent"?"#0000":e[c];return d?new n(d).toRgb():null},"name"])}ab([lb]);const cn=class ku{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ku)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const s=typeof t;if(s!==typeof e)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((l,o)=>l===e[o]);if(t!==null&&e!==null){const l=Object.keys(t),o=Object.keys(e);return l.length!==o.length?!1:l.every(h=>t[h]===e[h])}return t===e}toRgba(){const[t,e,s,l]=this._components;return{r:t,g:e,b:s,a:l}}toRgb(){const[t,e,s]=this._components;return{r:t,g:e,b:s}}toRgbaString(){const[t,e,s]=this.toUint8RgbArray();return`rgba(${t},${e},${s},${this.alpha})`}toUint8RgbArray(t){const[e,s,l]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(s*255),t[2]=Math.round(l*255),t}toRgbArray(t){t=t??[];const[e,s,l]=this._components;return t[0]=e,t[1]=s,t[2]=l,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,s,l,o]=ku.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=s,this._components[2]*=l,this._components[3]*=o,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let s=this._int>>16&255,l=this._int>>8&255,o=this._int&255;return e&&(s=s*t+.5|0,l=l*t+.5|0,o=o*t+.5|0),(t*255<<24)+(s<<16)+(l<<8)+o}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,s,l]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(s*t)/t,this._components[2]=Math.round(l*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,s,l,o]=this._components;return t[0]=e,t[1]=s,t[2]=l,t[3]=o,t}normalize(t){let e,s,l,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const h=t;e=(h>>16&255)/255,s=(h>>8&255)/255,l=(h&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,s,l,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,s,l,o=255]=t,e/=255,s/=255,l/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const c=ku.HEX_PATTERN.exec(t);c&&(t=`#${c[2]}`)}const h=qi(t);h.isValid()&&({r:e,g:s,b:l,a:o}=h.rgba,e/=255,s/=255,l/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=s,this._components[2]=l,this._components[3]=o,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,s]=this._components;this._int=(t*255<<16)+(e*255<<8)+(s*255|0)}_clamp(t,e=0,s=1){return typeof t=="number"?Math.min(Math.max(t,e),s):(t.forEach((l,o)=>{t[o]=Math.min(Math.max(l,e),s)}),t)}};cn.shared=new cn,cn.temp=new cn,cn.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ae=cn;function ob(n){return Ht("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),ae.shared.setValue(n).toHex()}function ub(n){return Ht("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),ae.shared.setValue(n).toNumber()}function hb(){const n=[],t=[];for(let s=0;s<32;s++)n[s]=s,t[s]=s;n[Mt.NORMAL_NPM]=Mt.NORMAL,n[Mt.ADD_NPM]=Mt.ADD,n[Mt.SCREEN_NPM]=Mt.SCREEN,t[Mt.NORMAL]=Mt.NORMAL_NPM,t[Mt.ADD]=Mt.ADD_NPM,t[Mt.SCREEN]=Mt.SCREEN_NPM;const e=[];return e.push(t),e.push(n),e}const o0=hb();function u0(n,t){return o0[t?1:0][n]}function cb(n,t=null){const e=n*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let s=0,l=0;s<e;s+=6,l+=4)t[s+0]=l+0,t[s+1]=l+1,t[s+2]=l+2,t[s+3]=l+0,t[s+4]=l+2,t[s+5]=l+3;return t}function h0(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function Pl(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function c0(n){return!(n&n-1)&&!!n}function f0(n){let t=(n>65535?1:0)<<4;n>>>=t;let e=(n>255?1:0)<<3;return n>>>=e,t|=e,e=(n>15?1:0)<<2,n>>>=e,t|=e,e=(n>3?1:0)<<1,n>>>=e,t|=e,t|n>>1}function fn(n,t,e){const s=n.length;let l;if(t>=s||e===0)return;e=t+e>s?s-t:e;const o=s-e;for(l=t;l<o;++l)n[l]=n[l+e];n.length=o}function Gr(n){return n===0?0:n<0?-1:1}let fb=0;function ws(){return++fb}const nc=class{constructor(n,t,e,s){this.left=n,this.top=t,this.right=e,this.bottom=s}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};nc.EMPTY=new nc(0,0,0,0);let d0=nc;const p0={},Wi=Object.create(null),kr=Object.create(null);class db{constructor(t,e,s){this._canvas=mt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=s||mt.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function m0(n,t,e){for(let s=0,l=4*e*t;s<t;++s,l+=4)if(n[l+3]!==0)return!1;return!0}function g0(n,t,e,s,l){const o=4*t;for(let h=s,c=s*o+4*e;h<=l;++h,c+=o)if(n[c+3]!==0)return!1;return!0}function pb(n){const{width:t,height:e}=n,s=n.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");const l=s.getImageData(0,0,t,e).data;let o=0,h=0,c=t-1,d=e-1;for(;h<e&&m0(l,t,h);)++h;if(h===e)return d0.EMPTY;for(;m0(l,t,d);)--d;for(;g0(l,t,o,h,d);)++o;for(;g0(l,t,c,h,d);)--c;return++c,++d,new d0(o,h,c,d)}function mb(n){const t=pb(n),{width:e,height:s}=t;let l=null;if(!t.isEmpty()){const o=n.getContext("2d");if(o===null)throw new TypeError("Failed to get canvas 2D context");l=o.getImageData(t.left,t.top,e,s)}return{width:e,height:s,data:l}}function gb(n,t=globalThis.location){if(n.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function fr(n,t=1){var s;const e=(s=mt.RETINA_PREFIX)==null?void 0:s.exec(n);return e?parseFloat(e[1]):t}var pt=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(pt||{});const ac=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},y0=(n,t)=>ac(n).priority??t,bt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(ac).forEach(t=>{t.type.forEach(e=>{var s,l;return(l=(s=this._removeHandlers)[e])==null?void 0:l.call(s,t)})}),this},add(...n){return n.map(ac).forEach(t=>{t.type.forEach(e=>{var o,h;const s=this._addHandlers,l=this._queue;s[e]?(o=s[e])==null||o.call(s,t):(l[e]=l[e]||[],(h=l[e])==null||h.push(t))})}),this},handle(n,t,e){var h;const s=this._addHandlers,l=this._removeHandlers;if(s[n]||l[n])throw new Error(`Extension type ${n} already has a handler`);s[n]=t,l[n]=e;const o=this._queue;return o[n]&&((h=o[n])==null||h.forEach(c=>t(c)),delete o[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(n,t,e=-1){return this.handle(n,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((l,o)=>y0(o,e)-y0(l,e)))},s=>{const l=t.indexOf(s.ref);l!==-1&&t.splice(l,1)})}};class lc{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const yb=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function vb(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function _b(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const s=yb.replace(/%forloop%/gi,vb(n));if(t.shaderSource(e,s),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}return n}const oc=0,uc=1,hc=2,cc=3,fc=4,dc=5;class $i{constructor(){this.data=0,this.blendMode=Mt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<oc)}set blend(t){!!(this.data&1<<oc)!==t&&(this.data^=1<<oc)}get offsets(){return!!(this.data&1<<uc)}set offsets(t){!!(this.data&1<<uc)!==t&&(this.data^=1<<uc)}get culling(){return!!(this.data&1<<hc)}set culling(t){!!(this.data&1<<hc)!==t&&(this.data^=1<<hc)}get depthTest(){return!!(this.data&1<<cc)}set depthTest(t){!!(this.data&1<<cc)!==t&&(this.data^=1<<cc)}get depthMask(){return!!(this.data&1<<dc)}set depthMask(t){!!(this.data&1<<dc)!==t&&(this.data^=1<<dc)}get clockwiseFrontFace(){return!!(this.data&1<<fc)}set clockwiseFrontFace(t){!!(this.data&1<<fc)!==t&&(this.data^=1<<fc)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==Mt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new $i;return t.depthTest=!1,t.blend=!0,t}}$i.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const pc=[];function v0(n,t){if(!n)return null;let e="";if(typeof n=="string"){const s=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);s&&(e=s[1].toLowerCase())}for(let s=pc.length-1;s>=0;--s){const l=pc[s];if(l.test&&l.test(n,e))return new l(n,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class wi{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,s,l,o,h,c,d){if(arguments.length>8)throw new Error("max arguments reached");const{name:m,items:g}=this;this._aliasCount++;for(let y=0,x=g.length;y<x;y++)g[y][m](t,e,s,l,o,h,c,d);return g===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(wi.prototype,{dispatch:{value:wi.prototype.emit},run:{value:wi.prototype.emit}});class ya{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new wi("setRealSize"),this.onUpdate=new wi("update"),this.onError=new wi("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,s){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Ll extends ya{constructor(t,e){const{width:s,height:l}=e||{};if(!s||!l)throw new Error("BufferResource width or height invalid");super(s,l),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,s){const l=t.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,this.unpackAlignment),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===We.UNPACK);const o=e.realWidth,h=e.realHeight;return s.width===o&&s.height===h?l.texSubImage2D(e.target,0,0,0,o,h,e.format,s.type,this.data):(s.width=o,s.height=h,l.texImage2D(e.target,0,s.internalFormat,o,h,0,e.format,s.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const xb={scaleMode:Xi.NEAREST,alphaMode:We.NPM},mc=class la extends da{constructor(t=null,e=null){super(),e=Object.assign({},la.defaultOptions,e);const{alphaMode:s,mipmap:l,anisotropicLevel:o,scaleMode:h,width:c,height:d,wrapMode:m,format:g,type:y,target:x,resolution:_,resourceOptions:v}=e;t&&!(t instanceof ya)&&(t=v0(t,v),t.internal=!0),this.resolution=_||mt.RESOLUTION,this.width=Math.round((c||0)*this.resolution)/this.resolution,this.height=Math.round((d||0)*this.resolution)/this.resolution,this._mipmap=l,this.anisotropicLevel=o,this._wrapMode=m,this._scaleMode=h,this.format=g,this.type=y,this.target=x,this.alphaMode=s,this.uid=ws(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=c>0&&d>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let s;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,s=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,s=!0),s&&this.dirtyStyleId++,this}setSize(t,e,s){return s=s||this.resolution,this.setRealSize(t*s,e*s,s)}setRealSize(t,e,s){return this.resolution=s||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=c0(this.realWidth)&&c0(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete kr[this.cacheId],delete Wi[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),la.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,s=mt.STRICT_TEXTURE_CACHE){const l=typeof t=="string";let o=null;if(l)o=t;else{if(!t._pixiId){const c=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${c}_${ws()}`}o=t._pixiId}let h=kr[o];if(l&&s&&!h)throw new Error(`The cacheId "${o}" does not exist in BaseTextureCache.`);return h||(h=new la(t,e),h.cacheId=o,la.addToCache(h,o)),h}static fromBuffer(t,e,s,l){t=t||new Float32Array(e*s*4);const o=new Ll(t,{width:e,height:s,...l==null?void 0:l.resourceOptions});let h,c;return t instanceof Float32Array?(h=ht.RGBA,c=wt.FLOAT):t instanceof Int32Array?(h=ht.RGBA_INTEGER,c=wt.INT):t instanceof Uint32Array?(h=ht.RGBA_INTEGER,c=wt.UNSIGNED_INT):t instanceof Int16Array?(h=ht.RGBA_INTEGER,c=wt.SHORT):t instanceof Uint16Array?(h=ht.RGBA_INTEGER,c=wt.UNSIGNED_SHORT):t instanceof Int8Array?(h=ht.RGBA,c=wt.BYTE):(h=ht.RGBA,c=wt.UNSIGNED_BYTE),o.internal=!0,new la(o,Object.assign({},xb,{type:c,format:h},l))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),kr[e]&&kr[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),kr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=kr[t];if(e){const s=e.textureCacheIds.indexOf(t);return s>-1&&e.textureCacheIds.splice(s,1),delete kr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete kr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};mc.defaultOptions={mipmap:Vi.POW2,anisotropicLevel:0,scaleMode:Xi.LINEAR,wrapMode:Fr.CLAMP,alphaMode:We.UNPACK,target:on.TEXTURE_2D,format:ht.RGBA,type:wt.UNSIGNED_BYTE},mc._globalBatch=0;let Nt=mc;class gc{constructor(){this.texArray=null,this.blend=0,this.type=zi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let bb=0;class ge{constructor(t,e=!0,s=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=s,this.static=e,this.id=bb++,this.disposeRunner=new wi("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Yi.ELEMENT_ARRAY_BUFFER:Yi.ARRAY_BUFFER}get index(){return this.type===Yi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ge(t)}}class Fl{constructor(t,e=0,s=!1,l=wt.FLOAT,o,h,c,d=1){this.buffer=t,this.size=e,this.normalized=s,this.type=l,this.stride=o,this.start=h,this.instance=c,this.divisor=d}destroy(){this.buffer=null}static from(t,e,s,l,o){return new Fl(t,e,s,l,o)}}const Eb={Float32Array,Uint32Array,Int32Array,Uint8Array};function Tb(n,t){let e=0,s=0;const l={};for(let d=0;d<n.length;d++)s+=t[d],e+=n[d].length;const o=new ArrayBuffer(e*4);let h=null,c=0;for(let d=0;d<n.length;d++){const m=t[d],g=n[d],y=h0(g);l[y]||(l[y]=new Eb[y](o)),h=l[y];for(let x=0;x<g.length;x++){const _=(x/m|0)*s+c,v=x%m;h[_+v]=g[x]}c+=m}return new Float32Array(o)}const _0={5126:4,5123:2,5121:1};let Ab=0;const Sb={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Hr{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Ab++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new wi("disposeGeometry"),this.refCount=0}addAttribute(t,e,s=0,l=!1,o,h,c,d=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ge||(e instanceof Array&&(e=new Float32Array(e)),e=new ge(e));const m=t.split("|");if(m.length>1){for(let y=0;y<m.length;y++)this.addAttribute(m[y],e,s,l,o);return this}let g=this.buffers.indexOf(e);return g===-1&&(this.buffers.push(e),g=this.buffers.length-1),this.attributes[t]=new Fl(g,s,l,o,h,c,d),this.instanced=this.instanced||d,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ge||(t instanceof Array&&(t=new Uint16Array(t)),t=new ge(t)),t.type=Yi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],s=new ge;let l;for(l in this.attributes){const o=this.attributes[l],h=this.buffers[o.buffer];t.push(h.data),e.push(o.size*_0[o.type]/4),o.buffer=0}for(s.data=Tb(t,e),l=0;l<this.buffers.length;l++)this.buffers[l]!==this.indexBuffer&&this.buffers[l].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Hr;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new ge(this.buffers[e].data.slice(0));for(const e in this.attributes){const s=this.attributes[e];t.attributes[e]=new Fl(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Yi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new Hr,s=[],l=[],o=[];let h;for(let c=0;c<t.length;c++){h=t[c];for(let d=0;d<h.buffers.length;d++)l[d]=l[d]||0,l[d]+=h.buffers[d].data.length,o[d]=0}for(let c=0;c<h.buffers.length;c++)s[c]=new Sb[h0(h.buffers[c].data)](l[c]),e.buffers[c]=new ge(s[c]);for(let c=0;c<t.length;c++){h=t[c];for(let d=0;d<h.buffers.length;d++)s[d].set(h.buffers[d].data,o[d]),o[d]+=h.buffers[d].data.length}if(e.attributes=h.attributes,h.indexBuffer){e.indexBuffer=e.buffers[h.buffers.indexOf(h.indexBuffer)],e.indexBuffer.type=Yi.ELEMENT_ARRAY_BUFFER;let c=0,d=0,m=0,g=0;for(let y=0;y<h.buffers.length;y++)if(h.buffers[y]!==h.indexBuffer){g=y;break}for(const y in h.attributes){const x=h.attributes[y];(x.buffer|0)===g&&(d+=x.size*_0[x.type]/4)}for(let y=0;y<t.length;y++){const x=t[y].indexBuffer.data;for(let _=0;_<x.length;_++)e.indexBuffer.data[_+m]+=c;c+=t[y].buffers[g].data.length/d,m+=x.length}}return e}}class x0 extends Hr{constructor(t=!1){super(),this._buffer=new ge(null,t,!1),this._indexBuffer=new ge(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,wt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,wt.FLOAT).addAttribute("aColor",this._buffer,4,!0,wt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,wt.FLOAT).addIndex(this._indexBuffer)}}const Gl=Math.PI*2,wb=180/Math.PI,Rb=Math.PI/180;var Pe=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(Pe||{});class Vt{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Vt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}}Vt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const kl=[new Vt,new Vt,new Vt,new Vt];class Ut{constructor(t=0,e=0,s=0,l=0){this.x=Number(t),this.y=Number(e),this.width=Number(s),this.height=Number(l),this.type=Pe.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ut(0,0,0,0)}clone(){return new Ut(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const q=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=q)return!1;const rt=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>rt}const s=this.left,l=this.right,o=this.top,h=this.bottom;if(l<=s||h<=o)return!1;const c=kl[0].set(t.left,t.top),d=kl[1].set(t.left,t.bottom),m=kl[2].set(t.right,t.top),g=kl[3].set(t.right,t.bottom);if(m.x<=c.x||d.y<=c.y)return!1;const y=Math.sign(e.a*e.d-e.b*e.c);if(y===0||(e.apply(c,c),e.apply(d,d),e.apply(m,m),e.apply(g,g),Math.max(c.x,d.x,m.x,g.x)<=s||Math.min(c.x,d.x,m.x,g.x)>=l||Math.max(c.y,d.y,m.y,g.y)<=o||Math.min(c.y,d.y,m.y,g.y)>=h))return!1;const x=y*(d.y-c.y),_=y*(c.x-d.x),v=x*s+_*o,T=x*l+_*o,b=x*s+_*h,w=x*l+_*h;if(Math.max(v,T,b,w)<=x*c.x+_*c.y||Math.min(v,T,b,w)>=x*g.x+_*g.y)return!1;const U=y*(c.y-m.y),N=y*(m.x-c.x),L=U*s+N*o,B=U*l+N*o,j=U*s+N*h,O=U*l+N*h;return!(Math.max(L,B,j,O)<=U*c.x+N*c.y||Math.min(L,B,j,O)>=U*g.x+N*g.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),l=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(s-e,0),this.y=l,this.height=Math.max(o-l,0),this}ceil(t=1,e=.001){const s=Math.ceil((this.x+this.width-e)*t)/t,l=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=s-this.x,this.height=l-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),l=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=s-e,this.y=l,this.height=o-l,this}}Ut.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Hl{constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.radius=s,this.type=Pe.CIRC}clone(){return new Hl(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const s=this.radius*this.radius;let l=this.x-t,o=this.y-e;return l*=l,o*=o,l+o<=s}getBounds(){return new Ut(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Hl.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class zl{constructor(t=0,e=0,s=0,l=0){this.x=t,this.y=e,this.width=s,this.height=l,this.type=Pe.ELIP}clone(){return new zl(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let s=(t-this.x)/this.width,l=(e-this.y)/this.height;return s*=s,l*=l,s+l<=1}getBounds(){return new Ut(this.x-this.width,this.y-this.height,this.width,this.height)}}zl.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Rs{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const s=[];for(let l=0,o=e.length;l<o;l++)s.push(e[l].x,e[l].y);e=s}this.points=e,this.type=Pe.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Rs(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let s=!1;const l=this.points.length/2;for(let o=0,h=l-1;o<l;h=o++){const c=this.points[o*2],d=this.points[o*2+1],m=this.points[h*2],g=this.points[h*2+1];d>e!=g>e&&t<(m-c)*((e-d)/(g-d))+c&&(s=!s)}return s}}Rs.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((n,t)=>`${n}, ${t}`,"")}]`};class Xl{constructor(t=0,e=0,s=0,l=0,o=20){this.x=t,this.y=e,this.width=s,this.height=l,this.radius=o,this.type=Pe.RREC}clone(){return new Xl(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+s&&e<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let l=t-(this.x+s),o=e-(this.y+s);const h=s*s;if(l*l+o*o<=h||(l=t-(this.x+this.width-s),l*l+o*o<=h)||(o=e-(this.y+this.height-s),l*l+o*o<=h)||(l=t-(this.x+s),l*l+o*o<=h))return!0}return!1}}Xl.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class le{constructor(t=1,e=0,s=0,l=1,o=0,h=0){this.array=null,this.a=t,this.b=e,this.c=s,this.d=l,this.tx=o,this.ty=h}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,s,l,o,h){return this.a=t,this.b=e,this.c=s,this.d=l,this.tx=o,this.ty=h,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const s=e||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,e){e=e||new Vt;const s=t.x,l=t.y;return e.x=this.a*s+this.c*l+this.tx,e.y=this.b*s+this.d*l+this.ty,e}applyInverse(t,e){e=e||new Vt;const s=1/(this.a*this.d+this.c*-this.b),l=t.x,o=t.y;return e.x=this.d*s*l+-this.c*s*o+(this.ty*this.c-this.tx*this.d)*s,e.y=this.a*s*o+-this.b*s*l+(-this.ty*this.a+this.tx*this.b)*s,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),l=this.a,o=this.c,h=this.tx;return this.a=l*e-this.b*s,this.b=l*s+this.b*e,this.c=o*e-this.d*s,this.d=o*s+this.d*e,this.tx=h*e-this.ty*s,this.ty=h*s+this.ty*e,this}append(t){const e=this.a,s=this.b,l=this.c,o=this.d;return this.a=t.a*e+t.b*l,this.b=t.a*s+t.b*o,this.c=t.c*e+t.d*l,this.d=t.c*s+t.d*o,this.tx=t.tx*e+t.ty*l+this.tx,this.ty=t.tx*s+t.ty*o+this.ty,this}setTransform(t,e,s,l,o,h,c,d,m){return this.a=Math.cos(c+m)*o,this.b=Math.sin(c+m)*o,this.c=-Math.sin(c-d)*h,this.d=Math.cos(c-d)*h,this.tx=t-(s*this.a+l*this.c),this.ty=e-(s*this.b+l*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,l=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=l*t.a+this.d*t.c,this.d=l*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,s=this.b,l=this.c,o=this.d,h=t.pivot,c=-Math.atan2(-l,o),d=Math.atan2(s,e),m=Math.abs(c+d);return m<1e-5||Math.abs(Gl-m)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=c,t.skew.y=d),t.scale.x=Math.sqrt(e*e+s*s),t.scale.y=Math.sqrt(l*l+o*o),t.position.x=this.tx+(h.x*e+h.y*l),t.position.y=this.ty+(h.x*s+h.y*o),t}invert(){const t=this.a,e=this.b,s=this.c,l=this.d,o=this.tx,h=t*l-e*s;return this.a=l/h,this.b=-e/h,this.c=-s/h,this.d=t/h,this.tx=(s*this.ty-l*o)/h,this.ty=-(t*this.ty-e*o)/h,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new le;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new le}static get TEMP_MATRIX(){return new le}}le.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Cs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ms=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ds=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Os=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],yc=[],b0=[],Vl=Math.sign;function Cb(){for(let n=0;n<16;n++){const t=[];yc.push(t);for(let e=0;e<16;e++){const s=Vl(Cs[n]*Cs[e]+Ds[n]*Ms[e]),l=Vl(Ms[n]*Cs[e]+Os[n]*Ms[e]),o=Vl(Cs[n]*Ds[e]+Ds[n]*Os[e]),h=Vl(Ms[n]*Ds[e]+Os[n]*Os[e]);for(let c=0;c<16;c++)if(Cs[c]===s&&Ms[c]===l&&Ds[c]===o&&Os[c]===h){t.push(c);break}}}for(let n=0;n<16;n++){const t=new le;t.set(Cs[n],Ms[n],Ds[n],Os[n],0,0),b0.push(t)}}Cb();const ue={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Cs[n],uY:n=>Ms[n],vX:n=>Ds[n],vY:n=>Os[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>yc[n][t],sub:(n,t)=>yc[n][ue.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?ue.S:ue.N:Math.abs(t)*2<=Math.abs(n)?n>0?ue.E:ue.W:t>0?n>0?ue.SE:ue.SW:n>0?ue.NE:ue.NW,matrixAppendRotationInv:(n,t,e=0,s=0)=>{const l=b0[ue.inv(t)];l.tx=e,l.ty=s,n.append(l)}};class dr{constructor(t,e,s=0,l=0){this._x=s,this._y=l,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new dr(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}dr.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const vc=class{constructor(){this.worldTransform=new le,this.localTransform=new le,this.position=new dr(this.onChange,this,0,0),this.scale=new dr(this.onChange,this,1,1),this.pivot=new dr(this.onChange,this,0,0),this.skew=new dr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const e=n.worldTransform,s=this.worldTransform;s.a=t.a*e.a+t.b*e.c,s.b=t.a*e.b+t.b*e.d,s.c=t.c*e.a+t.d*e.c,s.d=t.c*e.b+t.d*e.d,s.tx=t.tx*e.a+t.ty*e.c+e.tx,s.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};vc.IDENTITY=new vc;let _c=vc;_c.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Mb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Db=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function E0(n,t,e){const s=n.createShader(t);return n.shaderSource(s,e),n.compileShader(s),s}function xc(n){const t=new Array(n);for(let e=0;e<t.length;e++)t[e]=!1;return t}function T0(n,t){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return xc(2*t);case"bvec3":return xc(3*t);case"bvec4":return xc(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const dn=[{test:n=>n.type==="float"&&n.size===1&&!n.isArray,code:n=>`
            if(uv["${n}"] !== ud["${n}"].value)
            {
                ud["${n}"].value = uv["${n}"]
                gl.uniform1f(ud["${n}"].location, uv["${n}"])
            }
            `},{test:(n,t)=>(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(t==null||t.castToBaseTexture!==void 0),code:n=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${n}"], t);

            if(ud["${n}"].value !== t)
            {
                ud["${n}"].value = t;
                gl.uniform1i(ud["${n}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(n,t)=>n.type==="mat3"&&n.size===1&&!n.isArray&&t.a!==void 0,code:n=>`
            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));
            `,codeUbo:n=>`
                var ${n}_matrix = uv.${n}.toArray(true);

                data[offset] = ${n}_matrix[0];
                data[offset+1] = ${n}_matrix[1];
                data[offset+2] = ${n}_matrix[2];
        
                data[offset + 4] = ${n}_matrix[3];
                data[offset + 5] = ${n}_matrix[4];
                data[offset + 6] = ${n}_matrix[5];
        
                data[offset + 8] = ${n}_matrix[6];
                data[offset + 9] = ${n}_matrix[7];
                data[offset + 10] = ${n}_matrix[8];
            `},{test:(n,t)=>n.type==="vec2"&&n.size===1&&!n.isArray&&t.x!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${n}"].location, v.x, v.y);
                }`,codeUbo:n=>`
                v = uv.${n};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:n=>n.type==="vec2"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);
                }
            `},{test:(n,t)=>n.type==="vec4"&&n.size===1&&!n.isArray&&t.width!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(n,t)=>n.type==="vec4"&&n.size===1&&!n.isArray&&t.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${n}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(n,t)=>n.type==="vec3"&&n.size===1&&!n.isArray&&t.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${n}"].location, v.red, v.green, v.blue)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:n=>n.type==="vec4"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])
                }`}],Ob={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Bb={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Nb(n,t){var s;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const l in n.uniforms){const o=t[l];if(!o){((s=n.uniforms[l])==null?void 0:s.group)===!0&&(n.uniforms[l].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${l}, '${l}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${l}, syncData);
                    `));continue}const h=n.uniforms[l];let c=!1;for(let d=0;d<dn.length;d++)if(dn[d].test(o,h)){e.push(dn[d].code(l,h)),c=!0;break}if(!c){const d=(o.size===1&&!o.isArray?Ob:Bb)[o.type].replace("location",`ud["${l}"].location`);e.push(`
            cu = ud["${l}"];
            cv = cu.value;
            v = uv["${l}"];
            ${d};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const A0={};let pn=A0;function Ib(){if(pn===A0||pn!=null&&pn.isContextLost()){const n=mt.ADAPTER.createCanvas();let t;mt.PREFER_ENV>=As.WEBGL2&&(t=n.getContext("webgl2",{})),t||(t=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),pn=t}return pn}let jl;function Ub(){if(!jl){jl=ci.MEDIUM;const n=Ib();if(n&&n.getShaderPrecisionFormat){const t=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);t&&(jl=t.precision?ci.HIGH:ci.MEDIUM)}}return jl}function S0(n,t){const e=n.getShaderSource(t).split(`
`).map((m,g)=>`${g}: ${m}`),s=n.getShaderInfoLog(t),l=s.split(`
`),o={},h=l.map(m=>parseFloat(m.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(m=>m&&!o[m]?(o[m]=!0,!0):!1),c=[""];h.forEach(m=>{e[m-1]=`%c${e[m-1]}%c`,c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const d=e.join(`
`);c[0]=d,console.error(s),console.groupCollapsed("click to view full shader code"),console.warn(...c),console.groupEnd()}function Pb(n,t,e,s){n.getProgramParameter(t,n.LINK_STATUS)||(n.getShaderParameter(e,n.COMPILE_STATUS)||S0(n,e),n.getShaderParameter(s,n.COMPILE_STATUS)||S0(n,s),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(t)))}const Lb={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function w0(n){return Lb[n]}let Yl=null;const R0={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function C0(n,t){if(!Yl){const e=Object.keys(R0);Yl={};for(let s=0;s<e.length;++s){const l=e[s];Yl[n[l]]=R0[l]}}return Yl[t]}function M0(n,t,e){if(n.substring(0,9)!=="precision"){let s=t;return t===ci.HIGH&&e!==ci.HIGH&&(s=ci.MEDIUM),`precision ${s} float;
${n}`}else if(e!==ci.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}let va;function Fb(){if(typeof va=="boolean")return va;try{va=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{va=!1}return va}let Gb=0;const ql={},bc=class oa{constructor(t,e,s="pixi-shader",l={}){this.extra={},this.id=Gb++,this.vertexSrc=t||oa.defaultVertexSrc,this.fragmentSrc=e||oa.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=l,this.vertexSrc.substring(0,8)!=="#version"&&(s=s.replace(/\s+/g,"-"),ql[s]?(ql[s]++,s+=`-${ql[s]}`):ql[s]=1,this.vertexSrc=`#define SHADER_NAME ${s}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${s}
${this.fragmentSrc}`,this.vertexSrc=M0(this.vertexSrc,oa.defaultVertexPrecision,ci.HIGH),this.fragmentSrc=M0(this.fragmentSrc,oa.defaultFragmentPrecision,Ub())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Db}static get defaultFragmentSrc(){return Mb}static from(t,e,s){const l=t+e;let o=p0[l];return o||(p0[l]=o=new oa(t,e,s)),o}};bc.defaultVertexPrecision=ci.HIGH,bc.defaultFragmentPrecision=hr.apple.device?ci.HIGH:ci.MEDIUM;let pr=bc,kb=0;class Ri{constructor(t,e,s){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=kb++,this.static=!!e,this.ubo=!!s,t instanceof ge?(this.buffer=t,this.buffer.type=Yi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ge(new Float32Array(1)),this.buffer.type=Yi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,s){if(!this.ubo)this.uniforms[t]=new Ri(e,s);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,s){return new Ri(t,e,s)}static uboFrom(t,e){return new Ri(t,e??!0,!0)}}class Zi{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Ri?this.uniformGroup=e:this.uniformGroup=new Ri(e):this.uniformGroup=new Ri({}),this.disposeRunner=new wi("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const s in e.uniforms){const l=e.uniforms[s];if(l.group===!0&&this.checkUniformExists(t,l))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,s){const l=pr.from(t,e);return new Zi(l,s)}}class Hb{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const s=new Int32Array(t);for(let o=0;o<t;o++)s[o]=o;this.defaultGroupCache[t]=Ri.from({uSamplers:s},!0);let l=this.fragTemplate;l=l.replace(/%count%/gi,`${t}`),l=l.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new pr(this.vertexSrc,l)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new le,default:this.defaultGroupCache[t]};return new Zi(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let s=0;s<t;s++)s>0&&(e+=`
else `),s<t-1&&(e+=`if(vTextureId < ${s}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${s}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class Ec{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function zb(){return!hr.apple.device}function Xb(n){let t=!0;const e=mt.ADAPTER.getNavigator();if(hr.tablet||hr.phone){if(hr.apple.device){const s=e.userAgent.match(/OS (\d+)_(\d+)?/);s&&parseInt(s[1],10)<11&&(t=!1)}if(hr.android.device){const s=e.userAgent.match(/Android\s([0-9.]*)/);s&&parseInt(s[1],10)<7&&(t=!1)}}return t?n:4}class Wl{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var Vb=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,jb=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _a=class Gi extends Wl{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=x0,this.vertexSize=6,this.state=$i.for2d(),this.size=Gi.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??Xb(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??zb(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return Ht("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return jb}static get defaultFragmentTemplate(){return Vb}setShaderGenerator({vertex:t=Gi.defaultVertexSrc,fragment:e=Gi.defaultFragmentTemplate}={}){this.shaderGenerator=new Hb(t,e)}contextChange(){const t=this.renderer.gl;mt.PREFER_ENV===As.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Gi.defaultMaxTextures),this.maxTextures=_b(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=Gi,s=this.size/4,l=Math.floor(s/this.maxTextures)+1;for(;t.length<s;)t.push(new gc);for(;e.length<l;)e.push(new Ec);for(let o=0;o<this.maxTextures;o++)this._tempBoundTextures[o]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,s=Gi._textureArrayPool,l=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count;let c=++Nt._globalBatch,d=0,m=s[0],g=0;l.copyBoundTextures(o,e);for(let y=0;y<this._bufferSize;++y){const x=t[y];t[y]=null,x._batchEnabled!==c&&(m.count>=e&&(l.boundArray(m,o,c,e),this.buildDrawCalls(m,g,y),g=y,m=s[++d],++c),x._batchEnabled=c,x.touched=h,m.elements[m.count++]=x)}m.count>0&&(l.boundArray(m,o,c,e),this.buildDrawCalls(m,g,this._bufferSize),++d,++c);for(let y=0;y<o.length;y++)o[y]=null;Nt._globalBatch=c}buildDrawCalls(t,e,s){const{_bufferedElements:l,_attributeBuffer:o,_indexBuffer:h,vertexSize:c}=this,d=Gi._drawCallPool;let m=this._dcIndex,g=this._aIndex,y=this._iIndex,x=d[m];x.start=this._iIndex,x.texArray=t;for(let _=e;_<s;++_){const v=l[_],T=v._texture.baseTexture,b=o0[T.alphaMode?1:0][v.blendMode];l[_]=null,e<_&&x.blend!==b&&(x.size=y-x.start,e=_,x=d[++m],x.texArray=t,x.start=y),this.packInterleavedGeometry(v,o,h,g,y),g+=v.vertexData.length/2*c,y+=v.indices.length,x.blend=b}e<s&&(x.size=y-x.start,++m),this._dcIndex=m,this._aIndex=g,this._iIndex=y}bindAndClearTexArray(t){const e=this.renderer.texture;for(let s=0;s<t.count;s++)e.bind(t.elements[s],t.ids[s]),t.elements[s]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:s}=this;Gi.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:s}=this.renderer,l=Gi._drawCallPool;let o=null;for(let h=0;h<t;h++){const{texArray:c,type:d,size:m,start:g,blend:y}=l[h];o!==c&&(o=c,this.bindAndClearTexArray(c)),this.state.blendMode=y,s.set(this.state),e.drawElements(d,m,e.UNSIGNED_SHORT,g*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Gi.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=Pl(Math.ceil(t/8)),s=f0(e),l=e*8;this._aBuffers.length<=s&&(this._iBuffers.length=s+1);let o=this._aBuffers[l];return o||(this._aBuffers[l]=o=new lc(l*this.vertexSize*4)),o}getIndexBuffer(t){const e=Pl(Math.ceil(t/12)),s=f0(e),l=e*12;this._iBuffers.length<=s&&(this._iBuffers.length=s+1);let o=this._iBuffers[s];return o||(this._iBuffers[s]=o=new Uint16Array(l)),o}packInterleavedGeometry(t,e,s,l,o){const{uint32View:h,float32View:c}=e,d=l/this.vertexSize,m=t.uvs,g=t.indices,y=t.vertexData,x=t._texture.baseTexture._batchLocation,_=Math.min(t.worldAlpha,1),v=ae.shared.setValue(t._tintRGB).toPremultiplied(_,t._texture.baseTexture.alphaMode>0);for(let T=0;T<y.length;T+=2)c[l++]=y[T],c[l++]=y[T+1],c[l++]=m[T],c[l++]=m[T+1],h[l++]=v,c[l++]=x;for(let T=0;T<g.length;T++)s[o++]=d+g[T]}};_a.defaultBatchSize=4096,_a.extension={name:"batch",type:pt.RendererPlugin},_a._drawCallPool=[],_a._textureArrayPool=[];let Bs=_a;bt.add(Bs);var Yb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,qb=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Tc=class Sl extends Zi{constructor(t,e,s){const l=pr.from(t||Sl.defaultVertexSrc,e||Sl.defaultFragmentSrc);super(l,s),this.padding=0,this.resolution=Sl.defaultResolution,this.multisample=Sl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new $i}apply(t,e,s,l,o){t.applyFilter(this,e,s,l)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return qb}static get defaultFragmentSrc(){return Yb}};Tc.defaultResolution=1,Tc.defaultMultisample=be.NONE;let Ye=Tc;class $l{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ae(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:s,backgroundAlpha:l}=t,o=s??e;o!==void 0&&(this.color=o),this.alpha=l}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}$l.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},$l.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"background"},bt.add($l);class D0{constructor(t){this.renderer=t,this.emptyRenderer=new Wl(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:s}=this.renderer.texture;for(let l=e-1;l>=0;--l)t[l]=s[l]||null,t[l]&&(t[l]._batchLocation=l)}boundArray(t,e,s,l){const{elements:o,ids:h,count:c}=t;let d=0;for(let m=0;m<c;m++){const g=o[m],y=g._batchLocation;if(y>=0&&y<l&&e[y]===g){h[m]=y;continue}for(;d<l;){const x=e[d];if(x&&x._batchEnabled===s&&x._batchLocation===d){d++;continue}h[m]=d,g._batchLocation=d,e[d]=g;break}}}destroy(){this.renderer=null}}D0.extension={type:pt.RendererSystem,name:"batch"},bt.add(D0);let O0=0;class Zl{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=O0++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,s=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:s,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=O0++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let s;if(mt.PREFER_ENV>=As.WEBGL2&&(s=t.getContext("webgl2",e)),s)this.webGLVersion=2;else if(this.webGLVersion=1,s=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!s)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=s,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),s="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;s&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const l=s||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=l,l||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Zl.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Zl.extension={type:pt.RendererSystem,name:"context"},bt.add(Zl);class Ac{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new wi("disposeFramebuffer"),this.multisample=be.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new Nt(null,{scaleMode:Xi.NEAREST,resolution:1,mipmap:Vi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Nt(null,{scaleMode:Xi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Vi.OFF,format:ht.DEPTH_COMPONENT,type:wt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let s=0;s<this.colorTextures.length;s++){const l=this.colorTextures[s],o=l.resolution;l.setSize(t/o,e/o)}if(this.depthTexture){const s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class B0 extends Nt{constructor(t={}){if(typeof t=="number"){const e=arguments[0],s=arguments[1],l=arguments[2],o=arguments[3];t={width:e,height:s,scaleMode:l,resolution:o}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=be.NONE),super(null,t),this.mipmap=Vi.OFF,this.valid=!0,this._clear=new ae([0,0,0,0]),this.framebuffer=new Ac(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class mr extends ya{constructor(t){const e=t,s=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,l=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(s,l),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,s){s===void 0&&!e.startsWith("data:")?t.crossOrigin=gb(e):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}upload(t,e,s,l){const o=t.gl,h=e.realWidth,c=e.realHeight;if(l=l||this.source,typeof HTMLImageElement<"u"&&l instanceof HTMLImageElement){if(!l.complete||l.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&l instanceof HTMLVideoElement&&l.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===We.UNPACK),!this.noSubImage&&e.target===o.TEXTURE_2D&&s.width===h&&s.height===c?o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,s.type,l):(s.width=h,s.height=c,o.texImage2D(e.target,0,s.internalFormat,e.format,s.type,l)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,s=t.naturalHeight||t.videoHeight||t.height;this.resize(e,s),super.update()}dispose(){this.source=null}}class N0 extends mr{constructor(t,e){if(e=e||{},typeof t=="string"){const s=new Image;mr.crossOrigin(s,t,e.crossorigin),s.src=t,t=s}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??mt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,s)=>{const l=this.source;this.url=l.src;const o=()=>{this.destroyed||(l.onload=null,l.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};l.complete&&l.src?o():(l.onload=o,l.onerror=h=>{s(h),this.onError.emit(h)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,s=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:s?"cors":"no-cors"}).then(l=>l.blob()).then(l=>e(l,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===We.UNPACK?"premultiply":"none"})).then(l=>this.destroyed?Promise.reject():(this.bitmap=l,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,s){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,s,this.bitmap),!this.preserveBitmap){let l=!0;const o=e._glTextures;for(const h in o){const c=o[h];if(c!==s&&c.dirtyId!==e.dirtyId){l=!1;break}}l&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class Sc{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,s){const l=e.width,o=e.height;if(s){const h=t.width/2/l,c=t.height/2/o,d=t.x/l+h,m=t.y/o+c;s=ue.add(s,ue.NW),this.x0=d+h*ue.uX(s),this.y0=m+c*ue.uY(s),s=ue.add(s,2),this.x1=d+h*ue.uX(s),this.y1=m+c*ue.uY(s),s=ue.add(s,2),this.x2=d+h*ue.uX(s),this.y2=m+c*ue.uY(s),s=ue.add(s,2),this.x3=d+h*ue.uX(s),this.y3=m+c*ue.uY(s)}else this.x0=t.x/l,this.y0=t.y/o,this.x1=(t.x+t.width)/l,this.y1=t.y/o,this.x2=(t.x+t.width)/l,this.y2=(t.y+t.height)/o,this.x3=t.x/l,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Sc.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const I0=new Sc;function Kl(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}class xt extends da{constructor(t,e,s,l,o,h,c){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Ut(0,0,1,1)),t instanceof xt&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=l,this.valid=!1,this.destroyed=!1,this._uvs=I0,this.uvMatrix=null,this.orig=s||e,this._rotate=Number(o||0),o===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=h?new Vt(h.x,h.y):new Vt(0,0),this.defaultBorders=c,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&Wi[e.url]&&xt.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,xt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var l;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),s=new xt(this.baseTexture,!this.noFrame&&t,e,(l=this.trim)==null?void 0:l.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(s._frame=t),s}updateUvs(){this._uvs===I0&&(this._uvs=new Sc),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},s=mt.STRICT_TEXTURE_CACHE){const l=typeof t=="string";let o=null;if(l)o=t;else if(t instanceof Nt){if(!t.cacheId){const c=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${c}-${ws()}`,Nt.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){const c=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${c}_${ws()}`}o=t._pixiId}let h=Wi[o];if(l&&s&&!h)throw new Error(`The cacheId "${o}" does not exist in TextureCache.`);return!h&&!(t instanceof Nt)?(e.resolution||(e.resolution=fr(t)),h=new xt(new Nt(t,e)),h.baseTexture.cacheId=o,Nt.addToCache(h.baseTexture,o),xt.addToCache(h,o)):!h&&t instanceof Nt&&(h=new xt(t),xt.addToCache(h,o)),h}static fromURL(t,e){const s=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),l=xt.from(t,Object.assign({resourceOptions:s},e),!1),o=l.baseTexture.resource;return l.baseTexture.valid?Promise.resolve(l):o.load().then(()=>Promise.resolve(l))}static fromBuffer(t,e,s,l){return new xt(Nt.fromBuffer(t,e,s,l))}static fromLoader(t,e,s,l){const o=new Nt(t,Object.assign({scaleMode:Nt.defaultOptions.scaleMode,resolution:fr(e)},l)),{resource:h}=o;h instanceof N0&&(h.url=e);const c=new xt(o);return s||(s=e),Nt.addToCache(c.baseTexture,s),xt.addToCache(c,s),s!==e&&(Nt.addToCache(c.baseTexture,e),xt.addToCache(c,e)),c.baseTexture.valid?Promise.resolve(c):new Promise(d=>{c.baseTexture.once("loaded",()=>d(c))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Wi[e]&&Wi[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),Wi[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Wi[t];if(e){const s=e.textureCacheIds.indexOf(t);return s>-1&&e.textureCacheIds.splice(s,1),delete Wi[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)Wi[t.textureCacheIds[e]]===t&&delete Wi[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:s,width:l,height:o}=t,h=e+l>this.baseTexture.width,c=s+o>this.baseTexture.height;if(h||c){const d=h&&c?"and":"or",m=`X: ${e} + ${l} = ${e+l} > ${this.baseTexture.width}`,g=`Y: ${s} + ${o} = ${s+o} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${m} ${d} ${g}`)}this.valid=l&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return xt._EMPTY||(xt._EMPTY=new xt(new Nt),Kl(xt._EMPTY),Kl(xt._EMPTY.baseTexture)),xt._EMPTY}static get WHITE(){if(!xt._WHITE){const t=mt.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),xt._WHITE=new xt(Nt.from(t)),Kl(xt._WHITE),Kl(xt._WHITE.baseTexture)}return xt._WHITE}}class Ns extends xt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,s=!0){const l=this.baseTexture.resolution,o=Math.round(t*l)/l,h=Math.round(e*l)/l;this.valid=o>0&&h>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=h,s&&this.baseTexture.resize(o,h),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Ns(new B0(t))}}class U0{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,s=be.NONE){const l=new B0(Object.assign({width:t,height:e,resolution:1,multisample:s},this.textureOptions));return new Ns(l)}getOptimalTexture(t,e,s=1,l=be.NONE){let o;t=Math.max(Math.ceil(t*s-1e-6),1),e=Math.max(Math.ceil(e*s-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=Pl(t),e=Pl(e),o=((t&65535)<<16|e&65535)>>>0,l>1&&(o+=l*4294967296)):o=l>1?-l:-1,this.texturePool[o]||(this.texturePool[o]=[]);let h=this.texturePool[o].pop();return h||(h=this.createTexture(t,e,l)),h.filterPoolKey=o,h.setResolution(s),h}getFilterTexture(t,e,s){const l=this.getOptimalTexture(t.width,t.height,e||t.resolution,s||be.NONE);return l.filterFrame=t.filterFrame,l}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const s=this.texturePool[e];if(s)for(let l=0;l<s.length;l++)s[l].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const s=this.texturePool[e];if(s)for(let l=0;l<s.length;l++)s[l].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}U0.SCREEN_KEY=-1;class Wb extends Hr{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class P0 extends Hr{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ge(this.vertices),this.uvBuffer=new ge(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let s=0,l=0;return this.uvs[0]=s,this.uvs[1]=l,this.uvs[2]=s+e.width/t.width,this.uvs[3]=l,this.uvs[4]=s+e.width/t.width,this.uvs[5]=l+e.height/t.height,this.uvs[6]=s,this.uvs[7]=l+e.height/t.height,s=e.x,l=e.y,this.vertices[0]=s,this.vertices[1]=l,this.vertices[2]=s+e.width,this.vertices[3]=l,this.vertices[4]=s+e.width,this.vertices[5]=l+e.height,this.vertices[6]=s,this.vertices[7]=l+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class $b{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=be.NONE,this.sourceFrame=new Ut,this.destinationFrame=new Ut,this.bindingSourceFrame=new Ut,this.bindingDestinationFrame=new Ut,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ql=[new Vt,new Vt,new Vt,new Vt],wc=new le;class L0{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new U0,this.statePool=[],this.quad=new Wb,this.quadUv=new P0,this.tempRect=new Ut,this.activeState={},this.globalUniforms=new Ri({outputFrame:new Ut,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const s=this.renderer,l=this.defaultFilterStack,o=this.statePool.pop()||new $b,h=s.renderTexture;let c,d;if(h.current){const b=h.current;c=b.resolution,d=b.multisample}else c=s.resolution,d=s.multisample;let m=e[0].resolution||c,g=e[0].multisample??d,y=e[0].padding,x=e[0].autoFit,_=e[0].legacy??!0;for(let b=1;b<e.length;b++){const w=e[b];m=Math.min(m,w.resolution||c),g=Math.min(g,w.multisample??d),y=this.useMaxPadding?Math.max(y,w.padding):y+w.padding,x=x&&w.autoFit,_=_||(w.legacy??!0)}l.length===1&&(this.defaultFilterStack[0].renderTexture=h.current),l.push(o),o.resolution=m,o.multisample=g,o.legacy=_,o.target=t,o.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),o.sourceFrame.pad(y);const v=this.tempRect.copyFrom(h.sourceFrame);s.projection.transform&&this.transformAABB(wc.copyFrom(s.projection.transform).invert(),v),x?(o.sourceFrame.fit(v),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(v)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,h.current?h.current.resolution:s.resolution,h.sourceFrame,h.destinationFrame,s.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,m,g),o.filters=e,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;const T=this.tempRect;T.x=0,T.y=0,T.width=o.sourceFrame.width,T.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(h.sourceFrame),o.bindingDestinationFrame.copyFrom(h.destinationFrame),o.transform=s.projection.transform,s.projection.transform=null,h.bind(o.renderTexture,o.sourceFrame,T),s.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),s=e.filters;this.activeState=e;const l=this.globalUniforms.uniforms;l.outputFrame=e.sourceFrame,l.resolution=e.resolution;const o=l.inputSize,h=l.inputPixel,c=l.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],h[0]=Math.round(o[0]*e.resolution),h[1]=Math.round(o[1]*e.resolution),h[2]=1/h[0],h[3]=1/h[1],c[0]=.5*h[2],c[1]=.5*h[3],c[2]=e.sourceFrame.width*o[2]-.5*h[2],c[3]=e.sourceFrame.height*o[3]-.5*h[3],e.legacy){const m=l.filterArea;m[0]=e.destinationFrame.width,m[1]=e.destinationFrame.height,m[2]=e.sourceFrame.x,m[3]=e.sourceFrame.y,l.filterClamp=l.inputClamp}this.globalUniforms.update();const d=t[t.length-1];if(this.renderer.framebuffer.blit(),s.length===1)s[0].apply(this,e.renderTexture,d.renderTexture,ji.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let m=e.renderTexture,g=this.getOptimalFilterTexture(m.width,m.height,e.resolution);g.filterFrame=m.filterFrame;let y=0;for(y=0;y<s.length-1;++y){y===1&&e.multisample>1&&(g=this.getOptimalFilterTexture(m.width,m.height,e.resolution),g.filterFrame=m.filterFrame),s[y].apply(this,m,g,ji.CLEAR,e);const x=m;m=g,g=x}s[y].apply(this,m,d.renderTexture,ji.BLEND,e),y>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(m),this.returnFilterTexture(g)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=ji.CLEAR){const{renderTexture:s,state:l}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const h=this.tempRect;h.x=0,h.y=0,h.width=t.filterFrame.width,h.height=t.filterFrame.height,s.bind(t,t.filterFrame,h)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const o=l.stateId&1||this.forceClear;(e===ji.CLEAR||e===ji.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,s,l){const o=this.renderer;o.state.set(t.state),this.bindAndClear(s,l),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(zi.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(zi.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:s,destinationFrame:l}=this.activeState,{orig:o}=e._texture,h=t.set(l.width,0,0,l.height,s.x,s.y),c=e.worldTransform.copyTo(le.TEMP_MATRIX);return c.invert(),h.prepend(c),h.scale(1/o.width,1/o.height),h.translate(e.anchor.x,e.anchor.y),h}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,s=1,l=be.NONE){return this.texturePool.getOptimalTexture(t,e,s,l)}getFilterTexture(t,e,s){if(typeof t=="number"){const o=t;t=e,e=o}t=t||this.activeState.renderTexture;const l=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,s||be.NONE);return l.filterFrame=t.filterFrame,l}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const s=Ql[0],l=Ql[1],o=Ql[2],h=Ql[3];s.set(e.left,e.top),l.set(e.left,e.bottom),o.set(e.right,e.top),h.set(e.right,e.bottom),t.apply(s,s),t.apply(l,l),t.apply(o,o),t.apply(h,h);const c=Math.min(s.x,l.x,o.x,h.x),d=Math.min(s.y,l.y,o.y,h.y),m=Math.max(s.x,l.x,o.x,h.x),g=Math.max(s.y,l.y,o.y,h.y);e.x=c,e.y=d,e.width=m-c,e.height=g-d}roundFrame(t,e,s,l,o){if(!(t.width<=0||t.height<=0||s.width<=0||s.height<=0)){if(o){const{a:h,b:c,c:d,d:m}=o;if((Math.abs(c)>1e-4||Math.abs(d)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(m)>1e-4))return}o=o?wc.copyFrom(o):wc.identity(),o.translate(-s.x,-s.y).scale(l.width/s.width,l.height/s.height).translate(l.x,l.y),this.transformAABB(o,t),t.ceil(e),this.transformAABB(o.invert(),t)}}}L0.extension={type:pt.RendererSystem,name:"filter"},bt.add(L0);class Zb{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=be.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Kb=new Ut;class F0{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Ac(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ut,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,s=this.renderer.context.extensions.depthTexture;mt.PREFER_ENV===As.WEBGL_LEGACY&&(e=null,s=null),e?t.drawBuffers=l=>e.drawBuffersWEBGL(l):(this.hasMRT=!1,t.drawBuffers=()=>{}),s||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,s=0){const{gl:l}=this;if(t){const o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,l.bindFramebuffer(l.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==s&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=s),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,s)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let h=0;h<t.colorTextures.length;h++){const c=t.colorTextures[h];this.renderer.texture.unbind(c.parentTextureArray||c)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const h=e.width>>s,c=e.height>>s,d=h/e.width;this.setViewport(e.x*d,e.y*d,h,c)}else{const h=t.width>>s,c=t.height>>s;this.setViewport(0,0,h,c)}}else this.current&&(this.current=null,l.bindFramebuffer(l.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,s,l){const o=this.viewport;t=Math.round(t),e=Math.round(e),s=Math.round(s),l=Math.round(l),(o.width!==s||o.height!==l||o.x!==t||o.y!==e)&&(o.x=t,o.y=e,o.width=s,o.height=l,this.gl.viewport(t,e,s,l))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,s,l,o=Ju.COLOR|Ju.DEPTH){const{gl:h}=this;h.clearColor(t,e,s,l),h.clear(o)}initFramebuffer(t){const{gl:e}=this,s=new Zb(e.createFramebuffer());return s.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(t),t.disposeRunner.add(this),s}resizeFramebuffer(t){const{gl:e}=this,s=t.glFramebuffers[this.CONTEXT_UID];if(s.stencil){e.bindRenderbuffer(e.RENDERBUFFER,s.stencil);let h;this.renderer.context.webGLVersion===1?h=e.DEPTH_STENCIL:t.depth&&t.stencil?h=e.DEPTH24_STENCIL8:t.depth?h=e.DEPTH_COMPONENT24:h=e.STENCIL_INDEX8,s.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,h,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,h,t.width,t.height)}const l=t.colorTextures;let o=l.length;e.drawBuffers||(o=Math.min(o,1));for(let h=0;h<o;h++){const c=l[h],d=c.parentTextureArray||c;this.renderer.texture.bind(d,0),h===0&&s.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,s.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:s}=this,l=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures;let h=o.length;s.drawBuffers||(h=Math.min(h,1)),l.multisample>1&&this.canMultisampleFramebuffer(t)?l.msaaBuffer=l.msaaBuffer||s.createRenderbuffer():l.msaaBuffer&&(s.deleteRenderbuffer(l.msaaBuffer),l.msaaBuffer=null,l.blitFramebuffer&&(l.blitFramebuffer.dispose(),l.blitFramebuffer=null));const c=[];for(let d=0;d<h;d++){const m=o[d],g=m.parentTextureArray||m;this.renderer.texture.bind(g,0),d===0&&l.msaaBuffer?(s.bindRenderbuffer(s.RENDERBUFFER,l.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,l.multisample,g._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,l.msaaBuffer)):(s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+d,m.target,g._glTextures[this.CONTEXT_UID].texture,e),c.push(s.COLOR_ATTACHMENT0+d))}if(c.length>1&&s.drawBuffers(c),t.depthTexture&&this.writeDepthTexture){const d=t.depthTexture;this.renderer.texture.bind(d,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,d._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){l.stencil=l.stencil||s.createRenderbuffer();let d,m;this.renderer.context.webGLVersion===1?(d=s.DEPTH_STENCIL_ATTACHMENT,m=s.DEPTH_STENCIL):t.depth&&t.stencil?(d=s.DEPTH_STENCIL_ATTACHMENT,m=s.DEPTH24_STENCIL8):t.depth?(d=s.DEPTH_ATTACHMENT,m=s.DEPTH_COMPONENT24):(d=s.STENCIL_ATTACHMENT,m=s.STENCIL_INDEX8),s.bindRenderbuffer(s.RENDERBUFFER,l.stencil),l.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,l.multisample,m,t.width,t.height):s.renderbufferStorage(s.RENDERBUFFER,m,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,d,s.RENDERBUFFER,l.stencil)}else l.stencil&&(s.deleteRenderbuffer(l.stencil),l.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let s=be.NONE;if(t<=1||e===null)return s;for(let l=0;l<e.length;l++)if(e[l]<=t){s=e[l];break}return s===1&&(s=be.NONE),s}blit(t,e,s){const{current:l,renderer:o,gl:h,CONTEXT_UID:c}=this;if(o.context.webGLVersion!==2||!l)return;const d=l.glFramebuffers[c];if(!d)return;if(!t){if(!d.msaaBuffer)return;const g=l.colorTextures[0];if(!g)return;d.blitFramebuffer||(d.blitFramebuffer=new Ac(l.width,l.height),d.blitFramebuffer.addColorTexture(0,g)),t=d.blitFramebuffer,t.colorTextures[0]!==g&&(t.colorTextures[0]=g,t.dirtyId++,t.dirtyFormat++),(t.width!==l.width||t.height!==l.height)&&(t.width=l.width,t.height=l.height,t.dirtyId++,t.dirtySize++)}e||(e=Kb,e.width=l.width,e.height=l.height),s||(s=e);const m=e.width===s.width&&e.height===s.height;this.bind(t),h.bindFramebuffer(h.READ_FRAMEBUFFER,d.framebuffer),h.blitFramebuffer(e.left,e.top,e.right,e.bottom,s.left,s.top,s.right,s.bottom,h.COLOR_BUFFER_BIT,m?h.NEAREST:h.LINEAR),h.bindFramebuffer(h.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const s=t.glFramebuffers[this.CONTEXT_UID],l=this.gl;if(!s)return;delete t.glFramebuffers[this.CONTEXT_UID];const o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),e||(l.deleteFramebuffer(s.framebuffer),s.msaaBuffer&&l.deleteRenderbuffer(s.msaaBuffer),s.stencil&&l.deleteRenderbuffer(s.stencil)),s.blitFramebuffer&&this.disposeFramebuffer(s.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let s=0;s<e.length;s++)this.disposeFramebuffer(e[s],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const s=t.width,l=t.height,o=this.gl,h=e.stencil=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,h);let c,d;this.renderer.context.webGLVersion===1?(c=o.DEPTH_STENCIL_ATTACHMENT,d=o.DEPTH_STENCIL):t.depth?(c=o.DEPTH_STENCIL_ATTACHMENT,d=o.DEPTH24_STENCIL8):(c=o.STENCIL_ATTACHMENT,d=o.STENCIL_INDEX8),e.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,e.multisample,d,s,l):o.renderbufferStorage(o.RENDERBUFFER,d,s,l),o.framebufferRenderbuffer(o.FRAMEBUFFER,c,o.RENDERBUFFER,h)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ut}destroy(){this.renderer=null}}F0.extension={type:pt.RendererSystem,name:"framebuffer"},bt.add(F0);const Rc={5126:4,5123:2,5121:1};class G0{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let s=this.renderer.context.extensions.vertexArrayObject;mt.PREFER_ENV===As.WEBGL_LEGACY&&(s=null),s?(t.createVertexArray=()=>s.createVertexArrayOES(),t.bindVertexArray=l=>s.bindVertexArrayOES(l),t.deleteVertexArray=l=>s.deleteVertexArrayOES(l)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=(l,o)=>s.vertexAttribDivisorANGLE(l,o),t.drawElementsInstanced=(l,o,h,c,d)=>s.drawElementsInstancedANGLE(l,o,h,c,d),t.drawArraysInstanced=(l,o,h,c)=>s.drawArraysInstancedANGLE(l,o,h,c)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:s}=this;let l=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;l||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=l={},o=!0);const h=l[e.program.id]||this.initGeometryVao(t,e,o);this._activeGeometry=t,this._activeVao!==h&&(this._activeVao=h,this.hasVao?s.bindVertexArray(h):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let s=0;s<t.buffers.length;s++){const l=t.buffers[s];e.update(l)}}checkCompatibility(t,e){const s=t.attributes,l=e.attributeData;for(const o in l)if(!s[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(t,e){const s=t.attributes,l=e.attributeData,o=["g",t.id];for(const h in s)l[h]&&o.push(h,l[h].location);return o.join("-")}initGeometryVao(t,e,s=!0){const l=this.gl,o=this.CONTEXT_UID,h=this.renderer.buffer,c=e.program;c.glPrograms[o]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,c);const d=this.getSignature(t,c),m=t.glVertexArrayObjects[this.CONTEXT_UID];let g=m[d];if(g)return m[c.id]=g,g;const y=t.buffers,x=t.attributes,_={},v={};for(const T in y)_[T]=0,v[T]=0;for(const T in x)!x[T].size&&c.attributeData[T]?x[T].size=c.attributeData[T].size:x[T].size||console.warn(`PIXI Geometry attribute '${T}' size cannot be determined (likely the bound shader does not have the attribute)`),_[x[T].buffer]+=x[T].size*Rc[x[T].type];for(const T in x){const b=x[T],w=b.size;b.stride===void 0&&(_[b.buffer]===w*Rc[b.type]?b.stride=0:b.stride=_[b.buffer]),b.start===void 0&&(b.start=v[b.buffer],v[b.buffer]+=w*Rc[b.type])}g=l.createVertexArray(),l.bindVertexArray(g);for(let T=0;T<y.length;T++){const b=y[T];h.bind(b),s&&b._glBuffers[o].refCount++}return this.activateVao(t,c),m[c.id]=g,m[d]=g,l.bindVertexArray(null),h.unbind(Yi.ARRAY_BUFFER),g}disposeGeometry(t,e){var c;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const s=t.glVertexArrayObjects[this.CONTEXT_UID],l=this.gl,o=t.buffers,h=(c=this.renderer)==null?void 0:c.buffer;if(t.disposeRunner.remove(this),!!s){if(h)for(let d=0;d<o.length;d++){const m=o[d]._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!e&&h.dispose(o[d],e))}if(!e){for(const d in s)if(d[0]==="g"){const m=s[d];this._activeVao===m&&this.unbind(),l.deleteVertexArray(m)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let s=0;s<e.length;s++)this.disposeGeometry(this.managedGeometries[e[s]],t)}activateVao(t,e){const s=this.gl,l=this.CONTEXT_UID,o=this.renderer.buffer,h=t.buffers,c=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);let d=null;for(const m in c){const g=c[m],y=h[g.buffer],x=y._glBuffers[l];if(e.attributeData[m]){d!==x&&(o.bind(y),d=x);const _=e.attributeData[m].location;if(s.enableVertexAttribArray(_),s.vertexAttribPointer(_,g.size,g.type||s.FLOAT,g.normalized,g.stride,g.start),g.instance)if(this.hasInstance)s.vertexAttribDivisor(_,g.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,s,l){const{gl:o}=this,h=this._activeGeometry;if(h.indexBuffer){const c=h.indexBuffer.data.BYTES_PER_ELEMENT,d=c===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;c===2||c===4&&this.canUseUInt32ElementIndex?h.instanced?o.drawElementsInstanced(t,e||h.indexBuffer.data.length,d,(s||0)*c,l||1):o.drawElements(t,e||h.indexBuffer.data.length,d,(s||0)*c):console.warn("unsupported index buffer type: uint32")}else h.instanced?o.drawArraysInstanced(t,s,e||h.getSize(),l||1):o.drawArrays(t,s,e||h.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}G0.extension={type:pt.RendererSystem,name:"geometry"},bt.add(G0);const k0=new le;class H0{constructor(t,e){this._texture=t,this.mapCoord=new le,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const s=this.mapCoord;for(let l=0;l<t.length;l+=2){const o=t[l],h=t[l+1];e[l]=o*s.a+h*s.c+s.tx,e[l+1]=o*s.b+h*s.d+s.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const s=e._uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const l=e.orig,o=e.trim;o&&(k0.set(l.width/o.width,0,0,l.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(k0));const h=e.baseTexture,c=this.uClampFrame,d=this.clampMargin/h.resolution,m=this.clampOffset;return c[0]=(e._frame.x+d+m)/h.width,c[1]=(e._frame.y+d+m)/h.height,c[2]=(e._frame.x+e._frame.width-d+m)/h.width,c[3]=(e._frame.y+e._frame.height-d+m)/h.height,this.uClampOffset[0]=m/h.realWidth,this.uClampOffset[1]=m/h.realHeight,this.isSimple=e._frame.width===h.width&&e._frame.height===h.height&&e.rotate===0,!0}}var Qb=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Jb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class tE extends Ye{constructor(t,e,s){let l=null;typeof t!="string"&&e===void 0&&s===void 0&&(l=t,t=void 0,e=void 0,s=void 0),super(t||Jb,e||Qb,s),this.maskSprite=l,this.maskMatrix=new le}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,s,l){const o=this._maskSprite,h=o._texture;h.valid&&(h.uvMatrix||(h.uvMatrix=new H0(h,0)),h.uvMatrix.update(),this.uniforms.npmAlpha=h.baseTexture.alphaMode?0:1,this.uniforms.mask=h,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(h.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=h.uvMatrix.uClampFrame,t.applyFilter(this,e,s,l))}}class eE{constructor(t=null){this.type=Se.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ye.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Se.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class z0{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let s=e;if(!s.isMaskData){const o=this.maskDataPool.pop()||new eE;o.pooled=!0,o.maskObject=e,s=o}const l=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(s.copyCountersOrReset(l),s._colorMask=l?l._colorMask:15,s.autoDetect&&this.detect(s),s._target=t,s.type!==Se.SPRITE&&this.maskStack.push(s),s.enabled)switch(s.type){case Se.SCISSOR:this.renderer.scissor.push(s);break;case Se.STENCIL:this.renderer.stencil.push(s);break;case Se.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s);break;case Se.COLOR:this.pushColorMask(s);break}s.type===Se.SPRITE&&this.maskStack.push(s)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Se.SCISSOR:this.renderer.scissor.pop(e);break;case Se.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Se.SPRITE:this.popSpriteMask(e);break;case Se.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const s=this.maskStack[this.maskStack.length-1];s.type===Se.SPRITE&&s._filters&&(s._filters[0].maskSprite=s.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=Se.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Se.SCISSOR:t.type=Se.STENCIL:t.type=Se.COLOR}pushSpriteMask(t){const{maskObject:e}=t,s=t._target;let l=t._filters;l||(l=this.alphaMaskPool[this.alphaMaskIndex],l||(l=this.alphaMaskPool[this.alphaMaskIndex]=[new tE])),l[0].resolution=t.resolution,l[0].multisample=t.multisample,l[0].maskSprite=e;const o=s.filterArea;s.filterArea=e.getBounds(!0),this.renderer.filter.push(s,l),s.filterArea=o,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,s=t._colorMask=e&t.colorMask;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}popColorMask(t){const e=t._colorMask,s=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}destroy(){this.renderer=null}}z0.extension={type:pt.RendererSystem,name:"mask"},bt.add(z0);class X0{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,s=this.getStackLength();this.maskStack=t;const l=this.getStackLength();l!==s&&(l===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const V0=new le,j0=[],Y0=class Hu extends X0{constructor(t){super(t),this.glConst=mt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:s}=t,{renderer:l}=this,o=l.renderTexture,h=s.getBounds(!0,j0.pop()??new Ut);this.roundFrameToPixels(h,o.current?o.current.resolution:l.resolution,o.sourceFrame,o.destinationFrame,l.projection.transform),e&&h.fit(e),t._scissorRectLocal=h}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:s,c:l,d:o}=t;return(Math.abs(s)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(o)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||Hu.isMatrixRotated(e.worldTransform)||Hu.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const s=t._scissorRectLocal;return s.width>0&&s.height>0}roundFrameToPixels(t,e,s,l,o){Hu.isMatrixRotated(o)||(o=o?V0.copyFrom(o):V0.identity(),o.translate(-s.x,-s.y).scale(l.width/s.width,l.height/s.height).translate(l.x,l.y),this.renderer.filter.transformAABB(o,t),t.fit(l),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&j0.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};Y0.extension={type:pt.RendererSystem,name:"scissor"};let iE=Y0;bt.add(iE);class q0 extends X0{constructor(t){super(t),this.glConst=mt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:s}=this.renderer,l=t._stencilCounter;l===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),t._stencilCounter++;const o=t._colorMask;o!==0&&(t._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,l,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,o!==0&&(t._colorMask=o,s.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,l=s?s._colorMask:15;l!==0&&(s._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,l!==0&&(s._colorMask=l,e.colorMask((l&1)!==0,(l&2)!==0,(l&4)!==0,(l&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}q0.extension={type:pt.RendererSystem,name:"stencil"},bt.add(q0);class W0{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Ht("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return Ht("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return Ht("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}W0.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"_plugin"},bt.add(W0);class $0{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new le,this.transform=null}update(t,e,s,l){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,s,l),this.transform&&this.projectionMatrix.append(this.transform);const o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)}calculateProjection(t,e,s,l){const o=this.projectionMatrix,h=l?-1:1;o.identity(),o.a=1/e.width*2,o.d=h*(1/e.height*2),o.tx=-1-e.x*o.a,o.ty=-h-e.y*o.d}setTransform(t){}destroy(){this.renderer=null}}$0.extension={type:pt.RendererSystem,name:"projection"},bt.add($0);const rE=new _c,Z0=new Ut;class K0{constructor(t){this.renderer=t,this._tempMatrix=new le}generateTexture(t,e){const{region:s,...l}=e||{},o=(s==null?void 0:s.copyTo(Z0))||t.getLocalBounds(Z0,!0),h=l.resolution||this.renderer.resolution;o.width=Math.max(o.width,1/h),o.height=Math.max(o.height,1/h),l.width=o.width,l.height=o.height,l.resolution=h,l.multisample??(l.multisample=this.renderer.multisample);const c=Ns.create(l);this._tempMatrix.tx=-o.x,this._tempMatrix.ty=-o.y;const d=t.transform;return t.transform=rE,this.renderer.render(t,{renderTexture:c,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=d,c}destroy(){}}K0.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"textureGenerator"},bt.add(K0);const Is=new Ut,xa=new Ut;class Q0{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ut,this.destinationFrame=new Ut,this.viewportFrame=new Ut}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,s){const l=this.renderer;this.current=t;let o,h,c;t?(o=t.baseTexture,c=o.resolution,e||(Is.width=t.frame.width,Is.height=t.frame.height,e=Is),s||(xa.x=t.frame.x,xa.y=t.frame.y,xa.width=e.width,xa.height=e.height,s=xa),h=o.framebuffer):(c=l.resolution,e||(Is.width=l._view.screen.width,Is.height=l._view.screen.height,e=Is),s||(s=Is,s.width=e.width,s.height=e.height));const d=this.viewportFrame;d.x=s.x*c,d.y=s.y*c,d.width=s.width*c,d.height=s.height*c,t||(d.y=l.view.height-(d.y+d.height)),d.ceil(),this.renderer.framebuffer.bind(h,d),this.renderer.projection.update(s,e,c,!h),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(s)}clear(t,e){const s=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,l=ae.shared.setValue(t||s);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&l.premultiply(l.alpha);const o=this.destinationFrame,h=this.current?this.current.baseTexture:this.renderer._view.screen,c=o.width!==h.width||o.height!==h.height;if(c){let{x:d,y:m,width:g,height:y}=this.viewportFrame;d=Math.round(d),m=Math.round(m),g=Math.round(g),y=Math.round(y),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(d,m,g,y)}this.renderer.framebuffer.clear(l.red,l.green,l.blue,l.alpha,e),c&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Q0.extension={type:pt.RendererSystem,name:"renderTexture"},bt.add(Q0);class sE{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function nE(n,t){const e={},s=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);for(let l=0;l<s;l++){const o=t.getActiveAttrib(n,l);if(o.name.startsWith("gl_"))continue;const h=C0(t,o.type),c={type:h,name:o.name,size:w0(h),location:t.getAttribLocation(n,o.name)};e[o.name]=c}return e}function aE(n,t){const e={},s=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let l=0;l<s;l++){const o=t.getActiveUniform(n,l),h=o.name.replace(/\[.*?\]$/,""),c=!!o.name.match(/\[.*?\]$/),d=C0(t,o.type);e[h]={name:h,index:l,type:d,size:o.size,isArray:c,value:T0(d,o.size)}}return e}function lE(n,t){var c;const e=E0(n,n.VERTEX_SHADER,t.vertexSrc),s=E0(n,n.FRAGMENT_SHADER,t.fragmentSrc),l=n.createProgram();n.attachShader(l,e),n.attachShader(l,s);const o=(c=t.extra)==null?void 0:c.transformFeedbackVaryings;if(o&&(typeof n.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(l,o.names,o.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(l),n.getProgramParameter(l,n.LINK_STATUS)||Pb(n,l,e,s),t.attributeData=nE(l,n),t.uniformData=aE(l,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const d=Object.keys(t.attributeData);d.sort((m,g)=>m>g?1:-1);for(let m=0;m<d.length;m++)t.attributeData[d[m]].location=m,n.bindAttribLocation(l,m,d[m]);n.linkProgram(l)}n.deleteShader(e),n.deleteShader(s);const h={};for(const d in t.uniformData){const m=t.uniformData[d];h[d]={location:n.getUniformLocation(l,d),value:T0(m.type,m.size)}}return new sE(l,h)}function oE(n,t,e,s,l){e.buffer.update(l)}const uE={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},J0={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function hE(n){const t=n.map(o=>({data:o,offset:0,dataLen:0,dirty:0}));let e=0,s=0,l=0;for(let o=0;o<t.length;o++){const h=t[o];if(e=J0[h.data.type],h.data.size>1&&(e=Math.max(e,16)*h.data.size),h.dataLen=e,s%e!==0&&s<16){const c=s%e%16;s+=c,l+=c}s+e>16?(l=Math.ceil(l/16)*16,h.offset=l,l+=e,s=e):(h.offset=l,s+=e,l+=e)}return l=Math.ceil(l/16)*16,{uboElements:t,size:l}}function cE(n,t){const e=[];for(const s in n)t[s]&&e.push(t[s]);return e.sort((s,l)=>s.index-l.index),e}function fE(n,t){if(!n.autoManage)return{size:0,syncFunc:oE};const e=cE(n.uniforms,t),{uboElements:s,size:l}=hE(e),o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let h=0;h<s.length;h++){const c=s[h],d=n.uniforms[c.data.name],m=c.data.name;let g=!1;for(let y=0;y<dn.length;y++){const x=dn[y];if(x.codeUbo&&x.test(c.data,d)){o.push(`offset = ${c.offset/4};`,dn[y].codeUbo(c.data.name,d)),g=!0;break}}if(!g)if(c.data.size>1){const y=w0(c.data.type),x=Math.max(J0[c.data.type]/16,1),_=y/x,v=(4-_%4)%4;o.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};

                t = 0;

                for(var i=0; i < ${c.data.size*x}; i++)
                {
                    for(var j = 0; j < ${_}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${v};
                }

                `)}else{const y=uE[c.data.type];o.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};
                ${y};
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:l,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}let dE=0;const Jl={textureCount:0,uboCount:0};class tg{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=dE++}systemCheck(){if(!Fb())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const s=t.program,l=s.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==s&&(this.program=s,this.gl.useProgram(l.program)),e||(Jl.textureCount=0,Jl.uboCount=0,this.syncUniformGroup(t.uniformGroup,Jl)),l}setUniforms(t){const e=this.shader.program,s=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(s.uniformData,t,this.renderer)}syncUniformGroup(t,e){const s=this.getGlProgram();(!t.static||t.dirtyId!==s.uniformDirtyGroups[t.id])&&(s.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,s,e))}syncUniforms(t,e,s){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,s)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=Nb(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const s=this.getGlProgram();if(!t.static||t.dirtyId!==0||!s.uniformGroups[t.id]){t.dirtyId=0;const l=s.uniformGroups[t.id]||this.createSyncBufferGroup(t,s,e);t.buffer.update(),l(s.uniformData,t.uniforms,this.renderer,Jl,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,s.uniformBufferBindings[e])}createSyncBufferGroup(t,e,s){const{gl:l}=this.renderer;this.renderer.buffer.bind(t.buffer);const o=this.gl.getUniformBlockIndex(e.program,s);e.uniformBufferBindings[s]=this.shader.uniformBindCount,l.uniformBlockBinding(e.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;const h=this.getSignature(t,this.shader.program.uniformData,"ubo");let c=this._uboCache[h];if(c||(c=this._uboCache[h]=fE(t,this.shader.program.uniformData)),t.autoManage){const d=new Float32Array(c.size/4);t.buffer.update(d)}return e.uniformGroups[t.id]=c.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,s){const l=t.uniforms,o=[`${s}-`];for(const h in l)o.push(h),e[h]&&o.push(e[h].type);return o.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,s=t.program,l=lE(e,s);return s.glPrograms[this.renderer.CONTEXT_UID]=l,l}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}tg.extension={type:pt.RendererSystem,name:"shader"},bt.add(tg);class to{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.3 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}to.defaultOptions={hello:!1},to.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"startup"},bt.add(to);function pE(n,t=[]){return t[Mt.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.ADD]=[n.ONE,n.ONE],t[Mt.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.NONE]=[0,0],t[Mt.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],t[Mt.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Mt.SRC_IN]=[n.DST_ALPHA,n.ZERO],t[Mt.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],t[Mt.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],t[Mt.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],t[Mt.DST_IN]=[n.ZERO,n.SRC_ALPHA],t[Mt.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],t[Mt.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],t[Mt.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],t[Mt.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],t}const mE=0,gE=1,yE=2,vE=3,_E=4,xE=5,eg=class vp{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Mt.NONE,this._blendEq=!1,this.map=[],this.map[mE]=this.setBlend,this.map[gE]=this.setOffset,this.map[yE]=this.setCullFace,this.map[vE]=this.setDepthTest,this.map[_E]=this.setFrontFace,this.map[xE]=this.setDepthMask,this.checks=[],this.defaultState=new $i,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=pE(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,s=0;for(;e;)e&1&&this.map[s].call(this,!!(t.data&1<<s)),e=e>>1,s++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(vp.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(vp.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],s=this.gl;e.length===2?s.blendFunc(e[0],e[1]):s.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,s.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const s=this.checks.indexOf(t);e&&s===-1?this.checks.push(t):!e&&s!==-1&&this.checks.splice(s,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};eg.extension={type:pt.RendererSystem,name:"state"};let bE=eg;bt.add(bE);class EE extends da{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(l=>t.systems[l]),s=[...e,...Object.keys(t.systems).filter(l=>!e.includes(l))];for(const l of s)this.addSystem(t.systems[l],l)}addRunners(...t){t.forEach(e=>{this.runners[e]=new wi(e)})}addSystem(t,e){const s=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=s,this._systemsHash[e]=s;for(const l in this.runners)this.runners[l].add(s);return this}emitWithCustomOptions(t,e){const s=Object.keys(this._systemsHash);t.items.forEach(l=>{const o=s.find(h=>this._systemsHash[h]===l);l[t.name](e[o])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const ba=class zu{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=zu.defaultMaxIdle,this.checkCountMax=zu.defaultCheckCountMax,this.mode=zu.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==th.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let s=!1;for(let l=0;l<e.length;l++){const o=e[l];o.resource&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),e[l]=null,s=!0)}if(s){let l=0;for(let o=0;o<e.length;o++)e[o]!==null&&(e[l++]=e[o]);e.length=l}}unload(t){const e=this.renderer.texture,s=t._texture;s&&!s.framebuffer&&e.destroyTexture(s);for(let l=t.children.length-1;l>=0;l--)this.unload(t.children[l])}destroy(){this.renderer=null}};ba.defaultMode=th.AUTO,ba.defaultMaxIdle=60*60,ba.defaultCheckCountMax=60*10,ba.extension={type:pt.RendererSystem,name:"textureGC"};let Us=ba;bt.add(Us);class Cc{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=wt.UNSIGNED_BYTE,this.internalFormat=ht.RGBA,this.samplerType=0}}function TE(n){let t;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?t={[n.RGB]:gt.FLOAT,[n.RGBA]:gt.FLOAT,[n.ALPHA]:gt.FLOAT,[n.LUMINANCE]:gt.FLOAT,[n.LUMINANCE_ALPHA]:gt.FLOAT,[n.R8]:gt.FLOAT,[n.R8_SNORM]:gt.FLOAT,[n.RG8]:gt.FLOAT,[n.RG8_SNORM]:gt.FLOAT,[n.RGB8]:gt.FLOAT,[n.RGB8_SNORM]:gt.FLOAT,[n.RGB565]:gt.FLOAT,[n.RGBA4]:gt.FLOAT,[n.RGB5_A1]:gt.FLOAT,[n.RGBA8]:gt.FLOAT,[n.RGBA8_SNORM]:gt.FLOAT,[n.RGB10_A2]:gt.FLOAT,[n.RGB10_A2UI]:gt.FLOAT,[n.SRGB8]:gt.FLOAT,[n.SRGB8_ALPHA8]:gt.FLOAT,[n.R16F]:gt.FLOAT,[n.RG16F]:gt.FLOAT,[n.RGB16F]:gt.FLOAT,[n.RGBA16F]:gt.FLOAT,[n.R32F]:gt.FLOAT,[n.RG32F]:gt.FLOAT,[n.RGB32F]:gt.FLOAT,[n.RGBA32F]:gt.FLOAT,[n.R11F_G11F_B10F]:gt.FLOAT,[n.RGB9_E5]:gt.FLOAT,[n.R8I]:gt.INT,[n.R8UI]:gt.UINT,[n.R16I]:gt.INT,[n.R16UI]:gt.UINT,[n.R32I]:gt.INT,[n.R32UI]:gt.UINT,[n.RG8I]:gt.INT,[n.RG8UI]:gt.UINT,[n.RG16I]:gt.INT,[n.RG16UI]:gt.UINT,[n.RG32I]:gt.INT,[n.RG32UI]:gt.UINT,[n.RGB8I]:gt.INT,[n.RGB8UI]:gt.UINT,[n.RGB16I]:gt.INT,[n.RGB16UI]:gt.UINT,[n.RGB32I]:gt.INT,[n.RGB32UI]:gt.UINT,[n.RGBA8I]:gt.INT,[n.RGBA8UI]:gt.UINT,[n.RGBA16I]:gt.INT,[n.RGBA16UI]:gt.UINT,[n.RGBA32I]:gt.INT,[n.RGBA32UI]:gt.UINT,[n.DEPTH_COMPONENT16]:gt.FLOAT,[n.DEPTH_COMPONENT24]:gt.FLOAT,[n.DEPTH_COMPONENT32F]:gt.FLOAT,[n.DEPTH_STENCIL]:gt.FLOAT,[n.DEPTH24_STENCIL8]:gt.FLOAT,[n.DEPTH32F_STENCIL8]:gt.FLOAT}:t={[n.RGB]:gt.FLOAT,[n.RGBA]:gt.FLOAT,[n.ALPHA]:gt.FLOAT,[n.LUMINANCE]:gt.FLOAT,[n.LUMINANCE_ALPHA]:gt.FLOAT,[n.DEPTH_STENCIL]:gt.FLOAT},t}function AE(n){let t;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?t={[wt.UNSIGNED_BYTE]:{[ht.RGBA]:n.RGBA8,[ht.RGB]:n.RGB8,[ht.RG]:n.RG8,[ht.RED]:n.R8,[ht.RGBA_INTEGER]:n.RGBA8UI,[ht.RGB_INTEGER]:n.RGB8UI,[ht.RG_INTEGER]:n.RG8UI,[ht.RED_INTEGER]:n.R8UI,[ht.ALPHA]:n.ALPHA,[ht.LUMINANCE]:n.LUMINANCE,[ht.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[wt.BYTE]:{[ht.RGBA]:n.RGBA8_SNORM,[ht.RGB]:n.RGB8_SNORM,[ht.RG]:n.RG8_SNORM,[ht.RED]:n.R8_SNORM,[ht.RGBA_INTEGER]:n.RGBA8I,[ht.RGB_INTEGER]:n.RGB8I,[ht.RG_INTEGER]:n.RG8I,[ht.RED_INTEGER]:n.R8I},[wt.UNSIGNED_SHORT]:{[ht.RGBA_INTEGER]:n.RGBA16UI,[ht.RGB_INTEGER]:n.RGB16UI,[ht.RG_INTEGER]:n.RG16UI,[ht.RED_INTEGER]:n.R16UI,[ht.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[wt.SHORT]:{[ht.RGBA_INTEGER]:n.RGBA16I,[ht.RGB_INTEGER]:n.RGB16I,[ht.RG_INTEGER]:n.RG16I,[ht.RED_INTEGER]:n.R16I},[wt.UNSIGNED_INT]:{[ht.RGBA_INTEGER]:n.RGBA32UI,[ht.RGB_INTEGER]:n.RGB32UI,[ht.RG_INTEGER]:n.RG32UI,[ht.RED_INTEGER]:n.R32UI,[ht.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[wt.INT]:{[ht.RGBA_INTEGER]:n.RGBA32I,[ht.RGB_INTEGER]:n.RGB32I,[ht.RG_INTEGER]:n.RG32I,[ht.RED_INTEGER]:n.R32I},[wt.FLOAT]:{[ht.RGBA]:n.RGBA32F,[ht.RGB]:n.RGB32F,[ht.RG]:n.RG32F,[ht.RED]:n.R32F,[ht.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[wt.HALF_FLOAT]:{[ht.RGBA]:n.RGBA16F,[ht.RGB]:n.RGB16F,[ht.RG]:n.RG16F,[ht.RED]:n.R16F},[wt.UNSIGNED_SHORT_5_6_5]:{[ht.RGB]:n.RGB565},[wt.UNSIGNED_SHORT_4_4_4_4]:{[ht.RGBA]:n.RGBA4},[wt.UNSIGNED_SHORT_5_5_5_1]:{[ht.RGBA]:n.RGB5_A1},[wt.UNSIGNED_INT_2_10_10_10_REV]:{[ht.RGBA]:n.RGB10_A2,[ht.RGBA_INTEGER]:n.RGB10_A2UI},[wt.UNSIGNED_INT_10F_11F_11F_REV]:{[ht.RGB]:n.R11F_G11F_B10F},[wt.UNSIGNED_INT_5_9_9_9_REV]:{[ht.RGB]:n.RGB9_E5},[wt.UNSIGNED_INT_24_8]:{[ht.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[wt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ht.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:t={[wt.UNSIGNED_BYTE]:{[ht.RGBA]:n.RGBA,[ht.RGB]:n.RGB,[ht.ALPHA]:n.ALPHA,[ht.LUMINANCE]:n.LUMINANCE,[ht.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[wt.UNSIGNED_SHORT_5_6_5]:{[ht.RGB]:n.RGB},[wt.UNSIGNED_SHORT_4_4_4_4]:{[ht.RGBA]:n.RGBA},[wt.UNSIGNED_SHORT_5_5_5_1]:{[ht.RGBA]:n.RGBA}},t}class ig{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Nt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=AE(t),this.samplerTypes=TE(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let l=0;l<e;l++)this.boundTextures[l]=null;this.emptyTextures={};const s=new Cc(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Cc(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let l=0;l<6;l++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let l=0;l<this.boundTextures.length;l++)this.bind(null,l)}bind(t,e=0){const{gl:s}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const l=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(t.target,l.texture)),l.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),this.updateTexture(t)):l.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[s.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:s}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let l=0;l<s.length;l++)s[l]===this.unknownTexture&&this.bind(null,l)}for(let l=0;l<s.length;l++)s[l]===t&&(this.currentLocation!==l&&(e.activeTexture(e.TEXTURE0+l),this.currentLocation=l),e.bindTexture(t.target,this.emptyTextures[t.target].texture),s[l]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:s,CONTEXT_UID:l}=this;if(s)for(let o=t-1;o>=0;--o){const h=e[o];h&&h._glTextures[l].samplerType!==gt.FLOAT&&this.renderer.texture.unbind(h)}}initTexture(t){const e=new Cc(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var s;e.internalFormat=((s=this.internalFormats[t.type])==null?void 0:s[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??gt.FLOAT,this.webGLVersion===2&&t.type===wt.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var l;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const s=this.renderer;if(this.initTextureType(t,e),(l=t.resource)==null?void 0:l.upload(s,t,e))e.samplerType!==gt.FLOAT&&(this.hasIntegerTextures=!0);else{const o=t.realWidth,h=t.realHeight,c=s.gl;(e.width!==o||e.height!==h||e.dirtyId<0)&&(e.width=o,e.height=h,c.texImage2D(t.target,0,e.internalFormat,o,h,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:s}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),s.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const l=this.managedTextures.indexOf(t);l!==-1&&fn(this.managedTextures,l,1)}}updateTextureStyle(t){var s;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Vi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Fr.CLAMP:e.wrapMode=t.wrapMode,(s=t.resource)!=null&&s.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const s=this.gl;if(e.mipmap&&t.mipmap!==Vi.ON_MANUAL&&s.generateMipmap(t.target),s.texParameteri(t.target,s.TEXTURE_WRAP_S,e.wrapMode),s.texParameteri(t.target,s.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===Xi.LINEAR?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST);const l=this.renderer.context.extensions.anisotropicFiltering;if(l&&t.anisotropicLevel>0&&t.scaleMode===Xi.LINEAR){const o=Math.min(t.anisotropicLevel,s.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT));s.texParameterf(t.target,l.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===Xi.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(t.target,s.TEXTURE_MAG_FILTER,t.scaleMode===Xi.LINEAR?s.LINEAR:s.NEAREST)}destroy(){this.renderer=null}}ig.extension={type:pt.RendererSystem,name:"texture"},bt.add(ig);class rg{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,l=t._glTransformFeedbacks[s]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,l)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:s,renderer:l}=this;e&&l.shader.bind(e),s.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:s,CONTEXT_UID:l}=this,o=e.createTransformFeedback();t._glTransformFeedbacks[l]=o,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,o);for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];c&&(s.buffer.update(c),c._glBuffers[l].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,h,c._glBuffers[l].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),o}disposeTransformFeedback(t,e){const s=t._glTransformFeedbacks[this.CONTEXT_UID],l=this.gl;t.disposeRunner.remove(this);const o=this.renderer.buffer;if(o)for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];if(!c)continue;const d=c._glBuffers[this.CONTEXT_UID];d&&(d.refCount--,d.refCount===0&&!e&&o.dispose(c,e))}s&&(e||l.deleteTransformFeedback(s),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}rg.extension={type:pt.RendererSystem,name:"transformFeedback"},bt.add(rg);class eo{constructor(t){this.renderer=t}init(t){this.screen=new Ut(0,0,t.width,t.height),this.element=t.view||mt.ADAPTER.createCanvas(),this.resolution=t.resolution||mt.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const s=this.element.width/this.resolution,l=this.element.height/this.resolution;this.screen.width=s,this.screen.height=l,this.autoDensity&&(this.element.style.width=`${s}px`,this.element.style.height=`${l}px`),this.renderer.emit("resize",s,l),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}eo.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},eo.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"_view"},bt.add(eo),mt.PREFER_ENV=As.WEBGL2,mt.STRICT_TEXTURE_CACHE=!1,mt.RENDER_OPTIONS={...Zl.defaultOptions,...$l.defaultOptions,...eo.defaultOptions,...to.defaultOptions},Object.defineProperties(mt,{WRAP_MODE:{get(){return Nt.defaultOptions.wrapMode},set(n){Ht("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Nt.defaultOptions.wrapMode=n}},SCALE_MODE:{get(){return Nt.defaultOptions.scaleMode},set(n){Ht("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Nt.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get(){return Nt.defaultOptions.mipmap},set(n){Ht("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Nt.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get(){return Nt.defaultOptions.anisotropicLevel},set(n){Ht("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Nt.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get(){return Ht("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ye.defaultResolution},set(n){Ye.defaultResolution=n}},FILTER_MULTISAMPLE:{get(){return Ht("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ye.defaultMultisample},set(n){Ye.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get(){return Bs.defaultMaxTextures},set(n){Ht("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Bs.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get(){return Bs.defaultBatchSize},set(n){Ht("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Bs.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get(){return Bs.canUploadSameBuffer},set(n){Ht("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Bs.canUploadSameBuffer=n}},GC_MODE:{get(){return Us.defaultMode},set(n){Ht("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Us.defaultMode=n}},GC_MAX_IDLE:{get(){return Us.defaultMaxIdle},set(n){Ht("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Us.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get(){return Us.defaultCheckCountMax},set(n){Ht("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Us.defaultCheckCountMax=n}},PRECISION_VERTEX:{get(){return pr.defaultVertexPrecision},set(n){Ht("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),pr.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get(){return pr.defaultFragmentPrecision},set(n){Ht("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),pr.defaultFragmentPrecision=n}}});var Ps=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Ps||{});class Mc{constructor(t,e=null,s=0,l=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=s,this.once=l}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const sg=class ui{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Mc(null,null,1/0),this.deltaMS=1/ui.targetFPMS,this.elapsedMS=1/ui.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,s=Ps.NORMAL){return this._addListener(new Mc(t,e,s))}addOnce(t,e,s=Ps.NORMAL){return this._addListener(new Mc(t,e,s,!0))}_addListener(t){let e=this._head.next,s=this._head;if(!e)t.connect(s);else{for(;e;){if(t.priority>e.priority){t.connect(s);break}s=e,e=e.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,e){let s=this._head.next;for(;s;)s.match(t,e)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ui.targetFPMS;const s=this._head;let l=s.next;for(;l;)l=l.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,e)/1e3,ui.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!ui._shared){const t=ui._shared=new ui;t.autoStart=!0,t._protected=!0}return ui._shared}static get system(){if(!ui._system){const t=ui._system=new ui;t.autoStart=!0,t._protected=!0}return ui._system}};sg.targetFPMS=.06;let ei=sg;Object.defineProperties(mt,{TARGET_FPMS:{get(){return ei.targetFPMS},set(n){Ht("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),ei.targetFPMS=n}}});class ng{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Ps.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ei.shared:new ei,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}ng.extension=pt.Application,bt.add(ng);const ag=[];bt.handleByList(pt.Renderer,ag);function SE(n){for(const t of ag)if(t.test(n))return new t(n);throw new Error("Unable to auto-detect a suitable renderer.")}var wE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,RE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const CE=wE,lg=RE;class og{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const s=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,s)}else{const s=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,s)}e>=be.HIGH?this.multisample=be.HIGH:e>=be.MEDIUM?this.multisample=be.MEDIUM:e>=be.LOW?this.multisample=be.LOW:this.multisample=be.NONE}destroy(){}}og.extension={type:pt.RendererSystem,name:"_multisample"},bt.add(og);class ME{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class ug{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,l=t._glBuffers[s]||this.createGLBuffer(t);e.bindBuffer(t.type,l.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:s,CONTEXT_UID:l}=this;if(this.boundBufferBases[e]!==t){const o=t._glBuffers[l]||this.createGLBuffer(t);this.boundBufferBases[e]=t,s.bindBufferBase(s.UNIFORM_BUFFER,e,o.buffer)}}bindBufferRange(t,e,s){const{gl:l,CONTEXT_UID:o}=this;s=s||0;const h=t._glBuffers[o]||this.createGLBuffer(t);l.bindBufferRange(l.UNIFORM_BUFFER,e||0,h.buffer,s*256,256)}update(t){const{gl:e,CONTEXT_UID:s}=this,l=t._glBuffers[s]||this.createGLBuffer(t);if(t._updateID!==l.updateID)if(l.updateID=t._updateID,e.bindBuffer(t.type,l.buffer),l.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const o=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;l.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,o)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const s=t._glBuffers[this.CONTEXT_UID],l=this.gl;t.disposeRunner.remove(this),s&&(e||l.deleteBuffer(s.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let s=0;s<e.length;s++)this.dispose(this.managedBuffers[e[s]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:s}=this;return t._glBuffers[e]=new ME(s.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}ug.extension={type:pt.RendererSystem,name:"buffer"},bt.add(ug);class hg{constructor(t){this.renderer=t}render(t,e){const s=this.renderer;let l,o,h,c;if(e&&(l=e.renderTexture,o=e.clear,h=e.transform,c=e.skipUpdateTransform),this.renderingToScreen=!l,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=h,!s.context.isLost){if(l||(this.lastObjectRendered=t),!c){const d=t.enableTempParent();t.updateTransform(),t.disableTempParent(d)}s.renderTexture.bind(l),s.batch.currentRenderer.start(),(o??s.background.clearBeforeRender)&&s.renderTexture.clear(),t.render(s),s.batch.currentRenderer.flush(),l&&(e.blit&&s.framebuffer.blit(),l.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}hg.extension={type:pt.RendererSystem,name:"objectRenderer"},bt.add(hg);const io=class _p extends EE{constructor(t){super(),this.type=Qu.WEBGL,t=Object.assign({},mt.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ri({projectionMatrix:new le},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:_p.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(Ht("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=_p.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:Qx()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ht("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ht("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ht("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ht("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){Ht("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return Ht("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){Ht("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return Ht("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};io.extension={type:pt.Renderer,priority:1},io.__plugins={},io.__systems={};let Dc=io;bt.handleByMap(pt.RendererPlugin,Dc.__plugins),bt.handleByMap(pt.RendererSystem,Dc.__systems),bt.add(Dc);class cg extends ya{constructor(t,e){const{width:s,height:l}=e||{};super(s,l),this.items=[],this.itemDirtyIds=[];for(let o=0;o<t;o++){const h=new Nt;this.items.push(h),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let s=0;s<this.length;s++)t[s]&&(t[s].castToBaseTexture?this.addBaseTextureAt(t[s].castToBaseTexture(),s):t[s]instanceof ya?this.addResourceAt(t[s],s):this.addResourceAt(v0(t[s],e),s))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:s}=this.items[0];return this.resize(e,s),this.update(),Promise.resolve(this)}),this._load}}class DE extends cg{constructor(t,e){const{width:s,height:l}=e||{};let o,h;Array.isArray(t)?(o=t,h=t.length):h=t,super(h,{width:s,height:l}),o&&this.initFromArray(o,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=on.TEXTURE_2D_ARRAY}upload(t,e,s){const{length:l,itemDirtyIds:o,items:h}=this,{gl:c}=t;s.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,l,0,e.format,s.type,null);for(let d=0;d<l;d++){const m=h[d];o[d]<m.dirtyId&&(o[d]=m.dirtyId,m.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,d,m.resource.width,m.resource.height,1,e.format,s.type,m.resource.source))}return!0}}class OE extends mr{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const fg=class wl extends cg{constructor(t,e){const{width:s,height:l,autoLoad:o,linkBaseTexture:h}=e||{};if(t&&t.length!==wl.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:s,height:l});for(let c=0;c<wl.SIDES;c++)this.items[c].target=on.TEXTURE_CUBE_MAP_POSITIVE_X+c;this.linkBaseTexture=h!==!1,t&&this.initFromArray(t,e),o!==!1&&this.load()}bind(t){super.bind(t),t.target=on.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,s){if(s===void 0&&(s=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=on.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,s){const l=this.itemDirtyIds;for(let o=0;o<wl.SIDES;o++){const h=this.items[o];(l[o]<h.dirtyId||s.dirtyId<e.dirtyId)&&(h.valid&&h.resource?(h.resource.upload(t,h,s),l[o]=h.dirtyId):l[o]<-1&&(t.gl.texImage2D(h.target,0,s.internalFormat,e.realWidth,e.realHeight,0,e.format,s.type,null),l[o]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===wl.SIDES}};fg.SIDES=6;let BE=fg;class mn extends mr{constructor(t,e){e=e||{};let s,l,o;typeof t=="string"?(s=mn.EMPTY,l=t,o=!0):(s=t,l=null,o=!1),super(s),this.url=l,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??o,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const s=await mt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const l=await s.blob();if(this.destroyed)return;const o=await createImageBitmap(l,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===We.UNPACK?"premultiply":"none"});if(this.destroyed){o.close();return}this.source=o,this.update(),t(this)}catch(s){if(this.destroyed)return;e(s),this.onError.emit(s)}}),this._load)}upload(t,e,s){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,s)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return mn._EMPTY=mn._EMPTY??mt.ADAPTER.createCanvas(0,0),mn._EMPTY}}const Oc=class Xu extends mr{constructor(t,e){e=e||{},super(mt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},Xu.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;mr.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,s=t.height;if(!e||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let l=e*this.scale,o=s*this.scale;(this._overrideWidth||this._overrideHeight)&&(l=this._overrideWidth||this._overrideHeight/s*e,o=this._overrideHeight||this._overrideWidth/e*s),l=Math.round(l),o=Math.round(o);const h=this.source;h.width=l,h.height=o,h._pixiId=`canvas_${ws()}`,h.getContext("2d").drawImage(t,0,0,e,s,0,0,l,o),this._resolve(),this._resolve=null}}static getSize(t){const e=Xu.SVG_SIZE.exec(t),s={};return e&&(s[e[1]]=Math.round(parseFloat(e[3])),s[e[5]]=Math.round(parseFloat(e[7]))),s}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Xu.SVG_XML.test(t)}};Oc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Oc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Bc=Oc;class NE extends mr{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const Nc=class xp extends mr{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const s=document.createElement("video");e.autoLoad!==!1&&s.setAttribute("preload","auto"),e.playsinline!==!1&&(s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline","")),e.muted===!0&&(s.setAttribute("muted",""),s.muted=!0),e.loop===!0&&s.setAttribute("loop",""),e.autoPlay!==!1&&s.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const l=t[0].src||t[0];mr.crossOrigin(s,l,e.crossorigin);for(let o=0;o<t.length;++o){const h=document.createElement("source");let{src:c,mime:d}=t[o];if(c=c||t[o],c.startsWith("data:"))d=c.slice(5,c.indexOf(";"));else if(!c.startsWith("blob:")){const m=c.split("?").shift().toLowerCase(),g=m.slice(m.lastIndexOf(".")+1);d=d||xp.MIME_TYPES[g]||`video/${g}`}h.src=c,d&&(h.type=d),s.appendChild(h)}t=s}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=ei.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,s)=>{this.valid?e(this):(this._resolve=e,this._reject=s,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(ei.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ei.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ei.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||xp.TYPES.includes(e)}};Nc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Nc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let dg=Nc;pc.push(mn,N0,OE,dg,NE,Bc,Ll,BE,DE);class ro{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ut.EMPTY:(t=t||new Ut(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:s,b:l,c:o,d:h,tx:c,ty:d}=t,m=s*e.x+o*e.y+c,g=l*e.x+h*e.y+d;this.minX=Math.min(this.minX,m),this.maxX=Math.max(this.maxX,m),this.minY=Math.min(this.minY,g),this.maxY=Math.max(this.maxY,g)}addQuad(t){let e=this.minX,s=this.minY,l=this.maxX,o=this.maxY,h=t[0],c=t[1];e=h<e?h:e,s=c<s?c:s,l=h>l?h:l,o=c>o?c:o,h=t[2],c=t[3],e=h<e?h:e,s=c<s?c:s,l=h>l?h:l,o=c>o?c:o,h=t[4],c=t[5],e=h<e?h:e,s=c<s?c:s,l=h>l?h:l,o=c>o?c:o,h=t[6],c=t[7],e=h<e?h:e,s=c<s?c:s,l=h>l?h:l,o=c>o?c:o,this.minX=e,this.minY=s,this.maxX=l,this.maxY=o}addFrame(t,e,s,l,o){this.addFrameMatrix(t.worldTransform,e,s,l,o)}addFrameMatrix(t,e,s,l,o){const h=t.a,c=t.b,d=t.c,m=t.d,g=t.tx,y=t.ty;let x=this.minX,_=this.minY,v=this.maxX,T=this.maxY,b=h*e+d*s+g,w=c*e+m*s+y;x=b<x?b:x,_=w<_?w:_,v=b>v?b:v,T=w>T?w:T,b=h*l+d*s+g,w=c*l+m*s+y,x=b<x?b:x,_=w<_?w:_,v=b>v?b:v,T=w>T?w:T,b=h*e+d*o+g,w=c*e+m*o+y,x=b<x?b:x,_=w<_?w:_,v=b>v?b:v,T=w>T?w:T,b=h*l+d*o+g,w=c*l+m*o+y,x=b<x?b:x,_=w<_?w:_,v=b>v?b:v,T=w>T?w:T,this.minX=x,this.minY=_,this.maxX=v,this.maxY=T}addVertexData(t,e,s){let l=this.minX,o=this.minY,h=this.maxX,c=this.maxY;for(let d=e;d<s;d+=2){const m=t[d],g=t[d+1];l=m<l?m:l,o=g<o?g:o,h=m>h?m:h,c=g>c?g:c}this.minX=l,this.minY=o,this.maxX=h,this.maxY=c}addVertices(t,e,s,l){this.addVerticesMatrix(t.worldTransform,e,s,l)}addVerticesMatrix(t,e,s,l,o=0,h=o){const c=t.a,d=t.b,m=t.c,g=t.d,y=t.tx,x=t.ty;let _=this.minX,v=this.minY,T=this.maxX,b=this.maxY;for(let w=s;w<l;w+=2){const U=e[w],N=e[w+1],L=c*U+m*N+y,B=g*N+d*U+x;_=Math.min(_,L-o),T=Math.max(T,L+o),v=Math.min(v,B-h),b=Math.max(b,B+h)}this.minX=_,this.minY=v,this.maxX=T,this.maxY=b}addBounds(t){const e=this.minX,s=this.minY,l=this.maxX,o=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<s?t.minY:s,this.maxX=t.maxX>l?t.maxX:l,this.maxY=t.maxY>o?t.maxY:o}addBoundsMask(t,e){const s=t.minX>e.minX?t.minX:e.minX,l=t.minY>e.minY?t.minY:e.minY,o=t.maxX<e.maxX?t.maxX:e.maxX,h=t.maxY<e.maxY?t.maxY:e.maxY;if(s<=o&&l<=h){const c=this.minX,d=this.minY,m=this.maxX,g=this.maxY;this.minX=s<c?s:c,this.minY=l<d?l:d,this.maxX=o>m?o:m,this.maxY=h>g?h:g}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const s=t.minX>e.x?t.minX:e.x,l=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,h=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(s<=o&&l<=h){const c=this.minX,d=this.minY,m=this.maxX,g=this.maxY;this.minX=s<c?s:c,this.minY=l<d?l:d,this.maxX=o>m?o:m,this.maxY=h>g?h:g}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,s,l,o,h){t-=o,e-=h,s+=o,l+=h,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>s?this.maxX:s,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>l?this.maxY:l}}class he extends da{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new _c,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ro,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let s=0;s<e.length;++s){const l=e[s];Object.defineProperty(he.prototype,l,Object.getOwnPropertyDescriptor(t,l))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Ut),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ut),t=this._localBoundsRect),this._localBounds||(this._localBounds=new ro);const e=this.transform,s=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(s==null?void 0:s.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const l=this._bounds,o=this._boundsID;this._bounds=this._localBounds;const h=this.getBounds(!1,t);return this.parent=s,this.transform=e,this._bounds=l,this._bounds.updateID+=this._boundsID-o,h}toGlobal(t,e,s=!1){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,s,l){return e&&(t=e.toGlobal(t,s,l)),l||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,s=1,l=1,o=0,h=0,c=0,d=0,m=0){return this.position.x=t,this.position.y=e,this.scale.x=s||1,this.scale.y=l||1,this.rotation=o,this.skew.x=h,this.skew.y=c,this.pivot.x=d,this.pivot.y=m,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new IE),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*wb}set angle(t){this.transform.rotation=t*Rb}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class IE extends he{constructor(){super(...arguments),this.sortDirty=null}}he.prototype.displayObjectUpdateTransform=he.prototype.updateTransform;const UE=new le;function PE(n,t){return n.zIndex===t.zIndex?n._lastSortedIndex-t._lastSortedIndex:n.zIndex-t.zIndex}const pg=class bp extends he{constructor(){super(),this.children=[],this.sortableChildren=bp.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const s=this.getChildIndex(t),l=this.getChildIndex(e);this.children[s]=e,this.children[l]=t,this.onChildrenChange(s<l?s:l)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const s=this.getChildIndex(t);fn(this.children,s,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],s=this.children.indexOf(e);if(s===-1)return null;e.parent=null,e.transform._parentID=-1,fn(this.children,s,1),this._boundsID++,this.onChildrenChange(s),e.emit("removed",this),this.emit("childRemoved",e,this,s)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,fn(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const s=t,l=e,o=l-s;let h;if(o>0&&o<=l){h=this.children.splice(s,o);for(let c=0;c<h.length;++c)h[c].parent=null,h[c].transform&&(h[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let c=0;c<h.length;++c)h[c].emit("removed",this),this.emit("childRemoved",h[c],this,c);return h}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,s=this.children.length;e<s;++e){const l=this.children[e];l._lastSortedIndex=e,!t&&l.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(PE),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const s=this.children[t];s.visible&&s.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const s=e._mask.isMaskData?e._mask.maskObject:e._mask;s?(s.calculateBounds(),this._bounds.addBoundsMask(e._bounds,s._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const s=super.getLocalBounds(t);if(!e)for(let l=0,o=this.children.length;l<o;++l){const h=this.children[l];h.visible&&h.updateTransform()}return s}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let s,l;this.cullArea?(s=this.cullArea,l=this.worldTransform):this._render!==bp.prototype._render&&(s=this.getBounds(!0));const o=t.projection.transform;if(o&&(l?(l=UE.copyFrom(l),l.prepend(o)):l=o),s&&e.intersects(s,l))this._render(t);else if(this.cullArea)return;for(let h=0,c=this.children.length;h<c;++h){const d=this.children[h],m=d.cullable;d.cullable=m||!this.cullArea,d.render(t),d.cullable=m}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let s=0,l=this.children.length;s<l;++s)this.children[s].render(t)}}renderAdvanced(t){var o,h,c;const e=this.filters,s=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let d=0;d<e.length;d++)e[d].enabled&&this._enabledFilters.push(e[d])}const l=e&&((o=this._enabledFilters)==null?void 0:o.length)||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==Se.NONE));if(l&&t.batch.flush(),e&&((h=this._enabledFilters)!=null&&h.length)&&t.filter.push(this,this._enabledFilters),s&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let d=0,m=this.children.length;d<m;++d)this.children[d].render(t)}l&&t.batch.flush(),s&&t.mask.pop(this),e&&((c=this._enabledFilters)!=null&&c.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,s=this.removeChildren(0,this.children.length);if(e)for(let l=0;l<s.length;++l)s[l].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};pg.defaultSortableChildren=!1;let di=pg;di.prototype.containerUpdateTransform=di.prototype.updateTransform,Object.defineProperties(mt,{SORTABLE_CHILDREN:{get(){return di.defaultSortableChildren},set(n){Ht("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),di.defaultSortableChildren=n}}});const Ea=new Vt,LE=new Uint16Array([0,1,2,0,2,3]);class ye extends di{constructor(t){super(),this._anchor=new dr(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ae(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Mt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||xt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=LE,this.pluginName="batch",this.isSprite=!0,this._roundPixels=mt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Gr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Gr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,s=e.a,l=e.b,o=e.c,h=e.d,c=e.tx,d=e.ty,m=this.vertexData,g=t.trim,y=t.orig,x=this._anchor;let _=0,v=0,T=0,b=0;if(g?(v=g.x-x._x*y.width,_=v+g.width,b=g.y-x._y*y.height,T=b+g.height):(v=-x._x*y.width,_=v+y.width,b=-x._y*y.height,T=b+y.height),m[0]=s*v+o*b+c,m[1]=h*b+l*v+d,m[2]=s*_+o*b+c,m[3]=h*b+l*_+d,m[4]=s*_+o*T+c,m[5]=h*T+l*_+d,m[6]=s*v+o*T+c,m[7]=h*T+l*v+d,this._roundPixels){const w=mt.RESOLUTION;for(let U=0;U<m.length;++U)m[U]=Math.round(m[U]*w)/w}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,s=t.orig,l=this._anchor,o=this.transform.worldTransform,h=o.a,c=o.b,d=o.c,m=o.d,g=o.tx,y=o.ty,x=-l._x*s.width,_=x+s.width,v=-l._y*s.height,T=v+s.height;if(e[0]=h*x+d*v+g,e[1]=m*v+c*x+y,e[2]=h*_+d*v+g,e[3]=m*v+c*_+y,e[4]=h*_+d*T+g,e[5]=m*T+c*_+y,e[6]=h*x+d*T+g,e[7]=m*T+c*x+y,this._roundPixels){const b=mt.RESOLUTION;for(let w=0;w<e.length;++w)e[w]=Math.round(e[w]*b)/b}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new ro),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ut),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Ea);const e=this._texture.orig.width,s=this._texture.orig.height,l=-e*this.anchor.x;let o=0;return Ea.x>=l&&Ea.x<l+e&&(o=-s*this.anchor.y,Ea.y>=o&&Ea.y<o+s)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const s=t instanceof xt?t:xt.from(t,e);return new ye(s)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Gr(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Gr(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||xt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const mg=new le;he.prototype._cacheAsBitmap=!1,he.prototype._cacheData=null,he.prototype._cacheAsBitmapResolution=null,he.prototype._cacheAsBitmapMultisample=null;class FE{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(he.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;this._cacheAsBitmap=n;let t;n?(this._cacheData||(this._cacheData=new FE),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}),he.prototype._renderCached=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(n))},he.prototype._initCachedDisplayObject=function(n){var x,_;if((x=this._cacheData)!=null&&x.sprite)return;const t=this.alpha;this.alpha=1,n.batch.flush();const e=this.getLocalBounds(new Ut,!0);if((_=this.filters)!=null&&_.length){const v=this.filters[0].padding;e.pad(v)}const s=this.cacheAsBitmapResolution||n.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const l=n.renderTexture.current,o=n.renderTexture.sourceFrame.clone(),h=n.renderTexture.destinationFrame.clone(),c=n.projection.transform,d=Ns.create({width:e.width,height:e.height,resolution:s,multisample:this.cacheAsBitmapMultisample??n.multisample}),m=`cacheAsBitmap_${ws()}`;this._cacheData.textureCacheId=m,Nt.addToCache(d.baseTexture,m),xt.addToCache(d,m);const g=this.transform.localTransform.copyTo(mg).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,n.render(this,{renderTexture:d,clear:!0,transform:g,skipUpdateTransform:!1}),n.framebuffer.blit(),n.projection.transform=c,n.renderTexture.bind(l,o,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const y=new ye(d);y.transform.worldTransform=this.transform.worldTransform,y.anchor.x=-(e.x/e.width),y.anchor.y=-(e.y/e.height),y.alpha=t,y._bounds=this._bounds,this._cacheData.sprite=y,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=y.containsPoint.bind(y)},he.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(n))},he.prototype._initCachedDisplayObjectCanvas=function(n){var g;if((g=this._cacheData)!=null&&g.sprite)return;const t=this.getLocalBounds(new Ut,!0),e=this.alpha;this.alpha=1;const s=n.canvasContext.activeContext,l=n._projTransform,o=this.cacheAsBitmapResolution||n.resolution;t.ceil(o),t.width=Math.max(t.width,1/o),t.height=Math.max(t.height,1/o);const h=Ns.create({width:t.width,height:t.height,resolution:o}),c=`cacheAsBitmap_${ws()}`;this._cacheData.textureCacheId=c,Nt.addToCache(h.baseTexture,c),xt.addToCache(h,c);const d=mg;this.transform.localTransform.copyTo(d),d.invert(),d.tx-=t.x,d.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,n.render(this,{renderTexture:h,clear:!0,transform:d,skipUpdateTransform:!1}),n.canvasContext.activeContext=s,n._projTransform=l,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const m=new ye(h);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(t.x/t.width),m.anchor.y=-(t.y/t.height),m.alpha=e,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=m.containsPoint.bind(m)},he.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},he.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},he.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Nt.removeFromCache(this._cacheData.textureCacheId),xt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},he.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1,this.destroy(n)},he.prototype.name=null,di.prototype.getChildByName=function(n,t){for(let e=0,s=this.children.length;e<s;e++)if(this.children[e].name===n)return this.children[e];if(t)for(let e=0,s=this.children.length;e<s;e++){const l=this.children[e];if(!l.getChildByName)continue;const o=l.getChildByName(n,!0);if(o)return o}return null},he.prototype.getGlobalPosition=function(n=new Vt,t=!1){return this.parent?this.parent.toGlobal(this.position,n,t):(n.x=this.position.x,n.y=this.position.y),n};var GE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class kE extends Ye{constructor(t=1){super(CE,GE,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const HE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},zE=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function XE(n){const t=HE[n],e=t.length;let s=zE,l="";const o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let h;for(let c=0;c<n;c++){let d=o.replace("%index%",c.toString());h=c,c>=e&&(h=n-c-1),d=d.replace("%value%",t[h].toString()),l+=d,l+=`
`}return s=s.replace("%blur%",l),s=s.replace("%size%",n.toString()),s}const VE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function jE(n,t){const e=Math.ceil(n/2);let s=VE,l="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let h=0;h<n;h++){let c=o.replace("%index%",h.toString());c=c.replace("%sampleIndex%",`${h-(e-1)}.0`),l+=c,l+=`
`}return s=s.replace("%blur%",l),s=s.replace("%size%",n.toString()),s}class Ic extends Ye{constructor(t,e=8,s=4,l=Ye.defaultResolution,o=5){const h=jE(o,t),c=XE(o);super(h,c),this.horizontal=t,this.resolution=l,this._quality=0,this.quality=s,this.blur=e}apply(t,e,s,l){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/e.width):this.uniforms.strength=1/s.height*(s.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,s,l);else{const o=t.getFilterTexture(),h=t.renderer;let c=e,d=o;this.state.blend=!1,t.applyFilter(this,c,d,ji.CLEAR);for(let m=1;m<this.passes-1;m++){t.bindAndClear(c,ji.BLIT),this.uniforms.uSampler=d;const g=d;d=c,c=g,h.shader.bind(this),h.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,d,s,l),t.returnFilterTexture(o)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class YE extends Ye{constructor(t=8,e=4,s=Ye.defaultResolution,l=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Ic(!0,t,e,s,l),this.blurYFilter=new Ic(!1,t,e,s,l),this.resolution=s,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,s,l){const o=Math.abs(this.blurXFilter.strength),h=Math.abs(this.blurYFilter.strength);if(o&&h){const c=t.getFilterTexture();this.blurXFilter.apply(t,e,c,ji.CLEAR),this.blurYFilter.apply(t,c,s,l),t.returnFilterTexture(c)}else h?this.blurYFilter.apply(t,e,s,l):this.blurXFilter.apply(t,e,s,l)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var qE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Uc extends Ye{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(lg,qE,t),this.alpha=1}_loadMatrix(t,e=!1){let s=t;e&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s}_multiply(t,e,s){return t[0]=e[0]*s[0]+e[1]*s[5]+e[2]*s[10]+e[3]*s[15],t[1]=e[0]*s[1]+e[1]*s[6]+e[2]*s[11]+e[3]*s[16],t[2]=e[0]*s[2]+e[1]*s[7]+e[2]*s[12]+e[3]*s[17],t[3]=e[0]*s[3]+e[1]*s[8]+e[2]*s[13]+e[3]*s[18],t[4]=e[0]*s[4]+e[1]*s[9]+e[2]*s[14]+e[3]*s[19]+e[4],t[5]=e[5]*s[0]+e[6]*s[5]+e[7]*s[10]+e[8]*s[15],t[6]=e[5]*s[1]+e[6]*s[6]+e[7]*s[11]+e[8]*s[16],t[7]=e[5]*s[2]+e[6]*s[7]+e[7]*s[12]+e[8]*s[17],t[8]=e[5]*s[3]+e[6]*s[8]+e[7]*s[13]+e[8]*s[18],t[9]=e[5]*s[4]+e[6]*s[9]+e[7]*s[14]+e[8]*s[19]+e[9],t[10]=e[10]*s[0]+e[11]*s[5]+e[12]*s[10]+e[13]*s[15],t[11]=e[10]*s[1]+e[11]*s[6]+e[12]*s[11]+e[13]*s[16],t[12]=e[10]*s[2]+e[11]*s[7]+e[12]*s[12]+e[13]*s[17],t[13]=e[10]*s[3]+e[11]*s[8]+e[12]*s[13]+e[13]*s[18],t[14]=e[10]*s[4]+e[11]*s[9]+e[12]*s[14]+e[13]*s[19]+e[14],t[15]=e[15]*s[0]+e[16]*s[5]+e[17]*s[10]+e[18]*s[15],t[16]=e[15]*s[1]+e[16]*s[6]+e[17]*s[11]+e[18]*s[16],t[17]=e[15]*s[2]+e[16]*s[7]+e[17]*s[12]+e[18]*s[17],t[18]=e[15]*s[3]+e[16]*s[8]+e[17]*s[13]+e[18]*s[18],t[19]=e[15]*s[4]+e[16]*s[9]+e[17]*s[14]+e[18]*s[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const s=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}tint(t,e){const[s,l,o]=ae.shared.setValue(t).toArray(),h=[s,0,0,0,0,0,l,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(h,e)}greyscale(t,e){const s=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const s=Math.cos(t),l=Math.sin(t),o=Math.sqrt,h=1/3,c=o(h),d=s+(1-s)*h,m=h*(1-s)-c*l,g=h*(1-s)+c*l,y=h*(1-s)+c*l,x=s+h*(1-s),_=h*(1-s)-c*l,v=h*(1-s)-c*l,T=h*(1-s)+c*l,b=s+h*(1-s),w=[d,m,g,0,0,y,x,_,0,0,v,T,b,0,0,0,0,0,1,0];this._loadMatrix(w,e)}contrast(t,e){const s=(t||0)+1,l=-.5*(s-1),o=[s,0,0,0,l,0,s,0,0,l,0,0,s,0,l,0,0,0,1,0];this._loadMatrix(o,e)}saturate(t=0,e){const s=t*2/3+1,l=(s-1)*-.5,o=[s,l,l,0,0,l,s,l,0,0,l,l,s,0,0,0,0,0,1,0];this._loadMatrix(o,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,s,l,o){t=t||.2,e=e||.15,s=s||16770432,l=l||3375104;const h=ae.shared,[c,d,m]=h.setValue(s).toArray(),[g,y,x]=h.setValue(l).toArray(),_=[.3,.59,.11,0,0,c,d,m,t,0,g,y,x,e,0,c-g,d-y,m-x,0,0];this._loadMatrix(_,o)}night(t,e){t=t||.1;const s=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(s,e)}predator(t,e){const s=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(s,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Uc.prototype.grayscale=Uc.prototype.greyscale;var WE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,$E=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class ZE extends Ye{constructor(t,e){const s=new le;t.renderable=!1,super($E,WE,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=s,e==null&&(e=20),this.scale=new Vt(e,e)}apply(t,e,s,l){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const o=this.maskSprite.worldTransform,h=Math.sqrt(o.a*o.a+o.b*o.b),c=Math.sqrt(o.c*o.c+o.d*o.d);h!==0&&c!==0&&(this.uniforms.rotation[0]=o.a/h,this.uniforms.rotation[1]=o.b/h,this.uniforms.rotation[2]=o.c/c,this.uniforms.rotation[3]=o.d/c),t.applyFilter(this,e,s,l)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var KE=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,QE=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class JE extends Ye{constructor(){super(QE,KE)}}var tT=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class eT extends Ye{constructor(t=.5,e=Math.random()){super(lg,tT,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const gg={AlphaFilter:kE,BlurFilter:YE,BlurFilterPass:Ic,ColorMatrixFilter:Uc,DisplacementFilter:ZE,FXAAFilter:JE,NoiseFilter:eT};Object.entries(gg).forEach(([n,t])=>{Object.defineProperty(gg,n,{get(){return Ht("7.1.0",`filters.${n} has moved to ${n}`),t}})});class iT{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(ei.system.add(this.tickerUpdate,this,Ps.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(ei.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const zr=new iT;class Ta{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Ta.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Vt,this.page=new Vt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,s,l,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class so extends Ta{constructor(){super(...arguments),this.client=new Vt,this.movement=new Vt,this.offset=new Vt,this.global=new Vt,this.screen=new Vt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,s){return t.worldTransform.applyInverse(s||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,s,l,o,h,c,d,m,g,y,x,_,v,T){throw new Error("Method not implemented.")}}class Ci extends so{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class gn extends so{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}gn.DOM_DELTA_PIXEL=0,gn.DOM_DELTA_LINE=1,gn.DOM_DELTA_PAGE=2;const rT=2048,sT=new Vt,Pc=new Vt;class nT{constructor(t){this.dispatch=new da,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((s,l)=>s.priority-l.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let s=0,l=e.length;s<l;s++)e[s].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){zr.pauseUpdate=!0;const s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",l=this[s](this.rootTarget,this.rootTarget.eventMode,sT.set(t,e),this.hitTestFn,this.hitPruneFn);return l&&l[0]}propagate(t,e){if(!t.target)return;const s=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let l=0,o=s.length-1;l<o;l++)if(t.currentTarget=s[l],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let l=s.length-2;l>=0;l--)if(t.currentTarget=s[l],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,s=this._allInteractiveElements){if(s.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const l=Array.isArray(e)?e:[e];for(let o=s.length-1;o>=0;o--)l.forEach(h=>{t.currentTarget=s[o],this.notifyTarget(t,h)})}propagationPath(t){const e=[t];for(let s=0;s<rT&&t!==this.rootTarget;s++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,s,l,o,h=!1){let c=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(zr.pauseUpdate=!1),t.interactiveChildren&&t.children){const g=t.children;for(let y=g.length-1;y>=0;y--){const x=g[y],_=this.hitTestMoveRecursive(x,this._isInteractive(e)?e:x.eventMode,s,l,o,h||o(t,s));if(_){if(_.length>0&&!_[_.length-1].parent)continue;const v=t.isInteractive();(_.length>0||v)&&(v&&this._allInteractiveElements.push(t),_.push(t)),this._hitElements.length===0&&(this._hitElements=_),c=!0}}}const d=this._isInteractive(e),m=t.isInteractive();return d&&m&&this._allInteractiveElements.push(t),h||this._hitElements.length>0?null:c?this._hitElements:d&&!o(t,s)&&l(t,s)?m?[t]:[]:null}hitTestRecursive(t,e,s,l,o){if(this._interactivePrune(t)||o(t,s))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(zr.pauseUpdate=!1),t.interactiveChildren&&t.children){const d=t.children;for(let m=d.length-1;m>=0;m--){const g=d[m],y=this.hitTestRecursive(g,this._isInteractive(e)?e:g.eventMode,s,l,o);if(y){if(y.length>0&&!y[y.length-1].parent)continue;const x=t.isInteractive();return(y.length>0||x)&&y.push(t),y}}}const h=this._isInteractive(e),c=t.isInteractive();return h&&l(t,s)?c?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var s;if(t.hitArea&&(t.worldTransform.applyInverse(e,Pc),!t.hitArea.contains(Pc.x,Pc.y)))return!0;if(t._mask){const l=t._mask.isMaskData?t._mask.maskObject:t._mask;if(l&&!((s=l.containsPoint)!=null&&s.call(l,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var o,h;e=e??t.type;const s=`on${e}`;(h=(o=t.currentTarget)[s])==null||h.call(o,t);const l=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,l),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const l=e.button===2;this.dispatchEvent(e,l?"rightdown":"mousedown")}const s=this.trackingData(t.pointerId);s.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var d,m;if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const s=e.pointerType==="mouse"||e.pointerType==="pen",l=this.trackingData(t.pointerId),o=this.findMountedTarget(l.overTargets);if(((d=l.overTargets)==null?void 0:d.length)>0&&o!==e.target){const g=t.type==="mousemove"?"mouseout":"pointerout",y=this.createPointerEvent(t,g,o);if(this.dispatchEvent(y,"pointerout"),s&&this.dispatchEvent(y,"mouseout"),!e.composedPath().includes(o)){const x=this.createPointerEvent(t,"pointerleave",o);for(x.eventPhase=x.AT_TARGET;x.target&&!e.composedPath().includes(x.target);)x.currentTarget=x.target,this.notifyTarget(x),s&&this.notifyTarget(x,"mouseleave"),x.target=x.target.parent;this.freeEvent(x)}this.freeEvent(y)}if(o!==e.target){const g=t.type==="mousemove"?"mouseover":"pointerover",y=this.clonePointerEvent(e,g);this.dispatchEvent(y,"pointerover"),s&&this.dispatchEvent(y,"mouseover");let x=o==null?void 0:o.parent;for(;x&&x!==this.rootTarget.parent&&x!==e.target;)x=x.parent;if(!x||x===this.rootTarget.parent){const _=this.clonePointerEvent(e,"pointerenter");for(_.eventPhase=_.AT_TARGET;_.target&&_.target!==o&&_.target!==this.rootTarget.parent;)_.currentTarget=_.target,this.notifyTarget(_),s&&this.notifyTarget(_,"mouseenter"),_.target=_.target.parent;this.freeEvent(_)}this.freeEvent(y)}const h=[],c=this.enableGlobalMoveEvents??!0;this.moveOnAll?h.push("pointermove"):this.dispatchEvent(e,"pointermove"),c&&h.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?h.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),c&&h.push("globaltouchmove")),s&&(this.moveOnAll?h.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),c&&h.push("globalmousemove"),this.cursor=(m=e.target)==null?void 0:m.cursor),h.length>0&&this.all(e,h),this._allInteractiveElements.length=0,this._hitElements.length=0,l.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var h;if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.createPointerEvent(t),l=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),l&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(h=s.target)==null?void 0:h.cursor);const o=this.clonePointerEvent(s,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),l&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;e.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(o)}mapPointerOut(t){if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const s=t.pointerType==="mouse"||t.pointerType==="pen",l=this.findMountedTarget(e.overTargets),o=this.createPointerEvent(t,"pointerout",l);this.dispatchEvent(o),s&&this.dispatchEvent(o,"mouseout");const h=this.createPointerEvent(t,"pointerleave",l);for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),s&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;e.overTargets=null,this.freeEvent(o),this.freeEvent(h)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),s=this.createPointerEvent(t);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const c=s.button===2;this.dispatchEvent(s,c?"rightup":"mouseup")}const l=this.trackingData(t.pointerId),o=this.findMountedTarget(l.pressTargetsByButton[t.button]);let h=o;if(o&&!s.composedPath().includes(o)){let c=o;for(;c&&!s.composedPath().includes(c);){if(s.currentTarget=c,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const d=s.button===2;this.notifyTarget(s,d?"rightupoutside":"mouseupoutside")}c=c.parent}delete l.pressTargetsByButton[t.button],h=c}if(h){const c=this.clonePointerEvent(s,"click");c.target=h,c.path=null,l.clicksByButton[t.button]||(l.clicksByButton[t.button]={clickCount:0,target:c.target,timeStamp:e});const d=l.clicksByButton[t.button];if(d.target===c.target&&e-d.timeStamp<200?++d.clickCount:d.clickCount=1,d.target=c.target,d.timeStamp=e,c.detail=d.clickCount,c.pointerType==="mouse"){const m=c.button===2;this.dispatchEvent(c,m?"rightclick":"click")}else c.pointerType==="touch"&&this.dispatchEvent(c,"tap");this.dispatchEvent(c,"pointertap"),this.freeEvent(c)}this.freeEvent(s)}mapPointerUpOutside(t){if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.findMountedTarget(e.pressTargetsByButton[t.button]),l=this.createPointerEvent(t);if(s){let o=s;for(;o;)l.currentTarget=o,this.notifyTarget(l,"pointerupoutside"),l.pointerType==="touch"?this.notifyTarget(l,"touchendoutside"):(l.pointerType==="mouse"||l.pointerType==="pen")&&this.notifyTarget(l,l.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(l)}mapWheel(t){if(!(t instanceof gn)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let s=1;s<t.length&&t[s].parent===e;s++)e=t[s];return e}createPointerEvent(t,e,s){const l=this.allocateEvent(Ci);return this.copyPointerData(t,l),this.copyMouseData(t,l),this.copyData(t,l),l.nativeEvent=t.nativeEvent,l.originalEvent=t,l.target=s??this.hitTest(l.global.x,l.global.y)??this._hitElements[0],typeof e=="string"&&(l.type=e),l}createWheelEvent(t){const e=this.allocateEvent(gn);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const s=this.allocateEvent(Ci);return s.nativeEvent=t.nativeEvent,s.originalEvent=t.originalEvent,this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.target=t.target,s.path=t.composedPath().slice(),s.type=e??s.type,s}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof Ci&&e instanceof Ci&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof so&&e instanceof so&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const s=t.currentTarget._events[e];if(s&&t.currentTarget.isInteractive())if("fn"in s)s.once&&t.currentTarget.removeListener(e,s.fn,void 0,!0),s.fn.call(s.context,t);else for(let l=0,o=s.length;l<o&&!t.propagationImmediatelyStopped;l++)s[l].once&&t.currentTarget.removeListener(e,s[l].fn,void 0,!0),s[l].fn.call(s[l].context,t)}}const aT=1,lT={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Lc=class Ep{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new nT(null),zr.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ci(null),this.rootWheelEvent=new gn(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Ep.defaultEventFeatures},{set:(e,s,l)=>(s==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=l),e[s]=l,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:s}=this.renderer;this.setTargetElement(e),this.resolution=s,Ep._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const s=this.cursorStyles[t];if(s)switch(typeof s){case"string":e&&(this.domElement.style.cursor=s);break;case"function":s(t);break;case"object":e&&Object.assign(this.domElement.style,s);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let s=0,l=e.length;s<l;s++){const o=e[s],h=this.bootstrapEvent(this.rootPointerEvent,o);this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,zr.pointerMoved();const e=this.normalizeToPointerData(t);for(let s=0,l=e.length;s<l;s++){const o=this.bootstrapEvent(this.rootPointerEvent,e[s]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const s=e!==this.domElement?"outside":"",l=this.normalizeToPointerData(t);for(let o=0,h=l.length;o<h;o++){const c=this.bootstrapEvent(this.rootPointerEvent,l[o]);c.type+=s,this.rootBoundary.mapEvent(c)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let s=0,l=e.length;s<l;s++){const o=this.bootstrapEvent(this.rootPointerEvent,e[s]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,zr.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;zr.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;zr.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,s){const l=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;t.x=(e-l.left)*(this.domElement.width/l.width)*o,t.y=(s-l.top)*(this.domElement.height/l.height)*o}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let s=0,l=t.changedTouches.length;s<l;s++){const o=t.changedTouches[s];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=t.type,e.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const s=t;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=aT),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=lT[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};Lc.extension={name:"events",type:[pt.RendererSystem,pt.CanvasRendererSystem]},Lc.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Fc=Lc;bt.add(Fc);function yg(n){return n==="dynamic"||n==="static"}const oT={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??yg(Fc.defaultEventMode)},set interactive(n){Ht("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=n,this.eventMode=n?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Fc.defaultEventMode},set eventMode(n){this._internalInteractive=yg(n),this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,l=typeof e=="object"?e.signal:void 0,o=typeof e=="object"?e.once===!0:!1,h=typeof t=="function"?void 0:t;n=s?`${n}capture`:n;const c=typeof t=="function"?t:t.handleEvent,d=this;l&&l.addEventListener("abort",()=>{d.off(n,c,h)}),o?d.once(n,c,h):d.on(n,c,h)},removeEventListener(n,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,l=typeof t=="function"?void 0:t;n=s?`${n}capture`:n,t=typeof t=="function"?t:t.handleEvent,this.off(n,t,l)},dispatchEvent(n){if(!(n instanceof Ta))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};he.mixin(oT);const uT={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};he.mixin(uT);const hT=9,no=100,cT=0,fT=0,vg=2,_g=1,dT=-1e3,pT=-1e3,mT=2;class xg{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(hr.tablet||hr.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${no}px`,e.style.height=`${no}px`,e.style.position="absolute",e.style.top=`${cT}px`,e.style.left=`${fT}px`,e.style.zIndex=vg.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${_g}px`,t.style.height=`${_g}px`,t.style.position="absolute",t.style.top=`${dT}px`,t.style.left=`${pT}px`,t.style.zIndex=mT.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let s=0;s<e.length;s++)this.updateAccessibleObjects(e[s])}update(){const t=performance.now();if(hr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:s,width:l,height:o}=this.renderer.view.getBoundingClientRect(),{width:h,height:c,resolution:d}=this.renderer,m=l/h*d,g=o/c*d;let y=this.div;y.style.left=`${e}px`,y.style.top=`${s}px`,y.style.width=`${h}px`,y.style.height=`${c}px`;for(let x=0;x<this.children.length;x++){const _=this.children[x];if(_.renderId!==this.renderId)_._accessibleActive=!1,fn(this.children,x,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,x--;else{y=_._accessibleDiv;let v=_.hitArea;const T=_.worldTransform;_.hitArea?(y.style.left=`${(T.tx+v.x*T.a)*m}px`,y.style.top=`${(T.ty+v.y*T.d)*g}px`,y.style.width=`${v.width*T.a*m}px`,y.style.height=`${v.height*T.d*g}px`):(v=_.getBounds(),this.capHitArea(v),y.style.left=`${v.x*m}px`,y.style.top=`${v.y*g}px`,y.style.width=`${v.width*m}px`,y.style.height=`${v.height*g}px`,y.title!==_.accessibleTitle&&_.accessibleTitle!==null&&(y.title=_.accessibleTitle),y.getAttribute("aria-label")!==_.accessibleHint&&_.accessibleHint!==null&&y.setAttribute("aria-label",_.accessibleHint)),(_.accessibleTitle!==y.title||_.tabIndex!==y.tabIndex)&&(y.title=_.accessibleTitle,y.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(y))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:s}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>s&&(t.height=s-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${no}px`,e.style.height=`${no}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=vg.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:s}=t.target,l=this.renderer.events.rootBoundary,o=Object.assign(new Ta(l),{target:s});l.rootTarget=this.renderer.lastObjectRendered,e.forEach(h=>l.dispatchEvent(o,h))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===hT&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}xg.extension={name:"accessibility",type:[pt.RendererPlugin,pt.CanvasRendererPlugin]},bt.add(xg);const bg=class Tp{constructor(t){this.stage=new di,t=Object.assign({forceCanvas:!1},t),this.renderer=SE(t),Tp._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const s=Tp._plugins.slice(0);s.reverse(),s.forEach(l=>{l.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};bg._plugins=[];let Eg=bg;bt.handleByList(pt.Application,Eg._plugins);class Tg{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,s;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:l,clientHeight:o}=this._resizeTo;e=l,s=o}this.renderer.resize(e,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Tg.extension=pt.Application,bt.add(Tg);const Ag={loader:pt.LoadParser,resolver:pt.ResolveParser,cache:pt.CacheParser,detection:pt.DetectionParser};bt.handle(pt.Asset,n=>{const t=n.ref;Object.entries(Ag).filter(([e])=>!!t[e]).forEach(([e,s])=>bt.add(Object.assign(t[e],{extension:t[e].extension??s})))},n=>{const t=n.ref;Object.keys(Ag).filter(e=>!!t[e]).forEach(e=>bt.remove(t[e]))});class gT{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<e;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function yn(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function Xr(n,t){const e=n.split("?")[0],s=De.extname(e).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const Mi=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(s=>typeof s=="string"||e?t(s):s):n),Gc=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n};function Sg(n,t,e,s,l){const o=t[e];for(let h=0;h<o.length;h++){const c=o[h];e<t.length-1?Sg(n.replace(s[e],c),t,e+1,s,l):l.push(n.replace(s[e],c))}}function yT(n){const t=/\{(.*?)\}/g,e=n.match(t),s=[];if(e){const l=[];e.forEach(o=>{const h=o.substring(1,o.length-1).split(",");l.push(h)}),Sg(n,l,0,e,s)}else s.push(n);return s}const ao=n=>!Array.isArray(n);class vT{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const s=Mi(t);let l;for(let c=0;c<this.parsers.length;c++){const d=this.parsers[c];if(d.test(e)){l=d.getCacheableAssets(s,e);break}}l||(l={},s.forEach(c=>{l[c]=e}));const o=Object.keys(l),h={cacheKeys:o,keys:s};if(s.forEach(c=>{this._cacheMap.set(c,h)}),o.forEach(c=>{const d=l?l[c]:e;this._cache.has(c)&&this._cache.get(c)!==d&&console.warn("[Cache] already has key:",c),this._cache.set(c,l[c])}),e instanceof xt){const c=e;s.forEach(d=>{c.baseTexture!==xt.EMPTY.baseTexture&&Nt.addToCache(c.baseTexture,d),xt.addToCache(c,d)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(s=>{this._cache.delete(s)}),e.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const Ls=new vT;class _T{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,s)=>(this._parsersValidated=!1,t[e]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const s={promise:null,parser:null};return s.promise=(async()=>{var h,c;let l=null,o=null;if(e.loadParser&&(o=this._parserHash[e.loadParser],o||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!o){for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];if(m.load&&((h=m.test)!=null&&h.call(m,t,e,this))){o=m;break}}if(!o)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}l=await o.load(t,e,this),s.parser=o;for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];m.parse&&m.parse&&await((c=m.testParse)==null?void 0:c.call(m,l,e,this))&&(l=await m.parse(l,e,this)||l,s.parser=m)}return l})(),s}async load(t,e){this._parsersValidated||this._validateParsers();let s=0;const l={},o=ao(t),h=Mi(t,m=>({alias:[m],src:m})),c=h.length,d=h.map(async m=>{const g=De.toAbsolute(m.src);if(!l[m.src])try{this.promiseCache[g]||(this.promiseCache[g]=this._getLoadPromiseAndParser(g,m)),l[m.src]=await this.promiseCache[g].promise,e&&e(++s/c)}catch(y){throw delete this.promiseCache[g],delete l[m.src],new Error(`[Loader.load] Failed to load ${g}.
${y}`)}});return await Promise.all(d),o?l[h[0].src]:l}async unload(t){const e=Mi(t,s=>({alias:[s],src:s})).map(async s=>{var h,c;const l=De.toAbsolute(s.src),o=this.promiseCache[l];if(o){const d=await o.promise;delete this.promiseCache[l],(c=(h=o.parser)==null?void 0:h.unload)==null||c.call(h,d,s,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var Di=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Di||{});const xT=".json",bT="application/json",ET={extension:{type:pt.LoadParser,priority:Di.Low},name:"loadJson",test(n){return yn(n,bT)||Xr(n,xT)},async load(n){return await(await mt.ADAPTER.fetch(n)).json()}};bt.add(ET);const TT=".txt",AT="text/plain",ST={name:"loadTxt",extension:{type:pt.LoadParser,priority:Di.Low},test(n){return yn(n,AT)||Xr(n,TT)},async load(n){return await(await mt.ADAPTER.fetch(n)).text()}};bt.add(ST);const wT=["normal","bold","100","200","300","400","500","600","700","800","900"],RT=[".ttf",".otf",".woff",".woff2"],CT=["font/ttf","font/otf","font/woff","font/woff2"],MT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function DT(n){const t=De.extname(n),e=De.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let s=e.length>0;for(const o of e)if(!o.match(MT)){s=!1;break}let l=e.join(" ");return s||(l=`"${l.replace(/[\\"]/g,"\\$&")}"`),l}const OT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function BT(n){return OT.test(n)?n:encodeURI(n)}const NT={extension:{type:pt.LoadParser,priority:Di.Low},name:"loadWebFont",test(n){return yn(n,CT)||Xr(n,RT)},async load(n,t){var s,l,o;const e=mt.ADAPTER.getFontFaceSet();if(e){const h=[],c=((s=t.data)==null?void 0:s.family)??DT(n),d=((o=(l=t.data)==null?void 0:l.weights)==null?void 0:o.filter(g=>wT.includes(g)))??["normal"],m=t.data??{};for(let g=0;g<d.length;g++){const y=d[g],x=new FontFace(c,`url(${BT(n)})`,{...m,weight:y});await x.load(),e.add(x),h.push(x)}return h.length===1?h[0]:h}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(t=>mt.ADAPTER.getFontFaceSet().delete(t))}};bt.add(NT);const IT=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let vn=null,kc=class{constructor(){vn||(vn=URL.createObjectURL(new Blob([IT],{type:"application/javascript"}))),this.worker=new Worker(vn)}};kc.revokeObjectURL=function(){vn&&(URL.revokeObjectURL(vn),vn=null)};const UT=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let _n=null;class wg{constructor(){_n||(_n=URL.createObjectURL(new Blob([UT],{type:"application/javascript"}))),this.worker=new Worker(_n)}}wg.revokeObjectURL=function(){_n&&(URL.revokeObjectURL(_n),_n=null)};let Rg=0,Hc;class PT{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new kc;e.addEventListener("message",s=>{e.terminate(),kc.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Hc===void 0&&(Hc=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Hc&&(this._createdWorkers++,t=new wg().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const s=new Promise((l,o)=>{this.queue.push({id:t,arguments:e,resolve:l,reject:o})});return this.next(),s}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),s=e.id;this.resolveHash[Rg]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Rg++,id:s})}}const Cg=new PT;function Aa(n,t,e){n.resource.internal=!0;const s=new xt(n),l=()=>{delete t.promiseCache[e],Ls.has(e)&&Ls.remove(e)};return s.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),l())}),s.once("destroyed",()=>{n.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),l())}),s}const LT=[".jpeg",".jpg",".png",".webp",".avif"],FT=["image/jpeg","image/png","image/webp","image/avif"];async function GT(n){const t=await mt.ADAPTER.fetch(n);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const lo={name:"loadTextures",extension:{type:pt.LoadParser,priority:Di.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return yn(n,FT)||Xr(n,LT)},async load(n,t,e){var c;const s=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let l;s?this.config.preferWorkers&&await Cg.isImageBitmapSupported()?l=await Cg.loadImageBitmap(n):l=await GT(n):l=await new Promise((d,m)=>{const g=new Image;g.crossOrigin=this.config.crossOrigin,g.src=n,g.complete?d(g):(g.onload=()=>d(g),g.onerror=y=>m(y))});const o={...t.data};o.resolution??(o.resolution=fr(n)),s&&((c=o.resourceOptions)==null?void 0:c.ownsImageBitmap)===void 0&&(o.resourceOptions={...o.resourceOptions},o.resourceOptions.ownsImageBitmap=!0);const h=new Nt(l,o);return h.resource.src=n,Aa(h,e,n)},unload(n){n.destroy(!0)}};bt.add(lo);const kT=".svg",HT="image/svg+xml",zT={extension:{type:pt.LoadParser,priority:Di.High},name:"loadSVG",test(n){return yn(n,HT)||Xr(n,kT)},async testParse(n){return Bc.test(n)},async parse(n,t,e){var o;const s=new Bc(n,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);await s.load();const l=new Nt(s,{resolution:fr(n),...t==null?void 0:t.data});return l.resource.src=t.src,Aa(l,e,t.src)},async load(n,t){return(await mt.ADAPTER.fetch(n)).text()},unload:lo.unload};bt.add(zT);const XT=[".mp4",".m4v",".webm",".ogv"],VT=["video/mp4","video/webm","video/ogg"],jT={name:"loadVideo",extension:{type:pt.LoadParser,priority:Di.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(n){return yn(n,VT)||Xr(n,XT)},async load(n,t,e){var h;let s;const l=await(await mt.ADAPTER.fetch(n)).blob(),o=URL.createObjectURL(l);try{const c={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(h=t==null?void 0:t.data)==null?void 0:h.resourceOptions,autoLoad:!0},d=new dg(o,c);await d.load();const m=new Nt(d,{alphaMode:await Kx(),resolution:fr(n),...t==null?void 0:t.data});m.resource.src=n,s=Aa(m,e,n),s.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(o)})}catch(c){throw URL.revokeObjectURL(o),c}return s},unload(n){n.destroy(!0)}};bt.add(jT);class YT{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`).join("&")}}getAlias(t){const{alias:e,name:s,src:l,srcs:o}=t;return Mi(e||s||l||o,h=>typeof h=="string"?h:Array.isArray(h)?h.map(c=>(c==null?void 0:c.src)??(c==null?void 0:c.srcs)??c):h!=null&&h.src||h!=null&&h.srcs?h.src??h.srcs:h,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const s=[];Array.isArray(e)?e.forEach(l=>{const o=l.src??l.srcs,h=l.alias??l.name;let c;if(typeof h=="string"){const d=this._createBundleAssetId(t,h);s.push(d),c=[h,d]}else{const d=h.map(m=>this._createBundleAssetId(t,m));s.push(...d),c=[...h,...d]}this.add({...l,alias:c,src:o})}):Object.keys(e).forEach(l=>{const o=[l,this._createBundleAssetId(t,l)];if(typeof e[l]=="string")this.add({alias:o,src:e[l]});else if(Array.isArray(e[l]))this.add({alias:o,src:e[l]});else{const h=e[l],c=h.src??h.srcs;this.add({...h,alias:o,src:Array.isArray(c)?c:[c]})}s.push(...o)}),this._bundles[t]=s}add(t,e,s,l,o){const h=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(Ht("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),h.push({alias:t,src:e,data:s,format:l,loadParser:o})):Array.isArray(t)?h.push(...t):h.push(t);let c;c=d=>{this.hasKey(d)&&console.warn(`[Resolver] already has key: ${d} overwriting`)},Mi(h).forEach(d=>{const{src:m,srcs:g}=d;let{data:y,format:x,loadParser:_}=d;const v=Mi(m||g).map(w=>typeof w=="string"?yT(w):Array.isArray(w)?w:[w]),T=this.getAlias(d);Array.isArray(T)?T.forEach(c):c(T);const b=[];v.forEach(w=>{w.forEach(U=>{let N={};if(typeof U!="object"){N.src=U;for(let L=0;L<this._parsers.length;L++){const B=this._parsers[L];if(B.test(U)){N=B.parse(U);break}}}else y=U.data??y,x=U.format??x,_=U.loadParser??_,N={...N,...U};if(!T)throw new Error(`[Resolver] alias is undefined for this asset: ${N.src}`);N=this.buildResolvedAsset(N,{aliases:T,data:y,format:x,loadParser:_}),b.push(N)})}),T.forEach(w=>{this._assetMap[w]=b})})}resolveBundle(t){const e=ao(t);t=Mi(t);const s={};return t.forEach(l=>{const o=this._bundles[l];if(o){const h=this.resolve(o),c={};for(const d in h){const m=h[d];c[this._extractAssetIdFromBundle(l,d)]=m}s[l]=c}}),e?s[t[0]]:s}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const s={};for(const l in e)s[l]=e[l].src;return s}return e.src}resolve(t){const e=ao(t);t=Mi(t);const s={};return t.forEach(l=>{if(!this._resolverHash[l])if(this._assetMap[l]){let o=this._assetMap[l];const h=o[0],c=this._getPreferredOrder(o);c==null||c.priority.forEach(d=>{c.params[d].forEach(m=>{const g=o.filter(y=>y[d]?y[d]===m:!1);g.length&&(o=g)})}),this._resolverHash[l]=o[0]??h}else this._resolverHash[l]=this.buildResolvedAsset({alias:[l],src:l},{});s[l]=this._resolverHash[l]}),e?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const s=t[0],l=this._preferredOrder.find(o=>o.params.format.includes(s.format));if(l)return l}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:s,data:l,loadParser:o,format:h}=e;return(this._basePath||this._rootPath)&&(t.src=De.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...l||{},...t.data},t.loadParser=o??t.loadParser,t.format=h??t.format??De.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class qT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new YT,this.loader=new _T,this.cache=Ls,this._backgroundLoader=new gT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var o,h;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let c=t.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const e=((o=t.texturePreference)==null?void 0:o.resolution)??1,s=typeof e=="number"?[e]:e,l=await this._detectFormats({preferredFormats:(h=t.texturePreference)==null?void 0:h.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:l,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,s,l,o){this.resolver.add(t,e,s,l,o)}async load(t,e){this._initialized||await this.init();const s=ao(t),l=Mi(t).map(c=>{if(typeof c!="string"){const d=this.resolver.getAlias(c);return d.some(m=>!this.resolver.hasKey(m))&&this.add(c),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),o=this.resolver.resolve(l),h=await this._mapLoadToResolve(o,e);return s?h[l[0]]:h}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const l=this.resolver.resolveBundle(t),o={},h=Object.keys(l);let c=0,d=0;const m=()=>{e==null||e(++c/d)},g=h.map(y=>{const x=l[y];return d+=Object.keys(x).length,this._mapLoadToResolve(x,m).then(_=>{o[y]=_})});return await Promise.all(g),s?o[t[0]]:o}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Ls.get(t);const e={};for(let s=0;s<t.length;s++)e[s]=Ls.get(t[s]);return e}async _mapLoadToResolve(t,e){const s=Object.values(t),l=Object.keys(t);this._backgroundLoader.active=!1;const o=await this.loader.load(s,e);this._backgroundLoader.active=!0;const h={};return s.forEach((c,d)=>{const m=o[c.src],g=[c.src];c.alias&&g.push(...c.alias),h[l[d]]=m,Ls.set(g,m)}),h}async unload(t){this._initialized||await this.init();const e=Mi(t).map(l=>typeof l!="string"?l.src:l),s=this.resolver.resolve(e);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=Mi(t);const e=this.resolver.resolveBundle(t),s=Object.keys(e).map(l=>this._unloadFromResolved(e[l]));await Promise.all(s)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(s=>{Ls.remove(s.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?e=await s.add(e):t.skipDetections||(e=await s.remove(e));return e=e.filter((s,l)=>e.indexOf(s)===l),e}get detections(){return this._detections}get preferWorkers(){return lo.config.preferWorkers}set preferWorkers(t){Ht("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(s=>s in t).forEach(s=>{e.config[s]=t[s]})})}}const Sa=new qT;bt.handleByList(pt.LoadParser,Sa.loader.parsers).handleByList(pt.ResolveParser,Sa.resolver.parsers).handleByList(pt.CacheParser,Sa.cache.parsers).handleByList(pt.DetectionParser,Sa.detections);const WT={extension:pt.CacheParser,test:n=>Array.isArray(n)&&n.every(t=>t instanceof xt),getCacheableAssets:(n,t)=>{const e={};return n.forEach(s=>{t.forEach((l,o)=>{e[s+(o===0?"":o+1)]=l})}),e}};bt.add(WT);async function Mg(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const $T={extension:{type:pt.DetectionParser,priority:1},test:async()=>Mg("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")};bt.add($T);const ZT={extension:{type:pt.DetectionParser,priority:0},test:async()=>Mg("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")};bt.add(ZT);const Dg=["png","jpg","jpeg"],KT={extension:{type:pt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...Dg],remove:async n=>n.filter(t=>!Dg.includes(t))};bt.add(KT);const QT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function zc(n){return QT?!1:document.createElement("video").canPlayType(n)!==""}const JT={extension:{type:pt.DetectionParser,priority:0},test:async()=>zc("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")};bt.add(JT);const tA={extension:{type:pt.DetectionParser,priority:0},test:async()=>zc("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")};bt.add(tA);const eA={extension:{type:pt.DetectionParser,priority:0},test:async()=>zc("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")};bt.add(eA);const iA={extension:pt.ResolveParser,test:lo.test,parse:n=>{var t;return{resolution:parseFloat(((t=mt.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:De.extname(n).slice(1),src:n}}};bt.add(iA);var Le=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))(Le||{});const oo={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Ki,xn;function Og(){xn={bptc:Ki.getExtension("EXT_texture_compression_bptc"),astc:Ki.getExtension("WEBGL_compressed_texture_astc"),etc:Ki.getExtension("WEBGL_compressed_texture_etc"),s3tc:Ki.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ki.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Ki.getExtension("WEBGL_compressed_texture_pvrtc")||Ki.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Ki.getExtension("WEBGL_compressed_texture_etc1"),atc:Ki.getExtension("WEBGL_compressed_texture_atc")}}const rA={extension:{type:pt.DetectionParser,priority:2},test:async()=>{const n=mt.ADAPTER.createCanvas().getContext("webgl");return n?(Ki=n,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async n=>{xn||Og();const t=[];for(const e in xn)xn[e]&&t.push(e);return[...t,...n]},remove:async n=>(xn||Og(),n.filter(t=>!(t in xn)))};bt.add(rA);class sA extends Ll{constructor(t,e={width:1,height:1,autoLoad:!0}){let s,l;typeof t=="string"?(s=t,l=new Uint8Array):(s=null,l=t),super(l,e),this.origin=s,this.buffer=l?new lc(l):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new lc(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Fs extends sA{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Fs._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Fs._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,s){const l=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;l.pixelStorei(l.UNPACK_ALIGNMENT,4);for(let o=0,h=this.levels;o<h;o++){const{levelID:c,levelWidth:d,levelHeight:m,levelBuffer:g}=this._levelBuffers[o];l.compressedTexImage2D(l.TEXTURE_2D,c,this.format,d,m,0,g)}return!0}onBlobLoaded(){this._levelBuffers=Fs._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,e,s,l,o,h,c){const d=new Array(s);let m=t.byteOffset,g=h,y=c,x=g+l-1&~(l-1),_=y+o-1&~(o-1),v=x*_*oo[e];for(let T=0;T<s;T++)d[T]={levelID:T,levelWidth:s>1?g:x,levelHeight:s>1?y:_,levelBuffer:new Uint8Array(t.buffer,m,v)},m+=v,g=g>>1||1,y=y>>1||1,x=g+l-1&~(l-1),_=y+o-1&~(o-1),v=x*_*oo[e];return d}}const Xc=4,uo=124,nA=32,Bg=20,aA=542327876,ho={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},lA={FOURCC:2},co={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},oA=1,uA=2,hA=4,cA=64,fA=512,dA=131072,pA=827611204,mA=861165636,gA=894720068,yA=808540228,vA=4,_A={[pA]:Le.COMPRESSED_RGBA_S3TC_DXT1_EXT,[mA]:Le.COMPRESSED_RGBA_S3TC_DXT3_EXT,[gA]:Le.COMPRESSED_RGBA_S3TC_DXT5_EXT},xA={70:Le.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Le.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Le.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Le.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Le.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Le.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Le.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Le.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Le.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Le.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function bA(n){const t=new Uint32Array(n);if(t[0]!==aA)throw new Error("Invalid DDS file magic word");const e=new Uint32Array(n,0,uo/Uint32Array.BYTES_PER_ELEMENT),s=e[ho.HEIGHT],l=e[ho.WIDTH],o=e[ho.MIPMAP_COUNT],h=new Uint32Array(n,ho.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,nA/Uint32Array.BYTES_PER_ELEMENT),c=h[oA];if(c&hA){const d=h[lA.FOURCC];if(d!==yA){const U=_A[d],N=Xc+uo,L=new Uint8Array(n,N);return[new Fs(L,{format:U,width:l,height:s,levels:o})]}const m=Xc+uo,g=new Uint32Array(t.buffer,m,Bg/Uint32Array.BYTES_PER_ELEMENT),y=g[co.DXGI_FORMAT],x=g[co.RESOURCE_DIMENSION],_=g[co.MISC_FLAG],v=g[co.ARRAY_SIZE],T=xA[y];if(T===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${y}`);if(_===vA)throw new Error("DDSParser does not support cubemap textures");if(x===6)throw new Error("DDSParser does not supported 3D texture data");const b=new Array,w=Xc+uo+Bg;if(v===1)b.push(new Uint8Array(n,w));else{const U=oo[T];let N=0,L=l,B=s;for(let O=0;O<o;O++){const q=Math.max(1,L+3&-4),rt=Math.max(1,B+3&-4),lt=q*rt*U;N+=lt,L=L>>>1,B=B>>>1}let j=w;for(let O=0;O<v;O++)b.push(new Uint8Array(n,j,N)),j+=N}return b.map(U=>new Fs(U,{format:T,width:l,height:s,levels:o}))}throw c&cA?new Error("DDSParser does not support uncompressed texture data."):c&fA?new Error("DDSParser does not supported YUV uncompressed texture data."):c&dA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&uA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Ng=[171,75,84,88,32,49,49,187,13,10,26,10],EA=67305985,Oi={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Vc=64,Ig={[wt.UNSIGNED_BYTE]:1,[wt.UNSIGNED_SHORT]:2,[wt.INT]:4,[wt.UNSIGNED_INT]:4,[wt.FLOAT]:4,[wt.HALF_FLOAT]:8},TA={[ht.RGBA]:4,[ht.RGB]:3,[ht.RG]:2,[ht.RED]:1,[ht.LUMINANCE]:1,[ht.LUMINANCE_ALPHA]:2,[ht.ALPHA]:1},AA={[wt.UNSIGNED_SHORT_4_4_4_4]:2,[wt.UNSIGNED_SHORT_5_5_5_1]:2,[wt.UNSIGNED_SHORT_5_6_5]:2};function SA(n,t,e=!1){const s=new DataView(t);if(!wA(n,s))return null;const l=s.getUint32(Oi.ENDIANNESS,!0)===EA,o=s.getUint32(Oi.GL_TYPE,l),h=s.getUint32(Oi.GL_FORMAT,l),c=s.getUint32(Oi.GL_INTERNAL_FORMAT,l),d=s.getUint32(Oi.PIXEL_WIDTH,l),m=s.getUint32(Oi.PIXEL_HEIGHT,l)||1,g=s.getUint32(Oi.PIXEL_DEPTH,l)||1,y=s.getUint32(Oi.NUMBER_OF_ARRAY_ELEMENTS,l)||1,x=s.getUint32(Oi.NUMBER_OF_FACES,l),_=s.getUint32(Oi.NUMBER_OF_MIPMAP_LEVELS,l),v=s.getUint32(Oi.BYTES_OF_KEY_VALUE_DATA,l);if(m===0||g!==1)throw new Error("Only 2D textures are supported");if(x!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(y!==1)throw new Error("WebGL does not support array textures");const T=4,b=4,w=d+3&-4,U=m+3&-4,N=new Array(y);let L=d*m;o===0&&(L=w*U);let B;if(o!==0?Ig[o]?B=Ig[o]*TA[h]:B=AA[o]:B=oo[c],B===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const j=e?CA(s,v,l):null;let O=L*B,q=d,rt=m,lt=w,ft=U,z=Vc+v;for(let W=0;W<_;W++){const tt=s.getUint32(z,l);let ut=z+4;for(let S=0;S<y;S++){let M=N[S];M||(M=N[S]=new Array(_)),M[W]={levelID:W,levelWidth:_>1||o!==0?q:lt,levelHeight:_>1||o!==0?rt:ft,levelBuffer:new Uint8Array(t,ut,O)},ut+=O}z+=tt+4,z=z%4!==0?z+4-z%4:z,q=q>>1||1,rt=rt>>1||1,lt=q+T-1&-4,ft=rt+b-1&-4,O=lt*ft*B}return o!==0?{uncompressed:N.map(W=>{let tt=W[0].levelBuffer,ut=!1;return o===wt.FLOAT?tt=new Float32Array(W[0].levelBuffer.buffer,W[0].levelBuffer.byteOffset,W[0].levelBuffer.byteLength/4):o===wt.UNSIGNED_INT?(ut=!0,tt=new Uint32Array(W[0].levelBuffer.buffer,W[0].levelBuffer.byteOffset,W[0].levelBuffer.byteLength/4)):o===wt.INT&&(ut=!0,tt=new Int32Array(W[0].levelBuffer.buffer,W[0].levelBuffer.byteOffset,W[0].levelBuffer.byteLength/4)),{resource:new Ll(tt,{width:W[0].levelWidth,height:W[0].levelHeight}),type:o,format:ut?RA(h):h}}),kvData:j}:{compressed:N.map(W=>new Fs(null,{format:c,width:d,height:m,levels:_,levelBuffers:W})),kvData:j}}function wA(n,t){for(let e=0;e<Ng.length;e++)if(t.getUint8(e)!==Ng[e])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}function RA(n){switch(n){case ht.RGBA:return ht.RGBA_INTEGER;case ht.RGB:return ht.RGB_INTEGER;case ht.RG:return ht.RG_INTEGER;case ht.RED:return ht.RED_INTEGER;default:return n}}function CA(n,t,e){const s=new Map;let l=0;for(;l<t;){const o=n.getUint32(Vc+l,e),h=Vc+l+4,c=3-(o+3)%4;if(o===0||o>t-l){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let d=0;for(;d<o&&n.getUint8(h+d)!==0;d++);if(d===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const m=new TextDecoder().decode(new Uint8Array(n.buffer,h,d)),g=new DataView(n.buffer,h+d+1,o-d-1);s.set(m,g),l+=4+o+c}return s}const MA={extension:{type:pt.LoadParser,priority:Di.High},name:"loadDDS",test(n){return Xr(n,".dds")},async load(n,t,e){const s=await(await mt.ADAPTER.fetch(n)).arrayBuffer(),l=bA(s).map(o=>{const h=new Nt(o,{mipmap:Vi.OFF,alphaMode:We.NO_PREMULTIPLIED_ALPHA,resolution:fr(n),...t.data});return Aa(h,e,n)});return l.length===1?l[0]:l},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};bt.add(MA);const DA={extension:{type:pt.LoadParser,priority:Di.High},name:"loadKTX",test(n){return Xr(n,".ktx")},async load(n,t,e){const s=await(await mt.ADAPTER.fetch(n)).arrayBuffer(),{compressed:l,uncompressed:o,kvData:h}=SA(n,s),c=l??o,d={mipmap:Vi.OFF,alphaMode:We.NO_PREMULTIPLIED_ALPHA,resolution:fr(n),...t.data},m=c.map(g=>{c===o&&Object.assign(d,{type:g.type,format:g.format});const y=g.resource??g,x=new Nt(y,d);return x.ktxKeyValueData=h,Aa(x,e,n)});return m.length===1?m[0]:m},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};bt.add(DA);const OA=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],BA={extension:pt.ResolveParser,test:n=>{const t=De.extname(n).slice(1);return["basis","ktx","dds"].includes(t)},parse:n=>{var s,l;const t=n.split("."),e=t.pop();if(["ktx","dds"].includes(e)){const o=t.pop();if(OA.includes(o))return{resolution:parseFloat(((s=mt.RETINA_PREFIX.exec(n))==null?void 0:s[1])??"1"),format:o,src:n}}return{resolution:parseFloat(((l=mt.RETINA_PREFIX.exec(n))==null?void 0:l[1])??"1"),format:e,src:n}}};bt.add(BA);const fo=new Ut,NA=4,Ug=class Rl{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,e,s,l){const o=new Image;return o.src=await this.base64(t,e,s,l),o}async base64(t,e,s,l){const o=this.canvas(t,l);if(o.toBlob!==void 0)return new Promise((h,c)=>{o.toBlob(d=>{if(!d){c(new Error("ICanvas.toBlob failed!"));return}const m=new FileReader;m.onload=()=>h(m.result),m.onerror=c,m.readAsDataURL(d)},e,s)});if(o.toDataURL!==void 0)return o.toDataURL(e,s);if(o.convertToBlob!==void 0){const h=await o.convertToBlob({type:e,quality:s});return new Promise((c,d)=>{const m=new FileReader;m.onload=()=>c(m.result),m.onerror=d,m.readAsDataURL(h)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:s,width:l,height:o,flipY:h,premultipliedAlpha:c}=this._rawPixels(t,e);h&&Rl._flipY(s,l,o),c&&Rl._unpremultiplyAlpha(s);const d=new db(l,o,1),m=new ImageData(new Uint8ClampedArray(s.buffer),l,o);return d.context.putImageData(m,0,0),d.canvas}pixels(t,e){const{pixels:s,width:l,height:o,flipY:h,premultipliedAlpha:c}=this._rawPixels(t,e);return h&&Rl._flipY(s,l,o),c&&Rl._unpremultiplyAlpha(s),s}_rawPixels(t,e){const s=this.renderer;if(!s)throw new Error("The Extract has already been destroyed");let l,o=!1,h=!1,c,d=!1;t&&(t instanceof Ns?c=t:(c=s.generateTexture(t,{region:e,resolution:s.resolution,multisample:s.multisample}),d=!0,e&&(fo.width=e.width,fo.height=e.height,e=fo)));const m=s.gl;if(c){if(l=c.baseTexture.resolution,e=e??c.frame,o=!1,h=c.baseTexture.alphaMode>0&&c.baseTexture.format===ht.RGBA,!d){s.renderTexture.bind(c);const _=c.framebuffer.glFramebuffers[s.CONTEXT_UID];_.blitFramebuffer&&s.framebuffer.bind(_.blitFramebuffer)}}else l=s.resolution,e||(e=fo,e.width=s.width/l,e.height=s.height/l),o=!0,h=this._rendererPremultipliedAlpha,s.renderTexture.bind();const g=Math.max(Math.round(e.width*l),1),y=Math.max(Math.round(e.height*l),1),x=new Uint8Array(NA*g*y);return m.readPixels(Math.round(e.x*l),Math.round(e.y*l),g,y,m.RGBA,m.UNSIGNED_BYTE,x),d&&(c==null||c.destroy(!0)),{pixels:x,width:g,height:y,flipY:o,premultipliedAlpha:h}}destroy(){this.renderer=null}static _flipY(t,e,s){const l=e<<2,o=s>>1,h=new Uint8Array(l);for(let c=0;c<o;c++){const d=c*l,m=(s-c-1)*l;h.set(t.subarray(d,d+l)),t.copyWithin(d,m,m+l),t.set(h,m)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let s=0;s<e;s+=4){const l=t[s+3];if(l!==0){const o=255.001/l;t[s]=t[s]*o+.5,t[s+1]=t[s+1]*o+.5,t[s+2]=t[s+2]*o+.5}}}};Ug.extension={name:"extract",type:pt.RendererSystem};let IA=Ug;bt.add(IA);const po={build(n){const t=n.points;let e,s,l,o,h,c;if(n.type===Pe.CIRC){const v=n.shape;e=v.x,s=v.y,h=c=v.radius,l=o=0}else if(n.type===Pe.ELIP){const v=n.shape;e=v.x,s=v.y,h=v.width,c=v.height,l=o=0}else{const v=n.shape,T=v.width/2,b=v.height/2;e=v.x+T,s=v.y+b,h=c=Math.max(0,Math.min(v.radius,Math.min(T,b))),l=T-h,o=b-c}if(!(h>=0&&c>=0&&l>=0&&o>=0)){t.length=0;return}const d=Math.ceil(2.3*Math.sqrt(h+c)),m=d*8+(l?4:0)+(o?4:0);if(t.length=m,m===0)return;if(d===0){t.length=8,t[0]=t[6]=e+l,t[1]=t[3]=s+o,t[2]=t[4]=e-l,t[5]=t[7]=s-o;return}let g=0,y=d*4+(l?2:0)+2,x=y,_=m;{const v=l+h,T=o,b=e+v,w=e-v,U=s+T;if(t[g++]=b,t[g++]=U,t[--y]=U,t[--y]=w,o){const N=s-T;t[x++]=w,t[x++]=N,t[--_]=N,t[--_]=b}}for(let v=1;v<d;v++){const T=Math.PI/2*(v/d),b=l+Math.cos(T)*h,w=o+Math.sin(T)*c,U=e+b,N=e-b,L=s+w,B=s-w;t[g++]=U,t[g++]=L,t[--y]=L,t[--y]=N,t[x++]=N,t[x++]=B,t[--_]=B,t[--_]=U}{const v=l,T=o+c,b=e+v,w=e-v,U=s+T,N=s-T;t[g++]=b,t[g++]=U,t[--_]=N,t[--_]=b,l&&(t[g++]=w,t[g++]=U,t[--_]=N,t[--_]=w)}},triangulate(n,t){const e=n.points,s=t.points,l=t.indices;if(e.length===0)return;let o=s.length/2;const h=o;let c,d;if(n.type!==Pe.RREC){const g=n.shape;c=g.x,d=g.y}else{const g=n.shape;c=g.x+g.width/2,d=g.y+g.height/2}const m=n.matrix;s.push(n.matrix?m.a*c+m.c*d+m.tx:c,n.matrix?m.b*c+m.d*d+m.ty:d),o++,s.push(e[0],e[1]);for(let g=2;g<e.length;g+=2)s.push(e[g],e[g+1]),l.push(o++,h,o);l.push(h+1,h,o)}};function Pg(n,t=!1){const e=n.length;if(e<6)return;let s=0;for(let l=0,o=n[e-2],h=n[e-1];l<e;l+=2){const c=n[l],d=n[l+1];s+=(c-o)*(d+h),o=c,h=d}if(!t&&s>0||t&&s<=0){const l=e/2;for(let o=l+l%2;o<e;o+=2){const h=e-o-2,c=e-o-1,d=o,m=o+1;[n[h],n[d]]=[n[d],n[h]],[n[c],n[m]]=[n[m],n[c]]}}}const Lg={build(n){n.points=n.shape.points.slice()},triangulate(n,t){let e=n.points;const s=n.holes,l=t.points,o=t.indices;if(e.length>=6){Pg(e,!1);const h=[];for(let m=0;m<s.length;m++){const g=s[m];Pg(g.points,!0),h.push(e.length/2),e=e.concat(g.points)}const c=dx(e,h,2);if(!c)return;const d=l.length/2;for(let m=0;m<c.length;m+=3)o.push(c[m]+d),o.push(c[m+1]+d),o.push(c[m+2]+d);for(let m=0;m<e.length;m++)l.push(e[m])}}},UA={build(n){const t=n.shape,e=t.x,s=t.y,l=t.width,o=t.height,h=n.points;h.length=0,l>=0&&o>=0&&h.push(e,s,e+l,s,e+l,s+o,e,s+o)},triangulate(n,t){const e=n.points,s=t.points;if(e.length===0)return;const l=s.length/2;s.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(l,l+1,l+2,l+1,l+2,l+3)}},PA={build(n){po.build(n)},triangulate(n,t){po.triangulate(n,t)}};var pi=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(pi||{}),Vr=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(Vr||{});const bn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,t=20){if(!this.adaptive||!n||isNaN(n))return t;let e=Math.ceil(n/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class Fg{static curveTo(t,e,s,l,o,h){const c=h[h.length-2],d=h[h.length-1]-e,m=c-t,g=l-e,y=s-t,x=Math.abs(d*y-m*g);if(x<1e-8||o===0)return(h[h.length-2]!==t||h[h.length-1]!==e)&&h.push(t,e),null;const _=d*d+m*m,v=g*g+y*y,T=d*g+m*y,b=o*Math.sqrt(_)/x,w=o*Math.sqrt(v)/x,U=b*T/_,N=w*T/v,L=b*y+w*m,B=b*g+w*d,j=m*(w+U),O=d*(w+U),q=y*(b+N),rt=g*(b+N),lt=Math.atan2(O-B,j-L),ft=Math.atan2(rt-B,q-L);return{cx:L+t,cy:B+e,radius:o,startAngle:lt,endAngle:ft,anticlockwise:m*g>y*d}}static arc(t,e,s,l,o,h,c,d,m){const g=c-h,y=bn._segmentsCount(Math.abs(g)*o,Math.ceil(Math.abs(g)/Gl)*40),x=g/(y*2),_=x*2,v=Math.cos(x),T=Math.sin(x),b=y-1,w=b%1/b;for(let U=0;U<=b;++U){const N=U+w*U,L=x+h+_*N,B=Math.cos(L),j=-Math.sin(L);m.push((v*B+T*j)*o+s,(v*-j+T*B)*o+l)}}}class LA{constructor(){this.reset()}begin(t,e,s){this.reset(),this.style=t,this.start=e,this.attribStart=s}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class jc{static curveLength(t,e,s,l,o,h,c,d){let m=0,g=0,y=0,x=0,_=0,v=0,T=0,b=0,w=0,U=0,N=0,L=t,B=e;for(let j=1;j<=10;++j)g=j/10,y=g*g,x=y*g,_=1-g,v=_*_,T=v*_,b=T*t+3*v*g*s+3*_*y*o+x*c,w=T*e+3*v*g*l+3*_*y*h+x*d,U=L-b,N=B-w,L=b,B=w,m+=Math.sqrt(U*U+N*N);return m}static curveTo(t,e,s,l,o,h,c){const d=c[c.length-2],m=c[c.length-1];c.length-=2;const g=bn._segmentsCount(jc.curveLength(d,m,t,e,s,l,o,h));let y=0,x=0,_=0,v=0,T=0;c.push(d,m);for(let b=1,w=0;b<=g;++b)w=b/g,y=1-w,x=y*y,_=x*y,v=w*w,T=v*w,c.push(_*d+3*x*w*t+3*y*v*s+T*o,_*m+3*x*w*e+3*y*v*l+T*h)}}function Gg(n,t,e,s,l,o,h,c){const d=n-e*l,m=t-s*l,g=n+e*o,y=t+s*o;let x,_;h?(x=s,_=-e):(x=-s,_=e);const v=d+x,T=m+_,b=g+x,w=y+_;return c.push(v,T,b,w),2}function Gs(n,t,e,s,l,o,h,c){const d=e-n,m=s-t;let g=Math.atan2(d,m),y=Math.atan2(l-n,o-t);c&&g<y?g+=Math.PI*2:!c&&g>y&&(y+=Math.PI*2);let x=g;const _=y-g,v=Math.abs(_),T=Math.sqrt(d*d+m*m),b=(15*v*Math.sqrt(T)/Math.PI>>0)+1,w=_/b;if(x+=w,c){h.push(n,t,e,s);for(let U=1,N=x;U<b;U++,N+=w)h.push(n,t,n+Math.sin(N)*T,t+Math.cos(N)*T);h.push(n,t,l,o)}else{h.push(e,s,n,t);for(let U=1,N=x;U<b;U++,N+=w)h.push(n+Math.sin(N)*T,t+Math.cos(N)*T,n,t);h.push(l,o,n,t)}return b*2}function FA(n,t){const e=n.shape;let s=n.points||e.points.slice();const l=t.closePointEps;if(s.length===0)return;const o=n.lineStyle,h=new Vt(s[0],s[1]),c=new Vt(s[s.length-2],s[s.length-1]),d=e.type!==Pe.POLY||e.closeStroke,m=Math.abs(h.x-c.x)<l&&Math.abs(h.y-c.y)<l;if(d){s=s.slice(),m&&(s.pop(),s.pop(),c.set(s[s.length-2],s[s.length-1]));const M=(h.x+c.x)*.5,C=(c.y+h.y)*.5;s.unshift(M,C),s.push(M,C)}const g=t.points,y=s.length/2;let x=s.length;const _=g.length/2,v=o.width/2,T=v*v,b=o.miterLimit*o.miterLimit;let w=s[0],U=s[1],N=s[2],L=s[3],B=0,j=0,O=-(U-L),q=w-N,rt=0,lt=0,ft=Math.sqrt(O*O+q*q);O/=ft,q/=ft,O*=v,q*=v;const z=o.alignment,W=(1-z)*2,tt=z*2;d||(o.cap===Vr.ROUND?x+=Gs(w-O*(W-tt)*.5,U-q*(W-tt)*.5,w-O*W,U-q*W,w+O*tt,U+q*tt,g,!0)+2:o.cap===Vr.SQUARE&&(x+=Gg(w,U,O,q,W,tt,!0,g))),g.push(w-O*W,U-q*W,w+O*tt,U+q*tt);for(let M=1;M<y-1;++M){w=s[(M-1)*2],U=s[(M-1)*2+1],N=s[M*2],L=s[M*2+1],B=s[(M+1)*2],j=s[(M+1)*2+1],O=-(U-L),q=w-N,ft=Math.sqrt(O*O+q*q),O/=ft,q/=ft,O*=v,q*=v,rt=-(L-j),lt=N-B,ft=Math.sqrt(rt*rt+lt*lt),rt/=ft,lt/=ft,rt*=v,lt*=v;const C=N-w,H=U-L,A=N-B,D=j-L,G=C*A+H*D,F=H*A-D*C,Z=F<0;if(Math.abs(F)<.001*Math.abs(G)){g.push(N-O*W,L-q*W,N+O*tt,L+q*tt),G>=0&&(o.join===pi.ROUND?x+=Gs(N,L,N-O*W,L-q*W,N-rt*W,L-lt*W,g,!1)+4:x+=2,g.push(N-rt*tt,L-lt*tt,N+rt*W,L+lt*W));continue}const it=(-O+w)*(-q+L)-(-O+N)*(-q+U),nt=(-rt+B)*(-lt+L)-(-rt+N)*(-lt+j),dt=(C*nt-A*it)/F,ct=(D*it-H*nt)/F,yt=(dt-N)*(dt-N)+(ct-L)*(ct-L),ot=N+(dt-N)*W,vt=L+(ct-L)*W,Et=N-(dt-N)*tt,Ot=L-(ct-L)*tt,Ft=Math.min(C*C+H*H,A*A+D*D),Tt=Z?W:tt,St=Ft+Tt*Tt*T,qt=yt<=St;let ve=o.join;if(ve===pi.MITER&&yt/T>b&&(ve=pi.BEVEL),qt)switch(ve){case pi.MITER:{g.push(ot,vt,Et,Ot);break}case pi.BEVEL:{Z?g.push(ot,vt,N+O*tt,L+q*tt,ot,vt,N+rt*tt,L+lt*tt):g.push(N-O*W,L-q*W,Et,Ot,N-rt*W,L-lt*W,Et,Ot),x+=2;break}case pi.ROUND:{Z?(g.push(ot,vt,N+O*tt,L+q*tt),x+=Gs(N,L,N+O*tt,L+q*tt,N+rt*tt,L+lt*tt,g,!0)+4,g.push(ot,vt,N+rt*tt,L+lt*tt)):(g.push(N-O*W,L-q*W,Et,Ot),x+=Gs(N,L,N-O*W,L-q*W,N-rt*W,L-lt*W,g,!1)+4,g.push(N-rt*W,L-lt*W,Et,Ot));break}}else{switch(g.push(N-O*W,L-q*W,N+O*tt,L+q*tt),ve){case pi.MITER:{Z?g.push(Et,Ot,Et,Ot):g.push(ot,vt,ot,vt),x+=2;break}case pi.ROUND:{Z?x+=Gs(N,L,N+O*tt,L+q*tt,N+rt*tt,L+lt*tt,g,!0)+2:x+=Gs(N,L,N-O*W,L-q*W,N-rt*W,L-lt*W,g,!1)+2;break}}g.push(N-rt*W,L-lt*W,N+rt*tt,L+lt*tt),x+=2}}w=s[(y-2)*2],U=s[(y-2)*2+1],N=s[(y-1)*2],L=s[(y-1)*2+1],O=-(U-L),q=w-N,ft=Math.sqrt(O*O+q*q),O/=ft,q/=ft,O*=v,q*=v,g.push(N-O*W,L-q*W,N+O*tt,L+q*tt),d||(o.cap===Vr.ROUND?x+=Gs(N-O*(W-tt)*.5,L-q*(W-tt)*.5,N-O*W,L-q*W,N+O*tt,L+q*tt,g,!1)+2:o.cap===Vr.SQUARE&&(x+=Gg(N,L,O,q,W,tt,!1,g)));const ut=t.indices,S=bn.epsilon*bn.epsilon;for(let M=_;M<x+_-2;++M)w=g[M*2],U=g[M*2+1],N=g[(M+1)*2],L=g[(M+1)*2+1],B=g[(M+2)*2],j=g[(M+2)*2+1],!(Math.abs(w*(L-j)+N*(j-U)+B*(U-L))<S)&&ut.push(M,M+1,M+2)}function GA(n,t){let e=0;const s=n.shape,l=n.points||s.points,o=s.type!==Pe.POLY||s.closeStroke;if(l.length===0)return;const h=t.points,c=t.indices,d=l.length/2,m=h.length/2;let g=m;for(h.push(l[0],l[1]),e=1;e<d;e++)h.push(l[e*2],l[e*2+1]),c.push(g,g+1),g++;o&&c.push(g,m)}function kg(n,t){n.lineStyle.native?GA(n,t):FA(n,t)}class Yc{static curveLength(t,e,s,l,o,h){const c=t-2*s+o,d=e-2*l+h,m=2*s-2*t,g=2*l-2*e,y=4*(c*c+d*d),x=4*(c*m+d*g),_=m*m+g*g,v=2*Math.sqrt(y+x+_),T=Math.sqrt(y),b=2*y*T,w=2*Math.sqrt(_),U=x/T;return(b*v+T*x*(v-w)+(4*_*y-x*x)*Math.log((2*T+U+v)/(U+w)))/(4*b)}static curveTo(t,e,s,l,o){const h=o[o.length-2],c=o[o.length-1],d=bn._segmentsCount(Yc.curveLength(h,c,t,e,s,l));let m=0,g=0;for(let y=1;y<=d;++y){const x=y/d;m=h+(t-h)*x,g=c+(e-c)*x,o.push(m+(t+(s-t)*x-m)*x,g+(e+(l-e)*x-g)*x)}}}const qc={[Pe.POLY]:Lg,[Pe.CIRC]:po,[Pe.ELIP]:po,[Pe.RECT]:UA,[Pe.RREC]:PA},Hg=[],mo=[];class go{constructor(t,e=null,s=null,l=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=s,this.fillStyle=e,this.matrix=l,this.type=t.type}clone(){return new go(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const En=new Vt,zg=class j1 extends x0{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ro,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),mo.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),Hg.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,s=null,l=null){const o=new go(t,e,s,l);return this.graphicsData.push(o),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const s=new go(t,null,null,e),l=this.graphicsData[this.graphicsData.length-1];return s.lineStyle=l.lineStyle,l.holes.push(s),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let s=0;s<e.length;++s){const l=e[s];if(l.fillStyle.visible&&l.shape&&(l.matrix?l.matrix.applyInverse(t,En):En.copyFrom(t),l.shape.contains(En.x,En.y))){let o=!1;if(l.holes){for(let h=0;h<l.holes.length;h++)if(l.holes[h].shape.contains(En.x,En.y)){o=!0;break}}if(!o)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let s=null,l=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],l=s.style);for(let d=this.shapeIndex;d<e.length;d++){this.shapeIndex++;const m=e[d],g=m.fillStyle,y=m.lineStyle;qc[m.type].build(m),m.matrix&&this.transformPoints(m.points,m.matrix),(g.visible||y.visible)&&this.processHoles(m.holes);for(let x=0;x<2;x++){const _=x===0?g:y;if(!_.visible)continue;const v=_.texture.baseTexture,T=this.indices.length,b=this.points.length/2;v.wrapMode=Fr.REPEAT,x===0?this.processFill(m):this.processLine(m);const w=this.points.length/2-b;w!==0&&(s&&!this._compareStyles(l,_)&&(s.end(T,b),s=null),s||(s=Hg.pop()||new LA,s.begin(_,T,b),this.batches.push(s),l=_),this.addUvs(this.points,t,_.texture,b,w,_.matrix))}}const o=this.indices.length,h=this.points.length/2;if(s&&s.end(o,h),this.batches.length===0){this.batchable=!0;return}const c=h>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&c===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=c?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const s=this.graphicsData[t],l=s.fillStyle,o=s.lineStyle;if(l&&!l.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,s=t.length;e<s;e++){const l=t[e];for(let o=0;o<l.size;o++){const h=l.start+o;this.indicesUint16[h]=this.indicesUint16[h]-l.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<j1.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++Nt._globalBatch;for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].texArray.clear(),mo.push(this.drawCalls[y]);this.drawCalls.length=0;const e=this.colors,s=this.textureIds;let l=mo.pop();l||(l=new gc,l.texArray=new Ec),l.texArray.count=0,l.start=0,l.size=0,l.type=zi.TRIANGLES;let o=0,h=null,c=0,d=!1,m=zi.TRIANGLES,g=0;this.drawCalls.push(l);for(let y=0;y<this.batches.length;y++){const x=this.batches[y],_=8,v=x.style,T=v.texture.baseTexture;d!==!!v.native&&(d=!!v.native,m=d?zi.LINES:zi.TRIANGLES,h=null,o=_,t++),h!==T&&(h=T,T._batchEnabled!==t&&(o===_&&(t++,o=0,l.size>0&&(l=mo.pop(),l||(l=new gc,l.texArray=new Ec),this.drawCalls.push(l)),l.start=g,l.size=0,l.texArray.count=0,l.type=m),T.touched=1,T._batchEnabled=t,T._batchLocation=o,T.wrapMode=Fr.REPEAT,l.texArray.elements[l.texArray.count++]=T,o++)),l.size+=x.size,g+=x.size,c=T._batchLocation,this.addColors(e,v.color,v.alpha,x.attribSize,x.attribStart),this.addTextureIds(s,c,x.attribSize,x.attribStart)}Nt._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,s=this.colors,l=this.textureIds,o=new ArrayBuffer(t.length*3*4),h=new Float32Array(o),c=new Uint32Array(o);let d=0;for(let m=0;m<t.length/2;m++)h[d++]=t[m*2],h[d++]=t[m*2+1],h[d++]=e[m*2],h[d++]=e[m*2+1],c[d++]=s[m],h[d++]=l[m];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Lg.triangulate(t,this):qc[t.type].triangulate(t,this)}processLine(t){kg(t,this);for(let e=0;e<t.holes.length;e++)kg(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const s=t[e];qc[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let s=0;s<t.length/2;s++){const l=t[s*2],o=t[s*2+1];t[s*2]=e.a*l+e.c*o+e.tx,t[s*2+1]=e.b*l+e.d*o+e.ty}}addColors(t,e,s,l,o=0){const h=ae.shared.setValue(e).toLittleEndianNumber(),c=ae.shared.setValue(h).toPremultiplied(s);t.length=Math.max(t.length,o+l);for(let d=0;d<l;d++)t[o+d]=c}addTextureIds(t,e,s,l=0){t.length=Math.max(t.length,l+s);for(let o=0;o<s;o++)t[l+o]=e}addUvs(t,e,s,l,o,h=null){let c=0;const d=e.length,m=s.frame;for(;c<o;){let y=t[(l+c)*2],x=t[(l+c)*2+1];if(h){const _=h.a*y+h.c*x+h.tx;x=h.b*y+h.d*x+h.ty,y=_}c++,e.push(y/m.width,x/m.height)}const g=s.baseTexture;(m.width<g.width||m.height<g.height)&&this.adjustUvs(e,s,d,o)}adjustUvs(t,e,s,l){const o=e.baseTexture,h=1e-6,c=s+l*2,d=e.frame,m=d.width/o.width,g=d.height/o.height;let y=d.x/d.width,x=d.y/d.height,_=Math.floor(t[s]+h),v=Math.floor(t[s+1]+h);for(let T=s+2;T<c;T+=2)_=Math.min(_,Math.floor(t[T]+h)),v=Math.min(v,Math.floor(t[T+1]+h));y-=_,x-=v;for(let T=s;T<c;T+=2)t[T]=(t[T]+y)*m,t[T+1]=(t[T+1]+x)*g}};zg.BATCHABLE_SIZE=100;let kA=zg;class yo{constructor(){this.color=16777215,this.alpha=1,this.texture=xt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new yo;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=xt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Wc extends yo{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Vr.BUTT,this.join=pi.MITER,this.miterLimit=10}clone(){const t=new Wc;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Vr.BUTT,this.join=pi.MITER,this.miterLimit=10}}const $c={},Zc=class Vu extends di{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new yo,this._lineStyle=new Wc,this._matrix=null,this._holeMode=!1,this.state=$i.for2d(),this._geometry=t||new kA,this._geometry.refCount++,this._transformID=-1,this._tintColor=new ae(16777215),this.blendMode=Mt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Vu(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,s,l=.5,o=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:s,alignment:l,native:o}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:xt.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Vr.BUTT,join:pi.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const s=t.width>0&&t.alpha>0;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:s},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Rs,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Rs,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const s=this.currentPath.points,l=s[s.length-2],o=s[s.length-1];return(l!==t||o!==e)&&s.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,s,l){this._initCurve();const o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),Yc.curveTo(t,e,s,l,o),this}bezierCurveTo(t,e,s,l,o,h){return this._initCurve(),jc.curveTo(t,e,s,l,o,h,this.currentPath.points),this}arcTo(t,e,s,l,o){this._initCurve(t,e);const h=this.currentPath.points,c=Fg.curveTo(t,e,s,l,o,h);if(c){const{cx:d,cy:m,radius:g,startAngle:y,endAngle:x,anticlockwise:_}=c;this.arc(d,m,g,y,x,_)}return this}arc(t,e,s,l,o,h=!1){if(l===o)return this;if(!h&&o<=l?o+=Gl:h&&l<=o&&(l+=Gl),o-l===0)return this;const c=t+Math.cos(l)*s,d=e+Math.sin(l)*s,m=this._geometry.closePointEps;let g=this.currentPath?this.currentPath.points:null;if(g){const y=Math.abs(g[g.length-2]-c),x=Math.abs(g[g.length-1]-d);y<m&&x<m||g.push(c,d)}else this.moveTo(c,d),g=this.currentPath.points;return Fg.arc(c,d,t,e,s,l,o,h,g),this}beginFill(t=0,e){return this.beginTextureFill({texture:xt.WHITE,color:t,alpha:e})}normalizeColor(t){const e=ae.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:xt.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const s=t.alpha>0;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:s},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,s,l){return this.drawShape(new Ut(t,e,s,l))}drawRoundedRect(t,e,s,l,o){return this.drawShape(new Xl(t,e,s,l,o))}drawCircle(t,e,s){return this.drawShape(new Hl(t,e,s))}drawEllipse(t,e,s,l){return this.drawShape(new zl(t,e,s,l))}drawPolygon(...t){let e,s=!0;const l=t[0];l.points?(s=l.closeStroke,e=l.points):Array.isArray(t[0])?e=t[0]:e=t;const o=new Rs(e);return o.closeStroke=s,this.drawShape(o),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Pe.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,s=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=s,this.vertexData=new Float32Array(t.points);for(let l=0;l<s;l++){const o=t.batches[l],h=o.style.color,c=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),d=new Float32Array(t.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),m=new Uint16Array(t.indicesUint16.buffer,o.start*2,o.size),g={vertexData:c,blendMode:e,indices:m,uvs:d,_batchRGB:ae.shared.setValue(h).toRgbArray(),_tintRGB:h,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[l]=g}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,s=this.batches.length;e<s;e++){const l=this.batches[e];l.worldAlpha=this.worldAlpha*l.alpha,t.plugins[this.pluginName].render(l)}}}_renderDirect(t){const e=this._resolveDirectShader(t),s=this._geometry,l=this.worldAlpha,o=e.uniforms,h=s.drawCalls;o.translationMatrix=this.transform.worldTransform,ae.shared.setValue(this._tintColor).premultiply(l).toArray(o.tint),t.shader.bind(e),t.geometry.bind(s,e),t.state.set(this.state);for(let c=0,d=h.length;c<d;c++)this._renderDrawCallDirect(t,s.drawCalls[c])}_renderDrawCallDirect(t,e){const{texArray:s,type:l,size:o,start:h}=e,c=s.count;for(let d=0;d<c;d++)t.texture.bind(s.elements[d],d);t.geometry.draw(l,o,h)}_resolveDirectShader(t){let e=this.shader;const s=this.pluginName;if(!e){if(!$c[s]){const{maxTextures:l}=t.plugins[s],o=new Int32Array(l);for(let d=0;d<l;d++)o[d]=d;const h={tint:new Float32Array([1,1,1,1]),translationMatrix:new le,default:Ri.from({uSamplers:o},!0)},c=t.plugins[s]._shader.program;$c[s]=new Zi(c,h)}e=$c[s]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:s,maxX:l,maxY:o}=t.bounds;this._bounds.addFrame(this.transform,e,s,l,o)}containsPoint(t){return this.worldTransform.applyInverse(t,Vu._TEMP_POINT),this._geometry.containsPoint(Vu._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=ae.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,s=e.a,l=e.b,o=e.c,h=e.d,c=e.tx,d=e.ty,m=this._geometry.points,g=this.vertexData;let y=0;for(let x=0;x<m.length;x+=2){const _=m[x],v=m[x+1];g[y++]=s*_+o*v+c,g[y++]=h*v+l*_+d}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Zc.curves=bn,Zc._TEMP_POINT=new Vt;let Xg=Zc;class HA{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const Kc=new Vt,Vg=new Rs,jg=class Y1 extends di{constructor(t,e,s,l=zi.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=s||$i.for2d(),this.drawMode=l,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=mt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===zi.TRIANGLES&&e.length<Y1.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,s=this.shader;s.uvMatrix&&(s.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=s._tintRGB,this._texture=s.texture;const l=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[l]),t.plugins[l].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,s=t._updateID;if(s===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const l=this.transform.worldTransform,o=l.a,h=l.b,c=l.c,d=l.d,m=l.tx,g=l.ty,y=this.vertexData;for(let x=0;x<y.length/2;x++){const _=e[x*2],v=e[x*2+1];y[x*2]=o*_+c*v+m,y[x*2+1]=h*_+d*v+g}if(this._roundPixels){const x=mt.RESOLUTION;for(let _=0;_<y.length;++_)y[_]=Math.round(y[_]*x)/x}this.vertexDirty=s}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new HA(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Kc);const e=this.geometry.getBuffer("aVertexPosition").data,s=Vg.points,l=this.geometry.getIndex().data,o=l.length,h=this.drawMode===4?3:1;for(let c=0;c+2<o;c+=h){const d=l[c]*2,m=l[c+1]*2,g=l[c+2]*2;if(s[0]=e[d],s[1]=e[d+1],s[2]=e[m],s[3]=e[m+1],s[4]=e[g],s[5]=e[g+1],Vg.contains(Kc.x,Kc.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};jg.BATCHABLE_SIZE=100;let Yg=jg;class zA extends Hr{constructor(t,e,s){super();const l=new ge(t),o=new ge(e,!0),h=new ge(s,!0,!0);this.addAttribute("aVertexPosition",l,2,!1,wt.FLOAT).addAttribute("aTextureCoord",o,2,!1,wt.FLOAT).addIndex(h),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var XA=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,VA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class qg extends Zi{constructor(t,e){const s={uSampler:t,alpha:1,uTextureMatrix:le.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(s,e.uniforms),super(e.program||pr.from(VA,XA),s),this._colorDirty=!1,this.uvMatrix=new H0(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new ae(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;ae.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Wg{constructor(t,e,s){this.geometry=new Hr,this.indexBuffer=null,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(let l=0;l<t.length;++l){let o=t[l];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||wt.FLOAT,offset:o.offset},e[l]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new ge(cb(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];c.offset=e,e+=c.size,this.dynamicStride+=c.size}const s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new ge(this.dynamicData,!1,!1);let l=0;this.staticStride=0;for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];c.offset=l,l+=c.size,this.staticStride+=c.size}const o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new ge(this.staticData,!0,!1);for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];t.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===wt.UNSIGNED_BYTE,c.type,this.dynamicStride*4,c.offset*4)}for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];t.addAttribute(c.attributeName,this.staticBuffer,0,c.type===wt.UNSIGNED_BYTE,c.type,this.staticStride*4,c.offset*4)}}uploadDynamic(t,e,s){for(let l=0;l<this.dynamicProperties.length;l++){const o=this.dynamicProperties[l];o.uploadFunction(t,e,s,o.type===wt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,s){for(let l=0;l<this.staticProperties.length;l++){const o=this.staticProperties[l];o.uploadFunction(t,e,s,o.type===wt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var jA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,YA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class $g extends Wl{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new le,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:wt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Zi.from(YA,jA,{}),this.state=$i.for2d()}render(t){const e=t.children,s=t._maxSize,l=t._batchSize,o=this.renderer;let h=e.length;if(h===0)return;h>s&&!t.autoResize&&(h=s);let c=t._buffers;c||(c=t._buffers=this.generateBuffers(t));const d=e[0]._texture.baseTexture,m=d.alphaMode>0;this.state.blendMode=u0(t.blendMode,m),o.state.set(this.state);const g=o.gl,y=t.worldTransform.copyTo(this.tempMatrix);y.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=y.toArray(!0),this.shader.uniforms.uColor=ae.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,m).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=d,this.renderer.shader.bind(this.shader);let x=!1;for(let _=0,v=0;_<h;_+=l,v+=1){let T=h-_;T>l&&(T=l),v>=c.length&&c.push(this._generateOneMoreBuffer(t));const b=c[v];b.uploadDynamic(e,_,T);const w=t._bufferUpdateIDs[v]||0;x=x||b._updateID<w,x&&(b._updateID=t._updateID,b.uploadStatic(e,_,T)),o.geometry.bind(b.geometry),g.drawElements(g.TRIANGLES,T*6,g.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],s=t._maxSize,l=t._batchSize,o=t._properties;for(let h=0;h<s;h+=l)e.push(new Wg(this.properties,o,l));return e}_generateOneMoreBuffer(t){const e=t._batchSize,s=t._properties;return new Wg(this.properties,s,e)}uploadVertices(t,e,s,l,o,h){let c=0,d=0,m=0,g=0;for(let y=0;y<s;++y){const x=t[e+y],_=x._texture,v=x.scale.x,T=x.scale.y,b=_.trim,w=_.orig;b?(d=b.x-x.anchor.x*w.width,c=d+b.width,g=b.y-x.anchor.y*w.height,m=g+b.height):(c=w.width*(1-x.anchor.x),d=w.width*-x.anchor.x,m=w.height*(1-x.anchor.y),g=w.height*-x.anchor.y),l[h]=d*v,l[h+1]=g*T,l[h+o]=c*v,l[h+o+1]=g*T,l[h+o*2]=c*v,l[h+o*2+1]=m*T,l[h+o*3]=d*v,l[h+o*3+1]=m*T,h+=o*4}}uploadPosition(t,e,s,l,o,h){for(let c=0;c<s;c++){const d=t[e+c].position;l[h]=d.x,l[h+1]=d.y,l[h+o]=d.x,l[h+o+1]=d.y,l[h+o*2]=d.x,l[h+o*2+1]=d.y,l[h+o*3]=d.x,l[h+o*3+1]=d.y,h+=o*4}}uploadRotation(t,e,s,l,o,h){for(let c=0;c<s;c++){const d=t[e+c].rotation;l[h]=d,l[h+o]=d,l[h+o*2]=d,l[h+o*3]=d,h+=o*4}}uploadUvs(t,e,s,l,o,h){for(let c=0;c<s;++c){const d=t[e+c]._texture._uvs;d?(l[h]=d.x0,l[h+1]=d.y0,l[h+o]=d.x1,l[h+o+1]=d.y1,l[h+o*2]=d.x2,l[h+o*2+1]=d.y2,l[h+o*3]=d.x3,l[h+o*3+1]=d.y3,h+=o*4):(l[h]=0,l[h+1]=0,l[h+o]=0,l[h+o+1]=0,l[h+o*2]=0,l[h+o*2+1]=0,l[h+o*3]=0,l[h+o*3+1]=0,h+=o*4)}}uploadTint(t,e,s,l,o,h){for(let c=0;c<s;++c){const d=t[e+c],m=ae.shared.setValue(d._tintRGB).toPremultiplied(d.alpha,d.texture.baseTexture.alphaMode>0);l[h]=m,l[h+o]=m,l[h+o*2]=m,l[h+o*3]=m,h+=o*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}$g.extension={name:"particle",type:pt.RendererPlugin},bt.add($g);var vo=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(vo||{});const _o={willReadFrequently:!0},Qi=class At{static get experimentalLetterSpacingSupported(){let t=At._experimentalLetterSpacingSupported;if(t!==void 0){const e=mt.ADAPTER.getCanvasRenderingContext2D().prototype;t=At._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,s,l,o,h,c,d,m){this.text=t,this.style=e,this.width=s,this.height=l,this.lines=o,this.lineWidths=h,this.lineHeight=c,this.maxLineWidth=d,this.fontProperties=m}static measureText(t,e,s,l=At._canvas){s=s??e.wordWrap;const o=e.toFontString(),h=At.measureFont(o);h.fontSize===0&&(h.fontSize=e.fontSize,h.ascent=e.fontSize);const c=l.getContext("2d",_o);c.font=o;const d=(s?At.wordWrap(t,e,l):t).split(/(?:\r\n|\r|\n)/),m=new Array(d.length);let g=0;for(let v=0;v<d.length;v++){const T=At._measureText(d[v],e.letterSpacing,c);m[v]=T,g=Math.max(g,T)}let y=g+e.strokeThickness;e.dropShadow&&(y+=e.dropShadowDistance);const x=e.lineHeight||h.fontSize+e.strokeThickness;let _=Math.max(x,h.fontSize+e.strokeThickness*2)+e.leading+(d.length-1)*(x+e.leading);return e.dropShadow&&(_+=e.dropShadowDistance),new At(t,e,y,_,d,m,x+e.leading,g,h)}static _measureText(t,e,s){let l=!1;At.experimentalLetterSpacingSupported&&(At.experimentalLetterSpacing?(s.letterSpacing=`${e}px`,s.textLetterSpacing=`${e}px`,l=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));let o=s.measureText(t).width;return o>0&&(l?o-=e:o+=(At.graphemeSegmenter(t).length-1)*e),o}static wordWrap(t,e,s=At._canvas){const l=s.getContext("2d",_o);let o=0,h="",c="";const d=Object.create(null),{letterSpacing:m,whiteSpace:g}=e,y=At.collapseSpaces(g),x=At.collapseNewlines(g);let _=!y;const v=e.wordWrapWidth+m,T=At.tokenize(t);for(let b=0;b<T.length;b++){let w=T[b];if(At.isNewline(w)){if(!x){c+=At.addLine(h),_=!y,h="",o=0;continue}w=" "}if(y){const N=At.isBreakingSpace(w),L=At.isBreakingSpace(h[h.length-1]);if(N&&L)continue}const U=At.getFromCache(w,m,d,l);if(U>v)if(h!==""&&(c+=At.addLine(h),h="",o=0),At.canBreakWords(w,e.breakWords)){const N=At.wordWrapSplit(w);for(let L=0;L<N.length;L++){let B=N[L],j=B,O=1;for(;N[L+O];){const rt=N[L+O];if(!At.canBreakChars(j,rt,w,L,e.breakWords))B+=rt;else break;j=rt,O++}L+=O-1;const q=At.getFromCache(B,m,d,l);q+o>v&&(c+=At.addLine(h),_=!1,h="",o=0),h+=B,o+=q}}else{h.length>0&&(c+=At.addLine(h),h="",o=0);const N=b===T.length-1;c+=At.addLine(w,!N),_=!1,h="",o=0}else U+o>v&&(_=!1,c+=At.addLine(h),h="",o=0),(h.length>0||!At.isBreakingSpace(w)||_)&&(h+=w,o+=U)}return c+=At.addLine(h,!1),c}static addLine(t,e=!0){return t=At.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,s,l){let o=s[t];return typeof o!="number"&&(o=At._measureText(t,e,l)+e,s[t]=o),o}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const s=t[e];if(!At.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:At._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:At._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let s="";if(typeof t!="string")return e;for(let l=0;l<t.length;l++){const o=t[l],h=t[l+1];if(At.isBreakingSpace(o,h)||At.isNewline(o)){s!==""&&(e.push(s),s=""),e.push(o);continue}s+=o}return s!==""&&e.push(s),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,s,l,o){return!0}static wordWrapSplit(t){return At.graphemeSegmenter(t)}static measureFont(t){if(At._fonts[t])return At._fonts[t];const e={ascent:0,descent:0,fontSize:0},s=At._canvas,l=At._context;l.font=t;const o=At.METRICS_STRING+At.BASELINE_SYMBOL,h=Math.ceil(l.measureText(o).width);let c=Math.ceil(l.measureText(At.BASELINE_SYMBOL).width);const d=Math.ceil(At.HEIGHT_MULTIPLIER*c);if(c=c*At.BASELINE_MULTIPLIER|0,h===0||d===0)return At._fonts[t]=e,e;s.width=h,s.height=d,l.fillStyle="#f00",l.fillRect(0,0,h,d),l.font=t,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(o,0,c);const m=l.getImageData(0,0,h,d).data,g=m.length,y=h*4;let x=0,_=0,v=!1;for(x=0;x<c;++x){for(let T=0;T<y;T+=4)if(m[_+T]!==255){v=!0;break}if(!v)_+=y;else break}for(e.ascent=c-x,_=g-y,v=!1,x=d;x>c;--x){for(let T=0;T<y;T+=4)if(m[_+T]!==255){v=!0;break}if(!v)_-=y;else break}return e.descent=x-c,e.fontSize=e.ascent+e.descent,At._fonts[t]=e,e}static clearMetrics(t=""){t?delete At._fonts[t]:At._fonts={}}static get _canvas(){var t;if(!At.__canvas){let e;try{const s=new OffscreenCanvas(0,0);if((t=s.getContext("2d",_o))!=null&&t.measureText)return At.__canvas=s,s;e=mt.ADAPTER.createCanvas()}catch{e=mt.ADAPTER.createCanvas()}e.width=e.height=10,At.__canvas=e}return At.__canvas}static get _context(){return At.__context||(At.__context=At._canvas.getContext("2d",_o)),At.__context}};Qi.METRICS_STRING="|q",Qi.BASELINE_SYMBOL="M",Qi.BASELINE_MULTIPLIER=1.4,Qi.HEIGHT_MULTIPLIER=2,Qi.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return t=>[...n.segment(t)].map(e=>e.segment)}return n=>[...n]})(),Qi.experimentalLetterSpacing=!1,Qi._fonts={},Qi._newlines=[10,13],Qi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let jr=Qi;const qA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Zg=class Cl{constructor(t){this.styleID=0,this.reset(),Jc(this,t,t)}clone(){const t={};return Jc(t,this,Cl.defaultStyle),new Cl(t)}reset(){Jc(this,Cl.defaultStyle,Cl.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Qc(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Qc(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){WA(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Qc(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let s=e.length-1;s>=0;s--){let l=e[s].trim();!/([\"\'])[^\'\"]+\1/.test(l)&&!qA.includes(l)&&(l=`"${l}"`),e[s]=l}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};Zg.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:vo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Yr=Zg;function Qc(n){const t=ae.shared,e=s=>{const l=t.setValue(s);return l.alpha===1?l.toHex():l.toRgbaString()};return Array.isArray(n)?n.map(e):e(n)}function WA(n,t){if(!Array.isArray(n)||!Array.isArray(t)||n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(n[e]!==t[e])return!1;return!0}function Jc(n,t,e){for(const s in e)Array.isArray(t[s])?n[s]=t[s].slice():n[s]=t[s]}const $A={texture:!0,children:!1,baseTexture:!0},Kg=class Ap extends ye{constructor(t,e,s){let l=!1;s||(s=mt.ADAPTER.createCanvas(),l=!0),s.width=3,s.height=3;const o=xt.from(s);o.orig=new Ut,o.trim=new Ut,super(o),this._ownCanvas=l,this.canvas=s,this.context=s.getContext("2d",{willReadFrequently:!0}),this._resolution=Ap.defaultResolution??mt.RESOLUTION,this._autoResolution=Ap.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return jr.experimentalLetterSpacing}static set experimentalLetterSpacing(t){Ht("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),jr.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const s=this.context,l=jr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=l.width,h=l.height,c=l.lines,d=l.lineHeight,m=l.lineWidths,g=l.maxLineWidth,y=l.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,h)+e.padding*2)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=e.strokeThickness,s.textBaseline=e.textBaseline,s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit;let x,_;const v=e.dropShadow?2:1;for(let T=0;T<v;++T){const b=e.dropShadow&&T===0,w=b?Math.ceil(Math.max(1,h)+e.padding*2):0,U=w*this._resolution;if(b){s.fillStyle="black",s.strokeStyle="black";const L=e.dropShadowColor,B=e.dropShadowBlur*this._resolution,j=e.dropShadowDistance*this._resolution;s.shadowColor=ae.shared.setValue(L).setAlpha(e.dropShadowAlpha).toRgbaString(),s.shadowBlur=B,s.shadowOffsetX=Math.cos(e.dropShadowAngle)*j,s.shadowOffsetY=Math.sin(e.dropShadowAngle)*j+U}else s.fillStyle=this._generateFillStyle(e,c,l),s.strokeStyle=e.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;let N=(d-y.fontSize)/2;d-y.fontSize<0&&(N=0);for(let L=0;L<c.length;L++)x=e.strokeThickness/2,_=e.strokeThickness/2+L*d+y.ascent+N,e.align==="right"?x+=g-m[L]:e.align==="center"&&(x+=(g-m[L])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(c[L],x+e.padding,_+e.padding-w,!0),e.fill&&this.drawLetterSpacing(c[L],x+e.padding,_+e.padding-w)}this.updateTexture()}drawLetterSpacing(t,e,s,l=!1){const o=this._style.letterSpacing;let h=!1;if(jr.experimentalLetterSpacingSupported&&(jr.experimentalLetterSpacing?(this.context.letterSpacing=`${o}px`,this.context.textLetterSpacing=`${o}px`,h=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),o===0||h){l?this.context.strokeText(t,e,s):this.context.fillText(t,e,s);return}let c=e;const d=jr.graphemeSegmenter(t);let m=this.context.measureText(t).width,g=0;for(let y=0;y<d.length;++y){const x=d[y];l?this.context.strokeText(x,c,s):this.context.fillText(x,c,s);let _="";for(let v=y+1;v<d.length;++v)_+=d[v];g=this.context.measureText(_).width,c+=m-g+o,m=g}}updateTexture(){const t=this.canvas;if(this._style.trim){const h=mb(t);h.data&&(t.width=h.width,t.height=h.height,this.context.putImageData(h.data,0,0))}const e=this._texture,s=this._style,l=s.trim?0:s.padding,o=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-l,e.trim.y=-l,e.orig.width=e._frame.width-l*2,e.orig.height=e._frame.height-l*2,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,s){const l=t.fill;if(Array.isArray(l)){if(l.length===1)return l[0]}else return l;let o;const h=t.dropShadow?t.dropShadowDistance:0,c=t.padding||0,d=this.canvas.width/this._resolution-h-c*2,m=this.canvas.height/this._resolution-h-c*2,g=l.slice(),y=t.fillGradientStops.slice();if(!y.length){const x=g.length+1;for(let _=1;_<x;++_)y.push(_/x)}if(g.unshift(l[0]),y.unshift(0),g.push(l[l.length-1]),y.push(1),t.fillGradientType===vo.LINEAR_VERTICAL){o=this.context.createLinearGradient(d/2,c,d/2,m+c);const x=s.fontProperties.fontSize+t.strokeThickness;for(let _=0;_<e.length;_++){const v=s.lineHeight*(_-1)+x,T=s.lineHeight*_;let b=T;_>0&&v>T&&(b=(T+v)/2);const w=T+x,U=s.lineHeight*(_+1);let N=w;_+1<e.length&&U<w&&(N=(w+U)/2);const L=(N-b)/m;for(let B=0;B<g.length;B++){let j=0;typeof y[B]=="number"?j=y[B]:j=B/g.length;let O=Math.min(1,Math.max(0,b/m+j*L));O=Number(O.toFixed(5)),o.addColorStop(O,g[B])}}}else{o=this.context.createLinearGradient(c,m/2,d+c,m/2);const x=g.length+1;let _=1;for(let v=0;v<g.length;v++){let T;typeof y[v]=="number"?T=y[v]:T=_/x,o.addColorStop(T,g[v]),_++}}return o}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},$A,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Gr(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Gr(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof Yr?this._style=t:this._style=new Yr(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};Kg.defaultAutoResolution=!0;let tf=Kg;class ZA{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function KA(n,t){var s;let e=!1;if((s=n==null?void 0:n._textures)!=null&&s.length){for(let l=0;l<n._textures.length;l++)if(n._textures[l]instanceof xt){const o=n._textures[l].baseTexture;t.includes(o)||(t.push(o),e=!0)}}return e}function QA(n,t){if(n.baseTexture instanceof Nt){const e=n.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function JA(n,t){if(n._texture&&n._texture instanceof xt){const e=n._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function tS(n,t){return t instanceof tf?(t.updateText(!0),!0):!1}function eS(n,t){if(t instanceof Yr){const e=t.toFontString();return jr.measureFont(e),!0}return!1}function iS(n,t){if(n instanceof tf){t.includes(n.style)||t.push(n.style),t.includes(n)||t.push(n);const e=n._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function rS(n,t){return n instanceof Yr?(t.includes(n)||t.push(n),!0):!1}const Qg=class q1{constructor(t){this.limiter=new ZA(q1.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(iS),this.registerFindHook(rS),this.registerFindHook(KA),this.registerFindHook(QA),this.registerFindHook(JA),this.registerUploadHook(tS),this.registerUploadHook(eS)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,ei.system.addOnce(this.tick,this,Ps.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let s=0,l=this.uploadHooks.length;s<l;s++)if(this.uploadHooks[s](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)ei.system.addOnce(this.tick,this,Ps.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,s=t.length;e<s;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,s=this.addHooks.length;e<s&&!this.addHooks[e](t,this.queue);e++);if(t instanceof di)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&ei.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Qg.uploadsPerFrame=4;let ef=Qg;Object.defineProperties(mt,{UPLOADS_PER_FRAME:{get(){return ef.uploadsPerFrame},set(n){Ht("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),ef.uploadsPerFrame=n}}});function Jg(n,t){return t instanceof Nt?(t._glTextures[n.CONTEXT_UID]||n.texture.bind(t),!0):!1}function sS(n,t){if(!(t instanceof Xg))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:s}=e;for(let l=0;l<s.length;l++){const{texture:o}=s[l].style;o&&Jg(n,o.baseTexture)}return e.batchable||n.geometry.bind(e,t._resolveDirectShader(n)),!0}function nS(n,t){return n instanceof Xg?(t.push(n),!0):!1}class ty extends ef{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(nS),this.registerUploadHook(Jg),this.registerUploadHook(sS)}}ty.extension={name:"prepare",type:pt.RendererSystem},bt.add(ty);var aS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,lS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,oS=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,ey=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,uS=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const xo=new le;class iy extends Wl{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new P0,this.state=$i.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=Zi.from(ey,uS,e),this.shader=t.context.webGLVersion>1?Zi.from(lS,aS,e):Zi.from(ey,oS,e)}render(t){const e=this.renderer,s=this.quad;let l=s.vertices;l[0]=l[6]=t._width*-t.anchor.x,l[1]=l[3]=t._height*-t.anchor.y,l[2]=l[4]=t._width*(1-t.anchor.x),l[5]=l[7]=t._height*(1-t.anchor.y);const o=t.uvRespectAnchor?t.anchor.x:0,h=t.uvRespectAnchor?t.anchor.y:0;l=s.uvs,l[0]=l[6]=-o,l[1]=l[3]=-h,l[2]=l[4]=1-o,l[5]=l[7]=1-h,s.invalidate();const c=t._texture,d=c.baseTexture,m=d.alphaMode>0,g=t.tileTransform.localTransform,y=t.uvMatrix;let x=d.isPowerOfTwo&&c.frame.width===d.width&&c.frame.height===d.height;x&&(d._glTextures[e.CONTEXT_UID]?x=d.wrapMode!==Fr.CLAMP:d.wrapMode===Fr.CLAMP&&(d.wrapMode=Fr.REPEAT));const _=x?this.simpleShader:this.shader,v=c.width,T=c.height,b=t._width,w=t._height;xo.set(g.a*v/b,g.b*v/w,g.c*T/b,g.d*T/w,g.tx/b,g.ty/w),xo.invert(),x?xo.prepend(y.mapCoord):(_.uniforms.uMapCoord=y.mapCoord.toArray(!0),_.uniforms.uClampFrame=y.uClampFrame,_.uniforms.uClampOffset=y.uClampOffset),_.uniforms.uTransform=xo.toArray(!0),_.uniforms.uColor=ae.shared.setValue(t.tint).premultiply(t.worldAlpha,m).toArray(_.uniforms.uColor),_.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),_.uniforms.uSampler=c,e.shader.bind(_),e.geometry.bind(s),this.state.blendMode=u0(t.blendMode,m),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}iy.extension={name:"tilingSprite",type:pt.RendererPlugin},bt.add(iy);const ry=class Ml{constructor(t,e,s){this.linkedSheets=[],(t instanceof Nt||t instanceof xt)&&(t={texture:t,data:e,resolutionFilename:s});const{texture:l,data:o,resolutionFilename:h=null,cachePrefix:c=""}=t;this.cachePrefix=c,this._texture=l instanceof xt?l:null,this.baseTexture=l instanceof Nt?l:this._texture.baseTexture,this.textures={},this.animations={},this.data=o;const d=this.baseTexture.resource;this.resolution=this._updateResolution(h||(d?d.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let s=fr(t,null);return s===null&&(s=typeof e=="number"?e:parseFloat(e??"1")),s!==1&&this.baseTexture.setResolution(s),s}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Ml.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const s=Ml.BATCH_SIZE;for(;e-t<s&&e<this._frameKeys.length;){const l=this._frameKeys[e],o=this._frames[l],h=o.frame;if(h){let c=null,d=null;const m=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,g=new Ut(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);o.rotated?c=new Ut(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):c=new Ut(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(d=new Ut(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[l]=new xt(this.baseTexture,c,g,d,o.rotated?2:0,o.anchor,o.borders),xt.addToCache(this.textures[l],this.cachePrefix+l.toString())}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let s=0;s<t[e].length;s++){const l=t[e][s];this.animations[e].push(this.textures[l])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ml.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ml.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};ry.BATCH_SIZE=1e3;let rf=ry;const hS=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function sy(n,t,e){const s={};if(n.forEach(l=>{s[l]=t}),Object.keys(t.textures).forEach(l=>{s[`${t.cachePrefix}${l}`]=t.textures[l]}),!e){const l=De.dirname(n[0]);t.linkedSheets.forEach((o,h)=>{Object.assign(s,sy([`${l}/${t.data.meta.related_multi_packs[h]}`],o,!0))})}return s}const cS={extension:pt.Asset,cache:{test:n=>n instanceof rf,getCacheableAssets:(n,t)=>sy(n,t,!1)},resolver:{test:n=>{const t=n.split("?")[0].split("."),e=t.pop(),s=t.pop();return e==="json"&&hS.includes(s)},parse:n=>{var e;const t=n.split(".");return{resolution:parseFloat(((e=mt.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:pt.LoadParser,priority:Di.Normal},async testParse(n,t){return De.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){var g,y;const{texture:s,imageFilename:l,cachePrefix:o}=(t==null?void 0:t.data)??{};let h=De.dirname(t.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let c;if(s&&s.baseTexture)c=s;else{const x=Gc(h+(l??n.meta.image),t.src);c=(await e.load([x]))[x]}const d=new rf({texture:c.baseTexture,data:n,resolutionFilename:t.src,cachePrefix:o});await d.parse();const m=(g=n==null?void 0:n.meta)==null?void 0:g.related_multi_packs;if(Array.isArray(m)){const x=[];for(const v of m){if(typeof v!="string")continue;let T=h+v;(y=t.data)!=null&&y.ignoreMultiPack||(T=Gc(T,t.src),x.push(e.load({src:T,data:{ignoreMultiPack:!0}})))}const _=await Promise.all(x);d.linkedSheets=_,_.forEach(v=>{v.linkedSheets=[d].concat(d.linkedSheets.filter(T=>T!==v))})}return d},unload(n){n.destroy(!0)}}};bt.add(cS);class bo{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Eo{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const o in e){const h=e[o].match(/^[a-z]+/gm)[0],c=e[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),d={};for(const m in c){const g=c[m].split("="),y=g[0],x=g[1].replace(/"/gm,""),_=parseFloat(x),v=isNaN(_)?x:_;d[y]=v}s[h].push(d)}const l=new bo;return s.info.forEach(o=>l.info.push({face:o.face,size:parseInt(o.size,10)})),s.common.forEach(o=>l.common.push({lineHeight:parseInt(o.lineHeight,10)})),s.page.forEach(o=>l.page.push({id:parseInt(o.id,10),file:o.file})),s.char.forEach(o=>l.char.push({id:parseInt(o.id,10),page:parseInt(o.page,10),x:parseInt(o.x,10),y:parseInt(o.y,10),width:parseInt(o.width,10),height:parseInt(o.height,10),xoffset:parseInt(o.xoffset,10),yoffset:parseInt(o.yoffset,10),xadvance:parseInt(o.xadvance,10)})),s.kerning.forEach(o=>l.kerning.push({first:parseInt(o.first,10),second:parseInt(o.second,10),amount:parseInt(o.amount,10)})),s.distanceField.forEach(o=>l.distanceField.push({distanceRange:parseInt(o.distanceRange,10),fieldType:o.fieldType})),l}}class sf{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new bo,s=t.getElementsByTagName("info"),l=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),h=t.getElementsByTagName("char"),c=t.getElementsByTagName("kerning"),d=t.getElementsByTagName("distanceField");for(let m=0;m<s.length;m++)e.info.push({face:s[m].getAttribute("face"),size:parseInt(s[m].getAttribute("size"),10)});for(let m=0;m<l.length;m++)e.common.push({lineHeight:parseInt(l[m].getAttribute("lineHeight"),10)});for(let m=0;m<o.length;m++)e.page.push({id:parseInt(o[m].getAttribute("id"),10)||0,file:o[m].getAttribute("file")});for(let m=0;m<h.length;m++){const g=h[m];e.char.push({id:parseInt(g.getAttribute("id"),10),page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xoffset:parseInt(g.getAttribute("xoffset"),10),yoffset:parseInt(g.getAttribute("yoffset"),10),xadvance:parseInt(g.getAttribute("xadvance"),10)})}for(let m=0;m<c.length;m++)e.kerning.push({first:parseInt(c[m].getAttribute("first"),10),second:parseInt(c[m].getAttribute("second"),10),amount:parseInt(c[m].getAttribute("amount"),10)});for(let m=0;m<d.length;m++)e.distanceField.push({fieldType:d[m].getAttribute("fieldType"),distanceRange:parseInt(d[m].getAttribute("distanceRange"),10)});return e}}class nf{static test(t){return typeof t=="string"&&t.includes("<font>")?sf.test(mt.ADAPTER.parseXML(t)):!1}static parse(t){return sf.parse(mt.ADAPTER.parseXML(t))}}const af=[Eo,sf,nf];function fS(n){for(let t=0;t<af.length;t++)if(af[t].test(n))return af[t];return null}function dS(n,t,e,s,l,o){const h=e.fill;if(Array.isArray(h)){if(h.length===1)return h[0]}else return h;let c;const d=e.dropShadow?e.dropShadowDistance:0,m=e.padding||0,g=n.width/s-d-m*2,y=n.height/s-d-m*2,x=h.slice(),_=e.fillGradientStops.slice();if(!_.length){const v=x.length+1;for(let T=1;T<v;++T)_.push(T/v)}if(x.unshift(h[0]),_.unshift(0),x.push(h[h.length-1]),_.push(1),e.fillGradientType===vo.LINEAR_VERTICAL){c=t.createLinearGradient(g/2,m,g/2,y+m);let v=0;const T=(o.fontProperties.fontSize+e.strokeThickness)/y;for(let b=0;b<l.length;b++){const w=o.lineHeight*b;for(let U=0;U<x.length;U++){let N=0;typeof _[U]=="number"?N=_[U]:N=U/x.length;const L=w/y+N*T;let B=Math.max(v,L);B=Math.min(B,1),c.addColorStop(B,x[U]),v=B}}}else{c=t.createLinearGradient(m,y/2,g+m,y/2);const v=x.length+1;let T=1;for(let b=0;b<x.length;b++){let w;typeof _[b]=="number"?w=_[b]:w=T/v,c.addColorStop(w,x[b]),T++}}return c}function pS(n,t,e,s,l,o,h){const c=e.text,d=e.fontProperties;t.translate(s,l),t.scale(o,o);const m=h.strokeThickness/2,g=-(h.strokeThickness/2);if(t.font=h.toFontString(),t.lineWidth=h.strokeThickness,t.textBaseline=h.textBaseline,t.lineJoin=h.lineJoin,t.miterLimit=h.miterLimit,t.fillStyle=dS(n,t,h,o,[c],e),t.strokeStyle=h.stroke,h.dropShadow){const y=h.dropShadowColor,x=h.dropShadowBlur*o,_=h.dropShadowDistance*o;t.shadowColor=ae.shared.setValue(y).setAlpha(h.dropShadowAlpha).toRgbaString(),t.shadowBlur=x,t.shadowOffsetX=Math.cos(h.dropShadowAngle)*_,t.shadowOffsetY=Math.sin(h.dropShadowAngle)*_}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;h.stroke&&h.strokeThickness&&t.strokeText(c,m,g+e.lineHeight-d.descent),h.fill&&t.fillText(c,m,g+e.lineHeight-d.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function To(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}function ny(n){return Array.from?Array.from(n):n.split("")}function mS(n){typeof n=="string"&&(n=[n]);const t=[];for(let e=0,s=n.length;e<s;e++){const l=n[e];if(Array.isArray(l)){if(l.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${l.length}.`);const o=l[0].charCodeAt(0),h=l[1].charCodeAt(0);if(h<o)throw new Error("[BitmapFont]: Invalid character range.");for(let c=o,d=h;c<=d;c++)t.push(String.fromCharCode(c))}else t.push(...ny(l))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const qr=class or{constructor(t,e,s){var g;const[l]=t.info,[o]=t.common,[h]=t.page,[c]=t.distanceField,d=fr(h.file),m={};this._ownsTextures=s,this.font=l.face,this.size=l.size,this.lineHeight=o.lineHeight/d,this.chars={},this.pageTextures=m;for(let y=0;y<t.page.length;y++){const{id:x,file:_}=t.page[y];m[x]=e instanceof Array?e[y]:e[_],c!=null&&c.fieldType&&c.fieldType!=="none"&&(m[x].baseTexture.alphaMode=We.NO_PREMULTIPLIED_ALPHA,m[x].baseTexture.mipmap=Vi.OFF)}for(let y=0;y<t.char.length;y++){const{id:x,page:_}=t.char[y];let{x:v,y:T,width:b,height:w,xoffset:U,yoffset:N,xadvance:L}=t.char[y];v/=d,T/=d,b/=d,w/=d,U/=d,N/=d,L/=d;const B=new Ut(v+m[_].frame.x/d,T+m[_].frame.y/d,b,w);this.chars[x]={xOffset:U,yOffset:N,xAdvance:L,kerning:{},texture:new xt(m[_].baseTexture,B),page:_}}for(let y=0;y<t.kerning.length;y++){let{first:x,second:_,amount:v}=t.kerning[y];x/=d,_/=d,v/=d,this.chars[_]&&(this.chars[_].kerning[x]=v)}this.distanceFieldRange=c==null?void 0:c.distanceRange,this.distanceFieldType=((g=c==null?void 0:c.fieldType)==null?void 0:g.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,s){let l;if(t instanceof bo)l=t;else{const h=fS(t);if(!h)throw new Error("Unrecognized data format for font.");l=h.parse(t)}e instanceof xt&&(e=[e]);const o=new or(l,e,s);return or.available[o.font]=o,o}static uninstall(t){const e=or.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete or.available[t]}static from(t,e,s){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:l,padding:o,resolution:h,textureWidth:c,textureHeight:d,...m}=Object.assign({},or.defaultOptions,s),g=mS(l),y=e instanceof Yr?e:new Yr(e),x=c,_=new bo;_.info[0]={face:y.fontFamily,size:y.fontSize},_.common[0]={lineHeight:y.fontSize};let v=0,T=0,b,w,U,N=0;const L=[];for(let j=0;j<g.length;j++){b||(b=mt.ADAPTER.createCanvas(),b.width=c,b.height=d,w=b.getContext("2d"),U=new Nt(b,{resolution:h,...m}),L.push(new xt(U)),_.page.push({id:L.length-1,file:""}));const O=g[j],q=jr.measureText(O,y,!1,b),rt=q.width,lt=Math.ceil(q.height),ft=Math.ceil((y.fontStyle==="italic"?2:1)*rt);if(T>=d-lt*h){if(T===0)throw new Error(`[BitmapFont] textureHeight ${d}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${O}')`);--j,b=null,w=null,U=null,T=0,v=0,N=0;continue}if(N=Math.max(lt+q.fontProperties.descent,N),ft*h+v>=x){if(v===0)throw new Error(`[BitmapFont] textureWidth ${c}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${O}')`);--j,T+=N*h,T=Math.ceil(T),v=0,N=0;continue}pS(b,w,q,v,T,h,y);const z=To(q.text);_.char.push({id:z,page:L.length-1,x:v/h,y:T/h,width:ft,height:lt,xoffset:0,yoffset:0,xadvance:rt-(y.dropShadow?y.dropShadowDistance:0)-(y.stroke?y.strokeThickness:0)}),v+=(ft+2*o)*h,v=Math.ceil(v)}if(!(s!=null&&s.skipKerning))for(let j=0,O=g.length;j<O;j++){const q=g[j];for(let rt=0;rt<O;rt++){const lt=g[rt],ft=w.measureText(q).width,z=w.measureText(lt).width,W=w.measureText(q+lt).width-(ft+z);W&&_.kerning.push({first:To(q),second:To(lt),amount:W})}}const B=new or(_,L,!0);return or.available[t]!==void 0&&or.uninstall(t),or.available[t]=B,B}};qr.ALPHA=[["a","z"],["A","Z"]," "],qr.NUMERIC=[["0","9"]],qr.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],qr.ASCII=[[" ","~"]],qr.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:qr.ALPHANUMERIC},qr.available={};let Wr=qr;var gS=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,yS=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const ay=[],ly=[],oy=[],vS=class W1 extends di{constructor(t,e={}){super();const{align:s,tint:l,maxWidth:o,letterSpacing:h,fontName:c,fontSize:d}=Object.assign({},W1.styleDefaults,e);if(!Wr.available[c])throw new Error(`Missing BitmapFont "${c}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=s,this._tintColor=new ae(l),this._font=void 0,this._fontName=c,this._fontSize=d,this.text=t,this._maxWidth=o,this._maxLineHeight=0,this._letterSpacing=h,this._anchor=new dr(()=>{this.dirty=!0},this,0,0),this._roundPixels=mt.ROUND_PIXELS,this.dirty=!0,this._resolution=mt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var ft;const t=Wr.available[this._fontName],e=this.fontSize,s=e/t.size,l=new Vt,o=[],h=[],c=[],d=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",m=ny(d),g=this._maxWidth*t.size/e,y=t.distanceFieldType==="none"?ay:ly;let x=null,_=0,v=0,T=0,b=-1,w=0,U=0,N=0,L=0;for(let z=0;z<m.length;z++){const W=m[z],tt=To(W);if(/(?:\s)/.test(W)&&(b=z,w=_,L++),W==="\r"||W===`
`){h.push(_),c.push(-1),v=Math.max(v,_),++T,++U,l.x=0,l.y+=t.lineHeight,x=null,L=0;continue}const ut=t.chars[tt];if(!ut)continue;x&&ut.kerning[x]&&(l.x+=ut.kerning[x]);const S=oy.pop()||{texture:xt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Vt};S.texture=ut.texture,S.line=T,S.charCode=tt,S.position.x=Math.round(l.x+ut.xOffset+this._letterSpacing/2),S.position.y=Math.round(l.y+ut.yOffset),S.prevSpaces=L,o.push(S),_=S.position.x+Math.max(ut.xAdvance-ut.xOffset,ut.texture.orig.width),l.x+=ut.xAdvance+this._letterSpacing,N=Math.max(N,ut.yOffset+ut.texture.height),x=tt,b!==-1&&g>0&&l.x>g&&(++U,fn(o,1+b-U,1+z-b),z=b,b=-1,h.push(w),c.push(o.length>0?o[o.length-1].prevSpaces:0),v=Math.max(v,w),T++,l.x=0,l.y+=t.lineHeight,x=null,L=0)}const B=m[m.length-1];B!=="\r"&&B!==`
`&&(/(?:\s)/.test(B)&&(_=w),h.push(_),v=Math.max(v,_),c.push(-1));const j=[];for(let z=0;z<=T;z++){let W=0;this._align==="right"?W=v-h[z]:this._align==="center"?W=(v-h[z])/2:this._align==="justify"&&(W=c[z]<0?0:(v-h[z])/c[z]),j.push(W)}const O=o.length,q={},rt=[],lt=this._activePagesMeshData;y.push(...lt);for(let z=0;z<O;z++){const W=o[z].texture,tt=W.baseTexture.uid;if(!q[tt]){let ut=y.pop();if(!ut){const M=new zA;let C,H;t.distanceFieldType==="none"?(C=new qg(xt.EMPTY),H=Mt.NORMAL):(C=new qg(xt.EMPTY,{program:pr.from(yS,gS),uniforms:{uFWidth:0}}),H=Mt.NORMAL_NPM);const A=new Yg(M,C);A.blendMode=H,ut={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:A,vertices:null,uvs:null,indices:null}}ut.index=0,ut.indexCount=0,ut.vertexCount=0,ut.uvsCount=0,ut.total=0;const{_textureCache:S}=this;S[tt]=S[tt]||new xt(W.baseTexture),ut.mesh.texture=S[tt],ut.mesh.tint=this._tintColor.value,rt.push(ut),q[tt]=ut}q[tt].total++}for(let z=0;z<lt.length;z++)rt.includes(lt[z])||this.removeChild(lt[z].mesh);for(let z=0;z<rt.length;z++)rt[z].mesh.parent!==this&&this.addChild(rt[z].mesh);this._activePagesMeshData=rt;for(const z in q){const W=q[z],tt=W.total;if(!(((ft=W.indices)==null?void 0:ft.length)>6*tt)||W.vertices.length<Yg.BATCHABLE_SIZE*2)W.vertices=new Float32Array(4*2*tt),W.uvs=new Float32Array(4*2*tt),W.indices=new Uint16Array(6*tt);else{const ut=W.total,S=W.vertices;for(let M=ut*4*2;M<S.length;M++)S[M]=0}W.mesh.size=6*tt}for(let z=0;z<O;z++){const W=o[z];let tt=W.position.x+j[W.line]*(this._align==="justify"?W.prevSpaces:1);this._roundPixels&&(tt=Math.round(tt));const ut=tt*s,S=W.position.y*s,M=W.texture,C=q[M.baseTexture.uid],H=M.frame,A=M._uvs,D=C.index++;C.indices[D*6+0]=0+D*4,C.indices[D*6+1]=1+D*4,C.indices[D*6+2]=2+D*4,C.indices[D*6+3]=0+D*4,C.indices[D*6+4]=2+D*4,C.indices[D*6+5]=3+D*4,C.vertices[D*8+0]=ut,C.vertices[D*8+1]=S,C.vertices[D*8+2]=ut+H.width*s,C.vertices[D*8+3]=S,C.vertices[D*8+4]=ut+H.width*s,C.vertices[D*8+5]=S+H.height*s,C.vertices[D*8+6]=ut,C.vertices[D*8+7]=S+H.height*s,C.uvs[D*8+0]=A.x0,C.uvs[D*8+1]=A.y0,C.uvs[D*8+2]=A.x1,C.uvs[D*8+3]=A.y1,C.uvs[D*8+4]=A.x2,C.uvs[D*8+5]=A.y2,C.uvs[D*8+6]=A.x3,C.uvs[D*8+7]=A.y3}this._textWidth=v*s,this._textHeight=(l.y+t.lineHeight)*s;for(const z in q){const W=q[z];if(this.anchor.x!==0||this.anchor.y!==0){let M=0;const C=this._textWidth*this.anchor.x,H=this._textHeight*this.anchor.y;for(let A=0;A<W.total;A++)W.vertices[M++]-=C,W.vertices[M++]-=H,W.vertices[M++]-=C,W.vertices[M++]-=H,W.vertices[M++]-=C,W.vertices[M++]-=H,W.vertices[M++]-=C,W.vertices[M++]-=H}this._maxLineHeight=N*s;const tt=W.mesh.geometry.getBuffer("aVertexPosition"),ut=W.mesh.geometry.getBuffer("aTextureCoord"),S=W.mesh.geometry.getIndex();tt.data=W.vertices,ut.data=W.uvs,S.data=W.indices,tt.update(),ut.update(),S.update()}for(let z=0;z<o.length;z++)oy.push(o[z]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:s,size:l}=Wr.available[this._fontName];if(s!=="none"){const{a:o,b:h,c,d}=this.worldTransform,m=Math.sqrt(o*o+h*h),g=Math.sqrt(c*c+d*d),y=(Math.abs(m)+Math.abs(g))/2,x=this.fontSize/l,_=t._view.resolution;for(const v of this._activePagesMeshData)v.mesh.shader.uniforms.uFWidth=y*e*x*_}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=Wr.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!Wr.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??Wr.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,s=Wr.available[this._fontName].distanceFieldType==="none"?ay:ly;s.push(...this._activePagesMeshData);for(const l of this._activePagesMeshData)this.removeChild(l.mesh);this._activePagesMeshData=[],s.filter(l=>e[l.mesh.texture.baseTexture.uid]).forEach(l=>{l.mesh.texture=xt.EMPTY});for(const l in e)e[l].destroy(),delete e[l];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};vS.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const _S=[".xml",".fnt"],xS={extension:{type:pt.LoadParser,priority:Di.Normal},name:"loadBitmapFont",test(n){return _S.includes(De.extname(n).toLowerCase())},async testParse(n){return Eo.test(n)||nf.test(n)},async parse(n,t,e){const s=Eo.test(n)?Eo.parse(n):nf.parse(n),{src:l}=t,{page:o}=s,h=[];for(let m=0;m<o.length;++m){const g=o[m].file;let y=De.join(De.dirname(l),g);y=Gc(y,l),h.push(y)}const c=await e.load(h),d=h.map(m=>c[m]);return Wr.install(s,d,!0)},async load(n,t){return(await mt.ADAPTER.fetch(n)).text()},unload(n){n.destroy()}};bt.add(xS);const lf=class ua extends Yr{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new ua(Object.keys(ua.defaultOptions).reduce((e,s)=>({...e,[s]:t[s]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete ua.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:s}=ua;if(s[t]){const l=s[t];return this._fonts.push(l),l.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return mt.ADAPTER.fetch(t).then(l=>l.blob()).then(async l=>new Promise((o,h)=>{const c=URL.createObjectURL(l),d=new FileReader;d.onload=()=>o([c,d.result]),d.onerror=h,d.readAsDataURL(l)})).then(async([l,o])=>{const h=Object.assign({family:De.basename(t,De.extname(t)),weight:"normal",style:"normal",display:"auto",src:l,dataSrc:o,refs:1,originalUrl:t,fontFace:null},e);s[t]=h,this._fonts.push(h),this.styleID++;const c=new FontFace(h.family,`url(${h.src})`,{weight:h.weight,style:h.style,display:h.display});h.fontFace=c,await c.load(),document.fonts.add(c),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(s=>!this._overrides.includes(s));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(s=>this._overrides.includes(s));e.length>0&&(this._overrides=this._overrides.filter(s=>!e.includes(s)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=ub(t)),typeof t=="number"?ob(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,s=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),l=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const o=`${s}px ${l}px`;return this.dropShadowBlur>0?`text-shadow: ${o} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${o} ${t}`}reset(){Object.assign(this,ua.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=mt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};lf.availableFonts={},lf.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let of=lf;const Ao=class ha extends ye{constructor(t="",e={}){super(xt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const s=new Image,l=xt.from(s,{scaleMode:mt.SCALE_MODE,resourceOptions:{autoLoad:!1}});l.orig=new Ut,l.trim=new Ut,this.texture=l;const o="http://www.w3.org/2000/svg",h="http://www.w3.org/1999/xhtml",c=document.createElementNS(o,"svg"),d=document.createElementNS(o,"foreignObject"),m=document.createElementNS(h,"div"),g=document.createElementNS(h,"style");d.setAttribute("width","10000"),d.setAttribute("height","10000"),d.style.overflow="hidden",c.appendChild(d),this.maxWidth=ha.defaultMaxWidth,this.maxHeight=ha.defaultMaxHeight,this._domElement=m,this._styleElement=g,this._svgRoot=c,this._foreignObject=d,this._foreignObject.appendChild(g),this._foreignObject.appendChild(m),this._image=s,this._loadImage=new Image,this._autoResolution=ha.defaultAutoResolution,this._resolution=ha.defaultResolution??mt.RESOLUTION,this.text=t,this.style=e}measureText(t){var g,y;const{text:e,style:s,resolution:l}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:s.toCSS(l)}),this._styleElement.textContent=s.toGlobalCSS(),document.body.appendChild(this._svgRoot);const o=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:h,height:c}=o;(h>this.maxWidth||c>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const d=Math.min(this.maxWidth,Math.ceil(h)),m=Math.min(this.maxHeight,Math.ceil(c));return this._svgRoot.setAttribute("width",d.toString()),this._svgRoot.setAttribute("height",m.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),s!==this._style&&(Object.assign(this._domElement,{style:(g=this._style)==null?void 0:g.toCSS(l)}),this._styleElement.textContent=(y=this._style)==null?void 0:y.toGlobalCSS()),{width:d+s.padding*2,height:m+s.padding*2}}async updateText(t=!0){const{style:e,_image:s,_loadImage:l}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:o,height:h}=this.measureText();s.width=l.width=Math.ceil(Math.max(1,o)),s.height=l.height=Math.ceil(Math.max(1,h)),this._updateID++;const c=this._updateID;await new Promise(d=>{l.onload=async()=>{if(c<this._updateID){d();return}await e.onBeforeDraw(),s.src=l.src,l.onload=null,l.src="",this.updateTexture(),d()};const m=new XMLSerializer().serializeToString(this._svgRoot);l.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(m)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:s,resolution:l}=this,{padding:o}=t,{baseTexture:h}=e;e.trim.width=e._frame.width=s.width/l,e.trim.height=e._frame.height=s.height/l,e.trim.x=-o,e.trim.y=-o,e.orig.width=e._frame.width-o*2,e.orig.height=e._frame.height-o*2,this._onTextureUpdate(),h.setRealSize(s.width,s.height,l),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var s,l,o,h,c;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},ha.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((s=this._style)==null||s.cleanFonts()),this._style=e,(l=this._svgRoot)==null||l.remove(),this._svgRoot=e,(o=this._domElement)==null||o.remove(),this._domElement=e,(h=this._foreignObject)==null||h.remove(),this._foreignObject=e,(c=this._styleElement)==null||c.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=Gr(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=Gr(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof of?(this.ownsStyle=!1,this._style=t):t instanceof Yr?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=of.from(t)):(this.ownsStyle=!0,this._style=new of(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Ao.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Ao.defaultMaxWidth=2024,Ao.defaultMaxHeight=2024,Ao.defaultAutoResolution=!0;const Tn={levels:[{name:"000",tutorial:!0,blocks:[[0,0,0,0,0,0,0],[0,9,1,5,1,3,0],[0,0,0,0,0,0,0]]},{name:"001",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,9,1,1,3,0],[0,1,1,0,0,0],[0,1,5,0,0,0],[0,1,1,0,0,0],[0,0,0,0,0,0]]},{name:"002",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,1,1,1,9,0],[0,1,1,5,1,1,0],[0,3,1,1,1,0,0],[0,0,0,0,0,0,0]]},{name:"003",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,1,1,1,0],[0,0,1,5,1,0],[0,0,1,0,9,0],[0,1,1,3,1,0],[0,1,1,1,1,0],[0,0,0,0,0,0]]},{name:"004",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,1,1,1,0,0],[0,1,0,1,0,0],[0,1,5,1,0,0],[0,1,0,1,1,0],[0,1,9,1,3,0],[0,0,0,0,0,0]]},{name:"005",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,0,0,0],[0,1,0,1,0,0,0],[0,1,1,1,3,1,0],[0,0,1,0,0,1,0],[0,0,1,5,1,1,0],[0,0,1,1,9,1,0],[0,0,0,0,0,0,0]]},{name:"006",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,1,1,1,0,1,1,0],[0,1,1,1,1,5,9,0],[0,0,0,0,0,0,3,0],[0,0,0,0,0,0,0,0]]},{name:"007",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,3,1,0,1,3,0],[0,1,5,1,5,1,0],[0,1,1,1,1,1,0],[0,0,1,9,1,0,0],[0,0,0,0,0,0,0]]},{name:"008",tutorial:!1,blocks:[[0,0,0,0],[0,0,9,0],[0,1,7,0],[0,1,1,0],[0,1,3,0],[0,1,5,0],[0,1,1,0],[0,0,0,0]]},{name:"009",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,1,1,3,0,0],[0,9,5,3,0,0],[0,0,0,1,0,0],[0,1,1,1,1,0],[0,1,0,1,1,0],[0,1,1,5,1,0],[0,1,1,1,1,0],[0,0,0,0,0,0]]},{name:"010",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0,0],[0,1,3,1,1,1,1,0,0],[0,1,5,0,1,1,1,0,0],[0,1,9,0,0,0,1,0,0],[0,0,0,0,1,1,3,1,0],[0,0,0,0,1,1,0,1,0],[0,0,0,0,1,1,5,1,0],[0,0,0,0,1,1,1,1,0],[0,0,0,0,0,0,0,0,0]]},{name:"011",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,1,9,0,1,1,1,0],[0,7,5,1,1,1,1,0],[0,3,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},{name:"012",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,0,1,9,0],[0,0,0,3,1,0],[0,1,1,5,5,0],[0,1,1,1,3,0],[0,0,0,0,0,0]]},{name:"013",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,1,1,5,5,0,0],[0,1,3,1,3,1,0],[0,0,0,1,1,9,0],[0,0,0,0,0,0,0]]},{name:"014",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,1,9,0,0],[0,0,3,5,0,0],[0,0,7,1,1,0],[0,1,1,1,1,0],[0,1,1,1,0,0],[0,0,0,0,0,0]]},{name:"015",tutorial:!1,blocks:[[0,0,0,0,0],[0,0,1,1,0],[0,0,1,1,0],[0,0,5,1,0],[0,0,1,3,0],[0,1,5,3,0],[0,1,1,9,0],[0,0,0,0,0]]},{name:"016",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0],[0,0,0,0,0,7,1,0],[0,1,5,1,1,1,1,0],[0,1,1,1,3,1,9,0],[0,0,0,0,0,0,0,0]]},{name:"017",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,1,1,3,3,0],[0,0,5,1,0,1,0],[0,1,1,1,5,1,0],[0,1,9,1,0,0,0],[0,0,0,0,0,0,0]]},{name:"018",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,9,0,0],[0,1,1,1,1,3,7,1,0],[0,1,1,1,0,1,1,1,0],[0,0,0,0,0,5,0,1,0],[0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,0,0]]},{name:"019",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,1,1,0],[0,1,0,1,0,1,0],[0,3,1,5,7,9,0],[0,1,1,1,1,0,0],[0,0,0,0,0,0,0]]},{name:"020",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,0,1,1,1,0],[0,0,0,5,5,9,0],[0,1,1,1,0,0,0],[0,1,1,1,1,1,0],[0,1,3,1,3,1,0],[0,0,0,0,0,0,0]]},{name:"021",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,0,0,1,1,0],[0,1,1,0,1,1,0],[0,1,3,1,3,1,0],[0,1,9,5,5,1,0],[0,1,0,1,0,0,0],[0,1,1,1,0,0,0],[0,0,0,0,0,0,0]]},{name:"022",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0],[0,1,1,1,5,1,1,0],[0,1,7,3,0,1,1,0],[0,0,1,0,0,1,0,0],[0,1,1,9,1,1,1,0],[0,1,1,0,1,1,1,0],[0,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},{name:"023",tutorial:!1,blocks:[[0,0,0,0,0],[0,9,5,3,0],[0,1,5,3,0],[0,0,5,3,0],[0,1,1,1,0],[0,1,1,1,0],[0,0,0,0,0]]},{name:"024",tutorial:!1,blocks:[[0,0,0,0,0],[0,3,1,3,0],[0,1,5,1,0],[0,1,7,1,0],[0,1,5,1,0],[0,0,9,1,0],[0,0,0,0,0]]},{name:"025",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,3,5,3,0],[0,1,1,0,1,0],[0,1,5,5,1,0],[0,3,1,1,9,0],[0,0,0,0,0,0]]},{name:"026",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,1,1,0,0,0],[0,1,1,3,1,0],[0,7,5,5,1,0],[0,1,1,3,9,0],[0,0,0,0,0,0]]},{name:"027",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,1,1,1,0],[0,0,1,1,5,0],[0,1,7,7,3,0],[0,9,1,1,0,0],[0,0,0,0,0,0]]},{name:"028",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,1,9,1,0,0],[0,3,3,3,0,0],[0,5,5,5,0,0],[0,1,1,1,1,0],[0,1,1,1,1,0],[0,0,0,0,0,0]]},{name:"029",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,0,1,1,0],[0,1,1,0,1,1,0],[0,9,5,5,5,1,0],[0,1,1,3,3,3,0],[0,0,0,0,0,0,0]]},{name:"030",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,1,1,0],[0,7,0,0,1,3,0],[0,3,5,1,1,1,0],[0,1,1,0,5,1,0],[0,1,1,0,9,1,0],[0,0,0,0,0,0,0]]},{name:"031",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,3,0,0,0],[0,0,0,9,1,0,0,0],[0,0,0,1,5,0,0,0],[0,1,1,1,1,7,1,0],[0,1,1,5,1,1,1,0],[0,0,0,0,0,3,1,0],[0,0,0,0,0,0,0,0]]},{name:"032",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,3,1,0],[0,1,0,1,0,1,0],[0,1,5,9,5,1,0],[0,1,0,1,0,3,0],[0,1,1,7,1,1,0],[0,0,0,0,0,0,0]]},{name:"033",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,1,0,0],[0,1,5,3,1,0,0],[0,0,5,3,5,1,0],[0,0,1,3,1,9,0],[0,0,0,0,0,0,0]]},{name:"034",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0],[0,0,0,0,0,5,3,0],[0,0,0,1,1,3,1,0],[0,0,0,1,1,0,3,0],[0,9,5,1,5,1,1,0],[0,1,1,1,0,1,1,0],[0,0,0,0,0,0,0,0]]},{name:"035",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0],[0,1,1,1,7,5,1,0],[0,1,0,1,1,0,9,0],[0,1,0,1,7,3,1,0],[0,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0]]},{name:"036",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,3,3,0,0,0],[0,0,5,3,1,9,0],[0,1,1,5,5,1,0],[0,1,1,0,1,1,0],[0,1,1,0,1,1,0],[0,0,0,0,0,0,0]]},{name:"037",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,3,1,0,1,1,0],[0,1,1,5,1,1,0],[0,3,1,5,0,9,0],[0,1,1,5,1,1,0],[0,3,1,0,1,1,0],[0,0,0,0,0,0,0]]},{name:"end",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,0,1,1,1,3,0],[0,1,0,0,0,0,1,0,0,0,0],[0,1,0,9,1,0,1,0,5,1,0],[0,1,0,0,1,0,1,0,0,1,0],[0,1,1,1,1,0,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]]}]},I=3,Lt=8*I,fe=16*I,uf="./jeu_assets_x"+I+".png",Ro=class Ro{constructor(t){this.n=t;let e=t%2;t-=e;let s=t%4;t-=s;let l=t%8;t-=l;let o=t%16;this.space=e!=0,this.solid=!this.space,this.goal=s!=0,this.box=l!=0,this.player=o!=0}};V1(Ro,"DEFAULT",new Ro(0));let So=Ro;const Bi=new Image;Bi.src=uf;const wo={frames:{player1:{frame:{x:0*I,y:0,w:16*I,h:16*I},sourceSize:{w:16*I,h:16*I},spriteSourceSize:{x:0,y:0,w:16*I,h:16*I}},player2:{frame:{x:16*I,y:0,w:16*I,h:16*I},sourceSize:{w:16*I,h:16*I},spriteSourceSize:{x:0,y:0,w:16*I,h:16*I}},box:{frame:{x:32*I,y:0,w:16*I,h:16*I},sourceSize:{w:16*I,h:16*I},spriteSourceSize:{x:0,y:0,w:16*I,h:16*I}},box2:{frame:{x:48*I,y:0,w:16*I,h:16*I},sourceSize:{w:16*I,h:16*I},spriteSourceSize:{x:0,y:0,w:16*I,h:16*I}},partA0:{frame:{x:56*I,y:16*I,w:6*I,h:4*I},sourceSize:{w:6*I,h:4*I},spriteSourceSize:{x:0,y:0,w:6*I,h:4*I}},partA1:{frame:{x:56*I,y:20*I,w:6*I,h:4*I},sourceSize:{w:6*I,h:4*I},spriteSourceSize:{x:0,y:0,w:6*I,h:4*I}},partA2:{frame:{x:56*I,y:24*I,w:6*I,h:4*I},sourceSize:{w:6*I,h:4*I},spriteSourceSize:{x:0,y:0,w:6*I,h:4*I}},partA3:{frame:{x:62*I,y:16*I,w:6*I,h:4*I},sourceSize:{w:6*I,h:4*I},spriteSourceSize:{x:0,y:0,w:6*I,h:4*I}},partA4:{frame:{x:62*I,y:20*I,w:6*I,h:4*I},sourceSize:{w:6*I,h:4*I},spriteSourceSize:{x:0,y:0,w:6*I,h:4*I}},partA5:{frame:{x:62*I,y:24*I,w:6*I,h:4*I},sourceSize:{w:6*I,h:4*I},spriteSourceSize:{x:0,y:0,w:6*I,h:4*I}},recommencer:{frame:{x:0*I,y:40*I,w:76*I,h:10*I},sourceSize:{w:76*I,h:10*I},spriteSourceSize:{x:0,y:0,w:76*I,h:10*I}},recommencer2:{frame:{x:0*I,y:69*I,w:76*I,h:10*I},sourceSize:{w:76*I,h:10*I},spriteSourceSize:{x:0,y:0,w:76*I,h:10*I}},bouger:{frame:{x:0*I,y:50*I,w:53*I,h:19*I},sourceSize:{w:53*I,h:19*I},spriteSourceSize:{x:0,y:0,w:53*I,h:19*I}},bouger2:{frame:{x:53*I,y:50*I,w:53*I,h:19*I},sourceSize:{w:53*I,h:19*I},spriteSourceSize:{x:0,y:0,w:53*I,h:19*I}},pause:{frame:{x:76*I,y:79*I,w:41*I,h:10*I},sourceSize:{w:41*I,h:10*I},spriteSourceSize:{x:0,y:0,w:41*I,h:10*I}},pause2:{frame:{x:76*I,y:69*I,w:41*I,h:10*I},sourceSize:{w:41*I,h:10*I},spriteSourceSize:{x:0,y:0,w:41*I,h:10*I}},jouer:{frame:{x:63*I,y:128*I,w:48*I,h:10*I},sourceSize:{w:48*I,h:10*I},spriteSourceSize:{x:0,y:0,w:48*I,h:10*I}},jouer2:{frame:{x:76*I,y:89*I,w:41*I,h:10*I},sourceSize:{w:41*I,h:10*I},spriteSourceSize:{x:0,y:0,w:41*I,h:10*I}},suivantbtn:{frame:{x:0*I,y:128*I,w:63*I,h:16*I},sourceSize:{w:63*I,h:16*I},spriteSourceSize:{x:0,y:0,w:63*I,h:16*I}},niveauxbtn:{frame:{x:0*I,y:144*I,w:63*I,h:16*I},sourceSize:{w:63*I,h:16*I},spriteSourceSize:{x:0,y:0,w:63*I,h:16*I}},jouerbtn:{frame:{x:0*I,y:160*I,w:63*I,h:16*I},sourceSize:{w:63*I,h:16*I},spriteSourceSize:{x:0,y:0,w:63*I,h:16*I}},suivantbtn2:{frame:{x:0*I,y:80*I,w:48*I,h:16*I},sourceSize:{w:48*I,h:16*I},spriteSourceSize:{x:0,y:0,w:48*I,h:16*I}},niveauxbtn2:{frame:{x:0*I,y:96*I,w:48*I,h:16*I},sourceSize:{w:48*I,h:16*I},spriteSourceSize:{x:0,y:0,w:48*I,h:16*I}},jouerbtn2:{frame:{x:0*I,y:112*I,w:48*I,h:16*I},sourceSize:{w:48*I,h:16*I},spriteSourceSize:{x:0,y:0,w:48*I,h:16*I}},levelA:{frame:{x:48*I,y:80*I,w:48*I,h:16*I},sourceSize:{w:48*I,h:16*I},spriteSourceSize:{x:0,y:0,w:48*I,h:16*I}},levelB:{frame:{x:48*I,y:96*I,w:48*I,h:16*I},sourceSize:{w:48*I,h:16*I},spriteSourceSize:{x:0,y:0,w:48*I,h:16*I}},levelC:{frame:{x:48*I,y:112*I,w:48*I,h:16*I},sourceSize:{w:48*I,h:16*I},spriteSourceSize:{x:0,y:0,w:48*I,h:16*I}},pauselbl:{frame:{x:92*I,y:31*I,w:36*I,h:12*I},sourceSize:{w:36*I,h:12*I},spriteSourceSize:{x:0,y:0,w:36*I,h:12*I}},bravolbl:{frame:{x:88*I,y:19*I,w:40*I,h:12*I},sourceSize:{w:40*I,h:12*I},spriteSourceSize:{x:0,y:0,w:40*I,h:12*I}},sokobanlbl:{frame:{x:77*I,y:7*I,w:51*I,h:12*I},sourceSize:{w:51*I,h:12*I},spriteSourceSize:{x:0,y:0,w:51*I,h:12*I}},levelselect:{frame:{x:69*I,y:108*I,w:25*I,h:20*I},sourceSize:{w:25*I,h:20*I},spriteSourceSize:{x:0,y:0,w:25*I,h:20*I}}},meta:{image:uf,format:"RGBA8888",size:{w:128*I,h:176*I},scale:1},animations:{player:["player1","player2"]}},An=8*I,Sn=Tn.levels.length,Jt=6,wa=Math.ceil(Sn/Jt),Ra=21*I,Ca=16*I;function bS(){const n=new OffscreenCanvas(Ra*Jt+An*(Jt-1),Ca*wa+An*(wa-1)),t=n.getContext("2d");for(let e=0;e<Sn;e++){const s=Tn.levels[e].name,l=e%Jt,o=Math.floor(e/Jt);let h=(An+Ra)*l,c=(An+Ca)*o,d=wo.frames.levelA.frame;e>=24?d=wo.frames.levelC.frame:e>=12&&(d=wo.frames.levelB.frame);let m=4*I,g=5*I,y=7*I,x=4*I;const _={0:123,1:83,2:88,3:92,4:97,5:101,6:105,7:110,8:114,9:119,e:69,n:73,d:78};t.drawImage(Bi,d.x,d.y,Ra,Ca,h,c,Ra,Ca),t.drawImage(Bi,_[s[0]]*I,0,g,y,h+m+0*x,c+m,g,y),t.drawImage(Bi,_[s[1]]*I,0,g,y,h+m+1*x,c+m,g,y),t.drawImage(Bi,_[s[2]]*I,0,g,y,h+m+2*x,c+m,g,y)}return n}async function ES(){return new Promise((n,t)=>{let e;e=setInterval(()=>{Bi.complete&&(clearInterval(e),n(Bi))},20)})}function Be(n,t,e,s=1e-6){let o=(e-t)*Math.pow(s,n);return e-o}const TS=()=>{const n=Hi.useRef(null),t=Hi.useRef(null);Hi.useRef(null);const e=Hi.useRef(new tf("init")),s=Hi.useRef(null),l=Hi.useRef(null),o=Hi.useRef(null),h=Hi.useRef(null);function c(){return[Math.round(window.innerWidth/2),Math.round(window.innerHeight/2)]}class d{static me(){return l.current}constructor(v,T,b){this.level=b,l.current=this,this.frame=0,this.gridX=v,this.gridY=T;let[w,U]=this.level.gridToScreen(v,T);this.screenX=w,this.screenY=U,this.targetX=w,this.targetY=U,this.targetAngle=0,this.screenAngle=0}place(v,T){this.gridX=v,this.gridY=T}move(v,T){this.gridX+=v,this.gridY+=T}destroy(){this.sprite.destroy()}init(){this.sprite=new ye(s.current.textures.player1),this.sprite.anchor.set(.5),this.sprite.x=this.screenX,this.sprite.y=this.screenY,this.sprite.width=fe,this.sprite.height=fe,this.sprite.angle=this.screenAngle,this.level.sprite.addChild(this.sprite)}update(v){let[T,b]=this.level.gridToScreen(this.gridX,this.gridY);this.targetX=T,this.targetY=b,this.screenX=Be(v,this.screenX,this.targetX),this.screenY=Be(v,this.screenY,this.targetY),this.screenAngle-this.targetAngle>2?this.screenAngle=this.screenAngle-4:this.targetAngle-this.screenAngle>2&&(this.screenAngle=this.screenAngle+4),this.screenAngle=Be(v,this.screenAngle,this.targetAngle,1e-9),this.sprite.x=this.screenX,this.sprite.y=this.screenY,this.sprite.angle=this.screenAngle*90,this.frame++%120<5?this.sprite.texture=s.current.textures.player2:this.sprite.texture=s.current.textures.player1}pushleft(){if(this.level.getAt(this.gridX-1,this.gridY).space){let v;for(let T=0;T<this.level.boxes.length;T++){let b=this.level.boxes[T];if(this.gridX-1==b.gridX&&this.gridY==b.gridY){v=b;break}}if(v){if(v.pushleft())return this.move(-1,0),!0}else return this.move(-1,0),!0}return!1}pushright(){if(this.level.getAt(this.gridX+1,this.gridY).space){let v;for(let T=0;T<this.level.boxes.length;T++){let b=this.level.boxes[T];if(this.gridX+1==b.gridX&&this.gridY==b.gridY){v=b;break}}if(v){if(v.pushright())return this.move(1,0),!0}else return this.move(1,0),!0}return!1}pushup(){if(this.level.getAt(this.gridX,this.gridY-1).space){let v;for(let T=0;T<this.level.boxes.length;T++){let b=this.level.boxes[T];if(this.gridX==b.gridX&&this.gridY-1==b.gridY){v=b;break}}if(v){if(v.pushup())return this.move(0,-1),!0}else return this.move(0,-1),!0}return!1}pushdown(){if(this.level.getAt(this.gridX,this.gridY+1).space){let v;for(let T=0;T<this.level.boxes.length;T++){let b=this.level.boxes[T];if(this.gridX==b.gridX&&this.gridY+1==b.gridY){v=b;break}}if(v){if(v.pushdown())return this.move(0,1),!0}else return this.move(0,1),!0}return!1}}class m{constructor(v,T,b){this.level=b,this.gridX=v,this.gridY=T;let[w,U]=this.level.gridToScreen(v,T);this.screenX=w,this.screenY=U,this.targetX=w,this.targetY=U}init(){this.sprite=new ye(s.current.textures.box),this.sprite.anchor.set(.5),this.sprite.x=this.screenX,this.sprite.y=this.screenY,this.sprite.width=fe,this.sprite.height=fe,this.level.sprite.addChild(this.sprite)}place(v,T){this.gridX=v,this.gridY=T}move(v,T){this.gridX+=v,this.gridY+=T}update(v){let[T,b]=this.level.gridToScreen(this.gridX,this.gridY);this.targetX=T,this.targetY=b,this.screenX=Be(v,this.screenX,this.targetX),this.screenY=Be(v,this.screenY,this.targetY);let w=this.level.getAt(this.gridX,this.gridY).goal?"box":"box2";this.sprite.texture=s.current.textures[w],this.sprite.x=this.screenX,this.sprite.y=this.screenY}destroy(){this.sprite.destroy()}pushleft(){if(this.level.getAt(this.gridX-1,this.gridY).space){let v;for(let T=0;T<this.level.boxes.length;T++){let b=this.level.boxes[T];if(this.gridX-1==b.gridX&&this.gridY==b.gridY){v=b;break}}if(!v)return this.move(-1,0),!0}return!1}pushright(){if(this.level.getAt(this.gridX+1,this.gridY).space){let v;for(let T=0;T<this.level.boxes.length;T++){let b=this.level.boxes[T];if(this.gridX+1==b.gridX&&this.gridY==b.gridY){v=b;break}}if(!v)return this.move(1,0),!0}return!1}pushup(){if(this.level.getAt(this.gridX,this.gridY-1).space){let v;for(let T=0;T<this.level.boxes.length;T++){let b=this.level.boxes[T];if(this.gridX==b.gridX&&this.gridY-1==b.gridY){v=b;break}}if(!v)return this.move(0,-1),!0}return!1}pushdown(){if(this.level.getAt(this.gridX,this.gridY+1).space){let v;for(let T=0;T<this.level.boxes.length;T++){let b=this.level.boxes[T];if(this.gridX==b.gridX&&this.gridY+1==b.gridY){v=b;break}}if(!v)return this.move(0,1),!0}return!1}}class g{constructor(v,T,b){this.level=b,this.gridX=v,this.gridY=T}}class y{constructor(v,T){this.game=v,h.current=this,this.originalData=T,this.gridH=T.blocks.length,this.gridW=T.blocks[0].length,this.screenW=this.gridW*fe,this.screenH=this.gridH*fe,this.blocks=[],this.boxes=[],this.goals=[];for(let b=0;b<this.gridH;b++){this.blocks.push([]);for(let w=0;w<this.gridW;w++){let U=new So(T.blocks[b][w]);U.player&&(this.player=new d(w,b,this)),U.box&&this.boxes.push(new m(w,b,this)),U.goal&&this.goals.push(new g(w,b,this)),this.blocks[b].push(U)}}}init(){this.drawTilemap(),this.texture=xt.from(this.cvx),this.sprite=new ye(this.texture),this.sprite.anchor.set(.5);let[v,T]=c();this.sprite.x=v,this.sprite.y=T,this.sprite.width=this.screenW,this.sprite.height=this.screenH,this.game.gamecontainer.addChild(this.sprite);for(let b=0;b<this.boxes.length;b++)this.boxes[b].init();this.player.init()}destroy(){for(let v=0;v<this.boxes.length;v++)this.boxes[v].destroy();this.player.destroy(),this.sprite.destroy()}update(v){let[T,b]=c();this.sprite.x=T+this.game.showNiveaux,this.sprite.y=b,this.player.update(v);for(let w=0;w<this.boxes.length;w++)this.boxes[w].update(v)}getAt(v,T){return v<0||T<0||v>=this.gridW||T>=this.gridH?So.DEFAULT:this.blocks[T][v]}drawTilemap(){this.cvx=new OffscreenCanvas(this.gridW*fe,this.gridH*fe);let v=this.cvx.getContext("2d");for(let T=0;T<this.gridW;T++)for(let b=0;b<this.gridH;b++){let w=this.getAt(T,b),U=this.getAt(T,b-1),N=this.getAt(T,b+1),L=this.getAt(T-1,b),B=this.getAt(T+1,b),j=this.getAt(T-1,b-1),O=this.getAt(T+1,b-1),q=this.getAt(T-1,b+1),rt=this.getAt(T+1,b+1),[lt,ft]=this.fitTile("tl",w,L,U,j),[z,W]=this.fitTile("tr",w,B,U,O),[tt,ut]=this.fitTile("bl",w,L,N,q),[S,M]=this.fitTile("br",w,B,N,rt);v.drawImage(Bi,lt*Lt,ft*Lt,Lt,Lt,T*fe+Lt*0,b*fe+Lt*0,Lt,Lt),v.drawImage(Bi,z*Lt,W*Lt,Lt,Lt,T*fe+Lt*1,b*fe+Lt*0,Lt,Lt),v.drawImage(Bi,tt*Lt,ut*Lt,Lt,Lt,T*fe+Lt*0,b*fe+Lt*1,Lt,Lt),v.drawImage(Bi,S*Lt,M*Lt,Lt,Lt,T*fe+Lt*1,b*fe+Lt*1,Lt,Lt)}v.strokeStyle="#f00",v.lineWidth=2}fitTile(v,T,b,w,U){if(T.goal){if(v=="tl")return[5,2];if(v=="tr")return[6,2];if(v=="bl")return[5,3];if(v=="br")return[6,3]}else{if(T.space)return[1,3];if(b.solid&&w.solid&&U.solid)return[6,4];if(v=="tl")return b.solid&&w.solid?[2,4]:b.solid?[1,4]:w.solid?[2,3]:[4,3];if(v=="tr")return b.solid&&w.solid?[0,4]:b.solid?[1,4]:w.solid?[0,3]:[3,3];if(v=="bl")return b.solid&&w.solid?[2,2]:b.solid?[1,2]:w.solid?[2,3]:[4,2];if(v=="br")return b.solid&&w.solid?[0,2]:b.solid?[1,2]:w.solid?[0,3]:[3,2]}}screenToGrid(v,T,b=!0){let[w,U]=c(),N=h.current.gridW*Lt+w,L=h.current.gridH*Lt+U;return b?[Math.floor((v-N)/fe),Math.floor((T-L)/fe)]:[(v-N)/fe-Lt,(T-L)/fe-Lt]}gridToScreen(v,T){let b=-h.current.gridW*Lt,w=-h.current.gridH*Lt;return[b+v*fe+Lt,w+T*fe+Lt]}receiveEvent(v,T){if(v=="left")return this.player.targetAngle=-1,this.player.pushleft();if(v=="right")return this.player.targetAngle=1,this.player.pushright();if(v=="up")return this.player.targetAngle=0,this.player.pushup();if(v=="down")return this.player.targetAngle=2,this.player.pushdown()}hasWon(){let v=!0;for(let T=0;T<this.boxes.length;T++){const b=this.boxes[T];v=v&&this.goals.some(w=>b.gridX==w.gridX&&b.gridY==w.gridY)}return v}}class x{constructor(){let v=this;o.current=this,this.app=new Eg({view:n.current,width:1920,height:1080,backgroundAlpha:0,backgroundColor:"#8e3ce1"}),this.state="niveaux",this.frame=0,this.frameSinceWin=0,this.levelNumber=0,this.recommencerAngle=0,this.recommencerAngle2=0,this.pauseAngle=0,this.pauseAngle2=0,this.jouerAngle=0,this.jouerAngle2=0,this.showControl=200,this.showLevelControl=200,this.showPause=200,this.showBravo=200,this.showNiveaux=window.innerWidth,this.selectGridX=this.levelNumber%Jt,this.selectGridY=Math.floor(this.levelNumber/Jt),this.app.renderer.resize(window.innerWidth,window.innerHeight),this.app.renderer.type=Qu.CANVAS,mt.RENDER_OPTIONS.antialias=!1,mt.SCALE_MODE=Xi.NEAREST,t.current=this.app,this.gamecontainer=new di,this.gamecontainer.x=0,this.gamecontainer.y=0,Sa.load(uf).then(async T=>{s.current=new rf(T,wo),await s.current.parse(),this.level=new y(this,Tn.levels[this.levelNumber]),this.app.stage.addChild(this.gamecontainer),v.init();let[b,w]=c();this.recommencer=new ye(s.current.textures.recommencer),this.recommencer.anchor.set(0,1),this.recommencer.x=36,this.recommencer.y=window.innerHeight-24+this.showControl,this.app.stage.addChild(this.recommencer),this.pause=new ye(s.current.textures.pause),this.pause.anchor.set(0,1),this.pause.x=36*2+76*I,this.pause.y=window.innerHeight-24+this.showControl,this.app.stage.addChild(this.pause),this.bouger=new ye(s.current.textures.bouger),this.bouger.anchor.set(1,1),this.bouger.x=window.innerWidth-36,this.bouger.y=window.innerHeight-24+this.showControl,this.app.stage.addChild(this.bouger),this.jouer=new ye(s.current.textures.jouer),this.jouer.anchor.set(0,1),this.jouer.x=36,this.jouer.y=window.innerHeight-24+this.showLevelControl,this.app.stage.addChild(this.jouer),this.pauselbl=new ye(s.current.textures.pauselbl),this.pauselbl.anchor.set(.5,0),this.pauselbl.x=b+window.innerWidth,this.pauselbl.y=64-this.showPause,this.app.stage.addChild(this.pauselbl),this.bravolbl=new ye(s.current.textures.bravolbl),this.bravolbl.anchor.set(.5,0),this.bravolbl.x=b+window.innerWidth,this.bravolbl.y=64-this.showBravo,this.app.stage.addChild(this.bravolbl),this.jouerbtn=new ye(s.current.textures.jouerbtn),this.jouerbtn.anchor.set(0,1),this.jouerbtn.x=b+12+window.innerWidth,this.jouerbtn.y=window.innerHeight-64+this.showPause,this.app.stage.addChild(this.jouerbtn),this.suivantbtn=new ye(s.current.textures.suivantbtn),this.suivantbtn.anchor.set(0,1),this.suivantbtn.x=b+12+window.innerWidth,this.suivantbtn.y=window.innerHeight-64+this.showBravo,this.app.stage.addChild(this.suivantbtn),this.niveauxbtn=new ye(s.current.textures.niveauxbtn),this.niveauxbtn.anchor.set(1,1),this.niveauxbtn.x=b-12+window.innerWidth,this.niveauxbtn.y=window.innerHeight-64+Math.min(this.showPause,this.showBravo),this.app.stage.addChild(this.niveauxbtn),this.niveauxtexture=xt.from(bS()),this.niveaux=new ye(this.niveauxtexture),this.niveaux.anchor.set(.5,.5),this.niveaux.x=b,this.niveaux.y=w,this.app.stage.addChild(this.niveaux),this.levelselect=new ye(s.current.textures.levelselect),this.levelselect.anchor.set(0,0),this.levelselect.x=-2*I-this.niveaux.width/2,this.levelselect.y=-2*I-this.niveaux.height/2,this.niveaux.addChild(this.levelselect),this.sokobanlbl=new ye(s.current.textures.sokobanlbl),this.sokobanlbl.anchor.set(.5,1),this.sokobanlbl.x=0,this.sokobanlbl.y=-64-this.niveaux.height/2,this.niveaux.addChild(this.sokobanlbl),this.basicText=e.current,this.basicText.x=100,this.basicText.y=100})}init(){this.level.init();let v=this;this.app.ticker.add(T=>{v.frame++;let b=T/60;v.update(b)})}update(v){this.level.hasWon()&&(this.frameSinceWin++,this.frameSinceWin==20&&(this.state="bravo"));let[T,b]=c();this.app.renderer.resize(window.innerWidth,window.innerHeight),this.recommencerAngle=Be(v,this.recommencerAngle,0),this.recommencerAngle2=Be(v,this.recommencerAngle2,this.recommencerAngle),this.pauseAngle=Be(v,this.pauseAngle,0),this.pauseAngle2=Be(v,this.pauseAngle2,this.pauseAngle),this.jouerAngle=Be(v,this.jouerAngle,0),this.jouerAngle2=Be(v,this.jouerAngle2,this.jouerAngle),this.showControl=Be(v,this.showControl,this.state=="ingame"?0:200),this.showPause=Be(v,this.showPause,this.state=="pause"?0:200),this.showBravo=Be(v,this.showBravo,this.state=="bravo"?0:200),this.showLevelControl=Be(v,this.showLevelControl,this.state=="niveaux"?0:200),this.showNiveaux=Be(v,this.showNiveaux,this.state=="niveaux"?window.innerWidth:0,.001),this.selectGridX=Be(v,this.selectGridX,this.levelNumber%Jt,1e-9),this.selectGridY=Be(v,this.selectGridY,Math.floor(this.levelNumber/Jt),1e-9),this.recommencer.y=window.innerHeight-24+this.recommencerAngle2*2+this.showControl,this.pause.y=window.innerHeight-24+this.pauseAngle2*8+this.showControl,this.bouger.y=window.innerHeight-24+this.showControl,this.jouer.y=window.innerHeight-24+this.jouerAngle2*8+this.showLevelControl,this.bouger.x=window.innerWidth-36,this.recommencer.angle=this.recommencerAngle2*.5,this.pause.angle=this.pauseAngle2*.5,this.jouer.angle=this.jouerAngle2*.5,this.pauselbl.y=64-this.showPause,this.pause.x=36*2+76*I,this.recommencer.x=36,this.pauselbl.x=T+this.showNiveaux,this.bravolbl.x=T+this.showNiveaux,this.jouerbtn.x=T+12+this.showNiveaux,this.suivantbtn.x=T+12+this.showNiveaux,this.niveauxbtn.x=T-12+this.showNiveaux,this.bravolbl.y=64-this.showBravo,this.jouerbtn.y=window.innerHeight-64+this.showPause,this.suivantbtn.y=window.innerHeight-64+this.showBravo,this.niveauxbtn.y=window.innerHeight-64+Math.min(this.showPause,this.showBravo),this.niveaux.x=T-window.innerWidth+this.showNiveaux,this.niveaux.y=b,this.levelselect.x=this.selectGridX*(Ra+An)-2*I-this.niveaux.width/2,this.levelselect.y=this.selectGridY*(Ca+An)-2*I-this.niveaux.height/2,this.level.update(v)}receiveEvent(v,T){if(this.state=="ingame")this.level.hasWon()||(v=="b"?(this.state="pause",this.pauseAngle=-90):v=="a"?(this.level.destroy(),this.level=new y(this,Tn.levels[this.levelNumber]),this.level.init(),this.recommencerAngle=-90):this.level.receiveEvent(v,T));else if(this.state=="pause")v=="a"?this.state="ingame":v=="b"&&(this.state="niveaux");else if(this.state=="bravo")v=="a"?(this.state="ingame",this.level.destroy(),this.levelNumber++,this.level=new y(this,Tn.levels[this.levelNumber]),this.level.init(),this.frameSinceWin=0):v=="b"&&(this.levelNumber++,this.state="niveaux");else if(this.state=="niveaux")if(v=="a")this.jouerAngle=-90,this.state="ingame",this.level.destroy(),this.level=new y(this,Tn.levels[this.levelNumber]),this.level.init(),this.frameSinceWin=0;else if(v=="left"){let b=this.levelNumber%Jt,w=Math.floor(this.levelNumber/Jt);b==0?w==wa-1?this.levelNumber+=(Sn-1)%Jt:this.levelNumber+=Jt-1:this.levelNumber-=1}else if(v=="right"){let b=this.levelNumber%Jt;Math.floor(this.levelNumber/Jt),b==Jt-1?this.levelNumber-=Jt-1:this.levelNumber==Sn-1?this.levelNumber-=this.levelNumber%Jt:this.levelNumber+=1}else v=="up"?(this.levelNumber%Jt,Math.floor(this.levelNumber/Jt),this.levelNumber-=Jt,this.levelNumber<0&&(this.levelNumber+=wa*Jt),this.levelNumber>=Sn&&(this.levelNumber-=Jt)):v=="down"&&(this.levelNumber%Jt,Math.floor(this.levelNumber/Jt),this.levelNumber+=Jt,this.levelNumber>=Sn&&(this.levelNumber-=wa*Jt),this.levelNumber<0&&(this.levelNumber+=Jt))}}return Hi.useEffect(()=>(ES().then(()=>{new x}),()=>{app.destroy(!0,!0)}),[]),Hi.useEffect(()=>{document.addEventListener("keydown",function(_){_.key==" "?(_.preventDefault(),o.current.receiveEvent("a","press")):_.key=="Escape"?(_.preventDefault(),o.current.receiveEvent("b","press")):_.key=="ArrowLeft"?(_.preventDefault(),o.current.receiveEvent("left","press")):_.key=="ArrowRight"?(_.preventDefault(),o.current.receiveEvent("right","press")):_.key=="ArrowUp"?(_.preventDefault(),o.current.receiveEvent("up","press")):_.key=="ArrowDown"?(_.preventDefault(),o.current.receiveEvent("down","press")):_.key=="a"?(_.preventDefault(),o.current.receiveEvent("left","press")):_.key=="d"?(_.preventDefault(),o.current.receiveEvent("right","press")):_.key=="w"?(_.preventDefault(),o.current.receiveEvent("up","press")):_.key=="s"&&(_.preventDefault(),o.current.receiveEvent("down","press"))})},[]),Dl.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Dl.jsx("canvas",{ref:n})})};function AS(){return Dl.jsx(TS,{})}ax.createRoot(document.getElementById("root")).render(Dl.jsx(AS,{}))})();
