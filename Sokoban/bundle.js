var NR=Object.defineProperty;var IR=(Hi,hi,on)=>hi in Hi?NR(Hi,hi,{enumerable:!0,configurable:!0,writable:!0,value:on}):Hi[hi]=on;var ln=(Hi,hi,on)=>IR(Hi,typeof hi!="symbol"?hi+"":hi,on);(function(){"use strict";var Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function on(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var l=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:function(){return n[s]}})}),e}var ju={exports:{}},fa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function $1(){if(wp)return fa;wp=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,l,o){var h=null;if(o!==void 0&&(h=""+o),l.key!==void 0&&(h=""+l.key),"key"in l){o={};for(var c in l)c!=="key"&&(o[c]=l[c])}else o=l;return l=o.ref,{$$typeof:n,type:s,key:h,ref:l!==void 0?l:null,props:o}}return fa.Fragment=t,fa.jsx=e,fa.jsxs=e,fa}var Rp;function Z1(){return Rp||(Rp=1,ju.exports=$1()),ju.exports}var Ol=Z1(),qu={exports:{}},Ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp;function K1(){if(Cp)return Ft;Cp=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),h=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function _(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,w={};function v(T,B,G){this.props=T,this.context=B,this.refs=w,this.updater=G||x}v.prototype.isReactComponent={},v.prototype.setState=function(T,B){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,B,"setState")},v.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=v.prototype;function R(T,B,G){this.props=T,this.context=B,this.refs=w,this.updater=G||x}var D=R.prototype=new E;D.constructor=R,A(D,v.prototype),D.isPureReactComponent=!0;var P=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function U(T,B,G,F,Z,it){return G=it.ref,{$$typeof:n,type:T,key:B,ref:G!==void 0?G:null,props:it}}function q(T,B){return U(T.type,B,void 0,void 0,void 0,T.props)}function rt(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function lt(T){var B={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(G){return B[G]})}var dt=/\/+/g;function z(T,B){return typeof T=="object"&&T!==null&&T.key!=null?lt(""+T.key):B.toString(36)}function W(){}function tt(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(W,W):(T.status="pending",T.then(function(B){T.status==="pending"&&(T.status="fulfilled",T.value=B)},function(B){T.status==="pending"&&(T.status="rejected",T.reason=B)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function ht(T,B,G,F,Z){var it=typeof T;(it==="undefined"||it==="boolean")&&(T=null);var nt=!1;if(T===null)nt=!0;else switch(it){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(T.$$typeof){case n:case t:nt=!0;break;case g:return nt=T._init,ht(nt(T._payload),B,G,F,Z)}}if(nt)return Z=Z(T),nt=F===""?"."+z(T,0):F,P(Z)?(G="",nt!=null&&(G=nt.replace(dt,"$&/")+"/"),ht(Z,B,G,"",function(vt){return vt})):Z!=null&&(rt(Z)&&(Z=q(Z,G+(Z.key==null||T&&T.key===Z.key?"":(""+Z.key).replace(dt,"$&/")+"/")+nt)),B.push(Z)),1;nt=0;var pt=F===""?".":F+":";if(P(T))for(var ft=0;ft<T.length;ft++)F=T[ft],it=pt+z(F,ft),nt+=ht(F,B,G,it,Z);else if(ft=_(T),typeof ft=="function")for(T=ft.call(T),ft=0;!(F=T.next()).done;)F=F.value,it=pt+z(F,ft++),nt+=ht(F,B,G,it,Z);else if(it==="object"){if(typeof T.then=="function")return ht(tt(T),B,G,F,Z);throw B=String(T),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return nt}function S(T,B,G){if(T==null)return T;var F=[],Z=0;return ht(T,F,"","",function(it){return B.call(G,it,Z++)}),F}function O(T){if(T._status===-1){var B=T._result;B=B(),B.then(function(G){(T._status===0||T._status===-1)&&(T._status=1,T._result=G)},function(G){(T._status===0||T._status===-1)&&(T._status=2,T._result=G)}),T._status===-1&&(T._status=0,T._result=B)}if(T._status===1)return T._result.default;throw T._result}var M=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function k(){}return Ft.Children={map:S,forEach:function(T,B,G){S(T,function(){B.apply(this,arguments)},G)},count:function(T){var B=0;return S(T,function(){B++}),B},toArray:function(T){return S(T,function(B){return B})||[]},only:function(T){if(!rt(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Ft.Component=v,Ft.Fragment=e,Ft.Profiler=l,Ft.PureComponent=R,Ft.StrictMode=s,Ft.Suspense=d,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(T){return I.H.useMemoCache(T)}},Ft.cache=function(T){return function(){return T.apply(null,arguments)}},Ft.cloneElement=function(T,B,G){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var F=A({},T.props),Z=T.key,it=void 0;if(B!=null)for(nt in B.ref!==void 0&&(it=void 0),B.key!==void 0&&(Z=""+B.key),B)!Y.call(B,nt)||nt==="key"||nt==="__self"||nt==="__source"||nt==="ref"&&B.ref===void 0||(F[nt]=B[nt]);var nt=arguments.length-2;if(nt===1)F.children=G;else if(1<nt){for(var pt=Array(nt),ft=0;ft<nt;ft++)pt[ft]=arguments[ft+2];F.children=pt}return U(T.type,Z,void 0,void 0,it,F)},Ft.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:o,_context:T},T},Ft.createElement=function(T,B,G){var F,Z={},it=null;if(B!=null)for(F in B.key!==void 0&&(it=""+B.key),B)Y.call(B,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(Z[F]=B[F]);var nt=arguments.length-2;if(nt===1)Z.children=G;else if(1<nt){for(var pt=Array(nt),ft=0;ft<nt;ft++)pt[ft]=arguments[ft+2];Z.children=pt}if(T&&T.defaultProps)for(F in nt=T.defaultProps,nt)Z[F]===void 0&&(Z[F]=nt[F]);return U(T,it,void 0,void 0,null,Z)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(T){return{$$typeof:c,render:T}},Ft.isValidElement=rt,Ft.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:O}},Ft.memo=function(T,B){return{$$typeof:m,type:T,compare:B===void 0?null:B}},Ft.startTransition=function(T){var B=I.T,G={};I.T=G;try{var F=T(),Z=I.S;Z!==null&&Z(G,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(k,M)}catch(it){M(it)}finally{I.T=B}},Ft.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ft.use=function(T){return I.H.use(T)},Ft.useActionState=function(T,B,G){return I.H.useActionState(T,B,G)},Ft.useCallback=function(T,B){return I.H.useCallback(T,B)},Ft.useContext=function(T){return I.H.useContext(T)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(T,B){return I.H.useDeferredValue(T,B)},Ft.useEffect=function(T,B,G){var F=I.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(T,B)},Ft.useId=function(){return I.H.useId()},Ft.useImperativeHandle=function(T,B,G){return I.H.useImperativeHandle(T,B,G)},Ft.useInsertionEffect=function(T,B){return I.H.useInsertionEffect(T,B)},Ft.useLayoutEffect=function(T,B){return I.H.useLayoutEffect(T,B)},Ft.useMemo=function(T,B){return I.H.useMemo(T,B)},Ft.useOptimistic=function(T,B){return I.H.useOptimistic(T,B)},Ft.useReducer=function(T,B,G){return I.H.useReducer(T,B,G)},Ft.useRef=function(T){return I.H.useRef(T)},Ft.useState=function(T){return I.H.useState(T)},Ft.useSyncExternalStore=function(T,B,G){return I.H.useSyncExternalStore(T,B,G)},Ft.useTransition=function(){return I.H.useTransition()},Ft.version="19.1.0",Ft}var Mp;function Wu(){return Mp||(Mp=1,qu.exports=K1()),qu.exports}var Q1=Wu();const ki=hi(Q1);var $u={exports:{}},da={},Zu={exports:{}},Ku={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function J1(){return Dp||(Dp=1,function(n){function t(S,O){var M=S.length;S.push(O);t:for(;0<M;){var k=M-1>>>1,T=S[k];if(0<l(T,O))S[k]=O,S[M]=T,M=k;else break t}}function e(S){return S.length===0?null:S[0]}function s(S){if(S.length===0)return null;var O=S[0],M=S.pop();if(M!==O){S[0]=M;t:for(var k=0,T=S.length,B=T>>>1;k<B;){var G=2*(k+1)-1,F=S[G],Z=G+1,it=S[Z];if(0>l(F,M))Z<T&&0>l(it,F)?(S[k]=it,S[Z]=M,k=Z):(S[k]=F,S[G]=M,k=G);else if(Z<T&&0>l(it,M))S[k]=it,S[Z]=M,k=Z;else break t}}return O}function l(S,O){var M=S.sortIndex-O.sortIndex;return M!==0?M:S.id-O.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var h=Date,c=h.now();n.unstable_now=function(){return h.now()-c}}var d=[],m=[],g=1,y=null,_=3,x=!1,A=!1,w=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function P(S){for(var O=e(m);O!==null;){if(O.callback===null)s(m);else if(O.startTime<=S)s(m),O.sortIndex=O.expirationTime,t(d,O);else break;O=e(m)}}function I(S){if(w=!1,P(S),!A)if(e(d)!==null)A=!0,Y||(Y=!0,z());else{var O=e(m);O!==null&&ht(I,O.startTime-S)}}var Y=!1,U=-1,q=5,rt=-1;function lt(){return v?!0:!(n.unstable_now()-rt<q)}function dt(){if(v=!1,Y){var S=n.unstable_now();rt=S;var O=!0;try{t:{A=!1,w&&(w=!1,R(U),U=-1),x=!0;var M=_;try{e:{for(P(S),y=e(d);y!==null&&!(y.expirationTime>S&&lt());){var k=y.callback;if(typeof k=="function"){y.callback=null,_=y.priorityLevel;var T=k(y.expirationTime<=S);if(S=n.unstable_now(),typeof T=="function"){y.callback=T,P(S),O=!0;break e}y===e(d)&&s(d),P(S)}else s(d);y=e(d)}if(y!==null)O=!0;else{var B=e(m);B!==null&&ht(I,B.startTime-S),O=!1}}break t}finally{y=null,_=M,x=!1}O=void 0}}finally{O?z():Y=!1}}}var z;if(typeof D=="function")z=function(){D(dt)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,tt=W.port2;W.port1.onmessage=dt,z=function(){tt.postMessage(null)}}else z=function(){E(dt,0)};function ht(S,O){U=E(function(){S(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(S){S.callback=null},n.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<S?Math.floor(1e3/S):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(S){switch(_){case 1:case 2:case 3:var O=3;break;default:O=_}var M=_;_=O;try{return S()}finally{_=M}},n.unstable_requestPaint=function(){v=!0},n.unstable_runWithPriority=function(S,O){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var M=_;_=S;try{return O()}finally{_=M}},n.unstable_scheduleCallback=function(S,O,M){var k=n.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?k+M:k):M=k,S){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=M+T,S={id:g++,callback:O,priorityLevel:S,startTime:M,expirationTime:T,sortIndex:-1},M>k?(S.sortIndex=M,t(m,S),e(d)===null&&S===e(m)&&(w?(R(U),U=-1):w=!0,ht(I,M-k))):(S.sortIndex=T,t(d,S),A||x||(A=!0,Y||(Y=!0,z()))),S},n.unstable_shouldYield=lt,n.unstable_wrapCallback=function(S){var O=_;return function(){var M=_;_=O;try{return S.apply(this,arguments)}finally{_=M}}}}(Ku)),Ku}var Op;function tx(){return Op||(Op=1,Zu.exports=J1()),Zu.exports}var Qu={exports:{}},ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp;function ex(){if(Bp)return ke;Bp=1;var n=Wu();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(d,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:d,containerInfo:m,implementation:g}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ke.createPortal=function(d,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,g)},ke.flushSync=function(d){var m=h.T,g=s.p;try{if(h.T=null,s.p=2,d)return d()}finally{h.T=m,s.p=g,s.d.f()}},ke.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(d,m))},ke.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},ke.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var g=m.as,y=c(g,m.crossOrigin),_=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?s.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:x}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:_,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ke.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=c(m.as,m.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(d)},ke.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=c(g,m.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ke.preloadModule=function(d,m){if(typeof d=="string")if(m){var g=c(m.as,m.crossOrigin);s.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(d)},ke.requestFormReset=function(d){s.d.r(d)},ke.unstable_batchedUpdates=function(d,m){return d(m)},ke.useFormState=function(d,m,g){return h.H.useFormState(d,m,g)},ke.useFormStatus=function(){return h.H.useHostTransitionStatus()},ke.version="19.1.0",ke}var Np;function ix(){if(Np)return Qu.exports;Np=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Qu.exports=ex(),Qu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function rx(){if(Ip)return da;Ip=1;var n=tx(),t=Wu(),e=ix();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function h(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(s(188))}function d(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return c(f),i;if(p===u)return c(f),r;p=p.sibling}throw Error(s(188))}if(a.return!==u.return)a=f,u=p;else{for(var b=!1,C=f.child;C;){if(C===a){b=!0,a=f,u=p;break}if(C===u){b=!0,u=f,a=p;break}C=C.sibling}if(!b){for(C=p.child;C;){if(C===a){b=!0,a=p,u=f;break}if(C===u){b=!0,u=p,a=f;break}C=C.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function m(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=m(i),r!==null)return r;i=i.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),rt=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),dt=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=dt&&i[dt]||i["@@iterator"],typeof i=="function"?i:null)}var W=Symbol.for("react.client.reference");function tt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===W?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case v:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case Y:return"SuspenseList";case rt:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case D:return(i.displayName||"Context")+".Provider";case R:return(i._context.displayName||"Context")+".Consumer";case P:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return r=i.displayName||null,r!==null?r:tt(i.type)||"Memo";case q:r=i._payload,i=i._init;try{return tt(i(r))}catch{}}return null}var ht=Array.isArray,S=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},k=[],T=-1;function B(i){return{current:i}}function G(i){0>T||(i.current=k[T],k[T]=null,T--)}function F(i,r){T++,k[T]=i.current,i.current=r}var Z=B(null),it=B(null),nt=B(null),pt=B(null);function ft(i,r){switch(F(nt,r),F(it,i),F(Z,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?_1(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=_1(r),i=x1(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(Z),F(Z,i)}function vt(){G(Z),G(it),G(nt)}function ut(i){i.memoizedState!==null&&F(pt,i);var r=Z.current,a=x1(r,i.type);r!==a&&(F(it,i),F(Z,a))}function _t(i){it.current===i&&(G(Z),G(it)),pt.current===i&&(G(pt),bl._currentValue=M)}var Tt=Object.prototype.hasOwnProperty,Bt=n.unstable_scheduleCallback,Gt=n.unstable_cancelCallback,At=n.unstable_shouldYield,wt=n.unstable_requestPaint,Wt=n.unstable_now,ve=n.unstable_getCurrentPriorityLevel,gr=n.unstable_ImmediatePriority,Ni=n.unstable_UserBlockingPriority,ze=n.unstable_NormalPriority,$r=n.unstable_LowPriority,yr=n.unstable_IdlePriority,Zr=n.log,cf=n.unstable_setDisableYieldValue,Hs=null,Xe=null;function Ji(i){if(typeof Zr=="function"&&cf(i),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Hs,i)}catch{}}var Re=Math.clz32?Math.clz32:ff,Da=Math.log,Mo=Math.LN2;function ff(i){return i>>>=0,i===0?32:31-(Da(i)/Mo|0)|0}var Rn=256,Kr=4194304;function mi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function $(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~p,u!==0?f=mi(u):(b&=C,b!==0?f=mi(b):a||(a=C&~i,a!==0&&(f=mi(a))))):(C=u&~p,C!==0?f=mi(C):b!==0?f=mi(b):a||(a=u&~i,a!==0&&(f=mi(a)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:f}function J(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function qt(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kt(){var i=Rn;return Rn<<=1,(Rn&4194048)===0&&(Rn=256),i}function ee(){var i=Kr;return Kr<<=1,(Kr&62914560)===0&&(Kr=4194304),i}function Ut(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function $e(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function vr(i,r,a,u,f,p){var b=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var C=i.entanglements,L=i.expirationTimes,j=i.hiddenUpdates;for(a=b&~a;0<a;){var et=31-Re(a),at=1<<et;C[et]=0,L[et]=-1;var K=j[et];if(K!==null)for(j[et]=null,et=0;et<K.length;et++){var Q=K[et];Q!==null&&(Q.lane&=-536870913)}a&=~at}u!==0&&Ye(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(b&~r))}function Ye(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-Re(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&4194090}function Ii(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-Re(a),f=1<<u;f&r|i[u]&r&&(i[u]|=r),a&=~f}}function ks(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function tr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ze(){var i=O.p;return i!==0?i:(i=window.event,i===void 0?32:G1(i.type))}function Do(i,r){var a=O.p;try{return O.p=i,r()}finally{O.p=a}}var Ui=Math.random().toString(36).slice(2),Ce="__reactFiber$"+Ui,Te="__reactProps$"+Ui,er="__reactContainer$"+Ui,Qr="__reactEvents$"+Ui,Oa="__reactListeners$"+Ui,Ba="__reactHandles$"+Ui,Na="__reactResources$"+Ui,Jr="__reactMarker$"+Ui;function zs(i){delete i[Ce],delete i[Te],delete i[Qr],delete i[Oa],delete i[Ba]}function _r(i){var r=i[Ce];if(r)return r;for(var a=i.parentNode;a;){if(r=a[er]||a[Ce]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=A1(i);i!==null;){if(a=i[Ce])return a;i=A1(i)}return r}i=a,a=i.parentNode}return null}function ir(i){if(i=i[Ce]||i[er]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function ts(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function es(i){var r=i[Na];return r||(r=i[Na]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pe(i){i[Jr]=!0}var xr=new Set,Xs={};function br(i,r){Er(i,r),Er(i+"Capture",r)}function Er(i,r){for(Xs[i]=r,i=0;i<r.length;i++)xr.add(r[i])}var SS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hy={},cy={};function wS(i){return Tt.call(cy,i)?!0:Tt.call(hy,i)?!1:SS.test(i)?cy[i]=!0:(hy[i]=!0,!1)}function Oo(i,r,a){if(wS(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Bo(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Tr(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}var df,fy;function Cn(i){if(df===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);df=r&&r[1]||"",fy=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+df+i+fy}var pf=!1;function mf(i,r){if(!i||pf)return"";pf=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(Q){var K=Q}Reflect.construct(i,[],at)}else{try{at.call()}catch(Q){K=Q}i.call(at.prototype)}}else{try{throw Error()}catch(Q){K=Q}(at=i())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],C=p[1];if(b&&C){var L=b.split(`
`),j=C.split(`
`);for(f=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(u===L.length||f===j.length)for(u=L.length-1,f=j.length-1;1<=u&&0<=f&&L[u]!==j[f];)f--;for(;1<=u&&0<=f;u--,f--)if(L[u]!==j[f]){if(u!==1||f!==1)do if(u--,f--,0>f||L[u]!==j[f]){var et=`
`+L[u].replace(" at new "," at ");return i.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",i.displayName)),et}while(1<=u&&0<=f);break}}}finally{pf=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Cn(a):""}function RS(i){switch(i.tag){case 26:case 27:case 5:return Cn(i.type);case 16:return Cn("Lazy");case 13:return Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 15:return mf(i.type,!1);case 11:return mf(i.type.render,!1);case 1:return mf(i.type,!0);case 31:return Cn("Activity");default:return""}}function dy(i){try{var r="";do r+=RS(i),i=i.return;while(i);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function gi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function py(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function CS(i){var r=py(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),u=""+i[r];if(!i.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){u=""+b,p.call(this,b)}}),Object.defineProperty(i,r,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function No(i){i._valueTracker||(i._valueTracker=CS(i))}function my(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=py(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function Io(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var MS=/[\n"\\]/g;function yi(i){return i.replace(MS,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function gf(i,r,a,u,f,p,b,C){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),r!=null?b==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+gi(r)):i.value!==""+gi(r)&&(i.value=""+gi(r)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),r!=null?yf(i,b,gi(r)):a!=null?yf(i,b,gi(a)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+gi(C):i.removeAttribute("name")}function gy(i,r,a,u,f,p,b,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;a=a!=null?""+gi(a):"",r=r!=null?""+gi(r):a,C||r===i.value||(i.value=r),i.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b)}function yf(i,r,a){r==="number"&&Io(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Mn(i,r,a,u){if(i=i.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=r.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&u&&(i[a].defaultSelected=!0)}else{for(a=""+gi(a),r=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function yy(i,r,a){if(r!=null&&(r=""+gi(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+gi(a):""}function vy(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(ht(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=gi(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u)}function Dn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var DS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _y(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||DS.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function xy(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&a[f]!==u&&_y(i,f,u)}else for(var p in r)r.hasOwnProperty(p)&&_y(i,p,r[p])}function vf(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uo(i){return BS.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var _f=null;function xf(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var On=null,Bn=null;function by(i){var r=ir(i);if(r&&(i=r.stateNode)){var a=i[Te]||null;t:switch(i=r.stateNode,r.type){case"input":if(gf(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yi(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var f=u[Te]||null;if(!f)throw Error(s(90));gf(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&my(u)}break t;case"textarea":yy(i,a.value,a.defaultValue);break t;case"select":r=a.value,r!=null&&Mn(i,!!a.multiple,r,!1)}}}var bf=!1;function Ey(i,r,a){if(bf)return i(r,a);bf=!0;try{var u=i(r);return u}finally{if(bf=!1,(On!==null||Bn!==null)&&(xu(),On&&(r=On,i=Bn,Bn=On=null,by(r),i)))for(r=0;r<i.length;r++)by(i[r])}}function Ia(i,r){var a=i.stateNode;if(a===null)return null;var u=a[Te]||null;if(u===null)return null;a=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=!1;if(Ar)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){Ef=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{Ef=!1}var is=null,Tf=null,Po=null;function Ty(){if(Po)return Po;var i,r=Tf,a=r.length,u,f="value"in is?is.value:is.textContent,p=f.length;for(i=0;i<a&&r[i]===f[i];i++);var b=a-i;for(u=1;u<=b&&r[a-u]===f[p-u];u++);return Po=f.slice(i,1<u?1-u:void 0)}function Lo(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Fo(){return!0}function Ay(){return!1}function Ke(i){function r(a,u,f,p,b){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(a=i[C],this[C]=a?a(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Fo:Ay,this.isPropagationStopped=Ay,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),r}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=Ke(Ys),Pa=g({},Ys,{view:0,detail:0}),NS=Ke(Pa),Af,Sf,La,Ho=g({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==La&&(La&&i.type==="mousemove"?(Af=i.screenX-La.screenX,Sf=i.screenY-La.screenY):Sf=Af=0,La=i),Af)},movementY:function(i){return"movementY"in i?i.movementY:Sf}}),Sy=Ke(Ho),IS=g({},Ho,{dataTransfer:0}),US=Ke(IS),PS=g({},Pa,{relatedTarget:0}),wf=Ke(PS),LS=g({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),FS=Ke(LS),GS=g({},Ys,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),HS=Ke(GS),kS=g({},Ys,{data:0}),wy=Ke(kS),zS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VS(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=YS[i])?!!r[i]:!1}function Rf(){return VS}var jS=g({},Pa,{key:function(i){if(i.key){var r=zS[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Lo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?XS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(i){return i.type==="keypress"?Lo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Lo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),qS=Ke(jS),WS=g({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ry=Ke(WS),$S=g({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),ZS=Ke($S),KS=g({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),QS=Ke(KS),JS=g({},Ho,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tw=Ke(JS),ew=g({},Ys,{newState:0,oldState:0}),iw=Ke(ew),rw=[9,13,27,32],Cf=Ar&&"CompositionEvent"in window,Fa=null;Ar&&"documentMode"in document&&(Fa=document.documentMode);var sw=Ar&&"TextEvent"in window&&!Fa,Cy=Ar&&(!Cf||Fa&&8<Fa&&11>=Fa),My=" ",Dy=!1;function Oy(i,r){switch(i){case"keyup":return rw.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function By(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Nn=!1;function nw(i,r){switch(i){case"compositionend":return By(r);case"keypress":return r.which!==32?null:(Dy=!0,My);case"textInput":return i=r.data,i===My&&Dy?null:i;default:return null}}function aw(i,r){if(Nn)return i==="compositionend"||!Cf&&Oy(i,r)?(i=Ty(),Po=Tf=is=null,Nn=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Cy&&r.locale!=="ko"?null:r.data;default:return null}}var lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!lw[i.type]:r==="textarea"}function Iy(i,r,a,u){On?Bn?Bn.push(u):Bn=[u]:On=u,r=wu(r,"onChange"),0<r.length&&(a=new Go("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var Ga=null,Ha=null;function ow(i){p1(i,0)}function ko(i){var r=ts(i);if(my(r))return i}function Uy(i,r){if(i==="change")return r}var Py=!1;if(Ar){var Mf;if(Ar){var Df="oninput"in document;if(!Df){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),Df=typeof Ly.oninput=="function"}Mf=Df}else Mf=!1;Py=Mf&&(!document.documentMode||9<document.documentMode)}function Fy(){Ga&&(Ga.detachEvent("onpropertychange",Gy),Ha=Ga=null)}function Gy(i){if(i.propertyName==="value"&&ko(Ha)){var r=[];Iy(r,Ha,i,xf(i)),Ey(ow,r)}}function uw(i,r,a){i==="focusin"?(Fy(),Ga=r,Ha=a,Ga.attachEvent("onpropertychange",Gy)):i==="focusout"&&Fy()}function hw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ko(Ha)}function cw(i,r){if(i==="click")return ko(r)}function fw(i,r){if(i==="input"||i==="change")return ko(r)}function dw(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var ii=typeof Object.is=="function"?Object.is:dw;function ka(i,r){if(ii(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!Tt.call(r,f)||!ii(i[f],r[f]))return!1}return!0}function Hy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ky(i,r){var a=Hy(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Hy(a)}}function zy(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?zy(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Xy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Io(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Io(i.document)}return r}function Of(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var pw=Ar&&"documentMode"in document&&11>=document.documentMode,In=null,Bf=null,za=null,Nf=!1;function Yy(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nf||In==null||In!==Io(u)||(u=In,"selectionStart"in u&&Of(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),za&&ka(za,u)||(za=u,u=wu(Bf,"onSelect"),0<u.length&&(r=new Go("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=In)))}function Vs(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Un={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},If={},Vy={};Ar&&(Vy=document.createElement("div").style,"AnimationEvent"in window||(delete Un.animationend.animation,delete Un.animationiteration.animation,delete Un.animationstart.animation),"TransitionEvent"in window||delete Un.transitionend.transition);function js(i){if(If[i])return If[i];if(!Un[i])return i;var r=Un[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Vy)return If[i]=r[a];return i}var jy=js("animationend"),qy=js("animationiteration"),Wy=js("animationstart"),mw=js("transitionrun"),gw=js("transitionstart"),yw=js("transitioncancel"),$y=js("transitionend"),Zy=new Map,Uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uf.push("scrollEnd");function Pi(i,r){Zy.set(i,r),br(r,[i])}var Ky=new WeakMap;function vi(i,r){if(typeof i=="object"&&i!==null){var a=Ky.get(i);return a!==void 0?a:(r={value:i,source:r,stack:dy(r)},Ky.set(i,r),r)}return{value:i,source:r,stack:dy(r)}}var _i=[],Pn=0,Pf=0;function zo(){for(var i=Pn,r=Pf=Pn=0;r<i;){var a=_i[r];_i[r++]=null;var u=_i[r];_i[r++]=null;var f=_i[r];_i[r++]=null;var p=_i[r];if(_i[r++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}p!==0&&Qy(a,f,p)}}function Xo(i,r,a,u){_i[Pn++]=i,_i[Pn++]=r,_i[Pn++]=a,_i[Pn++]=u,Pf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Lf(i,r,a,u){return Xo(i,r,a,u),Yo(i)}function Ln(i,r){return Xo(i,null,null,r),Yo(i)}function Qy(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var f=!1,p=i.return;p!==null;)p.childLanes|=a,u=p.alternate,u!==null&&(u.childLanes|=a),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&r!==null&&(f=31-Re(a),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[r]:u.push(r),r.lane=a|536870912),p):null}function Yo(i){if(50<dl)throw dl=0,Xd=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Fn={};function vw(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(i,r,a,u){return new vw(i,r,a,u)}function Ff(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Sr(i,r){var a=i.alternate;return a===null?(a=ri(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Jy(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Vo(i,r,a,u,f,p){var b=0;if(u=i,typeof i=="function")Ff(i)&&(b=1);else if(typeof i=="string")b=xR(i,a,Z.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case rt:return i=ri(31,a,r,f),i.elementType=rt,i.lanes=p,i;case A:return qs(a.children,f,p,r);case w:b=8,f|=24;break;case v:return i=ri(12,a,r,f|2),i.elementType=v,i.lanes=p,i;case I:return i=ri(13,a,r,f),i.elementType=I,i.lanes=p,i;case Y:return i=ri(19,a,r,f),i.elementType=Y,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:case D:b=10;break t;case R:b=9;break t;case P:b=11;break t;case U:b=14;break t;case q:b=16,u=null;break t}b=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=ri(b,a,r,f),r.elementType=i,r.type=u,r.lanes=p,r}function qs(i,r,a,u){return i=ri(7,i,u,r),i.lanes=a,i}function Gf(i,r,a){return i=ri(6,i,null,r),i.lanes=a,i}function Hf(i,r,a){return r=ri(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Gn=[],Hn=0,jo=null,qo=0,xi=[],bi=0,Ws=null,wr=1,Rr="";function $s(i,r){Gn[Hn++]=qo,Gn[Hn++]=jo,jo=i,qo=r}function tv(i,r,a){xi[bi++]=wr,xi[bi++]=Rr,xi[bi++]=Ws,Ws=i;var u=wr;i=Rr;var f=32-Re(u)-1;u&=~(1<<f),a+=1;var p=32-Re(r)+f;if(30<p){var b=f-f%5;p=(u&(1<<b)-1).toString(32),u>>=b,f-=b,wr=1<<32-Re(r)+f|a<<f|u,Rr=p+i}else wr=1<<p|a<<f|u,Rr=i}function kf(i){i.return!==null&&($s(i,1),tv(i,1,0))}function zf(i){for(;i===jo;)jo=Gn[--Hn],Gn[Hn]=null,qo=Gn[--Hn],Gn[Hn]=null;for(;i===Ws;)Ws=xi[--bi],xi[bi]=null,Rr=xi[--bi],xi[bi]=null,wr=xi[--bi],xi[bi]=null}var qe=null,me=null,Zt=!1,Zs=null,rr=!1,Xf=Error(s(519));function Ks(i){var r=Error(s(418,""));throw Va(vi(r,i)),Xf}function ev(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[Ce]=i,r[Te]=u,a){case"dialog":Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(a=0;a<ml.length;a++)Yt(ml[a],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"input":Yt("invalid",r),gy(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),No(r);break;case"select":Yt("invalid",r);break;case"textarea":Yt("invalid",r),vy(r,u.value,u.defaultValue,u.children),No(r)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||v1(r.textContent,a)?(u.popover!=null&&(Yt("beforetoggle",r),Yt("toggle",r)),u.onScroll!=null&&Yt("scroll",r),u.onScrollEnd!=null&&Yt("scrollend",r),u.onClick!=null&&(r.onclick=Ru),r=!0):r=!1,r||Ks(i)}function iv(i){for(qe=i.return;qe;)switch(qe.tag){case 5:case 13:rr=!1;return;case 27:case 3:rr=!0;return;default:qe=qe.return}}function Xa(i){if(i!==qe)return!1;if(!Zt)return iv(i),Zt=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||np(i.type,i.memoizedProps)),a=!a),a&&me&&Ks(i),iv(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));t:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(r===0){me=Fi(i.nextSibling);break t}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;i=i.nextSibling}me=null}}else r===27?(r=me,vs(i.type)?(i=up,up=null,me=i):me=r):me=qe?Fi(i.stateNode.nextSibling):null;return!0}function Ya(){me=qe=null,Zt=!1}function rv(){var i=Zs;return i!==null&&(ti===null?ti=i:ti.push.apply(ti,i),Zs=null),i}function Va(i){Zs===null?Zs=[i]:Zs.push(i)}var Yf=B(null),Qs=null,Cr=null;function rs(i,r,a){F(Yf,r._currentValue),r._currentValue=a}function Mr(i){i._currentValue=Yf.current,G(Yf)}function Vf(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function jf(i,r,a,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var b=f.child;p=p.firstContext;t:for(;p!==null;){var C=p;p=f;for(var L=0;L<r.length;L++)if(C.context===r[L]){p.lanes|=a,C=p.alternate,C!==null&&(C.lanes|=a),Vf(p.return,a,i),u||(b=null);break t}p=C.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=a,p=b.alternate,p!==null&&(p.lanes|=a),Vf(b,a,i),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===i){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function ja(i,r,a,u){i=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var C=f.type;ii(f.pendingProps.value,b.value)||(i!==null?i.push(C):i=[C])}}else if(f===pt.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(bl):i=[bl])}f=f.return}i!==null&&jf(r,i,a,u),r.flags|=262144}function Wo(i){for(i=i.firstContext;i!==null;){if(!ii(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Js(i){Qs=i,Cr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ve(i){return sv(Qs,i)}function $o(i,r){return Qs===null&&Js(i),sv(i,r)}function sv(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Cr===null){if(i===null)throw Error(s(308));Cr=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Cr=Cr.next=r;return a}var _w=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},xw=n.unstable_scheduleCallback,bw=n.unstable_NormalPriority,Me={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qf(){return{controller:new _w,data:new Map,refCount:0}}function qa(i){i.refCount--,i.refCount===0&&xw(bw,function(){i.controller.abort()})}var Wa=null,Wf=0,kn=0,zn=null;function Ew(i,r){if(Wa===null){var a=Wa=[];Wf=0,kn=Zd(),zn={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Wf++,r.then(nv,nv),r}function nv(){if(--Wf===0&&Wa!==null){zn!==null&&(zn.status="fulfilled");var i=Wa;Wa=null,kn=0,zn=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function Tw(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),u}var av=S.S;S.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ew(i,r),av!==null&&av(i,r)};var tn=B(null);function $f(){var i=tn.current;return i!==null?i:le.pooledCache}function Zo(i,r){r===null?F(tn,tn.current):F(tn,r.pool)}function lv(){var i=$f();return i===null?null:{parent:Me._currentValue,pool:i}}var $a=Error(s(460)),ov=Error(s(474)),Ko=Error(s(542)),Zf={then:function(){}};function uv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Qo(){}function hv(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Qo,Qo),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,fv(i),i;default:if(typeof r.status=="string")r.then(Qo,Qo);else{if(i=le,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,fv(i),i}throw Za=r,$a}}var Za=null;function cv(){if(Za===null)throw Error(s(459));var i=Za;return Za=null,i}function fv(i){if(i===$a||i===Ko)throw Error(s(483))}var ss=!1;function Kf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ns(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function as(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Qt&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=Yo(i),Qy(i,null,a),r}return Xo(i,u,r,a),Yo(i)}function Ka(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Ii(i,a)}}function Jf(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=b:p=p.next=b,a=a.next}while(a!==null);p===null?f=p=r:p=p.next=r}else f=p=r;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var td=!1;function Qa(){if(td){var i=zn;if(i!==null)throw i}}function Ja(i,r,a,u){td=!1;var f=i.updateQueue;ss=!1;var p=f.firstBaseUpdate,b=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var L=C,j=L.next;L.next=null,b===null?p=j:b.next=j,b=L;var et=i.alternate;et!==null&&(et=et.updateQueue,C=et.lastBaseUpdate,C!==b&&(C===null?et.firstBaseUpdate=j:C.next=j,et.lastBaseUpdate=L))}if(p!==null){var at=f.baseState;b=0,et=j=L=null,C=p;do{var K=C.lane&-536870913,Q=K!==C.lane;if(Q?(jt&K)===K:(u&K)===K){K!==0&&K===kn&&(td=!0),et!==null&&(et=et.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var Nt=i,Mt=C;K=r;var se=a;switch(Mt.tag){case 1:if(Nt=Mt.payload,typeof Nt=="function"){at=Nt.call(se,at,K);break t}at=Nt;break t;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=Mt.payload,K=typeof Nt=="function"?Nt.call(se,at,K):Nt,K==null)break t;at=g({},at,K);break t;case 2:ss=!0}}K=C.callback,K!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},et===null?(j=et=Q,L=at):et=et.next=Q,b|=K;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;Q=C,C=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);et===null&&(L=at),f.baseState=L,f.firstBaseUpdate=j,f.lastBaseUpdate=et,p===null&&(f.shared.lanes=0),ps|=b,i.lanes=b,i.memoizedState=at}}function dv(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function pv(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)dv(a[i],r)}var Xn=B(null),Jo=B(0);function mv(i,r){i=Pr,F(Jo,i),F(Xn,r),Pr=i|r.baseLanes}function ed(){F(Jo,Pr),F(Xn,Xn.current)}function id(){Pr=Jo.current,G(Xn),G(Jo)}var ls=0,Ht=null,ie=null,Ae=null,tu=!1,Yn=!1,en=!1,eu=0,tl=0,Vn=null,Aw=0;function _e(){throw Error(s(321))}function rd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!ii(i[a],r[a]))return!1;return!0}function sd(i,r,a,u,f,p){return ls=p,Ht=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,S.H=i===null||i.memoizedState===null?Qv:Jv,en=!1,p=a(u,f),en=!1,Yn&&(p=yv(r,a,u,f)),gv(i),p}function gv(i){S.H=lu;var r=ie!==null&&ie.next!==null;if(ls=0,Ae=ie=Ht=null,tu=!1,tl=0,Vn=null,r)throw Error(s(300));i===null||Ne||(i=i.dependencies,i!==null&&Wo(i)&&(Ne=!0))}function yv(i,r,a,u){Ht=i;var f=0;do{if(Yn&&(Vn=null),tl=0,Yn=!1,25<=f)throw Error(s(301));if(f+=1,Ae=ie=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}S.H=Ow,p=r(a,u)}while(Yn);return p}function Sw(){var i=S.H,r=i.useState()[0];return r=typeof r.then=="function"?el(r):r,i=i.useState()[0],(ie!==null?ie.memoizedState:null)!==i&&(Ht.flags|=1024),r}function nd(){var i=eu!==0;return eu=0,i}function ad(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function ld(i){if(tu){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}tu=!1}ls=0,Ae=ie=Ht=null,Yn=!1,tl=eu=0,Vn=null}function Qe(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?Ht.memoizedState=Ae=i:Ae=Ae.next=i,Ae}function Se(){if(ie===null){var i=Ht.alternate;i=i!==null?i.memoizedState:null}else i=ie.next;var r=Ae===null?Ht.memoizedState:Ae.next;if(r!==null)Ae=r,ie=i;else{if(i===null)throw Ht.alternate===null?Error(s(467)):Error(s(310));ie=i,i={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Ae===null?Ht.memoizedState=Ae=i:Ae=Ae.next=i}return Ae}function od(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(i){var r=tl;return tl+=1,Vn===null&&(Vn=[]),i=hv(Vn,i,r),r=Ht,(Ae===null?r.memoizedState:Ae.next)===null&&(r=r.alternate,S.H=r===null||r.memoizedState===null?Qv:Jv),i}function iu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return el(i);if(i.$$typeof===D)return Ve(i)}throw Error(s(438,String(i)))}function ud(i){var r=null,a=Ht.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Ht.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=od(),Ht.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=lt;return r.index++,a}function Dr(i,r){return typeof r=="function"?r(i):r}function ru(i){var r=Se();return hd(r,ie,i)}function hd(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var b=f.next;f.next=p.next,p.next=b}r.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{r=f.next;var C=b=null,L=null,j=r,et=!1;do{var at=j.lane&-536870913;if(at!==j.lane?(jt&at)===at:(ls&at)===at){var K=j.revertLane;if(K===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),at===kn&&(et=!0);else if((ls&K)===K){j=j.next,K===kn&&(et=!0);continue}else at={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},L===null?(C=L=at,b=p):L=L.next=at,Ht.lanes|=K,ps|=K;at=j.action,en&&a(p,at),p=j.hasEagerState?j.eagerState:a(p,at)}else K={lane:at,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},L===null?(C=L=K,b=p):L=L.next=K,Ht.lanes|=at,ps|=at;j=j.next}while(j!==null&&j!==r);if(L===null?b=p:L.next=C,!ii(p,i.memoizedState)&&(Ne=!0,et&&(a=zn,a!==null)))throw a;i.memoizedState=p,i.baseState=b,i.baseQueue=L,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function cd(i){var r=Se(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,f=a.pending,p=r.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do p=i(p,b.action),b=b.next;while(b!==f);ii(p,r.memoizedState)||(Ne=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,u]}function vv(i,r,a){var u=Ht,f=Se(),p=Zt;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!ii((ie||f).memoizedState,a);b&&(f.memoizedState=a,Ne=!0),f=f.queue;var C=bv.bind(null,u,f,i);if(il(2048,8,C,[i]),f.getSnapshot!==r||b||Ae!==null&&Ae.memoizedState.tag&1){if(u.flags|=2048,jn(9,su(),xv.bind(null,u,f,a,r),null),le===null)throw Error(s(349));p||(ls&124)!==0||_v(u,r,a)}return a}function _v(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Ht.updateQueue,r===null?(r=od(),Ht.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function xv(i,r,a,u){r.value=a,r.getSnapshot=u,Ev(r)&&Tv(i)}function bv(i,r,a){return a(function(){Ev(r)&&Tv(i)})}function Ev(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!ii(i,a)}catch{return!0}}function Tv(i){var r=Ln(i,2);r!==null&&oi(r,i,2)}function fd(i){var r=Qe();if(typeof i=="function"){var a=i;if(i=a(),en){Ji(!0);try{a()}finally{Ji(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:i},r}function Av(i,r,a,u){return i.baseState=a,hd(i,ie,typeof u=="function"?u:Dr)}function ww(i,r,a,u,f){if(au(i))throw Error(s(485));if(i=r.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};S.T!==null?a(!0):p.isTransition=!1,u(p),a=r.pending,a===null?(p.next=r.pending=p,Sv(r,p)):(p.next=a.next,r.pending=a.next=p)}}function Sv(i,r){var a=r.action,u=r.payload,f=i.state;if(r.isTransition){var p=S.T,b={};S.T=b;try{var C=a(f,u),L=S.S;L!==null&&L(b,C),wv(i,r,C)}catch(j){dd(i,r,j)}finally{S.T=p}}else try{p=a(f,u),wv(i,r,p)}catch(j){dd(i,r,j)}}function wv(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Rv(i,r,u)},function(u){return dd(i,r,u)}):Rv(i,r,a)}function Rv(i,r,a){r.status="fulfilled",r.value=a,Cv(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Sv(i,a)))}function dd(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,Cv(r),r=r.next;while(r!==u)}i.action=null}function Cv(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Mv(i,r){return r}function Dv(i,r){if(Zt){var a=le.formState;if(a!==null){t:{var u=Ht;if(Zt){if(me){e:{for(var f=me,p=rr;f.nodeType!==8;){if(!p){f=null;break e}if(f=Fi(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){me=Fi(f.nextSibling),u=f.data==="F!";break t}}Ks(u)}u=!1}u&&(r=a[0])}}return a=Qe(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mv,lastRenderedState:r},a.queue=u,a=$v.bind(null,Ht,u),u.dispatch=a,u=fd(!1),p=vd.bind(null,Ht,!1,u.queue),u=Qe(),f={state:r,dispatch:null,action:i,pending:null},u.queue=f,a=ww.bind(null,Ht,f,p,a),f.dispatch=a,u.memoizedState=i,[r,a,!1]}function Ov(i){var r=Se();return Bv(r,ie,i)}function Bv(i,r,a){if(r=hd(i,r,Mv)[0],i=ru(Dr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=el(r)}catch(b){throw b===$a?Ko:b}else u=r;r=Se();var f=r.queue,p=f.dispatch;return a!==r.memoizedState&&(Ht.flags|=2048,jn(9,su(),Rw.bind(null,f,a),null)),[u,p,i]}function Rw(i,r){i.action=r}function Nv(i){var r=Se(),a=ie;if(a!==null)return Bv(r,a,i);Se(),r=r.memoizedState,a=Se();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function jn(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Ht.updateQueue,r===null&&(r=od(),Ht.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function su(){return{destroy:void 0,resource:void 0}}function Iv(){return Se().memoizedState}function nu(i,r,a,u){var f=Qe();u=u===void 0?null:u,Ht.flags|=i,f.memoizedState=jn(1|r,su(),a,u)}function il(i,r,a,u){var f=Se();u=u===void 0?null:u;var p=f.memoizedState.inst;ie!==null&&u!==null&&rd(u,ie.memoizedState.deps)?f.memoizedState=jn(r,p,a,u):(Ht.flags|=i,f.memoizedState=jn(1|r,p,a,u))}function Uv(i,r){nu(8390656,8,i,r)}function Pv(i,r){il(2048,8,i,r)}function Lv(i,r){return il(4,2,i,r)}function Fv(i,r){return il(4,4,i,r)}function Gv(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Hv(i,r,a){a=a!=null?a.concat([i]):null,il(4,4,Gv.bind(null,r,i),a)}function pd(){}function kv(i,r){var a=Se();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&rd(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function zv(i,r){var a=Se();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&rd(r,u[1]))return u[0];if(u=i(),en){Ji(!0);try{i()}finally{Ji(!1)}}return a.memoizedState=[u,r],u}function md(i,r,a){return a===void 0||(ls&1073741824)!==0?i.memoizedState=r:(i.memoizedState=a,i=V_(),Ht.lanes|=i,ps|=i,a)}function Xv(i,r,a,u){return ii(a,r)?a:Xn.current!==null?(i=md(i,a,u),ii(i,r)||(Ne=!0),i):(ls&42)===0?(Ne=!0,i.memoizedState=a):(i=V_(),Ht.lanes|=i,ps|=i,r)}function Yv(i,r,a,u,f){var p=O.p;O.p=p!==0&&8>p?p:8;var b=S.T,C={};S.T=C,vd(i,!1,r,a);try{var L=f(),j=S.S;if(j!==null&&j(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var et=Tw(L,u);rl(i,r,et,li(i))}else rl(i,r,u,li(i))}catch(at){rl(i,r,{then:function(){},status:"rejected",reason:at},li())}finally{O.p=p,S.T=b}}function Cw(){}function gd(i,r,a,u){if(i.tag!==5)throw Error(s(476));var f=Vv(i).queue;Yv(i,f,r,M,a===null?Cw:function(){return jv(i),a(u)})}function Vv(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:M},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function jv(i){var r=Vv(i).next.queue;rl(i,r,{},li())}function yd(){return Ve(bl)}function qv(){return Se().memoizedState}function Wv(){return Se().memoizedState}function Mw(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=li();i=ns(a);var u=as(r,i,a);u!==null&&(oi(u,r,a),Ka(u,r,a)),r={cache:qf()},i.payload=r;return}r=r.return}}function Dw(i,r,a){var u=li();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},au(i)?Zv(r,a):(a=Lf(i,r,a,u),a!==null&&(oi(a,i,u),Kv(a,r,u)))}function $v(i,r,a){var u=li();rl(i,r,a,u)}function rl(i,r,a,u){var f={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(au(i))Zv(r,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var b=r.lastRenderedState,C=p(b,a);if(f.hasEagerState=!0,f.eagerState=C,ii(C,b))return Xo(i,r,f,0),le===null&&zo(),!1}catch{}finally{}if(a=Lf(i,r,f,u),a!==null)return oi(a,i,u),Kv(a,r,u),!0}return!1}function vd(i,r,a,u){if(u={lane:2,revertLane:Zd(),action:u,hasEagerState:!1,eagerState:null,next:null},au(i)){if(r)throw Error(s(479))}else r=Lf(i,a,u,2),r!==null&&oi(r,i,2)}function au(i){var r=i.alternate;return i===Ht||r!==null&&r===Ht}function Zv(i,r){Yn=tu=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Kv(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Ii(i,a)}}var lu={readContext:Ve,use:iu,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},Qv={readContext:Ve,use:iu,useCallback:function(i,r){return Qe().memoizedState=[i,r===void 0?null:r],i},useContext:Ve,useEffect:Uv,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,nu(4194308,4,Gv.bind(null,r,i),a)},useLayoutEffect:function(i,r){return nu(4194308,4,i,r)},useInsertionEffect:function(i,r){nu(4,2,i,r)},useMemo:function(i,r){var a=Qe();r=r===void 0?null:r;var u=i();if(en){Ji(!0);try{i()}finally{Ji(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=Qe();if(a!==void 0){var f=a(r);if(en){Ji(!0);try{a(r)}finally{Ji(!1)}}}else f=r;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=Dw.bind(null,Ht,i),[u.memoizedState,i]},useRef:function(i){var r=Qe();return i={current:i},r.memoizedState=i},useState:function(i){i=fd(i);var r=i.queue,a=$v.bind(null,Ht,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:pd,useDeferredValue:function(i,r){var a=Qe();return md(a,i,r)},useTransition:function(){var i=fd(!1);return i=Yv.bind(null,Ht,i.queue,!0,!1),Qe().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Ht,f=Qe();if(Zt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),le===null)throw Error(s(349));(jt&124)!==0||_v(u,r,a)}f.memoizedState=a;var p={value:a,getSnapshot:r};return f.queue=p,Uv(bv.bind(null,u,p,i),[i]),u.flags|=2048,jn(9,su(),xv.bind(null,u,p,a,r),null),a},useId:function(){var i=Qe(),r=le.identifierPrefix;if(Zt){var a=Rr,u=wr;a=(u&~(1<<32-Re(u)-1)).toString(32)+a,r=""+r+"R"+a,a=eu++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=Aw++,r=""+r+"r"+a.toString(32)+"";return i.memoizedState=r},useHostTransitionStatus:yd,useFormState:Dv,useActionState:Dv,useOptimistic:function(i){var r=Qe();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=vd.bind(null,Ht,!0,a),a.dispatch=r,[i,r]},useMemoCache:ud,useCacheRefresh:function(){return Qe().memoizedState=Mw.bind(null,Ht)}},Jv={readContext:Ve,use:iu,useCallback:kv,useContext:Ve,useEffect:Pv,useImperativeHandle:Hv,useInsertionEffect:Lv,useLayoutEffect:Fv,useMemo:zv,useReducer:ru,useRef:Iv,useState:function(){return ru(Dr)},useDebugValue:pd,useDeferredValue:function(i,r){var a=Se();return Xv(a,ie.memoizedState,i,r)},useTransition:function(){var i=ru(Dr)[0],r=Se().memoizedState;return[typeof i=="boolean"?i:el(i),r]},useSyncExternalStore:vv,useId:qv,useHostTransitionStatus:yd,useFormState:Ov,useActionState:Ov,useOptimistic:function(i,r){var a=Se();return Av(a,ie,i,r)},useMemoCache:ud,useCacheRefresh:Wv},Ow={readContext:Ve,use:iu,useCallback:kv,useContext:Ve,useEffect:Pv,useImperativeHandle:Hv,useInsertionEffect:Lv,useLayoutEffect:Fv,useMemo:zv,useReducer:cd,useRef:Iv,useState:function(){return cd(Dr)},useDebugValue:pd,useDeferredValue:function(i,r){var a=Se();return ie===null?md(a,i,r):Xv(a,ie.memoizedState,i,r)},useTransition:function(){var i=cd(Dr)[0],r=Se().memoizedState;return[typeof i=="boolean"?i:el(i),r]},useSyncExternalStore:vv,useId:qv,useHostTransitionStatus:yd,useFormState:Nv,useActionState:Nv,useOptimistic:function(i,r){var a=Se();return ie!==null?Av(a,ie,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:ud,useCacheRefresh:Wv},qn=null,sl=0;function ou(i){var r=sl;return sl+=1,qn===null&&(qn=[]),hv(qn,i,r)}function nl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function uu(i,r){throw r.$$typeof===y?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function t_(i){var r=i._init;return r(i._payload)}function e_(i){function r(X,H){if(i){var V=X.deletions;V===null?(X.deletions=[H],X.flags|=16):V.push(H)}}function a(X,H){if(!i)return null;for(;H!==null;)r(X,H),H=H.sibling;return null}function u(X){for(var H=new Map;X!==null;)X.key!==null?H.set(X.key,X):H.set(X.index,X),X=X.sibling;return H}function f(X,H){return X=Sr(X,H),X.index=0,X.sibling=null,X}function p(X,H,V){return X.index=V,i?(V=X.alternate,V!==null?(V=V.index,V<H?(X.flags|=67108866,H):V):(X.flags|=67108866,H)):(X.flags|=1048576,H)}function b(X){return i&&X.alternate===null&&(X.flags|=67108866),X}function C(X,H,V,st){return H===null||H.tag!==6?(H=Gf(V,X.mode,st),H.return=X,H):(H=f(H,V),H.return=X,H)}function L(X,H,V,st){var xt=V.type;return xt===A?et(X,H,V.props.children,st,V.key):H!==null&&(H.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===q&&t_(xt)===H.type)?(H=f(H,V.props),nl(H,V),H.return=X,H):(H=Vo(V.type,V.key,V.props,null,X.mode,st),nl(H,V),H.return=X,H)}function j(X,H,V,st){return H===null||H.tag!==4||H.stateNode.containerInfo!==V.containerInfo||H.stateNode.implementation!==V.implementation?(H=Hf(V,X.mode,st),H.return=X,H):(H=f(H,V.children||[]),H.return=X,H)}function et(X,H,V,st,xt){return H===null||H.tag!==7?(H=qs(V,X.mode,st,xt),H.return=X,H):(H=f(H,V),H.return=X,H)}function at(X,H,V){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Gf(""+H,X.mode,V),H.return=X,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case _:return V=Vo(H.type,H.key,H.props,null,X.mode,V),nl(V,H),V.return=X,V;case x:return H=Hf(H,X.mode,V),H.return=X,H;case q:var st=H._init;return H=st(H._payload),at(X,H,V)}if(ht(H)||z(H))return H=qs(H,X.mode,V,null),H.return=X,H;if(typeof H.then=="function")return at(X,ou(H),V);if(H.$$typeof===D)return at(X,$o(X,H),V);uu(X,H)}return null}function K(X,H,V,st){var xt=H!==null?H.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return xt!==null?null:C(X,H,""+V,st);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case _:return V.key===xt?L(X,H,V,st):null;case x:return V.key===xt?j(X,H,V,st):null;case q:return xt=V._init,V=xt(V._payload),K(X,H,V,st)}if(ht(V)||z(V))return xt!==null?null:et(X,H,V,st,null);if(typeof V.then=="function")return K(X,H,ou(V),st);if(V.$$typeof===D)return K(X,H,$o(X,V),st);uu(X,V)}return null}function Q(X,H,V,st,xt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return X=X.get(V)||null,C(H,X,""+st,xt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case _:return X=X.get(st.key===null?V:st.key)||null,L(H,X,st,xt);case x:return X=X.get(st.key===null?V:st.key)||null,j(H,X,st,xt);case q:var kt=st._init;return st=kt(st._payload),Q(X,H,V,st,xt)}if(ht(st)||z(st))return X=X.get(V)||null,et(H,X,st,xt,null);if(typeof st.then=="function")return Q(X,H,V,ou(st),xt);if(st.$$typeof===D)return Q(X,H,V,$o(H,st),xt);uu(H,st)}return null}function Nt(X,H,V,st){for(var xt=null,kt=null,Ct=H,Ot=H=0,Ue=null;Ct!==null&&Ot<V.length;Ot++){Ct.index>Ot?(Ue=Ct,Ct=null):Ue=Ct.sibling;var $t=K(X,Ct,V[Ot],st);if($t===null){Ct===null&&(Ct=Ue);break}i&&Ct&&$t.alternate===null&&r(X,Ct),H=p($t,H,Ot),kt===null?xt=$t:kt.sibling=$t,kt=$t,Ct=Ue}if(Ot===V.length)return a(X,Ct),Zt&&$s(X,Ot),xt;if(Ct===null){for(;Ot<V.length;Ot++)Ct=at(X,V[Ot],st),Ct!==null&&(H=p(Ct,H,Ot),kt===null?xt=Ct:kt.sibling=Ct,kt=Ct);return Zt&&$s(X,Ot),xt}for(Ct=u(Ct);Ot<V.length;Ot++)Ue=Q(Ct,X,Ot,V[Ot],st),Ue!==null&&(i&&Ue.alternate!==null&&Ct.delete(Ue.key===null?Ot:Ue.key),H=p(Ue,H,Ot),kt===null?xt=Ue:kt.sibling=Ue,kt=Ue);return i&&Ct.forEach(function(Ts){return r(X,Ts)}),Zt&&$s(X,Ot),xt}function Mt(X,H,V,st){if(V==null)throw Error(s(151));for(var xt=null,kt=null,Ct=H,Ot=H=0,Ue=null,$t=V.next();Ct!==null&&!$t.done;Ot++,$t=V.next()){Ct.index>Ot?(Ue=Ct,Ct=null):Ue=Ct.sibling;var Ts=K(X,Ct,$t.value,st);if(Ts===null){Ct===null&&(Ct=Ue);break}i&&Ct&&Ts.alternate===null&&r(X,Ct),H=p(Ts,H,Ot),kt===null?xt=Ts:kt.sibling=Ts,kt=Ts,Ct=Ue}if($t.done)return a(X,Ct),Zt&&$s(X,Ot),xt;if(Ct===null){for(;!$t.done;Ot++,$t=V.next())$t=at(X,$t.value,st),$t!==null&&(H=p($t,H,Ot),kt===null?xt=$t:kt.sibling=$t,kt=$t);return Zt&&$s(X,Ot),xt}for(Ct=u(Ct);!$t.done;Ot++,$t=V.next())$t=Q(Ct,X,Ot,$t.value,st),$t!==null&&(i&&$t.alternate!==null&&Ct.delete($t.key===null?Ot:$t.key),H=p($t,H,Ot),kt===null?xt=$t:kt.sibling=$t,kt=$t);return i&&Ct.forEach(function(BR){return r(X,BR)}),Zt&&$s(X,Ot),xt}function se(X,H,V,st){if(typeof V=="object"&&V!==null&&V.type===A&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case _:t:{for(var xt=V.key;H!==null;){if(H.key===xt){if(xt=V.type,xt===A){if(H.tag===7){a(X,H.sibling),st=f(H,V.props.children),st.return=X,X=st;break t}}else if(H.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===q&&t_(xt)===H.type){a(X,H.sibling),st=f(H,V.props),nl(st,V),st.return=X,X=st;break t}a(X,H);break}else r(X,H);H=H.sibling}V.type===A?(st=qs(V.props.children,X.mode,st,V.key),st.return=X,X=st):(st=Vo(V.type,V.key,V.props,null,X.mode,st),nl(st,V),st.return=X,X=st)}return b(X);case x:t:{for(xt=V.key;H!==null;){if(H.key===xt)if(H.tag===4&&H.stateNode.containerInfo===V.containerInfo&&H.stateNode.implementation===V.implementation){a(X,H.sibling),st=f(H,V.children||[]),st.return=X,X=st;break t}else{a(X,H);break}else r(X,H);H=H.sibling}st=Hf(V,X.mode,st),st.return=X,X=st}return b(X);case q:return xt=V._init,V=xt(V._payload),se(X,H,V,st)}if(ht(V))return Nt(X,H,V,st);if(z(V)){if(xt=z(V),typeof xt!="function")throw Error(s(150));return V=xt.call(V),Mt(X,H,V,st)}if(typeof V.then=="function")return se(X,H,ou(V),st);if(V.$$typeof===D)return se(X,H,$o(X,V),st);uu(X,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,H!==null&&H.tag===6?(a(X,H.sibling),st=f(H,V),st.return=X,X=st):(a(X,H),st=Gf(V,X.mode,st),st.return=X,X=st),b(X)):a(X,H)}return function(X,H,V,st){try{sl=0;var xt=se(X,H,V,st);return qn=null,xt}catch(Ct){if(Ct===$a||Ct===Ko)throw Ct;var kt=ri(29,Ct,null,X.mode);return kt.lanes=st,kt.return=X,kt}finally{}}}var Wn=e_(!0),i_=e_(!1),Ei=B(null),sr=null;function os(i){var r=i.alternate;F(De,De.current&1),F(Ei,i),sr===null&&(r===null||Xn.current!==null||r.memoizedState!==null)&&(sr=i)}function r_(i){if(i.tag===22){if(F(De,De.current),F(Ei,i),sr===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(sr=i)}}else us()}function us(){F(De,De.current),F(Ei,Ei.current)}function Or(i){G(Ei),sr===i&&(sr=null),G(De)}var De=B(0);function hu(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||op(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function _d(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:g({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var xd={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=li(),f=ns(u);f.payload=r,a!=null&&(f.callback=a),r=as(i,f,u),r!==null&&(oi(r,i,u),Ka(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=li(),f=ns(u);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=as(i,f,u),r!==null&&(oi(r,i,u),Ka(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=li(),u=ns(a);u.tag=2,r!=null&&(u.callback=r),r=as(i,u,a),r!==null&&(oi(r,i,a),Ka(r,i,a))}};function s_(i,r,a,u,f,p,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,b):r.prototype&&r.prototype.isPureReactComponent?!ka(a,u)||!ka(f,p):!0}function n_(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&xd.enqueueReplaceState(r,r.state,null)}function rn(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=g({},a));for(var f in i)a[f]===void 0&&(a[f]=i[f])}return a}var cu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function a_(i){cu(i)}function l_(i){console.error(i)}function o_(i){cu(i)}function fu(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function u_(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function bd(i,r,a){return a=ns(a),a.tag=3,a.payload={element:null},a.callback=function(){fu(i,r)},a}function h_(i){return i=ns(i),i.tag=3,i}function c_(i,r,a,u){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){u_(r,a,u)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){u_(r,a,u),typeof f!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function Bw(i,r,a,u,f){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&ja(r,a,f,!0),a=Ei.current,a!==null){switch(a.tag){case 13:return sr===null?Vd():a.alternate===null&&ge===0&&(ge=3),a.flags&=-257,a.flags|=65536,a.lanes=f,u===Zf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),qd(i,u,f)),!1;case 22:return a.flags|=65536,u===Zf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),qd(i,u,f)),!1}throw Error(s(435,a.tag))}return qd(i,u,f),Vd(),!1}if(Zt)return r=Ei.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==Xf&&(i=Error(s(422),{cause:u}),Va(vi(i,a)))):(u!==Xf&&(r=Error(s(423),{cause:u}),Va(vi(r,a))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=vi(u,a),f=bd(i.stateNode,u,f),Jf(i,f),ge!==4&&(ge=2)),!1;var p=Error(s(520),{cause:u});if(p=vi(p,a),fl===null?fl=[p]:fl.push(p),ge!==4&&(ge=2),r===null)return!0;u=vi(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=f&-f,a.lanes|=i,i=bd(a.stateNode,u,i),Jf(a,i),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ms===null||!ms.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=h_(f),c_(f,i,a,u),Jf(a,f),!1}a=a.return}while(a!==null);return!1}var f_=Error(s(461)),Ne=!1;function Fe(i,r,a,u){r.child=i===null?i_(r,null,a,u):Wn(r,i.child,a,u)}function d_(i,r,a,u,f){a=a.render;var p=r.ref;if("ref"in u){var b={};for(var C in u)C!=="ref"&&(b[C]=u[C])}else b=u;return Js(r),u=sd(i,r,a,b,p,f),C=nd(),i!==null&&!Ne?(ad(i,r,f),Br(i,r,f)):(Zt&&C&&kf(r),r.flags|=1,Fe(i,r,u,f),r.child)}function p_(i,r,a,u,f){if(i===null){var p=a.type;return typeof p=="function"&&!Ff(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,m_(i,r,p,u,f)):(i=Vo(a.type,null,u,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(p=i.child,!Md(i,f)){var b=p.memoizedProps;if(a=a.compare,a=a!==null?a:ka,a(b,u)&&i.ref===r.ref)return Br(i,r,f)}return r.flags|=1,i=Sr(p,u),i.ref=r.ref,i.return=r,r.child=i}function m_(i,r,a,u,f){if(i!==null){var p=i.memoizedProps;if(ka(p,u)&&i.ref===r.ref)if(Ne=!1,r.pendingProps=u=p,Md(i,f))(i.flags&131072)!==0&&(Ne=!0);else return r.lanes=i.lanes,Br(i,r,f)}return Ed(i,r,a,u,f)}function g_(i,r,a){var u=r.pendingProps,f=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=p!==null?p.baseLanes|a:a,i!==null){for(f=r.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;r.childLanes=p&~u}else r.childLanes=0,r.child=null;return y_(i,r,u,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Zo(r,p!==null?p.cachePool:null),p!==null?mv(r,p):ed(),r_(r);else return r.lanes=r.childLanes=536870912,y_(i,r,p!==null?p.baseLanes|a:a,a)}else p!==null?(Zo(r,p.cachePool),mv(r,p),us(),r.memoizedState=null):(i!==null&&Zo(r,null),ed(),us());return Fe(i,r,f,a),r.child}function y_(i,r,a,u){var f=$f();return f=f===null?null:{parent:Me._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},i!==null&&Zo(r,null),ed(),r_(r),i!==null&&ja(i,r,u,!0),null}function du(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Ed(i,r,a,u,f){return Js(r),a=sd(i,r,a,u,void 0,f),u=nd(),i!==null&&!Ne?(ad(i,r,f),Br(i,r,f)):(Zt&&u&&kf(r),r.flags|=1,Fe(i,r,a,f),r.child)}function v_(i,r,a,u,f,p){return Js(r),r.updateQueue=null,a=yv(r,u,a,f),gv(i),u=nd(),i!==null&&!Ne?(ad(i,r,p),Br(i,r,p)):(Zt&&u&&kf(r),r.flags|=1,Fe(i,r,a,p),r.child)}function __(i,r,a,u,f){if(Js(r),r.stateNode===null){var p=Fn,b=a.contextType;typeof b=="object"&&b!==null&&(p=Ve(b)),p=new a(u,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=xd,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=u,p.state=r.memoizedState,p.refs={},Kf(r),b=a.contextType,p.context=typeof b=="object"&&b!==null?Ve(b):Fn,p.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(_d(r,a,b,u),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&xd.enqueueReplaceState(p,p.state,null),Ja(r,u,p,f),Qa(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){p=r.stateNode;var C=r.memoizedProps,L=rn(a,C);p.props=L;var j=p.context,et=a.contextType;b=Fn,typeof et=="object"&&et!==null&&(b=Ve(et));var at=a.getDerivedStateFromProps;et=typeof at=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,et||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||j!==b)&&n_(r,p,u,b),ss=!1;var K=r.memoizedState;p.state=K,Ja(r,u,p,f),Qa(),j=r.memoizedState,C||K!==j||ss?(typeof at=="function"&&(_d(r,a,at,u),j=r.memoizedState),(L=ss||s_(r,a,L,u,K,j,b))?(et||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=j),p.props=u,p.state=j,p.context=b,u=L):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{p=r.stateNode,Qf(i,r),b=r.memoizedProps,et=rn(a,b),p.props=et,at=r.pendingProps,K=p.context,j=a.contextType,L=Fn,typeof j=="object"&&j!==null&&(L=Ve(j)),C=a.getDerivedStateFromProps,(j=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==at||K!==L)&&n_(r,p,u,L),ss=!1,K=r.memoizedState,p.state=K,Ja(r,u,p,f),Qa();var Q=r.memoizedState;b!==at||K!==Q||ss||i!==null&&i.dependencies!==null&&Wo(i.dependencies)?(typeof C=="function"&&(_d(r,a,C,u),Q=r.memoizedState),(et=ss||s_(r,a,et,u,K,Q,L)||i!==null&&i.dependencies!==null&&Wo(i.dependencies))?(j||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Q,L),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Q,L)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Q),p.props=u,p.state=Q,p.context=L,u=et):(typeof p.componentDidUpdate!="function"||b===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),u=!1)}return p=u,du(i,r),u=(r.flags&128)!==0,p||u?(p=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,i!==null&&u?(r.child=Wn(r,i.child,null,f),r.child=Wn(r,null,a,f)):Fe(i,r,a,f),r.memoizedState=p.state,i=r.child):i=Br(i,r,f),i}function x_(i,r,a,u){return Ya(),r.flags|=256,Fe(i,r,a,u),r.child}var Td={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(i){return{baseLanes:i,cachePool:lv()}}function Sd(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Ti),i}function b_(i,r,a){var u=r.pendingProps,f=!1,p=(r.flags&128)!==0,b;if((b=p)||(b=i!==null&&i.memoizedState===null?!1:(De.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,i===null){if(Zt){if(f?os(r):us(),Zt){var C=me,L;if(L=C){t:{for(L=C,C=rr;L.nodeType!==8;){if(!C){C=null;break t}if(L=Fi(L.nextSibling),L===null){C=null;break t}}C=L}C!==null?(r.memoizedState={dehydrated:C,treeContext:Ws!==null?{id:wr,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},L=ri(18,null,null,0),L.stateNode=C,L.return=r,r.child=L,qe=r,me=null,L=!0):L=!1}L||Ks(r)}if(C=r.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return op(C)?r.lanes=32:r.lanes=536870912,null;Or(r)}return C=u.children,u=u.fallback,f?(us(),f=r.mode,C=pu({mode:"hidden",children:C},f),u=qs(u,f,a,null),C.return=r,u.return=r,C.sibling=u,r.child=C,f=r.child,f.memoizedState=Ad(a),f.childLanes=Sd(i,b,a),r.memoizedState=Td,u):(os(r),wd(r,C))}if(L=i.memoizedState,L!==null&&(C=L.dehydrated,C!==null)){if(p)r.flags&256?(os(r),r.flags&=-257,r=Rd(i,r,a)):r.memoizedState!==null?(us(),r.child=i.child,r.flags|=128,r=null):(us(),f=u.fallback,C=r.mode,u=pu({mode:"visible",children:u.children},C),f=qs(f,C,a,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,Wn(r,i.child,null,a),u=r.child,u.memoizedState=Ad(a),u.childLanes=Sd(i,b,a),r.memoizedState=Td,r=f);else if(os(r),op(C)){if(b=C.nextSibling&&C.nextSibling.dataset,b)var j=b.dgst;b=j,u=Error(s(419)),u.stack="",u.digest=b,Va({value:u,source:null,stack:null}),r=Rd(i,r,a)}else if(Ne||ja(i,r,a,!1),b=(a&i.childLanes)!==0,Ne||b){if(b=le,b!==null&&(u=a&-a,u=(u&42)!==0?1:ks(u),u=(u&(b.suspendedLanes|a))!==0?0:u,u!==0&&u!==L.retryLane))throw L.retryLane=u,Ln(i,u),oi(b,i,u),f_;C.data==="$?"||Vd(),r=Rd(i,r,a)}else C.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=L.treeContext,me=Fi(C.nextSibling),qe=r,Zt=!0,Zs=null,rr=!1,i!==null&&(xi[bi++]=wr,xi[bi++]=Rr,xi[bi++]=Ws,wr=i.id,Rr=i.overflow,Ws=r),r=wd(r,u.children),r.flags|=4096);return r}return f?(us(),f=u.fallback,C=r.mode,L=i.child,j=L.sibling,u=Sr(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,j!==null?f=Sr(j,f):(f=qs(f,C,a,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,C=i.child.memoizedState,C===null?C=Ad(a):(L=C.cachePool,L!==null?(j=Me._currentValue,L=L.parent!==j?{parent:j,pool:j}:L):L=lv(),C={baseLanes:C.baseLanes|a,cachePool:L}),f.memoizedState=C,f.childLanes=Sd(i,b,a),r.memoizedState=Td,u):(os(r),a=i.child,i=a.sibling,a=Sr(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(b=r.deletions,b===null?(r.deletions=[i],r.flags|=16):b.push(i)),r.child=a,r.memoizedState=null,a)}function wd(i,r){return r=pu({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function pu(i,r){return i=ri(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Rd(i,r,a){return Wn(r,i.child,null,a),i=wd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function E_(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Vf(i.return,r,a)}function Cd(i,r,a,u,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailMode=f)}function T_(i,r,a){var u=r.pendingProps,f=u.revealOrder,p=u.tail;if(Fe(i,r,u.children,a),u=De.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&E_(i,a,r);else if(i.tag===19)E_(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(F(De,u),f){case"forwards":for(a=r.child,f=null;a!==null;)i=a.alternate,i!==null&&hu(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Cd(r,!1,f,a,p);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&hu(i)===null){r.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}Cd(r,!0,a,null,p);break;case"together":Cd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Br(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),ps|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(ja(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Sr(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Sr(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Md(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Wo(i)))}function Nw(i,r,a){switch(r.tag){case 3:ft(r,r.stateNode.containerInfo),rs(r,Me,i.memoizedState.cache),Ya();break;case 27:case 5:ut(r);break;case 4:ft(r,r.stateNode.containerInfo);break;case 10:rs(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(os(r),r.flags|=128,null):(a&r.child.childLanes)!==0?b_(i,r,a):(os(r),i=Br(i,r,a),i!==null?i.sibling:null);os(r);break;case 19:var f=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(ja(i,r,a,!1),u=(a&r.childLanes)!==0),f){if(u)return T_(i,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),F(De,De.current),u)break;return null;case 22:case 23:return r.lanes=0,g_(i,r,a);case 24:rs(r,Me,i.memoizedState.cache)}return Br(i,r,a)}function A_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Ne=!0;else{if(!Md(i,a)&&(r.flags&128)===0)return Ne=!1,Nw(i,r,a);Ne=(i.flags&131072)!==0}else Ne=!1,Zt&&(r.flags&1048576)!==0&&tv(r,qo,r.index);switch(r.lanes=0,r.tag){case 16:t:{i=r.pendingProps;var u=r.elementType,f=u._init;if(u=f(u._payload),r.type=u,typeof u=="function")Ff(u)?(i=rn(u,i),r.tag=1,r=__(null,r,u,i,a)):(r.tag=0,r=Ed(null,r,u,i,a));else{if(u!=null){if(f=u.$$typeof,f===P){r.tag=11,r=d_(null,r,u,i,a);break t}else if(f===U){r.tag=14,r=p_(null,r,u,i,a);break t}}throw r=tt(u)||u,Error(s(306,r,""))}}return r;case 0:return Ed(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,f=rn(u,r.pendingProps),__(i,r,u,f,a);case 3:t:{if(ft(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var p=r.memoizedState;f=p.element,Qf(i,r),Ja(r,u,null,a);var b=r.memoizedState;if(u=b.cache,rs(r,Me,u),u!==p.cache&&jf(r,[Me],a,!0),Qa(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=x_(i,r,u,a);break t}else if(u!==f){f=vi(Error(s(424)),r),Va(f),r=x_(i,r,u,a);break t}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(me=Fi(i.firstChild),qe=r,Zt=!0,Zs=null,rr=!0,a=i_(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ya(),u===f){r=Br(i,r,a);break t}Fe(i,r,u,a)}r=r.child}return r;case 26:return du(i,r),i===null?(a=C1(r.type,null,r.pendingProps,null))?r.memoizedState=a:Zt||(a=r.type,i=r.pendingProps,u=Cu(nt.current).createElement(a),u[Ce]=r,u[Te]=i,He(u,a,i),pe(u),r.stateNode=u):r.memoizedState=C1(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return ut(r),i===null&&Zt&&(u=r.stateNode=S1(r.type,r.pendingProps,nt.current),qe=r,rr=!0,f=me,vs(r.type)?(up=f,me=Fi(u.firstChild)):me=f),Fe(i,r,r.pendingProps.children,a),du(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Zt&&((f=u=me)&&(u=lR(u,r.type,r.pendingProps,rr),u!==null?(r.stateNode=u,qe=r,me=Fi(u.firstChild),rr=!1,f=!0):f=!1),f||Ks(r)),ut(r),f=r.type,p=r.pendingProps,b=i!==null?i.memoizedProps:null,u=p.children,np(f,p)?u=null:b!==null&&np(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=sd(i,r,Sw,null,null,a),bl._currentValue=f),du(i,r),Fe(i,r,u,a),r.child;case 6:return i===null&&Zt&&((i=a=me)&&(a=oR(a,r.pendingProps,rr),a!==null?(r.stateNode=a,qe=r,me=null,i=!0):i=!1),i||Ks(r)),null;case 13:return b_(i,r,a);case 4:return ft(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Wn(r,null,u,a):Fe(i,r,u,a),r.child;case 11:return d_(i,r,r.type,r.pendingProps,a);case 7:return Fe(i,r,r.pendingProps,a),r.child;case 8:return Fe(i,r,r.pendingProps.children,a),r.child;case 12:return Fe(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,rs(r,r.type,u.value),Fe(i,r,u.children,a),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Js(r),f=Ve(f),u=u(f),r.flags|=1,Fe(i,r,u,a),r.child;case 14:return p_(i,r,r.type,r.pendingProps,a);case 15:return m_(i,r,r.type,r.pendingProps,a);case 19:return T_(i,r,a);case 31:return u=r.pendingProps,a=r.mode,u={mode:u.mode,children:u.children},i===null?(a=pu(u,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Sr(i.child,u),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return g_(i,r,a);case 24:return Js(r),u=Ve(Me),i===null?(f=$f(),f===null&&(f=le,p=qf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),r.memoizedState={parent:u,cache:f},Kf(r),rs(r,Me,f)):((i.lanes&a)!==0&&(Qf(i,r),Ja(r,null,null,a),Qa()),f=i.memoizedState,p=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),rs(r,Me,u)):(u=p.cache,rs(r,Me,u),u!==f.cache&&jf(r,[Me],a,!0))),Fe(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Nr(i){i.flags|=4}function S_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!N1(r)){if(r=Ei.current,r!==null&&((jt&4194048)===jt?sr!==null:(jt&62914560)!==jt&&(jt&536870912)===0||r!==sr))throw Za=Zf,ov;i.flags|=8192}}function mu(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?ee():536870912,i.lanes|=r,Qn|=r)}function al(i,r){if(!Zt)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function de(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function Iw(i,r,a){var u=r.pendingProps;switch(zf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(r),null;case 1:return de(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Mr(Me),vt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Xa(r)?Nr(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,rv())),de(r),null;case 26:return a=r.memoizedState,i===null?(Nr(r),a!==null?(de(r),S_(r,a)):(de(r),r.flags&=-16777217)):a?a!==i.memoizedState?(Nr(r),de(r),S_(r,a)):(de(r),r.flags&=-16777217):(i.memoizedProps!==u&&Nr(r),de(r),r.flags&=-16777217),null;case 27:_t(r),a=nt.current;var f=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Nr(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return de(r),null}i=Z.current,Xa(r)?ev(r):(i=S1(f,u,a),r.stateNode=i,Nr(r))}return de(r),null;case 5:if(_t(r),a=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Nr(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return de(r),null}if(i=Z.current,Xa(r))ev(r);else{switch(f=Cu(nt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(a,{is:u.is}):f.createElement(a)}}i[Ce]=r,i[Te]=u;t:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break t;for(;f.sibling===null;){if(f.return===null||f.return===r)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=i;t:switch(He(i,a,u),a){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Nr(r)}}return de(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Nr(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=nt.current,Xa(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,f=qe,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ce]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||v1(i.nodeValue,a)),i||Ks(r)}else i=Cu(i).createTextNode(u),i[Ce]=r,r.stateNode=i}return de(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Xa(r),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ce]=r}else Ya(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;de(r),f=!1}else f=rv(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Or(r),r):(Or(r),null)}if(Or(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=u!==null,i=i!==null&&i.memoizedState!==null,a){u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return a!==i&&a&&(r.child.flags|=8192),mu(r,r.updateQueue),de(r),null;case 4:return vt(),i===null&&tp(r.stateNode.containerInfo),de(r),null;case 10:return Mr(r.type),de(r),null;case 19:if(G(De),f=r.memoizedState,f===null)return de(r),null;if(u=(r.flags&128)!==0,p=f.rendering,p===null)if(u)al(f,!1);else{if(ge!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(p=hu(i),p!==null){for(r.flags|=128,al(f,!1),i=p.updateQueue,r.updateQueue=i,mu(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Jy(a,i),a=a.sibling;return F(De,De.current&1|2),r.child}i=i.sibling}f.tail!==null&&Wt()>vu&&(r.flags|=128,u=!0,al(f,!1),r.lanes=4194304)}else{if(!u)if(i=hu(p),i!==null){if(r.flags|=128,u=!0,i=i.updateQueue,r.updateQueue=i,mu(r,i),al(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Zt)return de(r),null}else 2*Wt()-f.renderingStartTime>vu&&a!==536870912&&(r.flags|=128,u=!0,al(f,!1),r.lanes=4194304);f.isBackwards?(p.sibling=r.child,r.child=p):(i=f.last,i!==null?i.sibling=p:r.child=p,f.last=p)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Wt(),r.sibling=null,i=De.current,F(De,u?i&1|2:i&1),r):(de(r),null);case 22:case 23:return Or(r),id(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(de(r),r.subtreeFlags&6&&(r.flags|=8192)):de(r),a=r.updateQueue,a!==null&&mu(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&G(tn),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Mr(Me),de(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function Uw(i,r){switch(zf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Mr(Me),vt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return _t(r),null;case 13:if(Or(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ya()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return G(De),null;case 4:return vt(),null;case 10:return Mr(r.type),null;case 22:case 23:return Or(r),id(),i!==null&&G(tn),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Mr(Me),null;case 25:return null;default:return null}}function w_(i,r){switch(zf(r),r.tag){case 3:Mr(Me),vt();break;case 26:case 27:case 5:_t(r);break;case 4:vt();break;case 13:Or(r);break;case 19:G(De);break;case 10:Mr(r.type);break;case 22:case 23:Or(r),id(),i!==null&&G(tn);break;case 24:Mr(Me)}}function ll(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&i)===i){u=void 0;var p=a.create,b=a.inst;u=p(),b.destroy=u}a=a.next}while(a!==f)}}catch(C){ne(r,r.return,C)}}function hs(i,r,a){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var b=u.inst,C=b.destroy;if(C!==void 0){b.destroy=void 0,f=r;var L=a,j=C;try{j()}catch(et){ne(f,L,et)}}}u=u.next}while(u!==p)}}catch(et){ne(r,r.return,et)}}function R_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{pv(r,a)}catch(u){ne(i,i.return,u)}}}function C_(i,r,a){a.props=rn(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){ne(i,r,u)}}function ol(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(f){ne(i,r,f)}}function nr(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(f){ne(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ne(i,r,f)}else a.current=null}function M_(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break t;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(f){ne(i,i.return,f)}}function Dd(i,r,a){try{var u=i.stateNode;iR(u,i.type,a,r),u[Te]=r}catch(f){ne(i,i.return,f)}}function D_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&vs(i.type)||i.tag===4}function Od(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||D_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&vs(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Bd(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ru));else if(u!==4&&(u===27&&vs(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Bd(i,r,a),i=i.sibling;i!==null;)Bd(i,r,a),i=i.sibling}function gu(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&vs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(gu(i,r,a),i=i.sibling;i!==null;)gu(i,r,a),i=i.sibling}function O_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);He(r,u,a),r[Ce]=i,r[Te]=a}catch(p){ne(i,i.return,p)}}var Ir=!1,xe=!1,Nd=!1,B_=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Pw(i,r){if(i=i.containerInfo,rp=Iu,i=Xy(i),Of(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else t:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var b=0,C=-1,L=-1,j=0,et=0,at=i,K=null;e:for(;;){for(var Q;at!==a||f!==0&&at.nodeType!==3||(C=b+f),at!==p||u!==0&&at.nodeType!==3||(L=b+u),at.nodeType===3&&(b+=at.nodeValue.length),(Q=at.firstChild)!==null;)K=at,at=Q;for(;;){if(at===i)break e;if(K===a&&++j===f&&(C=b),K===p&&++et===u&&(L=b),(Q=at.nextSibling)!==null)break;at=K,K=at.parentNode}at=Q}a=C===-1||L===-1?null:{start:C,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(sp={focusedElem:i,selectionRange:a},Iu=!1,Ie=r;Ie!==null;)if(r=Ie,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,Ie=i;else for(;Ie!==null;){switch(r=Ie,p=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,a=r,f=p.memoizedProps,p=p.memoizedState,u=a.stateNode;try{var Nt=rn(a.type,f,a.elementType===a.type);i=u.getSnapshotBeforeUpdate(Nt,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Mt){ne(a,a.return,Mt)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)lp(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":lp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Ie=i;break}Ie=r.return}}function N_(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:cs(i,a),u&4&&ll(5,a);break;case 1:if(cs(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(b){ne(a,a.return,b)}else{var f=rn(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(b){ne(a,a.return,b)}}u&64&&R_(a),u&512&&ol(a,a.return);break;case 3:if(cs(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{pv(i,r)}catch(b){ne(a,a.return,b)}}break;case 27:r===null&&u&4&&O_(a);case 26:case 5:cs(i,a),r===null&&u&4&&M_(a),u&512&&ol(a,a.return);break;case 12:cs(i,a);break;case 13:cs(i,a),u&4&&P_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=Vw.bind(null,a),uR(i,a))));break;case 22:if(u=a.memoizedState!==null||Ir,!u){r=r!==null&&r.memoizedState!==null||xe,f=Ir;var p=xe;Ir=u,(xe=r)&&!p?fs(i,a,(a.subtreeFlags&8772)!==0):cs(i,a),Ir=f,xe=p}break;case 30:break;default:cs(i,a)}}function I_(i){var r=i.alternate;r!==null&&(i.alternate=null,I_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&zs(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var he=null,Je=!1;function Ur(i,r,a){for(a=a.child;a!==null;)U_(i,r,a),a=a.sibling}function U_(i,r,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Hs,a)}catch{}switch(a.tag){case 26:xe||nr(a,r),Ur(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xe||nr(a,r);var u=he,f=Je;vs(a.type)&&(he=a.stateNode,Je=!1),Ur(i,r,a),yl(a.stateNode),he=u,Je=f;break;case 5:xe||nr(a,r);case 6:if(u=he,f=Je,he=null,Ur(i,r,a),he=u,Je=f,he!==null)if(Je)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(a.stateNode)}catch(p){ne(a,r,p)}else try{he.removeChild(a.stateNode)}catch(p){ne(a,r,p)}break;case 18:he!==null&&(Je?(i=he,T1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Sl(i)):T1(he,a.stateNode));break;case 4:u=he,f=Je,he=a.stateNode.containerInfo,Je=!0,Ur(i,r,a),he=u,Je=f;break;case 0:case 11:case 14:case 15:xe||hs(2,a,r),xe||hs(4,a,r),Ur(i,r,a);break;case 1:xe||(nr(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&C_(a,r,u)),Ur(i,r,a);break;case 21:Ur(i,r,a);break;case 22:xe=(u=xe)||a.memoizedState!==null,Ur(i,r,a),xe=u;break;default:Ur(i,r,a)}}function P_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Sl(i)}catch(a){ne(r,r.return,a)}}function Lw(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new B_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new B_),r;default:throw Error(s(435,i.tag))}}function Id(i,r){var a=Lw(i);r.forEach(function(u){var f=jw.bind(null,i,u);a.has(u)||(a.add(u),u.then(f,f))})}function si(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u],p=i,b=r,C=b;t:for(;C!==null;){switch(C.tag){case 27:if(vs(C.type)){he=C.stateNode,Je=!1;break t}break;case 5:he=C.stateNode,Je=!1;break t;case 3:case 4:he=C.stateNode.containerInfo,Je=!0;break t}C=C.return}if(he===null)throw Error(s(160));U_(p,b,f),he=null,Je=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)L_(r,i),r=r.sibling}var Li=null;function L_(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:si(r,i),ni(i),u&4&&(hs(3,i,i.return),ll(3,i),hs(5,i,i.return));break;case 1:si(r,i),ni(i),u&512&&(xe||a===null||nr(a,a.return)),u&64&&Ir&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var f=Li;if(si(r,i),ni(i),u&512&&(xe||a===null||nr(a,a.return)),u&4){var p=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){t:{u=i.type,a=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Jr]||p[Ce]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),He(p,u,a),p[Ce]=i,pe(p),u=p;break t;case"link":var b=O1("link","href",f).get(u+(a.href||""));if(b){for(var C=0;C<b.length;C++)if(p=b[C],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(C,1);break e}}p=f.createElement(u),He(p,u,a),f.head.appendChild(p);break;case"meta":if(b=O1("meta","content",f).get(u+(a.content||""))){for(C=0;C<b.length;C++)if(p=b[C],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(C,1);break e}}p=f.createElement(u),He(p,u,a),f.head.appendChild(p);break;default:throw Error(s(468,u))}p[Ce]=i,pe(p),u=p}i.stateNode=u}else B1(f,i.type,i.stateNode);else i.stateNode=D1(f,u,i.memoizedProps);else p!==u?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,u===null?B1(f,i.type,i.stateNode):D1(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Dd(i,i.memoizedProps,a.memoizedProps)}break;case 27:si(r,i),ni(i),u&512&&(xe||a===null||nr(a,a.return)),a!==null&&u&4&&Dd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(si(r,i),ni(i),u&512&&(xe||a===null||nr(a,a.return)),i.flags&32){f=i.stateNode;try{Dn(f,"")}catch(Q){ne(i,i.return,Q)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,Dd(i,f,a!==null?a.memoizedProps:f)),u&1024&&(Nd=!0);break;case 6:if(si(r,i),ni(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(Q){ne(i,i.return,Q)}}break;case 3:if(Ou=null,f=Li,Li=Mu(r.containerInfo),si(r,i),Li=f,ni(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Sl(r.containerInfo)}catch(Q){ne(i,i.return,Q)}Nd&&(Nd=!1,F_(i));break;case 4:u=Li,Li=Mu(i.stateNode.containerInfo),si(r,i),ni(i),Li=u;break;case 12:si(r,i),ni(i);break;case 13:si(r,i),ni(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hd=Wt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Id(i,u)));break;case 22:f=i.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,j=Ir,et=xe;if(Ir=j||f,xe=et||L,si(r,i),xe=et,Ir=j,ni(i),u&8192)t:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||L||Ir||xe||sn(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){L=a=r;try{if(p=L.stateNode,f)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{C=L.stateNode;var at=L.memoizedProps.style,K=at!=null&&at.hasOwnProperty("display")?at.display:null;C.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){ne(L,L.return,Q)}}}else if(r.tag===6){if(a===null){L=r;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Q){ne(L,L.return,Q)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Id(i,a))));break;case 19:si(r,i),ni(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Id(i,u)));break;case 30:break;case 21:break;default:si(r,i),ni(i)}}function ni(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(D_(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=Od(i);gu(i,p,f);break;case 5:var b=a.stateNode;a.flags&32&&(Dn(b,""),a.flags&=-33);var C=Od(i);gu(i,C,b);break;case 3:case 4:var L=a.stateNode.containerInfo,j=Od(i);Bd(i,j,L);break;default:throw Error(s(161))}}catch(et){ne(i,i.return,et)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function F_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;F_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function cs(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)N_(i,r.alternate,r),r=r.sibling}function sn(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:hs(4,r,r.return),sn(r);break;case 1:nr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&C_(r,r.return,a),sn(r);break;case 27:yl(r.stateNode);case 26:case 5:nr(r,r.return),sn(r);break;case 22:r.memoizedState===null&&sn(r);break;case 30:sn(r);break;default:sn(r)}i=i.sibling}}function fs(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=i,p=r,b=p.flags;switch(p.tag){case 0:case 11:case 15:fs(f,p,a),ll(4,p);break;case 1:if(fs(f,p,a),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){ne(u,u.return,j)}if(u=p,f=u.updateQueue,f!==null){var C=u.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)dv(L[f],C)}catch(j){ne(u,u.return,j)}}a&&b&64&&R_(p),ol(p,p.return);break;case 27:O_(p);case 26:case 5:fs(f,p,a),a&&u===null&&b&4&&M_(p),ol(p,p.return);break;case 12:fs(f,p,a);break;case 13:fs(f,p,a),a&&b&4&&P_(f,p);break;case 22:p.memoizedState===null&&fs(f,p,a),ol(p,p.return);break;case 30:break;default:fs(f,p,a)}r=r.sibling}}function Ud(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&qa(a))}function Pd(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&qa(i))}function ar(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)G_(i,r,a,u),r=r.sibling}function G_(i,r,a,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ar(i,r,a,u),f&2048&&ll(9,r);break;case 1:ar(i,r,a,u);break;case 3:ar(i,r,a,u),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&qa(i)));break;case 12:if(f&2048){ar(i,r,a,u),i=r.stateNode;try{var p=r.memoizedProps,b=p.id,C=p.onPostCommit;typeof C=="function"&&C(b,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){ne(r,r.return,L)}}else ar(i,r,a,u);break;case 13:ar(i,r,a,u);break;case 23:break;case 22:p=r.stateNode,b=r.alternate,r.memoizedState!==null?p._visibility&2?ar(i,r,a,u):ul(i,r):p._visibility&2?ar(i,r,a,u):(p._visibility|=2,$n(i,r,a,u,(r.subtreeFlags&10256)!==0)),f&2048&&Ud(b,r);break;case 24:ar(i,r,a,u),f&2048&&Pd(r.alternate,r);break;default:ar(i,r,a,u)}}function $n(i,r,a,u,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=i,b=r,C=a,L=u,j=b.flags;switch(b.tag){case 0:case 11:case 15:$n(p,b,C,L,f),ll(8,b);break;case 23:break;case 22:var et=b.stateNode;b.memoizedState!==null?et._visibility&2?$n(p,b,C,L,f):ul(p,b):(et._visibility|=2,$n(p,b,C,L,f)),f&&j&2048&&Ud(b.alternate,b);break;case 24:$n(p,b,C,L,f),f&&j&2048&&Pd(b.alternate,b);break;default:$n(p,b,C,L,f)}r=r.sibling}}function ul(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,f=u.flags;switch(u.tag){case 22:ul(a,u),f&2048&&Ud(u.alternate,u);break;case 24:ul(a,u),f&2048&&Pd(u.alternate,u);break;default:ul(a,u)}r=r.sibling}}var hl=8192;function Zn(i){if(i.subtreeFlags&hl)for(i=i.child;i!==null;)H_(i),i=i.sibling}function H_(i){switch(i.tag){case 26:Zn(i),i.flags&hl&&i.memoizedState!==null&&ER(Li,i.memoizedState,i.memoizedProps);break;case 5:Zn(i);break;case 3:case 4:var r=Li;Li=Mu(i.stateNode.containerInfo),Zn(i),Li=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=hl,hl=16777216,Zn(i),hl=r):Zn(i));break;default:Zn(i)}}function k_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function cl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ie=u,X_(u,i)}k_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)z_(i),i=i.sibling}function z_(i){switch(i.tag){case 0:case 11:case 15:cl(i),i.flags&2048&&hs(9,i,i.return);break;case 3:cl(i);break;case 12:cl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,yu(i)):cl(i);break;default:cl(i)}}function yu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ie=u,X_(u,i)}k_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:hs(8,r,r.return),yu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,yu(r));break;default:yu(r)}i=i.sibling}}function X_(i,r){for(;Ie!==null;){var a=Ie;switch(a.tag){case 0:case 11:case 15:hs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:qa(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ie=u;else t:for(a=i;Ie!==null;){u=Ie;var f=u.sibling,p=u.return;if(I_(u),u===a){Ie=null;break t}if(f!==null){f.return=p,Ie=f;break t}Ie=p}}}var Fw={getCacheForType:function(i){var r=Ve(Me),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a}},Gw=typeof WeakMap=="function"?WeakMap:Map,Qt=0,le=null,Xt=null,jt=0,Jt=0,ai=null,ds=!1,Kn=!1,Ld=!1,Pr=0,ge=0,ps=0,nn=0,Fd=0,Ti=0,Qn=0,fl=null,ti=null,Gd=!1,Hd=0,vu=1/0,_u=null,ms=null,Ge=0,gs=null,Jn=null,ta=0,kd=0,zd=null,Y_=null,dl=0,Xd=null;function li(){if((Qt&2)!==0&&jt!==0)return jt&-jt;if(S.T!==null){var i=kn;return i!==0?i:Zd()}return Ze()}function V_(){Ti===0&&(Ti=(jt&536870912)===0||Zt?Kt():536870912);var i=Ei.current;return i!==null&&(i.flags|=32),Ti}function oi(i,r,a){(i===le&&(Jt===2||Jt===9)||i.cancelPendingCommit!==null)&&(ea(i,0),ys(i,jt,Ti,!1)),$e(i,a),((Qt&2)===0||i!==le)&&(i===le&&((Qt&2)===0&&(nn|=a),ge===4&&ys(i,jt,Ti,!1)),lr(i))}function j_(i,r,a){if((Qt&6)!==0)throw Error(s(327));var u=!a&&(r&124)===0&&(r&i.expiredLanes)===0||J(i,r),f=u?zw(i,r):jd(i,r,!0),p=u;do{if(f===0){Kn&&!u&&ys(i,r,0,!1);break}else{if(a=i.current.alternate,p&&!Hw(a)){f=jd(i,r,!1),p=!1;continue}if(f===2){if(p=r,i.errorRecoveryDisabledLanes&p)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;t:{var C=i;f=fl;var L=C.current.memoizedState.isDehydrated;if(L&&(ea(C,b).flags|=256),b=jd(C,b,!1),b!==2){if(Ld&&!L){C.errorRecoveryDisabledLanes|=p,nn|=p,f=4;break t}p=ti,ti=f,p!==null&&(ti===null?ti=p:ti.push.apply(ti,p))}f=b}if(p=!1,f!==2)continue}}if(f===1){ea(i,0),ys(i,r,0,!0);break}t:{switch(u=i,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ys(u,r,Ti,!ds);break t;case 2:ti=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Hd+300-Wt(),10<f)){if(ys(u,r,Ti,!ds),$(u,0,!0)!==0)break t;u.timeoutHandle=b1(q_.bind(null,u,a,ti,_u,Gd,r,Ti,nn,Qn,ds,p,2,-0,0),f);break t}q_(u,a,ti,_u,Gd,r,Ti,nn,Qn,ds,p,0,-0,0)}}break}while(!0);lr(i)}function q_(i,r,a,u,f,p,b,C,L,j,et,at,K,Q){if(i.timeoutHandle=-1,at=r.subtreeFlags,(at&8192||(at&16785408)===16785408)&&(xl={stylesheets:null,count:0,unsuspend:bR},H_(r),at=TR(),at!==null)){i.cancelPendingCommit=at(t1.bind(null,i,r,p,a,u,f,b,C,L,et,1,K,Q)),ys(i,p,b,!j);return}t1(i,r,p,a,u,f,b,C,L)}function Hw(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var f=a[u],p=f.getSnapshot;f=f.value;try{if(!ii(p(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ys(i,r,a,u){r&=~Fd,r&=~nn,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var f=r;0<f;){var p=31-Re(f),b=1<<p;u[p]=-1,f&=~b}a!==0&&Ye(i,a,r)}function xu(){return(Qt&6)===0?(pl(0),!1):!0}function Yd(){if(Xt!==null){if(Jt===0)var i=Xt.return;else i=Xt,Cr=Qs=null,ld(i),qn=null,sl=0,i=Xt;for(;i!==null;)w_(i.alternate,i),i=i.return;Xt=null}}function ea(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,sR(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Yd(),le=i,Xt=a=Sr(i.current,null),jt=r,Jt=0,ai=null,ds=!1,Kn=J(i,r),Ld=!1,Qn=Ti=Fd=nn=ps=ge=0,ti=fl=null,Gd=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var f=31-Re(u),p=1<<f;r|=i[f],u&=~p}return Pr=r,zo(),a}function W_(i,r){Ht=null,S.H=lu,r===$a||r===Ko?(r=cv(),Jt=3):r===ov?(r=cv(),Jt=4):Jt=r===f_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ai=r,Xt===null&&(ge=1,fu(i,vi(r,i.current)))}function $_(){var i=S.H;return S.H=lu,i===null?lu:i}function Z_(){var i=S.A;return S.A=Fw,i}function Vd(){ge=4,ds||(jt&4194048)!==jt&&Ei.current!==null||(Kn=!0),(ps&134217727)===0&&(nn&134217727)===0||le===null||ys(le,jt,Ti,!1)}function jd(i,r,a){var u=Qt;Qt|=2;var f=$_(),p=Z_();(le!==i||jt!==r)&&(_u=null,ea(i,r)),r=!1;var b=ge;t:do try{if(Jt!==0&&Xt!==null){var C=Xt,L=ai;switch(Jt){case 8:Yd(),b=6;break t;case 3:case 2:case 9:case 6:Ei.current===null&&(r=!0);var j=Jt;if(Jt=0,ai=null,ia(i,C,L,j),a&&Kn){b=0;break t}break;default:j=Jt,Jt=0,ai=null,ia(i,C,L,j)}}kw(),b=ge;break}catch(et){W_(i,et)}while(!0);return r&&i.shellSuspendCounter++,Cr=Qs=null,Qt=u,S.H=f,S.A=p,Xt===null&&(le=null,jt=0,zo()),b}function kw(){for(;Xt!==null;)K_(Xt)}function zw(i,r){var a=Qt;Qt|=2;var u=$_(),f=Z_();le!==i||jt!==r?(_u=null,vu=Wt()+500,ea(i,r)):Kn=J(i,r);t:do try{if(Jt!==0&&Xt!==null){r=Xt;var p=ai;e:switch(Jt){case 1:Jt=0,ai=null,ia(i,r,p,1);break;case 2:case 9:if(uv(p)){Jt=0,ai=null,Q_(r);break}r=function(){Jt!==2&&Jt!==9||le!==i||(Jt=7),lr(i)},p.then(r,r);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:uv(p)?(Jt=0,ai=null,Q_(r)):(Jt=0,ai=null,ia(i,r,p,7));break;case 5:var b=null;switch(Xt.tag){case 26:b=Xt.memoizedState;case 5:case 27:var C=Xt;if(!b||N1(b)){Jt=0,ai=null;var L=C.sibling;if(L!==null)Xt=L;else{var j=C.return;j!==null?(Xt=j,bu(j)):Xt=null}break e}}Jt=0,ai=null,ia(i,r,p,5);break;case 6:Jt=0,ai=null,ia(i,r,p,6);break;case 8:Yd(),ge=6;break t;default:throw Error(s(462))}}Xw();break}catch(et){W_(i,et)}while(!0);return Cr=Qs=null,S.H=u,S.A=f,Qt=a,Xt!==null?0:(le=null,jt=0,zo(),ge)}function Xw(){for(;Xt!==null&&!At();)K_(Xt)}function K_(i){var r=A_(i.alternate,i,Pr);i.memoizedProps=i.pendingProps,r===null?bu(i):Xt=r}function Q_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=v_(a,r,r.pendingProps,r.type,void 0,jt);break;case 11:r=v_(a,r,r.pendingProps,r.type.render,r.ref,jt);break;case 5:ld(r);default:w_(a,r),r=Xt=Jy(r,Pr),r=A_(a,r,Pr)}i.memoizedProps=i.pendingProps,r===null?bu(i):Xt=r}function ia(i,r,a,u){Cr=Qs=null,ld(r),qn=null,sl=0;var f=r.return;try{if(Bw(i,f,r,a,jt)){ge=1,fu(i,vi(a,i.current)),Xt=null;return}}catch(p){if(f!==null)throw Xt=f,p;ge=1,fu(i,vi(a,i.current)),Xt=null;return}r.flags&32768?(Zt||u===1?i=!0:Kn||(jt&536870912)!==0?i=!1:(ds=i=!0,(u===2||u===9||u===3||u===6)&&(u=Ei.current,u!==null&&u.tag===13&&(u.flags|=16384))),J_(r,i)):bu(r)}function bu(i){var r=i;do{if((r.flags&32768)!==0){J_(r,ds);return}i=r.return;var a=Iw(r.alternate,r,Pr);if(a!==null){Xt=a;return}if(r=r.sibling,r!==null){Xt=r;return}Xt=r=i}while(r!==null);ge===0&&(ge=5)}function J_(i,r){do{var a=Uw(i.alternate,i);if(a!==null){a.flags&=32767,Xt=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Xt=i;return}Xt=i=a}while(i!==null);ge=6,Xt=null}function t1(i,r,a,u,f,p,b,C,L){i.cancelPendingCommit=null;do Eu();while(Ge!==0);if((Qt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(p=r.lanes|r.childLanes,p|=Pf,vr(i,a,p,b,C,L),i===le&&(Xt=le=null,jt=0),Jn=r,gs=i,ta=a,kd=p,zd=f,Y_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,qw(ze,function(){return n1(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=S.T,S.T=null,f=O.p,O.p=2,b=Qt,Qt|=4;try{Pw(i,r,a)}finally{Qt=b,O.p=f,S.T=u}}Ge=1,e1(),i1(),r1()}}function e1(){if(Ge===1){Ge=0;var i=gs,r=Jn,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=S.T,S.T=null;var u=O.p;O.p=2;var f=Qt;Qt|=4;try{L_(r,i);var p=sp,b=Xy(i.containerInfo),C=p.focusedElem,L=p.selectionRange;if(b!==C&&C&&C.ownerDocument&&zy(C.ownerDocument.documentElement,C)){if(L!==null&&Of(C)){var j=L.start,et=L.end;if(et===void 0&&(et=j),"selectionStart"in C)C.selectionStart=j,C.selectionEnd=Math.min(et,C.value.length);else{var at=C.ownerDocument||document,K=at&&at.defaultView||window;if(K.getSelection){var Q=K.getSelection(),Nt=C.textContent.length,Mt=Math.min(L.start,Nt),se=L.end===void 0?Mt:Math.min(L.end,Nt);!Q.extend&&Mt>se&&(b=se,se=Mt,Mt=b);var X=ky(C,Mt),H=ky(C,se);if(X&&H&&(Q.rangeCount!==1||Q.anchorNode!==X.node||Q.anchorOffset!==X.offset||Q.focusNode!==H.node||Q.focusOffset!==H.offset)){var V=at.createRange();V.setStart(X.node,X.offset),Q.removeAllRanges(),Mt>se?(Q.addRange(V),Q.extend(H.node,H.offset)):(V.setEnd(H.node,H.offset),Q.addRange(V))}}}}for(at=[],Q=C;Q=Q.parentNode;)Q.nodeType===1&&at.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<at.length;C++){var st=at[C];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}Iu=!!rp,sp=rp=null}finally{Qt=f,O.p=u,S.T=a}}i.current=r,Ge=2}}function i1(){if(Ge===2){Ge=0;var i=gs,r=Jn,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=S.T,S.T=null;var u=O.p;O.p=2;var f=Qt;Qt|=4;try{N_(i,r.alternate,r)}finally{Qt=f,O.p=u,S.T=a}}Ge=3}}function r1(){if(Ge===4||Ge===3){Ge=0,wt();var i=gs,r=Jn,a=ta,u=Y_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ge=5:(Ge=0,Jn=gs=null,s1(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(ms=null),tr(a),r=r.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Hs,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=S.T,f=O.p,O.p=2,S.T=null;try{for(var p=i.onRecoverableError,b=0;b<u.length;b++){var C=u[b];p(C.value,{componentStack:C.stack})}}finally{S.T=r,O.p=f}}(ta&3)!==0&&Eu(),lr(i),f=i.pendingLanes,(a&4194090)!==0&&(f&42)!==0?i===Xd?dl++:(dl=0,Xd=i):dl=0,pl(0)}}function s1(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,qa(r)))}function Eu(i){return e1(),i1(),r1(),n1()}function n1(){if(Ge!==5)return!1;var i=gs,r=kd;kd=0;var a=tr(ta),u=S.T,f=O.p;try{O.p=32>a?32:a,S.T=null,a=zd,zd=null;var p=gs,b=ta;if(Ge=0,Jn=gs=null,ta=0,(Qt&6)!==0)throw Error(s(331));var C=Qt;if(Qt|=4,z_(p.current),G_(p,p.current,b,a),Qt=C,pl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Hs,p)}catch{}return!0}finally{O.p=f,S.T=u,s1(i,r)}}function a1(i,r,a){r=vi(a,r),r=bd(i.stateNode,r,2),i=as(i,r,2),i!==null&&($e(i,2),lr(i))}function ne(i,r,a){if(i.tag===3)a1(i,i,a);else for(;r!==null;){if(r.tag===3){a1(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ms===null||!ms.has(u))){i=vi(a,i),a=h_(2),u=as(r,a,2),u!==null&&(c_(a,u,r,i),$e(u,2),lr(u));break}}r=r.return}}function qd(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new Gw;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(a)||(Ld=!0,f.add(a),i=Yw.bind(null,i,r,a),r.then(i,i))}function Yw(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,le===i&&(jt&a)===a&&(ge===4||ge===3&&(jt&62914560)===jt&&300>Wt()-Hd?(Qt&2)===0&&ea(i,0):Fd|=a,Qn===jt&&(Qn=0)),lr(i)}function l1(i,r){r===0&&(r=ee()),i=Ln(i,r),i!==null&&($e(i,r),lr(i))}function Vw(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),l1(i,a)}function jw(i,r){var a=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),l1(i,a)}function qw(i,r){return Bt(i,r)}var Tu=null,ra=null,Wd=!1,Au=!1,$d=!1,an=0;function lr(i){i!==ra&&i.next===null&&(ra===null?Tu=ra=i:ra=ra.next=i),Au=!0,Wd||(Wd=!0,$w())}function pl(i,r){if(!$d&&Au){$d=!0;do for(var a=!1,u=Tu;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var b=u.suspendedLanes,C=u.pingedLanes;p=(1<<31-Re(42|i)+1)-1,p&=f&~(b&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,c1(u,p))}else p=jt,p=$(u,u===le?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||J(u,p)||(a=!0,c1(u,p));u=u.next}while(a);$d=!1}}function Ww(){o1()}function o1(){Au=Wd=!1;var i=0;an!==0&&(rR()&&(i=an),an=0);for(var r=Wt(),a=null,u=Tu;u!==null;){var f=u.next,p=u1(u,r);p===0?(u.next=null,a===null?Tu=f:a.next=f,f===null&&(ra=a)):(a=u,(i!==0||(p&3)!==0)&&(Au=!0)),u=f}pl(i)}function u1(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var b=31-Re(p),C=1<<b,L=f[b];L===-1?((C&a)===0||(C&u)!==0)&&(f[b]=qt(C,r)):L<=r&&(i.expiredLanes|=C),p&=~C}if(r=le,a=jt,a=$(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(Jt===2||Jt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Gt(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||J(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&Gt(u),tr(a)){case 2:case 8:a=Ni;break;case 32:a=ze;break;case 268435456:a=yr;break;default:a=ze}return u=h1.bind(null,i),a=Bt(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&Gt(u),i.callbackPriority=2,i.callbackNode=null,2}function h1(i,r){if(Ge!==0&&Ge!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Eu()&&i.callbackNode!==a)return null;var u=jt;return u=$(i,i===le?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(j_(i,u,r),u1(i,Wt()),i.callbackNode!=null&&i.callbackNode===a?h1.bind(null,i):null)}function c1(i,r){if(Eu())return null;j_(i,r,!0)}function $w(){nR(function(){(Qt&6)!==0?Bt(gr,Ww):o1()})}function Zd(){return an===0&&(an=Kt()),an}function f1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Uo(""+i)}function d1(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function Zw(i,r,a,u,f){if(r==="submit"&&a&&a.stateNode===f){var p=f1((f[Te]||null).action),b=u.submitter;b&&(r=(r=b[Te]||null)?f1(r.formAction):b.getAttribute("formAction"),r!==null&&(p=r,b=null));var C=new Go("action","action",null,u,f);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(an!==0){var L=b?d1(f,b):new FormData(f);gd(a,{pending:!0,data:L,method:f.method,action:p},null,L)}}else typeof p=="function"&&(C.preventDefault(),L=b?d1(f,b):new FormData(f),gd(a,{pending:!0,data:L,method:f.method,action:p},p,L))},currentTarget:f}]})}}for(var Kd=0;Kd<Uf.length;Kd++){var Qd=Uf[Kd],Kw=Qd.toLowerCase(),Qw=Qd[0].toUpperCase()+Qd.slice(1);Pi(Kw,"on"+Qw)}Pi(jy,"onAnimationEnd"),Pi(qy,"onAnimationIteration"),Pi(Wy,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(mw,"onTransitionRun"),Pi(gw,"onTransitionStart"),Pi(yw,"onTransitionCancel"),Pi($y,"onTransitionEnd"),Er("onMouseEnter",["mouseout","mouseover"]),Er("onMouseLeave",["mouseout","mouseover"]),Er("onPointerEnter",["pointerout","pointerover"]),Er("onPointerLeave",["pointerout","pointerover"]),br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),br("onBeforeInput",["compositionend","keypress","textInput","paste"]),br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ml));function p1(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],f=u.event;u=u.listeners;t:{var p=void 0;if(r)for(var b=u.length-1;0<=b;b--){var C=u[b],L=C.instance,j=C.currentTarget;if(C=C.listener,L!==p&&f.isPropagationStopped())break t;p=C,f.currentTarget=j;try{p(f)}catch(et){cu(et)}f.currentTarget=null,p=L}else for(b=0;b<u.length;b++){if(C=u[b],L=C.instance,j=C.currentTarget,C=C.listener,L!==p&&f.isPropagationStopped())break t;p=C,f.currentTarget=j;try{p(f)}catch(et){cu(et)}f.currentTarget=null,p=L}}}}function Yt(i,r){var a=r[Qr];a===void 0&&(a=r[Qr]=new Set);var u=i+"__bubble";a.has(u)||(m1(r,i,2,!1),a.add(u))}function Jd(i,r,a){var u=0;r&&(u|=4),m1(a,i,u,r)}var Su="_reactListening"+Math.random().toString(36).slice(2);function tp(i){if(!i[Su]){i[Su]=!0,xr.forEach(function(a){a!=="selectionchange"&&(Jw.has(a)||Jd(a,!1,i),Jd(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Su]||(r[Su]=!0,Jd("selectionchange",!1,r))}}function m1(i,r,a,u){switch(G1(r)){case 2:var f=wR;break;case 8:f=RR;break;default:f=pp}a=f.bind(null,r,a,i),f=void 0,!Ef||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(r,a,{capture:!0,passive:f}):i.addEventListener(r,a,!0):f!==void 0?i.addEventListener(r,a,{passive:f}):i.addEventListener(r,a,!1)}function ep(i,r,a,u,f){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var C=u.stateNode.containerInfo;if(C===f)break;if(b===4)for(b=u.return;b!==null;){var L=b.tag;if((L===3||L===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;C!==null;){if(b=_r(C),b===null)return;if(L=b.tag,L===5||L===6||L===26||L===27){u=p=b;continue t}C=C.parentNode}}u=u.return}Ey(function(){var j=p,et=xf(a),at=[];t:{var K=Zy.get(i);if(K!==void 0){var Q=Go,Nt=i;switch(i){case"keypress":if(Lo(a)===0)break t;case"keydown":case"keyup":Q=qS;break;case"focusin":Nt="focus",Q=wf;break;case"focusout":Nt="blur",Q=wf;break;case"beforeblur":case"afterblur":Q=wf;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=US;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=ZS;break;case jy:case qy:case Wy:Q=FS;break;case $y:Q=QS;break;case"scroll":case"scrollend":Q=NS;break;case"wheel":Q=tw;break;case"copy":case"cut":case"paste":Q=HS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Ry;break;case"toggle":case"beforetoggle":Q=iw}var Mt=(r&4)!==0,se=!Mt&&(i==="scroll"||i==="scrollend"),X=Mt?K!==null?K+"Capture":null:K;Mt=[];for(var H=j,V;H!==null;){var st=H;if(V=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||V===null||X===null||(st=Ia(H,X),st!=null&&Mt.push(gl(H,st,V))),se)break;H=H.return}0<Mt.length&&(K=new Q(K,Nt,null,a,et),at.push({event:K,listeners:Mt}))}}if((r&7)===0){t:{if(K=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",K&&a!==_f&&(Nt=a.relatedTarget||a.fromElement)&&(_r(Nt)||Nt[er]))break t;if((Q||K)&&(K=et.window===et?et:(K=et.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(Nt=a.relatedTarget||a.toElement,Q=j,Nt=Nt?_r(Nt):null,Nt!==null&&(se=o(Nt),Mt=Nt.tag,Nt!==se||Mt!==5&&Mt!==27&&Mt!==6)&&(Nt=null)):(Q=null,Nt=j),Q!==Nt)){if(Mt=Sy,st="onMouseLeave",X="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Mt=Ry,st="onPointerLeave",X="onPointerEnter",H="pointer"),se=Q==null?K:ts(Q),V=Nt==null?K:ts(Nt),K=new Mt(st,H+"leave",Q,a,et),K.target=se,K.relatedTarget=V,st=null,_r(et)===j&&(Mt=new Mt(X,H+"enter",Nt,a,et),Mt.target=V,Mt.relatedTarget=se,st=Mt),se=st,Q&&Nt)e:{for(Mt=Q,X=Nt,H=0,V=Mt;V;V=sa(V))H++;for(V=0,st=X;st;st=sa(st))V++;for(;0<H-V;)Mt=sa(Mt),H--;for(;0<V-H;)X=sa(X),V--;for(;H--;){if(Mt===X||X!==null&&Mt===X.alternate)break e;Mt=sa(Mt),X=sa(X)}Mt=null}else Mt=null;Q!==null&&g1(at,K,Q,Mt,!1),Nt!==null&&se!==null&&g1(at,se,Nt,Mt,!0)}}t:{if(K=j?ts(j):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var xt=Uy;else if(Ny(K))if(Py)xt=fw;else{xt=hw;var kt=uw}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?j&&vf(j.elementType)&&(xt=Uy):xt=cw;if(xt&&(xt=xt(i,j))){Iy(at,xt,a,et);break t}kt&&kt(i,K,j),i==="focusout"&&j&&K.type==="number"&&j.memoizedProps.value!=null&&yf(K,"number",K.value)}switch(kt=j?ts(j):window,i){case"focusin":(Ny(kt)||kt.contentEditable==="true")&&(In=kt,Bf=j,za=null);break;case"focusout":za=Bf=In=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Yy(at,a,et);break;case"selectionchange":if(pw)break;case"keydown":case"keyup":Yy(at,a,et)}var Ct;if(Cf)t:{switch(i){case"compositionstart":var Ot="onCompositionStart";break t;case"compositionend":Ot="onCompositionEnd";break t;case"compositionupdate":Ot="onCompositionUpdate";break t}Ot=void 0}else Nn?Oy(i,a)&&(Ot="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ot="onCompositionStart");Ot&&(Cy&&a.locale!=="ko"&&(Nn||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&Nn&&(Ct=Ty()):(is=et,Tf="value"in is?is.value:is.textContent,Nn=!0)),kt=wu(j,Ot),0<kt.length&&(Ot=new wy(Ot,i,null,a,et),at.push({event:Ot,listeners:kt}),Ct?Ot.data=Ct:(Ct=By(a),Ct!==null&&(Ot.data=Ct)))),(Ct=sw?nw(i,a):aw(i,a))&&(Ot=wu(j,"onBeforeInput"),0<Ot.length&&(kt=new wy("onBeforeInput","beforeinput",null,a,et),at.push({event:kt,listeners:Ot}),kt.data=Ct)),Zw(at,i,j,a,et)}p1(at,r)})}function gl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function wu(i,r){for(var a=r+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ia(i,a),f!=null&&u.unshift(gl(i,f,p)),f=Ia(i,r),f!=null&&u.push(gl(i,f,p))),i.tag===3)return u;i=i.return}return[]}function sa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function g1(i,r,a,u,f){for(var p=r._reactName,b=[];a!==null&&a!==u;){var C=a,L=C.alternate,j=C.stateNode;if(C=C.tag,L!==null&&L===u)break;C!==5&&C!==26&&C!==27||j===null||(L=j,f?(j=Ia(a,p),j!=null&&b.unshift(gl(a,j,L))):f||(j=Ia(a,p),j!=null&&b.push(gl(a,j,L)))),a=a.return}b.length!==0&&i.push({event:r,listeners:b})}var tR=/\r\n?/g,eR=/\u0000|\uFFFD/g;function y1(i){return(typeof i=="string"?i:""+i).replace(tR,`
`).replace(eR,"")}function v1(i,r){return r=y1(r),y1(i)===r}function Ru(){}function re(i,r,a,u,f,p){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Dn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Dn(i,""+u);break;case"className":Bo(i,"class",u);break;case"tabIndex":Bo(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Bo(i,a,u);break;case"style":xy(i,u,p);break;case"data":if(r!=="object"){Bo(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Uo(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&re(i,r,"name",f.name,f,null),re(i,r,"formEncType",f.formEncType,f,null),re(i,r,"formMethod",f.formMethod,f,null),re(i,r,"formTarget",f.formTarget,f,null)):(re(i,r,"encType",f.encType,f,null),re(i,r,"method",f.method,f,null),re(i,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Uo(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Ru);break;case"onScroll":u!=null&&Yt("scroll",i);break;case"onScrollEnd":u!=null&&Yt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=Uo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Yt("beforetoggle",i),Yt("toggle",i),Oo(i,"popover",u);break;case"xlinkActuate":Tr(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Tr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Tr(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Tr(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Tr(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Tr(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Tr(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Tr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Tr(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Oo(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=OS.get(a)||a,Oo(i,a,u))}}function ip(i,r,a,u,f,p){switch(a){case"style":xy(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?Dn(i,u):(typeof u=="number"||typeof u=="bigint")&&Dn(i,""+u);break;case"onScroll":u!=null&&Yt("scroll",i);break;case"onScrollEnd":u!=null&&Yt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ru);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),p=i[Te]||null,p=p!=null?p[a]:null,typeof p=="function"&&i.removeEventListener(r,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,f);break t}a in i?i[a]=u:u===!0?i.setAttribute(a,""):Oo(i,a,u)}}}function He(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",i),Yt("load",i);var u=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var b=a[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:re(i,r,p,b,a,null)}}f&&re(i,r,"srcSet",a.srcSet,a,null),u&&re(i,r,"src",a.src,a,null);return;case"input":Yt("invalid",i);var C=p=b=f=null,L=null,j=null;for(u in a)if(a.hasOwnProperty(u)){var et=a[u];if(et!=null)switch(u){case"name":f=et;break;case"type":b=et;break;case"checked":L=et;break;case"defaultChecked":j=et;break;case"value":p=et;break;case"defaultValue":C=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,r));break;default:re(i,r,u,et,a,null)}}gy(i,p,C,L,j,b,f,!1),No(i);return;case"select":Yt("invalid",i),u=b=p=null;for(f in a)if(a.hasOwnProperty(f)&&(C=a[f],C!=null))switch(f){case"value":p=C;break;case"defaultValue":b=C;break;case"multiple":u=C;default:re(i,r,f,C,a,null)}r=p,a=b,i.multiple=!!u,r!=null?Mn(i,!!u,r,!1):a!=null&&Mn(i,!!u,a,!0);return;case"textarea":Yt("invalid",i),p=f=u=null;for(b in a)if(a.hasOwnProperty(b)&&(C=a[b],C!=null))switch(b){case"value":u=C;break;case"defaultValue":f=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:re(i,r,b,C,a,null)}vy(i,u,f,p),No(i);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(u=a[L],u!=null))switch(L){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:re(i,r,L,u,a,null)}return;case"dialog":Yt("beforetoggle",i),Yt("toggle",i),Yt("cancel",i),Yt("close",i);break;case"iframe":case"object":Yt("load",i);break;case"video":case"audio":for(u=0;u<ml.length;u++)Yt(ml[u],i);break;case"image":Yt("error",i),Yt("load",i);break;case"details":Yt("toggle",i);break;case"embed":case"source":case"link":Yt("error",i),Yt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(u=a[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:re(i,r,j,u,a,null)}return;default:if(vf(r)){for(et in a)a.hasOwnProperty(et)&&(u=a[et],u!==void 0&&ip(i,r,et,u,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(u=a[C],u!=null&&re(i,r,C,u,a,null))}function iR(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,b=null,C=null,L=null,j=null,et=null;for(Q in a){var at=a[Q];if(a.hasOwnProperty(Q)&&at!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":L=at;default:u.hasOwnProperty(Q)||re(i,r,Q,null,u,at)}}for(var K in u){var Q=u[K];if(at=a[K],u.hasOwnProperty(K)&&(Q!=null||at!=null))switch(K){case"type":p=Q;break;case"name":f=Q;break;case"checked":j=Q;break;case"defaultChecked":et=Q;break;case"value":b=Q;break;case"defaultValue":C=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==at&&re(i,r,K,Q,u,at)}}gf(i,b,C,L,j,et,p,f);return;case"select":Q=b=C=K=null;for(p in a)if(L=a[p],a.hasOwnProperty(p)&&L!=null)switch(p){case"value":break;case"multiple":Q=L;default:u.hasOwnProperty(p)||re(i,r,p,null,u,L)}for(f in u)if(p=u[f],L=a[f],u.hasOwnProperty(f)&&(p!=null||L!=null))switch(f){case"value":K=p;break;case"defaultValue":C=p;break;case"multiple":b=p;default:p!==L&&re(i,r,f,p,u,L)}r=C,a=b,u=Q,K!=null?Mn(i,!!a,K,!1):!!u!=!!a&&(r!=null?Mn(i,!!a,r,!0):Mn(i,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(C in a)if(f=a[C],a.hasOwnProperty(C)&&f!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:re(i,r,C,null,u,f)}for(b in u)if(f=u[b],p=a[b],u.hasOwnProperty(b)&&(f!=null||p!=null))switch(b){case"value":K=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&re(i,r,b,f,u,p)}yy(i,K,Q);return;case"option":for(var Nt in a)if(K=a[Nt],a.hasOwnProperty(Nt)&&K!=null&&!u.hasOwnProperty(Nt))switch(Nt){case"selected":i.selected=!1;break;default:re(i,r,Nt,null,u,K)}for(L in u)if(K=u[L],Q=a[L],u.hasOwnProperty(L)&&K!==Q&&(K!=null||Q!=null))switch(L){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:re(i,r,L,K,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in a)K=a[Mt],a.hasOwnProperty(Mt)&&K!=null&&!u.hasOwnProperty(Mt)&&re(i,r,Mt,null,u,K);for(j in u)if(K=u[j],Q=a[j],u.hasOwnProperty(j)&&K!==Q&&(K!=null||Q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:re(i,r,j,K,u,Q)}return;default:if(vf(r)){for(var se in a)K=a[se],a.hasOwnProperty(se)&&K!==void 0&&!u.hasOwnProperty(se)&&ip(i,r,se,void 0,u,K);for(et in u)K=u[et],Q=a[et],!u.hasOwnProperty(et)||K===Q||K===void 0&&Q===void 0||ip(i,r,et,K,u,Q);return}}for(var X in a)K=a[X],a.hasOwnProperty(X)&&K!=null&&!u.hasOwnProperty(X)&&re(i,r,X,null,u,K);for(at in u)K=u[at],Q=a[at],!u.hasOwnProperty(at)||K===Q||K==null&&Q==null||re(i,r,at,K,u,Q)}var rp=null,sp=null;function Cu(i){return i.nodeType===9?i:i.ownerDocument}function _1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x1(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function np(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ap=null;function rR(){var i=window.event;return i&&i.type==="popstate"?i===ap?!1:(ap=i,!0):(ap=null,!1)}var b1=typeof setTimeout=="function"?setTimeout:void 0,sR=typeof clearTimeout=="function"?clearTimeout:void 0,E1=typeof Promise=="function"?Promise:void 0,nR=typeof queueMicrotask=="function"?queueMicrotask:typeof E1<"u"?function(i){return E1.resolve(null).then(i).catch(aR)}:b1;function aR(i){setTimeout(function(){throw i})}function vs(i){return i==="head"}function T1(i,r){var a=r,u=0,f=0;do{var p=a.nextSibling;if(i.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<u&&8>u){a=u;var b=i.ownerDocument;if(a&1&&yl(b.documentElement),a&2&&yl(b.body),a&4)for(a=b.head,yl(a),b=a.firstChild;b;){var C=b.nextSibling,L=b.nodeName;b[Jr]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=C}}if(f===0){i.removeChild(p),Sl(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:u=a.charCodeAt(0)-48;else u=0;a=p}while(a);Sl(r)}function lp(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":lp(a),zs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function lR(i,r,a,u){for(;i.nodeType===1;){var f=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Jr])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Fi(i.nextSibling),i===null)break}return null}function oR(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Fi(i.nextSibling),i===null))return null;return i}function op(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function uR(i,r){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Fi(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var up=null;function A1(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return i;r--}else a==="/$"&&r++}i=i.previousSibling}return null}function S1(i,r,a){switch(r=Cu(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function yl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);zs(i)}var Ai=new Map,w1=new Set;function Mu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Lr=O.d;O.d={f:hR,r:cR,D:fR,C:dR,L:pR,m:mR,X:yR,S:gR,M:vR};function hR(){var i=Lr.f(),r=xu();return i||r}function cR(i){var r=ir(i);r!==null&&r.tag===5&&r.type==="form"?jv(r):Lr.r(i)}var na=typeof document>"u"?null:document;function R1(i,r,a){var u=na;if(u&&typeof r=="string"&&r){var f=yi(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),w1.has(f)||(w1.add(f),i={rel:i,crossOrigin:a,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),He(r,"link",i),pe(r),u.head.appendChild(r)))}}function fR(i){Lr.D(i),R1("dns-prefetch",i,null)}function dR(i,r){Lr.C(i,r),R1("preconnect",i,r)}function pR(i,r,a){Lr.L(i,r,a);var u=na;if(u&&i&&r){var f='link[rel="preload"][as="'+yi(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+yi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+yi(a.imageSizes)+'"]')):f+='[href="'+yi(i)+'"]';var p=f;switch(r){case"style":p=aa(i);break;case"script":p=la(i)}Ai.has(p)||(i=g({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Ai.set(p,i),u.querySelector(f)!==null||r==="style"&&u.querySelector(vl(p))||r==="script"&&u.querySelector(_l(p))||(r=u.createElement("link"),He(r,"link",i),pe(r),u.head.appendChild(r)))}}function mR(i,r){Lr.m(i,r);var a=na;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+yi(u)+'"][href="'+yi(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=la(i)}if(!Ai.has(p)&&(i=g({rel:"modulepreload",href:i},r),Ai.set(p,i),a.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(_l(p)))return}u=a.createElement("link"),He(u,"link",i),pe(u),a.head.appendChild(u)}}}function gR(i,r,a){Lr.S(i,r,a);var u=na;if(u&&i){var f=es(u).hoistableStyles,p=aa(i);r=r||"default";var b=f.get(p);if(!b){var C={loading:0,preload:null};if(b=u.querySelector(vl(p)))C.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Ai.get(p))&&hp(i,a);var L=b=u.createElement("link");pe(L),He(L,"link",i),L._p=new Promise(function(j,et){L.onload=j,L.onerror=et}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Du(b,r,u)}b={type:"stylesheet",instance:b,count:1,state:C},f.set(p,b)}}}function yR(i,r){Lr.X(i,r);var a=na;if(a&&i){var u=es(a).hoistableScripts,f=la(i),p=u.get(f);p||(p=a.querySelector(_l(f)),p||(i=g({src:i,async:!0},r),(r=Ai.get(f))&&cp(i,r),p=a.createElement("script"),pe(p),He(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function vR(i,r){Lr.M(i,r);var a=na;if(a&&i){var u=es(a).hoistableScripts,f=la(i),p=u.get(f);p||(p=a.querySelector(_l(f)),p||(i=g({src:i,async:!0,type:"module"},r),(r=Ai.get(f))&&cp(i,r),p=a.createElement("script"),pe(p),He(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function C1(i,r,a,u){var f=(f=nt.current)?Mu(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=aa(a.href),a=es(f).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=aa(a.href);var p=es(f).hoistableStyles,b=p.get(i);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,b),(p=f.querySelector(vl(i)))&&!p._p&&(b.instance=p,b.state.loading=5),Ai.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ai.set(i,a),p||_R(f,i,a,b.state))),r&&u===null)throw Error(s(528,""));return b}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=la(a),a=es(f).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function aa(i){return'href="'+yi(i)+'"'}function vl(i){return'link[rel="stylesheet"]['+i+"]"}function M1(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function _R(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),He(r,"link",a),pe(r),i.head.appendChild(r))}function la(i){return'[src="'+yi(i)+'"]'}function _l(i){return"script[async]"+i}function D1(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+yi(a.href)+'"]');if(u)return r.instance=u,pe(u),u;var f=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),pe(u),He(u,"style",f),Du(u,a.precedence,i),r.instance=u;case"stylesheet":f=aa(a.href);var p=i.querySelector(vl(f));if(p)return r.state.loading|=4,r.instance=p,pe(p),p;u=M1(a),(f=Ai.get(f))&&hp(u,f),p=(i.ownerDocument||i).createElement("link"),pe(p);var b=p;return b._p=new Promise(function(C,L){b.onload=C,b.onerror=L}),He(p,"link",u),r.state.loading|=4,Du(p,a.precedence,i),r.instance=p;case"script":return p=la(a.src),(f=i.querySelector(_l(p)))?(r.instance=f,pe(f),f):(u=a,(f=Ai.get(p))&&(u=g({},a),cp(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),pe(f),He(f,"link",u),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Du(u,a.precedence,i));return r.instance}function Du(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,b=0;b<u.length;b++){var C=u[b];if(C.dataset.precedence===r)p=C;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function hp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function cp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Ou=null;function O1(i,r,a){if(Ou===null){var u=new Map,f=Ou=new Map;f.set(a,u)}else f=Ou,u=f.get(a),u||(u=new Map,f.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),f=0;f<a.length;f++){var p=a[f];if(!(p[Jr]||p[Ce]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(r)||"";b=i+b;var C=u.get(b);C?C.push(p):u.set(b,[p])}}return u}function B1(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function xR(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function N1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var xl=null;function bR(){}function ER(i,r,a){if(xl===null)throw Error(s(475));var u=xl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=aa(a.href),p=i.querySelector(vl(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Bu.bind(u),i.then(u,u)),r.state.loading|=4,r.instance=p,pe(p);return}p=i.ownerDocument||i,a=M1(a),(f=Ai.get(f))&&hp(a,f),p=p.createElement("link"),pe(p);var b=p;b._p=new Promise(function(C,L){b.onload=C,b.onerror=L}),He(p,"link",a),r.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Bu.bind(u),i.addEventListener("load",r),i.addEventListener("error",r))}}function TR(){if(xl===null)throw Error(s(475));var i=xl;return i.stylesheets&&i.count===0&&fp(i,i.stylesheets),0<i.count?function(r){var a=setTimeout(function(){if(i.stylesheets&&fp(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(a)}}:null}function Bu(){if(this.count--,this.count===0){if(this.stylesheets)fp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Nu=null;function fp(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Nu=new Map,r.forEach(AR,i),Nu=null,Bu.call(i))}function AR(i,r){if(!(r.state.loading&4)){var a=Nu.get(i);if(a)var u=a.get(null);else{a=new Map,Nu.set(i,a);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var b=f[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),u=b)}u&&a.set(null,u)}f=r.instance,b=f.getAttribute("data-precedence"),p=a.get(b)||u,p===u&&a.set(null,f),a.set(b,f),this.count++,u=Bu.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var bl={$$typeof:D,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function SR(i,r,a,u,f,p,b,C){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.hiddenUpdates=Ut(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function I1(i,r,a,u,f,p,b,C,L,j,et,at){return i=new SR(i,r,a,b,C,L,j,at),r=1,p===!0&&(r|=24),p=ri(3,null,null,r),i.current=p,p.stateNode=i,r=qf(),r.refCount++,i.pooledCache=r,r.refCount++,p.memoizedState={element:u,isDehydrated:a,cache:r},Kf(p),i}function U1(i){return i?(i=Fn,i):Fn}function P1(i,r,a,u,f,p){f=U1(f),u.context===null?u.context=f:u.pendingContext=f,u=ns(r),u.payload={element:a},p=p===void 0?null:p,p!==null&&(u.callback=p),a=as(i,u,r),a!==null&&(oi(a,i,r),Ka(a,i,r))}function L1(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function dp(i,r){L1(i,r),(i=i.alternate)&&L1(i,r)}function F1(i){if(i.tag===13){var r=Ln(i,67108864);r!==null&&oi(r,i,67108864),dp(i,67108864)}}var Iu=!0;function wR(i,r,a,u){var f=S.T;S.T=null;var p=O.p;try{O.p=2,pp(i,r,a,u)}finally{O.p=p,S.T=f}}function RR(i,r,a,u){var f=S.T;S.T=null;var p=O.p;try{O.p=8,pp(i,r,a,u)}finally{O.p=p,S.T=f}}function pp(i,r,a,u){if(Iu){var f=mp(u);if(f===null)ep(i,r,u,Uu,a),H1(i,u);else if(MR(f,i,r,a,u))u.stopPropagation();else if(H1(i,u),r&4&&-1<CR.indexOf(i)){for(;f!==null;){var p=ir(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=mi(p.pendingLanes);if(b!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;b;){var L=1<<31-Re(b);C.entanglements[1]|=L,b&=~L}lr(p),(Qt&6)===0&&(vu=Wt()+500,pl(0))}}break;case 13:C=Ln(p,2),C!==null&&oi(C,p,2),xu(),dp(p,2)}if(p=mp(u),p===null&&ep(i,r,u,Uu,a),p===f)break;f=p}f!==null&&u.stopPropagation()}else ep(i,r,u,null,a)}}function mp(i){return i=xf(i),gp(i)}var Uu=null;function gp(i){if(Uu=null,i=_r(i),i!==null){var r=o(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=h(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Uu=i,null}function G1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case gr:return 2;case Ni:return 8;case ze:case $r:return 32;case yr:return 268435456;default:return 32}default:return 32}}var yp=!1,_s=null,xs=null,bs=null,El=new Map,Tl=new Map,Es=[],CR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H1(i,r){switch(i){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":El.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(r.pointerId)}}function Al(i,r,a,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},r!==null&&(r=ir(r),r!==null&&F1(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function MR(i,r,a,u,f){switch(r){case"focusin":return _s=Al(_s,i,r,a,u,f),!0;case"dragenter":return xs=Al(xs,i,r,a,u,f),!0;case"mouseover":return bs=Al(bs,i,r,a,u,f),!0;case"pointerover":var p=f.pointerId;return El.set(p,Al(El.get(p)||null,i,r,a,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Tl.set(p,Al(Tl.get(p)||null,i,r,a,u,f)),!0}return!1}function k1(i){var r=_r(i.target);if(r!==null){var a=o(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){i.blockedOn=r,Do(i.priority,function(){if(a.tag===13){var u=li();u=ks(u);var f=Ln(a,u);f!==null&&oi(f,a,u),dp(a,u)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Pu(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=mp(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);_f=u,a.target.dispatchEvent(u),_f=null}else return r=ir(a),r!==null&&F1(r),i.blockedOn=a,!1;r.shift()}return!0}function z1(i,r,a){Pu(i)&&a.delete(r)}function DR(){yp=!1,_s!==null&&Pu(_s)&&(_s=null),xs!==null&&Pu(xs)&&(xs=null),bs!==null&&Pu(bs)&&(bs=null),El.forEach(z1),Tl.forEach(z1)}function Lu(i,r){i.blockedOn===r&&(i.blockedOn=null,yp||(yp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,DR)))}var Fu=null;function X1(i){Fu!==i&&(Fu=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Fu===i&&(Fu=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],f=i[r+2];if(typeof u!="function"){if(gp(u||a)===null)continue;break}var p=ir(a);p!==null&&(i.splice(r,3),r-=3,gd(p,{pending:!0,data:f,method:a.method,action:u},u,f))}}))}function Sl(i){function r(L){return Lu(L,i)}_s!==null&&Lu(_s,i),xs!==null&&Lu(xs,i),bs!==null&&Lu(bs,i),El.forEach(r),Tl.forEach(r);for(var a=0;a<Es.length;a++){var u=Es[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Es.length&&(a=Es[0],a.blockedOn===null);)k1(a),a.blockedOn===null&&Es.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var f=a[u],p=a[u+1],b=f[Te]||null;if(typeof p=="function")b||X1(a);else if(b){var C=null;if(p&&p.hasAttribute("formAction")){if(f=p,b=p[Te]||null)C=b.formAction;else if(gp(f)!==null)continue}else C=b.action;typeof C=="function"?a[u+1]=C:(a.splice(u,3),u-=3),X1(a)}}}function vp(i){this._internalRoot=i}Gu.prototype.render=vp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=li();P1(a,u,i,r,null,null)},Gu.prototype.unmount=vp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;P1(i.current,2,null,i,null,null),xu(),r[er]=null}};function Gu(i){this._internalRoot=i}Gu.prototype.unstable_scheduleHydration=function(i){if(i){var r=Ze();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Es.length&&r!==0&&r<Es[a].priority;a++);Es.splice(a,0,i),a===0&&k1(i)}};var Y1=t.version;if(Y1!=="19.1.0")throw Error(s(527,Y1,"19.1.0"));O.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=d(r),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var OR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{Hs=Hu.inject(OR),Xe=Hu}catch{}}return da.createRoot=function(i,r){if(!l(i))throw Error(s(299));var a=!1,u="",f=a_,p=l_,b=o_,C=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(C=r.unstable_transitionCallbacks)),r=I1(i,1,!1,null,null,a,u,f,p,b,C,null),i[er]=r.current,tp(i),new vp(r)},da.hydrateRoot=function(i,r,a){if(!l(i))throw Error(s(299));var u=!1,f="",p=a_,b=l_,C=o_,L=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(L=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),r=I1(i,1,!0,r,a??null,u,f,p,b,C,L,j),r.context=U1(null),a=r.current,u=li(),u=ks(u),f=ns(u),f.callback=null,as(a,f,u),a=u,r.current.lanes=a,$e(r,a),lr(r),i[er]=r.current,tp(i),new Gu(r)},da.version="19.1.0",da}var Up;function sx(){if(Up)return $u.exports;Up=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),$u.exports=rx(),$u.exports}var nx=sx();const ax=hi(nx);var As=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(As||{}),Ju=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(Ju||{}),th=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(th||{}),Dt=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(Dt||{}),zi=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(zi||{}),ct=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(ct||{}),un=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(un||{}),Rt=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(Rt||{}),yt=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(yt||{}),Xi=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(Xi||{}),Fr=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(Fr||{}),Yi=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(Yi||{}),We=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(We||{}),Vi=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(Vi||{}),eh=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(eh||{}),ci=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(ci||{}),we=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(we||{}),be=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(be||{}),ji=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(ji||{});const gt={ADAPTER:{createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")},RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var ih=/iPhone/i,Pp=/iPod/i,Lp=/iPad/i,Fp=/\biOS-universal(?:.+)Mac\b/i,rh=/\bAndroid(?:.+)Mobile\b/i,Gp=/Android/i,hn=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Bl=/Silk/i,ur=/Windows Phone/i,Hp=/\bWindows(?:.+)ARM\b/i,kp=/BlackBerry/i,zp=/BB10/i,Xp=/Opera Mini/i,Yp=/\b(CriOS|Chrome)(?:.+)Mobile/i,Vp=/Mobile(?:.+)Firefox\b/i,jp=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function lx(n){return function(t){return t.test(n)}}function qp(n){var t={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?t.userAgent=n:n&&n.userAgent&&(t={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var e=t.userAgent,s=e.split("[FBAN");typeof s[1]<"u"&&(e=s[0]),s=e.split("Twitter"),typeof s[1]<"u"&&(e=s[0]);var l=lx(e),o={apple:{phone:l(ih)&&!l(ur),ipod:l(Pp),tablet:!l(ih)&&(l(Lp)||jp(t))&&!l(ur),universal:l(Fp),device:(l(ih)||l(Pp)||l(Lp)||l(Fp)||jp(t))&&!l(ur)},amazon:{phone:l(hn),tablet:!l(hn)&&l(Bl),device:l(hn)||l(Bl)},android:{phone:!l(ur)&&l(hn)||!l(ur)&&l(rh),tablet:!l(ur)&&!l(hn)&&!l(rh)&&(l(Bl)||l(Gp)),device:!l(ur)&&(l(hn)||l(Bl)||l(rh)||l(Gp))||l(/\bokhttp\b/i)},windows:{phone:l(ur),tablet:l(Hp),device:l(ur)||l(Hp)},other:{blackberry:l(kp),blackberry10:l(zp),opera:l(Xp),firefox:l(Vp),chrome:l(Yp),device:l(kp)||l(zp)||l(Xp)||l(Vp)||l(Yp)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const ox=qp.default??qp,hr=ox(globalThis.navigator);gt.RETINA_PREFIX=/@([0-9\.]+)x/,gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var sh={exports:{}},Wp;function ux(){return Wp||(Wp=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function l(d,m,g){this.fn=d,this.context=m,this.once=g||!1}function o(d,m,g,y,_){if(typeof g!="function")throw new TypeError("The listener must be a function");var x=new l(g,y||d,_),A=e?e+m:m;return d._events[A]?d._events[A].fn?d._events[A]=[d._events[A],x]:d._events[A].push(x):(d._events[A]=x,d._eventsCount++),d}function h(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],g,y;if(this._eventsCount===0)return m;for(y in g=this._events)t.call(g,y)&&m.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},c.prototype.listeners=function(m){var g=e?e+m:m,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,x=y.length,A=new Array(x);_<x;_++)A[_]=y[_].fn;return A},c.prototype.listenerCount=function(m){var g=e?e+m:m,y=this._events[g];return y?y.fn?1:y.length:0},c.prototype.emit=function(m,g,y,_,x,A){var w=e?e+m:m;if(!this._events[w])return!1;var v=this._events[w],E=arguments.length,R,D;if(v.fn){switch(v.once&&this.removeListener(m,v.fn,void 0,!0),E){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,g),!0;case 3:return v.fn.call(v.context,g,y),!0;case 4:return v.fn.call(v.context,g,y,_),!0;case 5:return v.fn.call(v.context,g,y,_,x),!0;case 6:return v.fn.call(v.context,g,y,_,x,A),!0}for(D=1,R=new Array(E-1);D<E;D++)R[D-1]=arguments[D];v.fn.apply(v.context,R)}else{var P=v.length,I;for(D=0;D<P;D++)switch(v[D].once&&this.removeListener(m,v[D].fn,void 0,!0),E){case 1:v[D].fn.call(v[D].context);break;case 2:v[D].fn.call(v[D].context,g);break;case 3:v[D].fn.call(v[D].context,g,y);break;case 4:v[D].fn.call(v[D].context,g,y,_);break;default:if(!R)for(I=1,R=new Array(E-1);I<E;I++)R[I-1]=arguments[I];v[D].fn.apply(v[D].context,R)}}return!0},c.prototype.on=function(m,g,y){return o(this,m,g,y,!1)},c.prototype.once=function(m,g,y){return o(this,m,g,y,!0)},c.prototype.removeListener=function(m,g,y,_){var x=e?e+m:m;if(!this._events[x])return this;if(!g)return h(this,x),this;var A=this._events[x];if(A.fn)A.fn===g&&(!_||A.once)&&(!y||A.context===y)&&h(this,x);else{for(var w=0,v=[],E=A.length;w<E;w++)(A[w].fn!==g||_&&!A[w].once||y&&A[w].context!==y)&&v.push(A[w]);v.length?this._events[x]=v.length===1?v[0]:v:h(this,x)}return this},c.prototype.removeAllListeners=function(m){var g;return m?(g=e?e+m:m,this._events[g]&&h(this,g)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c}(sh)),sh.exports}var hx=ux();const pa=hi(hx);var Nl={exports:{}},$p;function cx(){if($p)return Nl.exports;$p=1,Nl.exports=n,Nl.exports.default=n;function n(S,O,M){M=M||2;var k=O&&O.length,T=k?O[0]*M:S.length,B=t(S,0,T,M,!0),G=[];if(!B||B.next===B.prev)return G;var F,Z,it,nt,pt,ft,vt;if(k&&(B=d(S,O,B,M)),S.length>80*M){F=it=S[0],Z=nt=S[1];for(var ut=M;ut<T;ut+=M)pt=S[ut],ft=S[ut+1],pt<F&&(F=pt),ft<Z&&(Z=ft),pt>it&&(it=pt),ft>nt&&(nt=ft);vt=Math.max(it-F,nt-Z),vt=vt!==0?32767/vt:0}return s(B,G,M,F,Z,vt,0),G}function t(S,O,M,k,T){var B,G;if(T===ht(S,O,M,k)>0)for(B=O;B<M;B+=k)G=z(B,S[B],S[B+1],G);else for(B=M-k;B>=O;B-=k)G=z(B,S[B],S[B+1],G);return G&&P(G,G.next)&&(W(G),G=G.next),G}function e(S,O){if(!S)return S;O||(O=S);var M=S,k;do if(k=!1,!M.steiner&&(P(M,M.next)||D(M.prev,M,M.next)===0)){if(W(M),M=O=M.prev,M===M.next)break;k=!0}else M=M.next;while(k||M!==O);return O}function s(S,O,M,k,T,B,G){if(S){!G&&B&&x(S,k,T,B);for(var F=S,Z,it;S.prev!==S.next;){if(Z=S.prev,it=S.next,B?o(S,k,T,B):l(S)){O.push(Z.i/M|0),O.push(S.i/M|0),O.push(it.i/M|0),W(S),S=it.next,F=it.next;continue}if(S=it,S===F){G?G===1?(S=h(e(S),O,M),s(S,O,M,k,T,B,2)):G===2&&c(S,O,M,k,T,B):s(e(S),O,M,k,T,B,1);break}}}}function l(S){var O=S.prev,M=S,k=S.next;if(D(O,M,k)>=0)return!1;for(var T=O.x,B=M.x,G=k.x,F=O.y,Z=M.y,it=k.y,nt=T<B?T<G?T:G:B<G?B:G,pt=F<Z?F<it?F:it:Z<it?Z:it,ft=T>B?T>G?T:G:B>G?B:G,vt=F>Z?F>it?F:it:Z>it?Z:it,ut=k.next;ut!==O;){if(ut.x>=nt&&ut.x<=ft&&ut.y>=pt&&ut.y<=vt&&E(T,F,B,Z,G,it,ut.x,ut.y)&&D(ut.prev,ut,ut.next)>=0)return!1;ut=ut.next}return!0}function o(S,O,M,k){var T=S.prev,B=S,G=S.next;if(D(T,B,G)>=0)return!1;for(var F=T.x,Z=B.x,it=G.x,nt=T.y,pt=B.y,ft=G.y,vt=F<Z?F<it?F:it:Z<it?Z:it,ut=nt<pt?nt<ft?nt:ft:pt<ft?pt:ft,_t=F>Z?F>it?F:it:Z>it?Z:it,Tt=nt>pt?nt>ft?nt:ft:pt>ft?pt:ft,Bt=w(vt,ut,O,M,k),Gt=w(_t,Tt,O,M,k),At=S.prevZ,wt=S.nextZ;At&&At.z>=Bt&&wt&&wt.z<=Gt;){if(At.x>=vt&&At.x<=_t&&At.y>=ut&&At.y<=Tt&&At!==T&&At!==G&&E(F,nt,Z,pt,it,ft,At.x,At.y)&&D(At.prev,At,At.next)>=0||(At=At.prevZ,wt.x>=vt&&wt.x<=_t&&wt.y>=ut&&wt.y<=Tt&&wt!==T&&wt!==G&&E(F,nt,Z,pt,it,ft,wt.x,wt.y)&&D(wt.prev,wt,wt.next)>=0))return!1;wt=wt.nextZ}for(;At&&At.z>=Bt;){if(At.x>=vt&&At.x<=_t&&At.y>=ut&&At.y<=Tt&&At!==T&&At!==G&&E(F,nt,Z,pt,it,ft,At.x,At.y)&&D(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;wt&&wt.z<=Gt;){if(wt.x>=vt&&wt.x<=_t&&wt.y>=ut&&wt.y<=Tt&&wt!==T&&wt!==G&&E(F,nt,Z,pt,it,ft,wt.x,wt.y)&&D(wt.prev,wt,wt.next)>=0)return!1;wt=wt.nextZ}return!0}function h(S,O,M){var k=S;do{var T=k.prev,B=k.next.next;!P(T,B)&&I(T,k,k.next,B)&&rt(T,B)&&rt(B,T)&&(O.push(T.i/M|0),O.push(k.i/M|0),O.push(B.i/M|0),W(k),W(k.next),k=S=B),k=k.next}while(k!==S);return e(k)}function c(S,O,M,k,T,B){var G=S;do{for(var F=G.next.next;F!==G.prev;){if(G.i!==F.i&&R(G,F)){var Z=dt(G,F);G=e(G,G.next),Z=e(Z,Z.next),s(G,O,M,k,T,B,0),s(Z,O,M,k,T,B,0);return}F=F.next}G=G.next}while(G!==S)}function d(S,O,M,k){var T=[],B,G,F,Z,it;for(B=0,G=O.length;B<G;B++)F=O[B]*k,Z=B<G-1?O[B+1]*k:S.length,it=t(S,F,Z,k,!1),it===it.next&&(it.steiner=!0),T.push(v(it));for(T.sort(m),B=0;B<T.length;B++)M=g(T[B],M);return M}function m(S,O){return S.x-O.x}function g(S,O){var M=y(S,O);if(!M)return O;var k=dt(M,S);return e(k,k.next),e(M,M.next)}function y(S,O){var M=O,k=S.x,T=S.y,B=-1/0,G;do{if(T<=M.y&&T>=M.next.y&&M.next.y!==M.y){var F=M.x+(T-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(F<=k&&F>B&&(B=F,G=M.x<M.next.x?M:M.next,F===k))return G}M=M.next}while(M!==O);if(!G)return null;var Z=G,it=G.x,nt=G.y,pt=1/0,ft;M=G;do k>=M.x&&M.x>=it&&k!==M.x&&E(T<nt?k:B,T,it,nt,T<nt?B:k,T,M.x,M.y)&&(ft=Math.abs(T-M.y)/(k-M.x),rt(M,S)&&(ft<pt||ft===pt&&(M.x>G.x||M.x===G.x&&_(G,M)))&&(G=M,pt=ft)),M=M.next;while(M!==Z);return G}function _(S,O){return D(S.prev,S,O.prev)<0&&D(O.next,S,S.next)<0}function x(S,O,M,k){var T=S;do T.z===0&&(T.z=w(T.x,T.y,O,M,k)),T.prevZ=T.prev,T.nextZ=T.next,T=T.next;while(T!==S);T.prevZ.nextZ=null,T.prevZ=null,A(T)}function A(S){var O,M,k,T,B,G,F,Z,it=1;do{for(M=S,S=null,B=null,G=0;M;){for(G++,k=M,F=0,O=0;O<it&&(F++,k=k.nextZ,!!k);O++);for(Z=it;F>0||Z>0&&k;)F!==0&&(Z===0||!k||M.z<=k.z)?(T=M,M=M.nextZ,F--):(T=k,k=k.nextZ,Z--),B?B.nextZ=T:S=T,T.prevZ=B,B=T;M=k}B.nextZ=null,it*=2}while(G>1);return S}function w(S,O,M,k,T){return S=(S-M)*T|0,O=(O-k)*T|0,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,S|O<<1}function v(S){var O=S,M=S;do(O.x<M.x||O.x===M.x&&O.y<M.y)&&(M=O),O=O.next;while(O!==S);return M}function E(S,O,M,k,T,B,G,F){return(T-G)*(O-F)>=(S-G)*(B-F)&&(S-G)*(k-F)>=(M-G)*(O-F)&&(M-G)*(B-F)>=(T-G)*(k-F)}function R(S,O){return S.next.i!==O.i&&S.prev.i!==O.i&&!q(S,O)&&(rt(S,O)&&rt(O,S)&&lt(S,O)&&(D(S.prev,S,O.prev)||D(S,O.prev,O))||P(S,O)&&D(S.prev,S,S.next)>0&&D(O.prev,O,O.next)>0)}function D(S,O,M){return(O.y-S.y)*(M.x-O.x)-(O.x-S.x)*(M.y-O.y)}function P(S,O){return S.x===O.x&&S.y===O.y}function I(S,O,M,k){var T=U(D(S,O,M)),B=U(D(S,O,k)),G=U(D(M,k,S)),F=U(D(M,k,O));return!!(T!==B&&G!==F||T===0&&Y(S,M,O)||B===0&&Y(S,k,O)||G===0&&Y(M,S,k)||F===0&&Y(M,O,k))}function Y(S,O,M){return O.x<=Math.max(S.x,M.x)&&O.x>=Math.min(S.x,M.x)&&O.y<=Math.max(S.y,M.y)&&O.y>=Math.min(S.y,M.y)}function U(S){return S>0?1:S<0?-1:0}function q(S,O){var M=S;do{if(M.i!==S.i&&M.next.i!==S.i&&M.i!==O.i&&M.next.i!==O.i&&I(M,M.next,S,O))return!0;M=M.next}while(M!==S);return!1}function rt(S,O){return D(S.prev,S,S.next)<0?D(S,O,S.next)>=0&&D(S,S.prev,O)>=0:D(S,O,S.prev)<0||D(S,S.next,O)<0}function lt(S,O){var M=S,k=!1,T=(S.x+O.x)/2,B=(S.y+O.y)/2;do M.y>B!=M.next.y>B&&M.next.y!==M.y&&T<(M.next.x-M.x)*(B-M.y)/(M.next.y-M.y)+M.x&&(k=!k),M=M.next;while(M!==S);return k}function dt(S,O){var M=new tt(S.i,S.x,S.y),k=new tt(O.i,O.x,O.y),T=S.next,B=O.prev;return S.next=O,O.prev=S,M.next=T,T.prev=M,k.next=M,M.prev=k,B.next=k,k.prev=B,k}function z(S,O,M,k){var T=new tt(S,O,M);return k?(T.next=k.next,T.prev=k,k.next.prev=T,k.next=T):(T.prev=T,T.next=T),T}function W(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function tt(S,O,M){this.i=S,this.x=O,this.y=M,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(S,O,M,k){var T=O&&O.length,B=T?O[0]*M:S.length,G=Math.abs(ht(S,0,B,M));if(T)for(var F=0,Z=O.length;F<Z;F++){var it=O[F]*M,nt=F<Z-1?O[F+1]*M:S.length;G-=Math.abs(ht(S,it,nt,M))}var pt=0;for(F=0;F<k.length;F+=3){var ft=k[F]*M,vt=k[F+1]*M,ut=k[F+2]*M;pt+=Math.abs((S[ft]-S[ut])*(S[vt+1]-S[ft+1])-(S[ft]-S[vt])*(S[ut+1]-S[ft+1]))}return G===0&&pt===0?0:Math.abs((pt-G)/G)};function ht(S,O,M,k){for(var T=0,B=O,G=M-k;B<M;B+=k)T+=(S[G]-S[B])*(S[B+1]+S[G+1]),G=B;return T}return n.flatten=function(S){for(var O=S[0][0].length,M={vertices:[],holes:[],dimensions:O},k=0,T=0;T<S.length;T++){for(var B=0;B<S[T].length;B++)for(var G=0;G<O;G++)M.vertices.push(S[T][B][G]);T>0&&(k+=S[T-1].length,M.holes.push(k))}return M},Nl.exports}var fx=cx();const dx=hi(fx);var Ss={},ma={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var px=ma.exports,Zp;function mx(){return Zp||(Zp=1,function(n,t){(function(e){var s=t&&!t.nodeType&&t,l=n&&!n.nodeType&&n,o=typeof Hi=="object"&&Hi;(o.global===o||o.window===o||o.self===o)&&(e=o);var h,c=2147483647,d=36,m=1,g=26,y=38,_=700,x=72,A=128,w="-",v=/^xn--/,E=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=d-m,I=Math.floor,Y=String.fromCharCode,U;function q(T){throw new RangeError(D[T])}function rt(T,B){for(var G=T.length,F=[];G--;)F[G]=B(T[G]);return F}function lt(T,B){var G=T.split("@"),F="";G.length>1&&(F=G[0]+"@",T=G[1]),T=T.replace(R,".");var Z=T.split("."),it=rt(Z,B).join(".");return F+it}function dt(T){for(var B=[],G=0,F=T.length,Z,it;G<F;)Z=T.charCodeAt(G++),Z>=55296&&Z<=56319&&G<F?(it=T.charCodeAt(G++),(it&64512)==56320?B.push(((Z&1023)<<10)+(it&1023)+65536):(B.push(Z),G--)):B.push(Z);return B}function z(T){return rt(T,function(B){var G="";return B>65535&&(B-=65536,G+=Y(B>>>10&1023|55296),B=56320|B&1023),G+=Y(B),G}).join("")}function W(T){return T-48<10?T-22:T-65<26?T-65:T-97<26?T-97:d}function tt(T,B){return T+22+75*(T<26)-((B!=0)<<5)}function ht(T,B,G){var F=0;for(T=G?I(T/_):T>>1,T+=I(T/B);T>P*g>>1;F+=d)T=I(T/P);return I(F+(P+1)*T/(T+y))}function S(T){var B=[],G=T.length,F,Z=0,it=A,nt=x,pt,ft,vt,ut,_t,Tt,Bt,Gt,At;for(pt=T.lastIndexOf(w),pt<0&&(pt=0),ft=0;ft<pt;++ft)T.charCodeAt(ft)>=128&&q("not-basic"),B.push(T.charCodeAt(ft));for(vt=pt>0?pt+1:0;vt<G;){for(ut=Z,_t=1,Tt=d;vt>=G&&q("invalid-input"),Bt=W(T.charCodeAt(vt++)),(Bt>=d||Bt>I((c-Z)/_t))&&q("overflow"),Z+=Bt*_t,Gt=Tt<=nt?m:Tt>=nt+g?g:Tt-nt,!(Bt<Gt);Tt+=d)At=d-Gt,_t>I(c/At)&&q("overflow"),_t*=At;F=B.length+1,nt=ht(Z-ut,F,ut==0),I(Z/F)>c-it&&q("overflow"),it+=I(Z/F),Z%=F,B.splice(Z++,0,it)}return z(B)}function O(T){var B,G,F,Z,it,nt,pt,ft,vt,ut,_t,Tt=[],Bt,Gt,At,wt;for(T=dt(T),Bt=T.length,B=A,G=0,it=x,nt=0;nt<Bt;++nt)_t=T[nt],_t<128&&Tt.push(Y(_t));for(F=Z=Tt.length,Z&&Tt.push(w);F<Bt;){for(pt=c,nt=0;nt<Bt;++nt)_t=T[nt],_t>=B&&_t<pt&&(pt=_t);for(Gt=F+1,pt-B>I((c-G)/Gt)&&q("overflow"),G+=(pt-B)*Gt,B=pt,nt=0;nt<Bt;++nt)if(_t=T[nt],_t<B&&++G>c&&q("overflow"),_t==B){for(ft=G,vt=d;ut=vt<=it?m:vt>=it+g?g:vt-it,!(ft<ut);vt+=d)wt=ft-ut,At=d-ut,Tt.push(Y(tt(ut+wt%At,0))),ft=I(wt/At);Tt.push(Y(tt(ft,0))),it=ht(G,Gt,F==Z),G=0,++F}++G,++B}return Tt.join("")}function M(T){return lt(T,function(B){return v.test(B)?S(B.slice(4).toLowerCase()):B})}function k(T){return lt(T,function(B){return E.test(B)?"xn--"+O(B):B})}if(h={version:"1.4.1",ucs2:{decode:dt,encode:z},decode:S,encode:O,toASCII:k,toUnicode:M},s&&l)if(n.exports==s)l.exports=h;else for(U in h)h.hasOwnProperty(U)&&(s[U]=h[U]);else e.punycode=h})(px)}(ma,ma.exports)),ma.exports}var nh,Kp;function cn(){return Kp||(Kp=1,nh=TypeError),nh}const gx=on(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var ah,Qp;function Il(){if(Qp)return ah;Qp=1;var n=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=n&&t&&typeof t.get=="function"?t.get:null,s=n&&Map.prototype.forEach,l=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=l&&o&&typeof o.get=="function"?o.get:null,c=l&&Set.prototype.forEach,d=typeof WeakMap=="function"&&WeakMap.prototype,m=d?WeakMap.prototype.has:null,g=typeof WeakSet=="function"&&WeakSet.prototype,y=g?WeakSet.prototype.has:null,_=typeof WeakRef=="function"&&WeakRef.prototype,x=_?WeakRef.prototype.deref:null,A=Boolean.prototype.valueOf,w=Object.prototype.toString,v=Function.prototype.toString,E=String.prototype.match,R=String.prototype.slice,D=String.prototype.replace,P=String.prototype.toUpperCase,I=String.prototype.toLowerCase,Y=RegExp.prototype.test,U=Array.prototype.concat,q=Array.prototype.join,rt=Array.prototype.slice,lt=Math.floor,dt=typeof BigInt=="function"?BigInt.prototype.valueOf:null,z=Object.getOwnPropertySymbols,W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,tt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ht=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===tt||!0)?Symbol.toStringTag:null,S=Object.prototype.propertyIsEnumerable,O=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function($){return $.__proto__}:null);function M($,J){if($===1/0||$===-1/0||$!==$||$&&$>-1e3&&$<1e3||Y.call(/e/,J))return J;var qt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof $=="number"){var Kt=$<0?-lt(-$):lt($);if(Kt!==$){var ee=String(Kt),Ut=R.call(J,ee.length+1);return D.call(ee,qt,"$&_")+"."+D.call(D.call(Ut,/([0-9]{3})/g,"$&_"),/_$/,"")}}return D.call(J,qt,"$&_")}var k=gx,T=k.custom,B=Gt(T)?T:null,G={__proto__:null,double:'"',single:"'"},F={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};ah=function $(J,qt,Kt,ee){var Ut=qt||{};if(Wt(Ut,"quoteStyle")&&!Wt(G,Ut.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Wt(Ut,"maxStringLength")&&(typeof Ut.maxStringLength=="number"?Ut.maxStringLength<0&&Ut.maxStringLength!==1/0:Ut.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var $e=Wt(Ut,"customInspect")?Ut.customInspect:!0;if(typeof $e!="boolean"&&$e!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Wt(Ut,"indent")&&Ut.indent!==null&&Ut.indent!=="	"&&!(parseInt(Ut.indent,10)===Ut.indent&&Ut.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Wt(Ut,"numericSeparator")&&typeof Ut.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var vr=Ut.numericSeparator;if(typeof J>"u")return"undefined";if(J===null)return"null";if(typeof J=="boolean")return J?"true":"false";if(typeof J=="string")return Xe(J,Ut);if(typeof J=="number"){if(J===0)return 1/0/J>0?"0":"-0";var Ye=String(J);return vr?M(J,Ye):Ye}if(typeof J=="bigint"){var Ii=String(J)+"n";return vr?M(J,Ii):Ii}var ks=typeof Ut.depth>"u"?5:Ut.depth;if(typeof Kt>"u"&&(Kt=0),Kt>=ks&&ks>0&&typeof J=="object")return pt(J)?"[Array]":"[Object]";var tr=Rn(Ut,Kt);if(typeof ee>"u")ee=[];else if(Ni(ee,J)>=0)return"[Circular]";function Ze(xr,Xs,br){if(Xs&&(ee=rt.call(ee),ee.push(Xs)),br){var Er={depth:Ut.depth};return Wt(Ut,"quoteStyle")&&(Er.quoteStyle=Ut.quoteStyle),$(xr,Er,Kt+1,ee)}return $(xr,Ut,Kt+1,ee)}if(typeof J=="function"&&!vt(J)){var Do=gr(J),Ui=mi(J,Ze);return"[Function"+(Do?": "+Do:" (anonymous)")+"]"+(Ui.length>0?" { "+q.call(Ui,", ")+" }":"")}if(Gt(J)){var Ce=tt?D.call(String(J),/^(Symbol\(.*\))_[^)]*$/,"$1"):W.call(J);return typeof J=="object"&&!tt?Re(Ce):Ce}if(Hs(J)){for(var Te="<"+I.call(String(J.nodeName)),er=J.attributes||[],Qr=0;Qr<er.length;Qr++)Te+=" "+er[Qr].name+"="+Z(it(er[Qr].value),"double",Ut);return Te+=">",J.childNodes&&J.childNodes.length&&(Te+="..."),Te+="</"+I.call(String(J.nodeName))+">",Te}if(pt(J)){if(J.length===0)return"[]";var Oa=mi(J,Ze);return tr&&!ff(Oa)?"["+Kr(Oa,tr)+"]":"[ "+q.call(Oa,", ")+" ]"}if(ut(J)){var Ba=mi(J,Ze);return!("cause"in Error.prototype)&&"cause"in J&&!S.call(J,"cause")?"{ ["+String(J)+"] "+q.call(U.call("[cause]: "+Ze(J.cause),Ba),", ")+" }":Ba.length===0?"["+String(J)+"]":"{ ["+String(J)+"] "+q.call(Ba,", ")+" }"}if(typeof J=="object"&&$e){if(B&&typeof J[B]=="function"&&k)return k(J,{depth:ks-Kt});if($e!=="symbol"&&typeof J.inspect=="function")return J.inspect()}if(ze(J)){var Na=[];return s&&s.call(J,function(xr,Xs){Na.push(Ze(Xs,J,!0)+" => "+Ze(xr,J))}),Mo("Map",e.call(J),Na,tr)}if(Zr(J)){var Jr=[];return c&&c.call(J,function(xr){Jr.push(Ze(xr,J))}),Mo("Set",h.call(J),Jr,tr)}if($r(J))return Da("WeakMap");if(cf(J))return Da("WeakSet");if(yr(J))return Da("WeakRef");if(Tt(J))return Re(Ze(Number(J)));if(At(J))return Re(Ze(dt.call(J)));if(Bt(J))return Re(A.call(J));if(_t(J))return Re(Ze(String(J)));if(typeof window<"u"&&J===window)return"{ [object Window] }";if(typeof globalThis<"u"&&J===globalThis||typeof Hi<"u"&&J===Hi)return"{ [object globalThis] }";if(!ft(J)&&!vt(J)){var zs=mi(J,Ze),_r=O?O(J)===Object.prototype:J instanceof Object||J.constructor===Object,ir=J instanceof Object?"":"null prototype",ts=!_r&&ht&&Object(J)===J&&ht in J?R.call(ve(J),8,-1):ir?"Object":"",es=_r||typeof J.constructor!="function"?"":J.constructor.name?J.constructor.name+" ":"",pe=es+(ts||ir?"["+q.call(U.call([],ts||[],ir||[]),": ")+"] ":"");return zs.length===0?pe+"{}":tr?pe+"{"+Kr(zs,tr)+"}":pe+"{ "+q.call(zs,", ")+" }"}return String(J)};function Z($,J,qt){var Kt=qt.quoteStyle||J,ee=G[Kt];return ee+$+ee}function it($){return D.call(String($),/"/g,"&quot;")}function nt($){return!ht||!(typeof $=="object"&&(ht in $||typeof $[ht]<"u"))}function pt($){return ve($)==="[object Array]"&&nt($)}function ft($){return ve($)==="[object Date]"&&nt($)}function vt($){return ve($)==="[object RegExp]"&&nt($)}function ut($){return ve($)==="[object Error]"&&nt($)}function _t($){return ve($)==="[object String]"&&nt($)}function Tt($){return ve($)==="[object Number]"&&nt($)}function Bt($){return ve($)==="[object Boolean]"&&nt($)}function Gt($){if(tt)return $&&typeof $=="object"&&$ instanceof Symbol;if(typeof $=="symbol")return!0;if(!$||typeof $!="object"||!W)return!1;try{return W.call($),!0}catch{}return!1}function At($){if(!$||typeof $!="object"||!dt)return!1;try{return dt.call($),!0}catch{}return!1}var wt=Object.prototype.hasOwnProperty||function($){return $ in this};function Wt($,J){return wt.call($,J)}function ve($){return w.call($)}function gr($){if($.name)return $.name;var J=E.call(v.call($),/^function\s*([\w$]+)/);return J?J[1]:null}function Ni($,J){if($.indexOf)return $.indexOf(J);for(var qt=0,Kt=$.length;qt<Kt;qt++)if($[qt]===J)return qt;return-1}function ze($){if(!e||!$||typeof $!="object")return!1;try{e.call($);try{h.call($)}catch{return!0}return $ instanceof Map}catch{}return!1}function $r($){if(!m||!$||typeof $!="object")return!1;try{m.call($,m);try{y.call($,y)}catch{return!0}return $ instanceof WeakMap}catch{}return!1}function yr($){if(!x||!$||typeof $!="object")return!1;try{return x.call($),!0}catch{}return!1}function Zr($){if(!h||!$||typeof $!="object")return!1;try{h.call($);try{e.call($)}catch{return!0}return $ instanceof Set}catch{}return!1}function cf($){if(!y||!$||typeof $!="object")return!1;try{y.call($,y);try{m.call($,m)}catch{return!0}return $ instanceof WeakSet}catch{}return!1}function Hs($){return!$||typeof $!="object"?!1:typeof HTMLElement<"u"&&$ instanceof HTMLElement?!0:typeof $.nodeName=="string"&&typeof $.getAttribute=="function"}function Xe($,J){if($.length>J.maxStringLength){var qt=$.length-J.maxStringLength,Kt="... "+qt+" more character"+(qt>1?"s":"");return Xe(R.call($,0,J.maxStringLength),J)+Kt}var ee=F[J.quoteStyle||"single"];ee.lastIndex=0;var Ut=D.call(D.call($,ee,"\\$1"),/[\x00-\x1f]/g,Ji);return Z(Ut,"single",J)}function Ji($){var J=$.charCodeAt(0),qt={8:"b",9:"t",10:"n",12:"f",13:"r"}[J];return qt?"\\"+qt:"\\x"+(J<16?"0":"")+P.call(J.toString(16))}function Re($){return"Object("+$+")"}function Da($){return $+" { ? }"}function Mo($,J,qt,Kt){var ee=Kt?Kr(qt,Kt):q.call(qt,", ");return $+" ("+J+") {"+ee+"}"}function ff($){for(var J=0;J<$.length;J++)if(Ni($[J],`
`)>=0)return!1;return!0}function Rn($,J){var qt;if($.indent==="	")qt="	";else if(typeof $.indent=="number"&&$.indent>0)qt=q.call(Array($.indent+1)," ");else return null;return{base:qt,prev:q.call(Array(J+1),qt)}}function Kr($,J){if($.length===0)return"";var qt=`
`+J.prev+J.base;return qt+q.call($,","+qt)+`
`+J.prev}function mi($,J){var qt=pt($),Kt=[];if(qt){Kt.length=$.length;for(var ee=0;ee<$.length;ee++)Kt[ee]=Wt($,ee)?J($[ee],$):""}var Ut=typeof z=="function"?z($):[],$e;if(tt){$e={};for(var vr=0;vr<Ut.length;vr++)$e["$"+Ut[vr]]=Ut[vr]}for(var Ye in $)Wt($,Ye)&&(qt&&String(Number(Ye))===Ye&&Ye<$.length||tt&&$e["$"+Ye]instanceof Symbol||(Y.call(/[^\w$]/,Ye)?Kt.push(J(Ye,$)+": "+J($[Ye],$)):Kt.push(Ye+": "+J($[Ye],$))));if(typeof z=="function")for(var Ii=0;Ii<Ut.length;Ii++)S.call($,Ut[Ii])&&Kt.push("["+J(Ut[Ii])+"]: "+J($[Ut[Ii]],$));return Kt}return ah}var lh,Jp;function yx(){if(Jp)return lh;Jp=1;var n=Il(),t=cn(),e=function(c,d,m){for(var g=c,y;(y=g.next)!=null;g=y)if(y.key===d)return g.next=y.next,m||(y.next=c.next,c.next=y),y},s=function(c,d){if(c){var m=e(c,d);return m&&m.value}},l=function(c,d,m){var g=e(c,d);g?g.value=m:c.next={key:d,next:c.next,value:m}},o=function(c,d){return c?!!e(c,d):!1},h=function(c,d){if(c)return e(c,d,!0)};return lh=function(){var d,m={assert:function(g){if(!m.has(g))throw new t("Side channel does not contain "+n(g))},delete:function(g){var y=d&&d.next,_=h(d,g);return _&&y&&y===_&&(d=void 0),!!_},get:function(g){return s(d,g)},has:function(g){return o(d,g)},set:function(g,y){d||(d={next:void 0}),l(d,g,y)}};return m},lh}var oh,t0;function e0(){return t0||(t0=1,oh=Object),oh}var uh,i0;function vx(){return i0||(i0=1,uh=Error),uh}var hh,r0;function _x(){return r0||(r0=1,hh=EvalError),hh}var ch,s0;function xx(){return s0||(s0=1,ch=RangeError),ch}var fh,n0;function bx(){return n0||(n0=1,fh=ReferenceError),fh}var dh,a0;function Ex(){return a0||(a0=1,dh=SyntaxError),dh}var ph,l0;function Tx(){return l0||(l0=1,ph=URIError),ph}var mh,o0;function Ax(){return o0||(o0=1,mh=Math.abs),mh}var gh,u0;function Sx(){return u0||(u0=1,gh=Math.floor),gh}var yh,h0;function wx(){return h0||(h0=1,yh=Math.max),yh}var vh,c0;function Rx(){return c0||(c0=1,vh=Math.min),vh}var _h,f0;function Cx(){return f0||(f0=1,_h=Math.pow),_h}var xh,d0;function Mx(){return d0||(d0=1,xh=Math.round),xh}var bh,p0;function Dx(){return p0||(p0=1,bh=Number.isNaN||function(t){return t!==t}),bh}var Eh,m0;function Ox(){if(m0)return Eh;m0=1;var n=Dx();return Eh=function(e){return n(e)||e===0?e:e<0?-1:1},Eh}var Th,g0;function Bx(){return g0||(g0=1,Th=Object.getOwnPropertyDescriptor),Th}var Ah,y0;function v0(){if(y0)return Ah;y0=1;var n=Bx();if(n)try{n([],"length")}catch{n=null}return Ah=n,Ah}var Sh,_0;function Nx(){if(_0)return Sh;_0=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return Sh=n,Sh}var wh,x0;function Ix(){return x0||(x0=1,wh=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),s=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var l=42;t[e]=l;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var h=Object.getOwnPropertySymbols(t);if(h.length!==1||h[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,e);if(c.value!==l||c.enumerable!==!0)return!1}return!0}),wh}var Rh,b0;function Ux(){if(b0)return Rh;b0=1;var n=typeof Symbol<"u"&&Symbol,t=Ix();return Rh=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Rh}var Ch,E0;function T0(){return E0||(E0=1,Ch=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Ch}var Mh,A0;function S0(){if(A0)return Mh;A0=1;var n=e0();return Mh=n.getPrototypeOf||null,Mh}var Dh,w0;function Px(){if(w0)return Dh;w0=1;var n="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,e=Math.max,s="[object Function]",l=function(d,m){for(var g=[],y=0;y<d.length;y+=1)g[y]=d[y];for(var _=0;_<m.length;_+=1)g[_+d.length]=m[_];return g},o=function(d,m){for(var g=[],y=m,_=0;y<d.length;y+=1,_+=1)g[_]=d[y];return g},h=function(c,d){for(var m="",g=0;g<c.length;g+=1)m+=c[g],g+1<c.length&&(m+=d);return m};return Dh=function(d){var m=this;if(typeof m!="function"||t.apply(m)!==s)throw new TypeError(n+m);for(var g=o(arguments,1),y,_=function(){if(this instanceof y){var E=m.apply(this,l(g,arguments));return Object(E)===E?E:this}return m.apply(d,l(g,arguments))},x=e(0,m.length-g.length),A=[],w=0;w<x;w++)A[w]="$"+w;if(y=Function("binder","return function ("+h(A,",")+"){ return binder.apply(this,arguments); }")(_),m.prototype){var v=function(){};v.prototype=m.prototype,y.prototype=new v,v.prototype=null}return y},Dh}var Oh,R0;function Ul(){if(R0)return Oh;R0=1;var n=Px();return Oh=Function.prototype.bind||n,Oh}var Bh,C0;function Nh(){return C0||(C0=1,Bh=Function.prototype.call),Bh}var Ih,M0;function D0(){return M0||(M0=1,Ih=Function.prototype.apply),Ih}var Uh,O0;function Lx(){return O0||(O0=1,Uh=typeof Reflect<"u"&&Reflect&&Reflect.apply),Uh}var Ph,B0;function Fx(){if(B0)return Ph;B0=1;var n=Ul(),t=D0(),e=Nh(),s=Lx();return Ph=s||n.call(e,t),Ph}var Lh,N0;function I0(){if(N0)return Lh;N0=1;var n=Ul(),t=cn(),e=Nh(),s=Fx();return Lh=function(o){if(o.length<1||typeof o[0]!="function")throw new t("a function is required");return s(n,e,o)},Lh}var Fh,U0;function Gx(){if(U0)return Fh;U0=1;var n=I0(),t=v0(),e;try{e=[].__proto__===Array.prototype}catch(h){if(!h||typeof h!="object"||!("code"in h)||h.code!=="ERR_PROTO_ACCESS")throw h}var s=!!e&&t&&t(Object.prototype,"__proto__"),l=Object,o=l.getPrototypeOf;return Fh=s&&typeof s.get=="function"?n([s.get]):typeof o=="function"?function(c){return o(c==null?c:l(c))}:!1,Fh}var Gh,P0;function Hx(){if(P0)return Gh;P0=1;var n=T0(),t=S0(),e=Gx();return Gh=n?function(l){return n(l)}:t?function(l){if(!l||typeof l!="object"&&typeof l!="function")throw new TypeError("getProto: not an object");return t(l)}:e?function(l){return e(l)}:null,Gh}var Hh,L0;function kx(){if(L0)return Hh;L0=1;var n=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=Ul();return Hh=e.call(n,t),Hh}var kh,F0;function zh(){if(F0)return kh;F0=1;var n,t=e0(),e=vx(),s=_x(),l=xx(),o=bx(),h=Ex(),c=cn(),d=Tx(),m=Ax(),g=Sx(),y=wx(),_=Rx(),x=Cx(),A=Mx(),w=Ox(),v=Function,E=function(vt){try{return v('"use strict"; return ('+vt+").constructor;")()}catch{}},R=v0(),D=Nx(),P=function(){throw new c},I=R?function(){try{return arguments.callee,P}catch{try{return R(arguments,"callee").get}catch{return P}}}():P,Y=Ux()(),U=Hx(),q=S0(),rt=T0(),lt=D0(),dt=Nh(),z={},W=typeof Uint8Array>"u"||!U?n:U(Uint8Array),tt={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":Y&&U?U([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":s,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":z,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Y&&U?U(U([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Y||!U?n:U(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":R,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":l,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Y||!U?n:U(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Y&&U?U(""[Symbol.iterator]()):n,"%Symbol%":Y?Symbol:n,"%SyntaxError%":h,"%ThrowTypeError%":I,"%TypedArray%":W,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":dt,"%Function.prototype.apply%":lt,"%Object.defineProperty%":D,"%Object.getPrototypeOf%":q,"%Math.abs%":m,"%Math.floor%":g,"%Math.max%":y,"%Math.min%":_,"%Math.pow%":x,"%Math.round%":A,"%Math.sign%":w,"%Reflect.getPrototypeOf%":rt};if(U)try{null.error}catch(vt){var ht=U(U(vt));tt["%Error.prototype%"]=ht}var S=function vt(ut){var _t;if(ut==="%AsyncFunction%")_t=E("async function () {}");else if(ut==="%GeneratorFunction%")_t=E("function* () {}");else if(ut==="%AsyncGeneratorFunction%")_t=E("async function* () {}");else if(ut==="%AsyncGenerator%"){var Tt=vt("%AsyncGeneratorFunction%");Tt&&(_t=Tt.prototype)}else if(ut==="%AsyncIteratorPrototype%"){var Bt=vt("%AsyncGenerator%");Bt&&U&&(_t=U(Bt.prototype))}return tt[ut]=_t,_t},O={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=Ul(),k=kx(),T=M.call(dt,Array.prototype.concat),B=M.call(lt,Array.prototype.splice),G=M.call(dt,String.prototype.replace),F=M.call(dt,String.prototype.slice),Z=M.call(dt,RegExp.prototype.exec),it=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,nt=/\\(\\)?/g,pt=function(ut){var _t=F(ut,0,1),Tt=F(ut,-1);if(_t==="%"&&Tt!=="%")throw new h("invalid intrinsic syntax, expected closing `%`");if(Tt==="%"&&_t!=="%")throw new h("invalid intrinsic syntax, expected opening `%`");var Bt=[];return G(ut,it,function(Gt,At,wt,Wt){Bt[Bt.length]=wt?G(Wt,nt,"$1"):At||Gt}),Bt},ft=function(ut,_t){var Tt=ut,Bt;if(k(O,Tt)&&(Bt=O[Tt],Tt="%"+Bt[0]+"%"),k(tt,Tt)){var Gt=tt[Tt];if(Gt===z&&(Gt=S(Tt)),typeof Gt>"u"&&!_t)throw new c("intrinsic "+ut+" exists, but is not available. Please file an issue!");return{alias:Bt,name:Tt,value:Gt}}throw new h("intrinsic "+ut+" does not exist!")};return kh=function(ut,_t){if(typeof ut!="string"||ut.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof _t!="boolean")throw new c('"allowMissing" argument must be a boolean');if(Z(/^%?[^%]*%?$/,ut)===null)throw new h("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Tt=pt(ut),Bt=Tt.length>0?Tt[0]:"",Gt=ft("%"+Bt+"%",_t),At=Gt.name,wt=Gt.value,Wt=!1,ve=Gt.alias;ve&&(Bt=ve[0],B(Tt,T([0,1],ve)));for(var gr=1,Ni=!0;gr<Tt.length;gr+=1){var ze=Tt[gr],$r=F(ze,0,1),yr=F(ze,-1);if(($r==='"'||$r==="'"||$r==="`"||yr==='"'||yr==="'"||yr==="`")&&$r!==yr)throw new h("property names with quotes must have matching quotes");if((ze==="constructor"||!Ni)&&(Wt=!0),Bt+="."+ze,At="%"+Bt+"%",k(tt,At))wt=tt[At];else if(wt!=null){if(!(ze in wt)){if(!_t)throw new c("base intrinsic for "+ut+" exists, but the property is not available.");return}if(R&&gr+1>=Tt.length){var Zr=R(wt,ze);Ni=!!Zr,Ni&&"get"in Zr&&!("originalValue"in Zr.get)?wt=Zr.get:wt=wt[ze]}else Ni=k(wt,ze),wt=wt[ze];Ni&&!Wt&&(tt[At]=wt)}}return wt},kh}var Xh,G0;function H0(){if(G0)return Xh;G0=1;var n=zh(),t=I0(),e=t([n("%String.prototype.indexOf%")]);return Xh=function(l,o){var h=n(l,!!o);return typeof h=="function"&&e(l,".prototype.")>-1?t([h]):h},Xh}var Yh,k0;function z0(){if(k0)return Yh;k0=1;var n=zh(),t=H0(),e=Il(),s=cn(),l=n("%Map%",!0),o=t("Map.prototype.get",!0),h=t("Map.prototype.set",!0),c=t("Map.prototype.has",!0),d=t("Map.prototype.delete",!0),m=t("Map.prototype.size",!0);return Yh=!!l&&function(){var y,_={assert:function(x){if(!_.has(x))throw new s("Side channel does not contain "+e(x))},delete:function(x){if(y){var A=d(y,x);return m(y)===0&&(y=void 0),A}return!1},get:function(x){if(y)return o(y,x)},has:function(x){return y?c(y,x):!1},set:function(x,A){y||(y=new l),h(y,x,A)}};return _},Yh}var Vh,X0;function zx(){if(X0)return Vh;X0=1;var n=zh(),t=H0(),e=Il(),s=z0(),l=cn(),o=n("%WeakMap%",!0),h=t("WeakMap.prototype.get",!0),c=t("WeakMap.prototype.set",!0),d=t("WeakMap.prototype.has",!0),m=t("WeakMap.prototype.delete",!0);return Vh=o?function(){var y,_,x={assert:function(A){if(!x.has(A))throw new l("Side channel does not contain "+e(A))},delete:function(A){if(o&&A&&(typeof A=="object"||typeof A=="function")){if(y)return m(y,A)}else if(s&&_)return _.delete(A);return!1},get:function(A){return o&&A&&(typeof A=="object"||typeof A=="function")&&y?h(y,A):_&&_.get(A)},has:function(A){return o&&A&&(typeof A=="object"||typeof A=="function")&&y?d(y,A):!!_&&_.has(A)},set:function(A,w){o&&A&&(typeof A=="object"||typeof A=="function")?(y||(y=new o),c(y,A,w)):s&&(_||(_=s()),_.set(A,w))}};return x}:s,Vh}var jh,Y0;function Xx(){if(Y0)return jh;Y0=1;var n=cn(),t=Il(),e=yx(),s=z0(),l=zx(),o=l||s||e;return jh=function(){var c,d={assert:function(m){if(!d.has(m))throw new n("Side channel does not contain "+t(m))},delete:function(m){return!!c&&c.delete(m)},get:function(m){return c&&c.get(m)},has:function(m){return!!c&&c.has(m)},set:function(m,g){c||(c=o()),c.set(m,g)}};return d},jh}var qh,V0;function Wh(){if(V0)return qh;V0=1;var n=String.prototype.replace,t=/%20/g,e={RFC1738:"RFC1738",RFC3986:"RFC3986"};return qh={default:e.RFC3986,formatters:{RFC1738:function(s){return n.call(s,t,"+")},RFC3986:function(s){return String(s)}},RFC1738:e.RFC1738,RFC3986:e.RFC3986},qh}var $h,j0;function q0(){if(j0)return $h;j0=1;var n=Wh(),t=Object.prototype.hasOwnProperty,e=Array.isArray,s=function(){for(var v=[],E=0;E<256;++E)v.push("%"+((E<16?"0":"")+E.toString(16)).toUpperCase());return v}(),l=function(E){for(;E.length>1;){var R=E.pop(),D=R.obj[R.prop];if(e(D)){for(var P=[],I=0;I<D.length;++I)typeof D[I]<"u"&&P.push(D[I]);R.obj[R.prop]=P}}},o=function(E,R){for(var D=R&&R.plainObjects?{__proto__:null}:{},P=0;P<E.length;++P)typeof E[P]<"u"&&(D[P]=E[P]);return D},h=function v(E,R,D){if(!R)return E;if(typeof R!="object"&&typeof R!="function"){if(e(E))E.push(R);else if(E&&typeof E=="object")(D&&(D.plainObjects||D.allowPrototypes)||!t.call(Object.prototype,R))&&(E[R]=!0);else return[E,R];return E}if(!E||typeof E!="object")return[E].concat(R);var P=E;return e(E)&&!e(R)&&(P=o(E,D)),e(E)&&e(R)?(R.forEach(function(I,Y){if(t.call(E,Y)){var U=E[Y];U&&typeof U=="object"&&I&&typeof I=="object"?E[Y]=v(U,I,D):E.push(I)}else E[Y]=I}),E):Object.keys(R).reduce(function(I,Y){var U=R[Y];return t.call(I,Y)?I[Y]=v(I[Y],U,D):I[Y]=U,I},P)},c=function(E,R){return Object.keys(R).reduce(function(D,P){return D[P]=R[P],D},E)},d=function(v,E,R){var D=v.replace(/\+/g," ");if(R==="iso-8859-1")return D.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(D)}catch{return D}},m=1024,g=function(E,R,D,P,I){if(E.length===0)return E;var Y=E;if(typeof E=="symbol"?Y=Symbol.prototype.toString.call(E):typeof E!="string"&&(Y=String(E)),D==="iso-8859-1")return escape(Y).replace(/%u[0-9a-f]{4}/gi,function(W){return"%26%23"+parseInt(W.slice(2),16)+"%3B"});for(var U="",q=0;q<Y.length;q+=m){for(var rt=Y.length>=m?Y.slice(q,q+m):Y,lt=[],dt=0;dt<rt.length;++dt){var z=rt.charCodeAt(dt);if(z===45||z===46||z===95||z===126||z>=48&&z<=57||z>=65&&z<=90||z>=97&&z<=122||I===n.RFC1738&&(z===40||z===41)){lt[lt.length]=rt.charAt(dt);continue}if(z<128){lt[lt.length]=s[z];continue}if(z<2048){lt[lt.length]=s[192|z>>6]+s[128|z&63];continue}if(z<55296||z>=57344){lt[lt.length]=s[224|z>>12]+s[128|z>>6&63]+s[128|z&63];continue}dt+=1,z=65536+((z&1023)<<10|rt.charCodeAt(dt)&1023),lt[lt.length]=s[240|z>>18]+s[128|z>>12&63]+s[128|z>>6&63]+s[128|z&63]}U+=lt.join("")}return U},y=function(E){for(var R=[{obj:{o:E},prop:"o"}],D=[],P=0;P<R.length;++P)for(var I=R[P],Y=I.obj[I.prop],U=Object.keys(Y),q=0;q<U.length;++q){var rt=U[q],lt=Y[rt];typeof lt=="object"&&lt!==null&&D.indexOf(lt)===-1&&(R.push({obj:Y,prop:rt}),D.push(lt))}return l(R),E},_=function(E){return Object.prototype.toString.call(E)==="[object RegExp]"},x=function(E){return!E||typeof E!="object"?!1:!!(E.constructor&&E.constructor.isBuffer&&E.constructor.isBuffer(E))},A=function(E,R){return[].concat(E,R)},w=function(E,R){if(e(E)){for(var D=[],P=0;P<E.length;P+=1)D.push(R(E[P]));return D}return R(E)};return $h={arrayToObject:o,assign:c,combine:A,compact:y,decode:d,encode:g,isBuffer:x,isRegExp:_,maybeMap:w,merge:h},$h}var Zh,W0;function Yx(){if(W0)return Zh;W0=1;var n=Xx(),t=q0(),e=Wh(),s=Object.prototype.hasOwnProperty,l={brackets:function(v){return v+"[]"},comma:"comma",indices:function(v,E){return v+"["+E+"]"},repeat:function(v){return v}},o=Array.isArray,h=Array.prototype.push,c=function(w,v){h.apply(w,o(v)?v:[v])},d=Date.prototype.toISOString,m=e.default,g={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:m,formatter:e.formatters[m],indices:!1,serializeDate:function(v){return d.call(v)},skipNulls:!1,strictNullHandling:!1},y=function(v){return typeof v=="string"||typeof v=="number"||typeof v=="boolean"||typeof v=="symbol"||typeof v=="bigint"},_={},x=function w(v,E,R,D,P,I,Y,U,q,rt,lt,dt,z,W,tt,ht,S,O){for(var M=v,k=O,T=0,B=!1;(k=k.get(_))!==void 0&&!B;){var G=k.get(v);if(T+=1,typeof G<"u"){if(G===T)throw new RangeError("Cyclic object value");B=!0}typeof k.get(_)>"u"&&(T=0)}if(typeof rt=="function"?M=rt(E,M):M instanceof Date?M=z(M):R==="comma"&&o(M)&&(M=t.maybeMap(M,function(At){return At instanceof Date?z(At):At})),M===null){if(I)return q&&!ht?q(E,g.encoder,S,"key",W):E;M=""}if(y(M)||t.isBuffer(M)){if(q){var F=ht?E:q(E,g.encoder,S,"key",W);return[tt(F)+"="+tt(q(M,g.encoder,S,"value",W))]}return[tt(E)+"="+tt(String(M))]}var Z=[];if(typeof M>"u")return Z;var it;if(R==="comma"&&o(M))ht&&q&&(M=t.maybeMap(M,q)),it=[{value:M.length>0?M.join(",")||null:void 0}];else if(o(rt))it=rt;else{var nt=Object.keys(M);it=lt?nt.sort(lt):nt}var pt=U?String(E).replace(/\./g,"%2E"):String(E),ft=D&&o(M)&&M.length===1?pt+"[]":pt;if(P&&o(M)&&M.length===0)return ft+"[]";for(var vt=0;vt<it.length;++vt){var ut=it[vt],_t=typeof ut=="object"&&ut&&typeof ut.value<"u"?ut.value:M[ut];if(!(Y&&_t===null)){var Tt=dt&&U?String(ut).replace(/\./g,"%2E"):String(ut),Bt=o(M)?typeof R=="function"?R(ft,Tt):ft:ft+(dt?"."+Tt:"["+Tt+"]");O.set(v,T);var Gt=n();Gt.set(_,O),c(Z,w(_t,Bt,R,D,P,I,Y,U,R==="comma"&&ht&&o(M)?null:q,rt,lt,dt,z,W,tt,ht,S,Gt))}}return Z},A=function(v){if(!v)return g;if(typeof v.allowEmptyArrays<"u"&&typeof v.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof v.encodeDotInKeys<"u"&&typeof v.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(v.encoder!==null&&typeof v.encoder<"u"&&typeof v.encoder!="function")throw new TypeError("Encoder has to be a function.");var E=v.charset||g.charset;if(typeof v.charset<"u"&&v.charset!=="utf-8"&&v.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var R=e.default;if(typeof v.format<"u"){if(!s.call(e.formatters,v.format))throw new TypeError("Unknown format option provided.");R=v.format}var D=e.formatters[R],P=g.filter;(typeof v.filter=="function"||o(v.filter))&&(P=v.filter);var I;if(v.arrayFormat in l?I=v.arrayFormat:"indices"in v?I=v.indices?"indices":"repeat":I=g.arrayFormat,"commaRoundTrip"in v&&typeof v.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Y=typeof v.allowDots>"u"?v.encodeDotInKeys===!0?!0:g.allowDots:!!v.allowDots;return{addQueryPrefix:typeof v.addQueryPrefix=="boolean"?v.addQueryPrefix:g.addQueryPrefix,allowDots:Y,allowEmptyArrays:typeof v.allowEmptyArrays=="boolean"?!!v.allowEmptyArrays:g.allowEmptyArrays,arrayFormat:I,charset:E,charsetSentinel:typeof v.charsetSentinel=="boolean"?v.charsetSentinel:g.charsetSentinel,commaRoundTrip:!!v.commaRoundTrip,delimiter:typeof v.delimiter>"u"?g.delimiter:v.delimiter,encode:typeof v.encode=="boolean"?v.encode:g.encode,encodeDotInKeys:typeof v.encodeDotInKeys=="boolean"?v.encodeDotInKeys:g.encodeDotInKeys,encoder:typeof v.encoder=="function"?v.encoder:g.encoder,encodeValuesOnly:typeof v.encodeValuesOnly=="boolean"?v.encodeValuesOnly:g.encodeValuesOnly,filter:P,format:R,formatter:D,serializeDate:typeof v.serializeDate=="function"?v.serializeDate:g.serializeDate,skipNulls:typeof v.skipNulls=="boolean"?v.skipNulls:g.skipNulls,sort:typeof v.sort=="function"?v.sort:null,strictNullHandling:typeof v.strictNullHandling=="boolean"?v.strictNullHandling:g.strictNullHandling}};return Zh=function(w,v){var E=w,R=A(v),D,P;typeof R.filter=="function"?(P=R.filter,E=P("",E)):o(R.filter)&&(P=R.filter,D=P);var I=[];if(typeof E!="object"||E===null)return"";var Y=l[R.arrayFormat],U=Y==="comma"&&R.commaRoundTrip;D||(D=Object.keys(E)),R.sort&&D.sort(R.sort);for(var q=n(),rt=0;rt<D.length;++rt){var lt=D[rt],dt=E[lt];R.skipNulls&&dt===null||c(I,x(dt,lt,Y,U,R.allowEmptyArrays,R.strictNullHandling,R.skipNulls,R.encodeDotInKeys,R.encode?R.encoder:null,R.filter,R.sort,R.allowDots,R.serializeDate,R.format,R.formatter,R.encodeValuesOnly,R.charset,q))}var z=I.join(R.delimiter),W=R.addQueryPrefix===!0?"?":"";return R.charsetSentinel&&(R.charset==="iso-8859-1"?W+="utf8=%26%2310003%3B&":W+="utf8=%E2%9C%93&"),z.length>0?W+z:""},Zh}var Kh,$0;function Vx(){if($0)return Kh;$0=1;var n=q0(),t=Object.prototype.hasOwnProperty,e=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},l=function(_){return _.replace(/&#(\d+);/g,function(x,A){return String.fromCharCode(parseInt(A,10))})},o=function(_,x,A){if(_&&typeof _=="string"&&x.comma&&_.indexOf(",")>-1)return _.split(",");if(x.throwOnLimitExceeded&&A>=x.arrayLimit)throw new RangeError("Array limit exceeded. Only "+x.arrayLimit+" element"+(x.arrayLimit===1?"":"s")+" allowed in an array.");return _},h="utf8=%26%2310003%3B",c="utf8=%E2%9C%93",d=function(x,A){var w={__proto__:null},v=A.ignoreQueryPrefix?x.replace(/^\?/,""):x;v=v.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var E=A.parameterLimit===1/0?void 0:A.parameterLimit,R=v.split(A.delimiter,A.throwOnLimitExceeded?E+1:E);if(A.throwOnLimitExceeded&&R.length>E)throw new RangeError("Parameter limit exceeded. Only "+E+" parameter"+(E===1?"":"s")+" allowed.");var D=-1,P,I=A.charset;if(A.charsetSentinel)for(P=0;P<R.length;++P)R[P].indexOf("utf8=")===0&&(R[P]===c?I="utf-8":R[P]===h&&(I="iso-8859-1"),D=P,P=R.length);for(P=0;P<R.length;++P)if(P!==D){var Y=R[P],U=Y.indexOf("]="),q=U===-1?Y.indexOf("="):U+1,rt,lt;q===-1?(rt=A.decoder(Y,s.decoder,I,"key"),lt=A.strictNullHandling?null:""):(rt=A.decoder(Y.slice(0,q),s.decoder,I,"key"),lt=n.maybeMap(o(Y.slice(q+1),A,e(w[rt])?w[rt].length:0),function(z){return A.decoder(z,s.decoder,I,"value")})),lt&&A.interpretNumericEntities&&I==="iso-8859-1"&&(lt=l(String(lt))),Y.indexOf("[]=")>-1&&(lt=e(lt)?[lt]:lt);var dt=t.call(w,rt);dt&&A.duplicates==="combine"?w[rt]=n.combine(w[rt],lt):(!dt||A.duplicates==="last")&&(w[rt]=lt)}return w},m=function(_,x,A,w){var v=0;if(_.length>0&&_[_.length-1]==="[]"){var E=_.slice(0,-1).join("");v=Array.isArray(x)&&x[E]?x[E].length:0}for(var R=w?x:o(x,A,v),D=_.length-1;D>=0;--D){var P,I=_[D];if(I==="[]"&&A.parseArrays)P=A.allowEmptyArrays&&(R===""||A.strictNullHandling&&R===null)?[]:n.combine([],R);else{P=A.plainObjects?{__proto__:null}:{};var Y=I.charAt(0)==="["&&I.charAt(I.length-1)==="]"?I.slice(1,-1):I,U=A.decodeDotInKeys?Y.replace(/%2E/g,"."):Y,q=parseInt(U,10);!A.parseArrays&&U===""?P={0:R}:!isNaN(q)&&I!==U&&String(q)===U&&q>=0&&A.parseArrays&&q<=A.arrayLimit?(P=[],P[q]=R):U!=="__proto__"&&(P[U]=R)}R=P}return R},g=function(x,A,w,v){if(x){var E=w.allowDots?x.replace(/\.([^.[]+)/g,"[$1]"):x,R=/(\[[^[\]]*])/,D=/(\[[^[\]]*])/g,P=w.depth>0&&R.exec(E),I=P?E.slice(0,P.index):E,Y=[];if(I){if(!w.plainObjects&&t.call(Object.prototype,I)&&!w.allowPrototypes)return;Y.push(I)}for(var U=0;w.depth>0&&(P=D.exec(E))!==null&&U<w.depth;){if(U+=1,!w.plainObjects&&t.call(Object.prototype,P[1].slice(1,-1))&&!w.allowPrototypes)return;Y.push(P[1])}if(P){if(w.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+w.depth+" and strictDepth is true");Y.push("["+E.slice(P.index)+"]")}return m(Y,A,w,v)}},y=function(x){if(!x)return s;if(typeof x.allowEmptyArrays<"u"&&typeof x.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof x.decodeDotInKeys<"u"&&typeof x.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(x.decoder!==null&&typeof x.decoder<"u"&&typeof x.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof x.charset<"u"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof x.throwOnLimitExceeded<"u"&&typeof x.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var A=typeof x.charset>"u"?s.charset:x.charset,w=typeof x.duplicates>"u"?s.duplicates:x.duplicates;if(w!=="combine"&&w!=="first"&&w!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var v=typeof x.allowDots>"u"?x.decodeDotInKeys===!0?!0:s.allowDots:!!x.allowDots;return{allowDots:v,allowEmptyArrays:typeof x.allowEmptyArrays=="boolean"?!!x.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:typeof x.allowPrototypes=="boolean"?x.allowPrototypes:s.allowPrototypes,allowSparse:typeof x.allowSparse=="boolean"?x.allowSparse:s.allowSparse,arrayLimit:typeof x.arrayLimit=="number"?x.arrayLimit:s.arrayLimit,charset:A,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:s.charsetSentinel,comma:typeof x.comma=="boolean"?x.comma:s.comma,decodeDotInKeys:typeof x.decodeDotInKeys=="boolean"?x.decodeDotInKeys:s.decodeDotInKeys,decoder:typeof x.decoder=="function"?x.decoder:s.decoder,delimiter:typeof x.delimiter=="string"||n.isRegExp(x.delimiter)?x.delimiter:s.delimiter,depth:typeof x.depth=="number"||x.depth===!1?+x.depth:s.depth,duplicates:w,ignoreQueryPrefix:x.ignoreQueryPrefix===!0,interpretNumericEntities:typeof x.interpretNumericEntities=="boolean"?x.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof x.parameterLimit=="number"?x.parameterLimit:s.parameterLimit,parseArrays:x.parseArrays!==!1,plainObjects:typeof x.plainObjects=="boolean"?x.plainObjects:s.plainObjects,strictDepth:typeof x.strictDepth=="boolean"?!!x.strictDepth:s.strictDepth,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:s.strictNullHandling,throwOnLimitExceeded:typeof x.throwOnLimitExceeded=="boolean"?x.throwOnLimitExceeded:!1}};return Kh=function(_,x){var A=y(x);if(_===""||_===null||typeof _>"u")return A.plainObjects?{__proto__:null}:{};for(var w=typeof _=="string"?d(_,A):_,v=A.plainObjects?{__proto__:null}:{},E=Object.keys(w),R=0;R<E.length;++R){var D=E[R],P=g(D,w[D],A,typeof _=="string");v=n.merge(v,P,A)}return A.allowSparse===!0?v:n.compact(v)},Kh}var Qh,Z0;function jx(){if(Z0)return Qh;Z0=1;var n=Yx(),t=Vx(),e=Wh();return Qh={formats:e,parse:t,stringify:n},Qh}var K0;function qx(){if(K0)return Ss;K0=1;var n=mx();function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var e=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],h=["{","}","|","\\","^","`"].concat(o),c=["'"].concat(h),d=["%","/","?",";","#"].concat(c),m=["/","?","#"],g=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},A={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=jx();function E(I,Y,U){if(I&&typeof I=="object"&&I instanceof t)return I;var q=new t;return q.parse(I,Y,U),q}t.prototype.parse=function(I,Y,U){if(typeof I!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof I);var q=I.indexOf("?"),rt=q!==-1&&q<I.indexOf("#")?"?":"#",lt=I.split(rt),dt=/\\/g;lt[0]=lt[0].replace(dt,"/"),I=lt.join(rt);var z=I;if(z=z.trim(),!U&&I.split("#").length===1){var W=l.exec(z);if(W)return this.path=z,this.href=z,this.pathname=W[1],W[2]?(this.search=W[2],Y?this.query=v.parse(this.search.substr(1)):this.query=this.search.substr(1)):Y&&(this.search="",this.query={}),this}var tt=e.exec(z);if(tt){tt=tt[0];var ht=tt.toLowerCase();this.protocol=ht,z=z.substr(tt.length)}if(U||tt||z.match(/^\/\/[^@/]+@[^@/]+/)){var S=z.substr(0,2)==="//";S&&!(tt&&A[tt])&&(z=z.substr(2),this.slashes=!0)}if(!A[tt]&&(S||tt&&!w[tt])){for(var O=-1,M=0;M<m.length;M++){var k=z.indexOf(m[M]);k!==-1&&(O===-1||k<O)&&(O=k)}var T,B;O===-1?B=z.lastIndexOf("@"):B=z.lastIndexOf("@",O),B!==-1&&(T=z.slice(0,B),z=z.slice(B+1),this.auth=decodeURIComponent(T)),O=-1;for(var M=0;M<d.length;M++){var k=z.indexOf(d[M]);k!==-1&&(O===-1||k<O)&&(O=k)}O===-1&&(O=z.length),this.host=z.slice(0,O),z=z.slice(O),this.parseHost(),this.hostname=this.hostname||"";var G=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!G)for(var F=this.hostname.split(/\./),M=0,Z=F.length;M<Z;M++){var it=F[M];if(it&&!it.match(y)){for(var nt="",pt=0,ft=it.length;pt<ft;pt++)it.charCodeAt(pt)>127?nt+="x":nt+=it[pt];if(!nt.match(y)){var vt=F.slice(0,M),ut=F.slice(M+1),_t=it.match(_);_t&&(vt.push(_t[1]),ut.unshift(_t[2])),ut.length&&(z="/"+ut.join(".")+z),this.hostname=vt.join(".");break}}}this.hostname.length>g?this.hostname="":this.hostname=this.hostname.toLowerCase(),G||(this.hostname=n.toASCII(this.hostname));var Tt=this.port?":"+this.port:"",Bt=this.hostname||"";this.host=Bt+Tt,this.href+=this.host,G&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),z[0]!=="/"&&(z="/"+z))}if(!x[ht])for(var M=0,Z=c.length;M<Z;M++){var Gt=c[M];if(z.indexOf(Gt)!==-1){var At=encodeURIComponent(Gt);At===Gt&&(At=escape(Gt)),z=z.split(Gt).join(At)}}var wt=z.indexOf("#");wt!==-1&&(this.hash=z.substr(wt),z=z.slice(0,wt));var Wt=z.indexOf("?");if(Wt!==-1?(this.search=z.substr(Wt),this.query=z.substr(Wt+1),Y&&(this.query=v.parse(this.query)),z=z.slice(0,Wt)):Y&&(this.search="",this.query={}),z&&(this.pathname=z),w[ht]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Tt=this.pathname||"",ve=this.search||"";this.path=Tt+ve}return this.href=this.format(),this};function R(I){return typeof I=="string"&&(I=E(I)),I instanceof t?I.format():t.prototype.format.call(I)}t.prototype.format=function(){var I=this.auth||"";I&&(I=encodeURIComponent(I),I=I.replace(/%3A/i,":"),I+="@");var Y=this.protocol||"",U=this.pathname||"",q=this.hash||"",rt=!1,lt="";this.host?rt=I+this.host:this.hostname&&(rt=I+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(rt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(lt=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var dt=this.search||lt&&"?"+lt||"";return Y&&Y.substr(-1)!==":"&&(Y+=":"),this.slashes||(!Y||w[Y])&&rt!==!1?(rt="//"+(rt||""),U&&U.charAt(0)!=="/"&&(U="/"+U)):rt||(rt=""),q&&q.charAt(0)!=="#"&&(q="#"+q),dt&&dt.charAt(0)!=="?"&&(dt="?"+dt),U=U.replace(/[?#]/g,function(z){return encodeURIComponent(z)}),dt=dt.replace("#","%23"),Y+rt+U+dt+q};function D(I,Y){return E(I,!1,!0).resolve(Y)}t.prototype.resolve=function(I){return this.resolveObject(E(I,!1,!0)).format()};function P(I,Y){return I?E(I,!1,!0).resolveObject(Y):Y}return t.prototype.resolveObject=function(I){if(typeof I=="string"){var Y=new t;Y.parse(I,!1,!0),I=Y}for(var U=new t,q=Object.keys(this),rt=0;rt<q.length;rt++){var lt=q[rt];U[lt]=this[lt]}if(U.hash=I.hash,I.href==="")return U.href=U.format(),U;if(I.slashes&&!I.protocol){for(var dt=Object.keys(I),z=0;z<dt.length;z++){var W=dt[z];W!=="protocol"&&(U[W]=I[W])}return w[U.protocol]&&U.hostname&&!U.pathname&&(U.pathname="/",U.path=U.pathname),U.href=U.format(),U}if(I.protocol&&I.protocol!==U.protocol){if(!w[I.protocol]){for(var tt=Object.keys(I),ht=0;ht<tt.length;ht++){var S=tt[ht];U[S]=I[S]}return U.href=U.format(),U}if(U.protocol=I.protocol,!I.host&&!A[I.protocol]){for(var Z=(I.pathname||"").split("/");Z.length&&!(I.host=Z.shift()););I.host||(I.host=""),I.hostname||(I.hostname=""),Z[0]!==""&&Z.unshift(""),Z.length<2&&Z.unshift(""),U.pathname=Z.join("/")}else U.pathname=I.pathname;if(U.search=I.search,U.query=I.query,U.host=I.host||"",U.auth=I.auth,U.hostname=I.hostname||I.host,U.port=I.port,U.pathname||U.search){var O=U.pathname||"",M=U.search||"";U.path=O+M}return U.slashes=U.slashes||I.slashes,U.href=U.format(),U}var k=U.pathname&&U.pathname.charAt(0)==="/",T=I.host||I.pathname&&I.pathname.charAt(0)==="/",B=T||k||U.host&&I.pathname,G=B,F=U.pathname&&U.pathname.split("/")||[],Z=I.pathname&&I.pathname.split("/")||[],it=U.protocol&&!w[U.protocol];if(it&&(U.hostname="",U.port=null,U.host&&(F[0]===""?F[0]=U.host:F.unshift(U.host)),U.host="",I.protocol&&(I.hostname=null,I.port=null,I.host&&(Z[0]===""?Z[0]=I.host:Z.unshift(I.host)),I.host=null),B=B&&(Z[0]===""||F[0]==="")),T)U.host=I.host||I.host===""?I.host:U.host,U.hostname=I.hostname||I.hostname===""?I.hostname:U.hostname,U.search=I.search,U.query=I.query,F=Z;else if(Z.length)F||(F=[]),F.pop(),F=F.concat(Z),U.search=I.search,U.query=I.query;else if(I.search!=null){if(it){U.host=F.shift(),U.hostname=U.host;var nt=U.host&&U.host.indexOf("@")>0?U.host.split("@"):!1;nt&&(U.auth=nt.shift(),U.hostname=nt.shift(),U.host=U.hostname)}return U.search=I.search,U.query=I.query,(U.pathname!==null||U.search!==null)&&(U.path=(U.pathname?U.pathname:"")+(U.search?U.search:"")),U.href=U.format(),U}if(!F.length)return U.pathname=null,U.search?U.path="/"+U.search:U.path=null,U.href=U.format(),U;for(var pt=F.slice(-1)[0],ft=(U.host||I.host||F.length>1)&&(pt==="."||pt==="..")||pt==="",vt=0,ut=F.length;ut>=0;ut--)pt=F[ut],pt==="."?F.splice(ut,1):pt===".."?(F.splice(ut,1),vt++):vt&&(F.splice(ut,1),vt--);if(!B&&!G)for(;vt--;vt)F.unshift("..");B&&F[0]!==""&&(!F[0]||F[0].charAt(0)!=="/")&&F.unshift(""),ft&&F.join("/").substr(-1)!=="/"&&F.push("");var _t=F[0]===""||F[0]&&F[0].charAt(0)==="/";if(it){U.hostname=_t?"":F.length?F.shift():"",U.host=U.hostname;var nt=U.host&&U.host.indexOf("@")>0?U.host.split("@"):!1;nt&&(U.auth=nt.shift(),U.hostname=nt.shift(),U.host=U.hostname)}return B=B||U.host&&F.length,B&&!_t&&F.unshift(""),F.length>0?U.pathname=F.join("/"):(U.pathname=null,U.path=null),(U.pathname!==null||U.search!==null)&&(U.path=(U.pathname?U.pathname:"")+(U.search?U.search:"")),U.auth=I.auth||U.auth,U.slashes=U.slashes||I.slashes,U.href=U.format(),U},t.prototype.parseHost=function(){var I=this.host,Y=s.exec(I);Y&&(Y=Y[0],Y!==":"&&(this.port=Y.substr(1)),I=I.substr(0,I.length-Y.length)),I&&(this.hostname=I)},Ss.parse=E,Ss.resolve=D,Ss.resolveObject=P,Ss.format=R,Ss.Url=t,Ss}qx();const Q0={};function zt(n,t,e=3){if(Q0[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(s=s.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(s))),Q0[t]=!0}function Si(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function ga(n){return n.split("?")[0].split("#")[0]}function Wx(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $x(n,t,e){return n.replace(new RegExp(Wx(t),"g"),e)}function Zx(n,t){let e="",s=0,l=-1,o=0,h=-1;for(let c=0;c<=n.length;++c){if(c<n.length)h=n.charCodeAt(c);else{if(h===47)break;h=47}if(h===47){if(!(l===c-1||o===1))if(l!==c-1&&o===2){if(e.length<2||s!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const d=e.lastIndexOf("/");if(d!==e.length-1){d===-1?(e="",s=0):(e=e.slice(0,d),s=e.length-1-e.lastIndexOf("/")),l=c,o=0;continue}}else if(e.length===2||e.length===1){e="",s=0,l=c,o=0;continue}}}else e.length>0?e+=`/${n.slice(l+1,c)}`:e=n.slice(l+1,c),s=c-l-1;l=c,o=0}else h===46&&o!==-1?++o:o=-1}return e}const Oe={toPosix(n){return $x(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Si(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(Si(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const s=ga(this.toPosix(t??gt.ADAPTER.getBaseUrl())),l=ga(this.toPosix(e??this.rootname(s)));return n=this.toPosix(n),n.startsWith("/")?Oe.join(l,n.slice(1)):this.isAbsolute(n)?n:this.join(s,n)},normalize(n){if(Si(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const s=n.endsWith("/");return n=Zx(n),n.length>0&&s&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return Si(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const s=n[e];if(Si(s),s.length>0)if(t===void 0)t=s;else{const l=n[e-1]??"";this.joinExtensions.includes(this.extname(l).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(Si(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let s=-1,l=!0;const o=this.getProtocol(n),h=n;n=n.slice(o.length);for(let c=n.length-1;c>=1;--c)if(t=n.charCodeAt(c),t===47){if(!l){s=c;break}}else l=!1;return s===-1?e?"/":this.isUrl(h)?o+n:o:e&&s===1?"//":o+n.slice(0,s)},rootname(n){Si(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){Si(n),t&&Si(t),n=ga(this.toPosix(n));let e=0,s=-1,l=!0,o;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let h=t.length-1,c=-1;for(o=n.length-1;o>=0;--o){const d=n.charCodeAt(o);if(d===47){if(!l){e=o+1;break}}else c===-1&&(l=!1,c=o+1),h>=0&&(d===t.charCodeAt(h)?--h===-1&&(s=o):(h=-1,s=c))}return e===s?s=c:s===-1&&(s=n.length),n.slice(e,s)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===47){if(!l){e=o+1;break}}else s===-1&&(l=!1,s=o+1);return s===-1?"":n.slice(e,s)},extname(n){Si(n),n=ga(this.toPosix(n));let t=-1,e=0,s=-1,l=!0,o=0;for(let h=n.length-1;h>=0;--h){const c=n.charCodeAt(h);if(c===47){if(!l){e=h+1;break}continue}s===-1&&(l=!1,s=h+1),c===46?t===-1?t=h:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===e+1?"":n.slice(t,s)},parse(n){Si(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=ga(this.toPosix(n));let e=n.charCodeAt(0);const s=this.isAbsolute(n);let l;t.root=this.rootname(n),s||this.hasProtocol(n)?l=1:l=0;let o=-1,h=0,c=-1,d=!0,m=n.length-1,g=0;for(;m>=l;--m){if(e=n.charCodeAt(m),e===47){if(!d){h=m+1;break}continue}c===-1&&(d=!1,c=m+1),e===46?o===-1?o=m:g!==1&&(g=1):o!==-1&&(g=-1)}return o===-1||c===-1||g===0||g===1&&o===c-1&&o===h+1?c!==-1&&(h===0&&s?t.base=t.name=n.slice(1,c):t.base=t.name=n.slice(h,c)):(h===0&&s?(t.name=n.slice(1,o),t.base=n.slice(1,c)):(t.name=n.slice(h,o),t.base=n.slice(h,c)),t.ext=n.slice(o,c)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let Jh;async function Kx(){return Jh??(Jh=(async()=>{var o;const n=document.createElement("canvas").getContext("webgl");if(!n)return We.UNPACK;const t=await new Promise(h=>{const c=document.createElement("video");c.onloadeddata=()=>h(c),c.onerror=()=>h(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!t)return We.UNPACK;const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);const s=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,s),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,l),n.deleteFramebuffer(s),n.deleteTexture(e),(o=n.getExtension("WEBGL_lose_context"))==null||o.loseContext(),l[0]<=l[3]?We.PMA:We.UNPACK})()),Jh}let tc;function Qx(){return typeof tc>"u"&&(tc=function(){var t;const n={stencil:!0,failIfMajorPerformanceCaveat:gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!gt.ADAPTER.getWebGLRenderingContext())return!1;const e=gt.ADAPTER.createCanvas();let s=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);const l=!!((t=s==null?void 0:s.getContextAttributes())!=null&&t.stencil);if(s){const o=s.getExtension("WEBGL_lose_context");o&&o.loseContext()}return s=null,l}catch{return!1}}()),tc}var Jx={grad:.9,turn:360,rad:360/(2*Math.PI)},cr=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Be=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},fi=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},J0=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},tm=function(n){return{r:fi(n.r,0,255),g:fi(n.g,0,255),b:fi(n.b,0,255),a:fi(n.a)}},ec=function(n){return{r:Be(n.r),g:Be(n.g),b:Be(n.b),a:Be(n.a,3)}},tb=/^#([0-9a-f]{3,8})$/i,Pl=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},em=function(n){var t=n.r,e=n.g,s=n.b,l=n.a,o=Math.max(t,e,s),h=o-Math.min(t,e,s),c=h?o===t?(e-s)/h:o===e?2+(s-t)/h:4+(t-e)/h:0;return{h:60*(c<0?c+6:c),s:o?h/o*100:0,v:o/255*100,a:l}},im=function(n){var t=n.h,e=n.s,s=n.v,l=n.a;t=t/360*6,e/=100,s/=100;var o=Math.floor(t),h=s*(1-e),c=s*(1-(t-o)*e),d=s*(1-(1-t+o)*e),m=o%6;return{r:255*[s,c,h,h,d,s][m],g:255*[d,s,s,c,h,h][m],b:255*[h,h,d,s,s,c][m],a:l}},rm=function(n){return{h:J0(n.h),s:fi(n.s,0,100),l:fi(n.l,0,100),a:fi(n.a)}},sm=function(n){return{h:Be(n.h),s:Be(n.s),l:Be(n.l),a:Be(n.a,3)}},nm=function(n){return im((e=(t=n).s,{h:t.h,s:(e*=((s=t.l)<50?s:100-s)/100)>0?2*e/(s+e)*100:0,v:s+e,a:t.a}));var t,e,s},ya=function(n){return{h:(t=em(n)).h,s:(l=(200-(e=t.s))*(s=t.v)/100)>0&&l<200?e*s/100/(l<=100?l:200-l)*100:0,l:l/2,a:t.a};var t,e,s,l},eb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ib=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ic={string:[[function(n){var t=tb.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Be(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Be(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=rb.exec(n)||sb.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:tm({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=eb.exec(n)||ib.exec(n);if(!t)return null;var e,s,l=rm({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(Jx[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return nm(l)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,s=n.b,l=n.a,o=l===void 0?1:l;return cr(t)&&cr(e)&&cr(s)?tm({r:Number(t),g:Number(e),b:Number(s),a:Number(o)}):null},"rgb"],[function(n){var t=n.h,e=n.s,s=n.l,l=n.a,o=l===void 0?1:l;if(!cr(t)||!cr(e)||!cr(s))return null;var h=rm({h:Number(t),s:Number(e),l:Number(s),a:Number(o)});return nm(h)},"hsl"],[function(n){var t=n.h,e=n.s,s=n.v,l=n.a,o=l===void 0?1:l;if(!cr(t)||!cr(e)||!cr(s))return null;var h=function(c){return{h:J0(c.h),s:fi(c.s,0,100),v:fi(c.v,0,100),a:fi(c.a)}}({h:Number(t),s:Number(e),v:Number(s),a:Number(o)});return im(h)},"hsv"]]},am=function(n,t){for(var e=0;e<t.length;e++){var s=t[e][0](n);if(s)return[s,t[e][1]]}return[null,void 0]},nb=function(n){return typeof n=="string"?am(n.trim(),ic.string):typeof n=="object"&&n!==null?am(n,ic.object):[null,void 0]},rc=function(n,t){var e=ya(n);return{h:e.h,s:fi(e.s+100*t,0,100),l:e.l,a:e.a}},sc=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},lm=function(n,t){var e=ya(n);return{h:e.h,s:e.s,l:fi(e.l+100*t,0,100),a:e.a}},nc=function(){function n(t){this.parsed=nb(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Be(sc(this.rgba),2)},n.prototype.isDark=function(){return sc(this.rgba)<.5},n.prototype.isLight=function(){return sc(this.rgba)>=.5},n.prototype.toHex=function(){return t=ec(this.rgba),e=t.r,s=t.g,l=t.b,h=(o=t.a)<1?Pl(Be(255*o)):"","#"+Pl(e)+Pl(s)+Pl(l)+h;var t,e,s,l,o,h},n.prototype.toRgb=function(){return ec(this.rgba)},n.prototype.toRgbString=function(){return t=ec(this.rgba),e=t.r,s=t.g,l=t.b,(o=t.a)<1?"rgba("+e+", "+s+", "+l+", "+o+")":"rgb("+e+", "+s+", "+l+")";var t,e,s,l,o},n.prototype.toHsl=function(){return sm(ya(this.rgba))},n.prototype.toHslString=function(){return t=sm(ya(this.rgba)),e=t.h,s=t.s,l=t.l,(o=t.a)<1?"hsla("+e+", "+s+"%, "+l+"%, "+o+")":"hsl("+e+", "+s+"%, "+l+"%)";var t,e,s,l,o},n.prototype.toHsv=function(){return t=em(this.rgba),{h:Be(t.h),s:Be(t.s),v:Be(t.v),a:Be(t.a,3)};var t},n.prototype.invert=function(){return qi({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),qi(rc(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),qi(rc(this.rgba,-t))},n.prototype.grayscale=function(){return qi(rc(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),qi(lm(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),qi(lm(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?qi({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Be(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=ya(this.rgba);return typeof t=="number"?qi({h:t,s:e.s,l:e.l,a:e.a}):Be(e.h)},n.prototype.isEqual=function(t){return this.toHex()===qi(t).toHex()},n}(),qi=function(n){return n instanceof nc?n:new nc(n)},om=[],ab=function(n){n.forEach(function(t){om.indexOf(t)<0&&(t(nc,ic),om.push(t))})};function lb(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var l in e)s[e[l]]=l;var o={};n.prototype.toName=function(h){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,d,m=s[this.toHex()];if(m)return m;if(h!=null&&h.closest){var g=this.toRgb(),y=1/0,_="black";if(!o.length)for(var x in e)o[x]=new n(e[x]).toRgb();for(var A in e){var w=(c=g,d=o[A],Math.pow(c.r-d.r,2)+Math.pow(c.g-d.g,2)+Math.pow(c.b-d.b,2));w<y&&(y=w,_=A)}return _}},t.string.push([function(h){var c=h.toLowerCase(),d=c==="transparent"?"#0000":e[c];return d?new n(d).toRgb():null},"name"])}ab([lb]);const fn=class ku{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ku)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const s=typeof t;if(s!==typeof e)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((l,o)=>l===e[o]);if(t!==null&&e!==null){const l=Object.keys(t),o=Object.keys(e);return l.length!==o.length?!1:l.every(h=>t[h]===e[h])}return t===e}toRgba(){const[t,e,s,l]=this._components;return{r:t,g:e,b:s,a:l}}toRgb(){const[t,e,s]=this._components;return{r:t,g:e,b:s}}toRgbaString(){const[t,e,s]=this.toUint8RgbArray();return`rgba(${t},${e},${s},${this.alpha})`}toUint8RgbArray(t){const[e,s,l]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(s*255),t[2]=Math.round(l*255),t}toRgbArray(t){t=t??[];const[e,s,l]=this._components;return t[0]=e,t[1]=s,t[2]=l,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,s,l,o]=ku.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=s,this._components[2]*=l,this._components[3]*=o,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let s=this._int>>16&255,l=this._int>>8&255,o=this._int&255;return e&&(s=s*t+.5|0,l=l*t+.5|0,o=o*t+.5|0),(t*255<<24)+(s<<16)+(l<<8)+o}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,s,l]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(s*t)/t,this._components[2]=Math.round(l*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,s,l,o]=this._components;return t[0]=e,t[1]=s,t[2]=l,t[3]=o,t}normalize(t){let e,s,l,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const h=t;e=(h>>16&255)/255,s=(h>>8&255)/255,l=(h&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,s,l,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,s,l,o=255]=t,e/=255,s/=255,l/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const c=ku.HEX_PATTERN.exec(t);c&&(t=`#${c[2]}`)}const h=qi(t);h.isValid()&&({r:e,g:s,b:l,a:o}=h.rgba,e/=255,s/=255,l/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=s,this._components[2]=l,this._components[3]=o,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,s]=this._components;this._int=(t*255<<16)+(e*255<<8)+(s*255|0)}_clamp(t,e=0,s=1){return typeof t=="number"?Math.min(Math.max(t,e),s):(t.forEach((l,o)=>{t[o]=Math.min(Math.max(l,e),s)}),t)}};fn.shared=new fn,fn.temp=new fn,fn.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let oe=fn;function ob(n){return zt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),oe.shared.setValue(n).toHex()}function ub(n){return zt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),oe.shared.setValue(n).toNumber()}function hb(){const n=[],t=[];for(let s=0;s<32;s++)n[s]=s,t[s]=s;n[Dt.NORMAL_NPM]=Dt.NORMAL,n[Dt.ADD_NPM]=Dt.ADD,n[Dt.SCREEN_NPM]=Dt.SCREEN,t[Dt.NORMAL]=Dt.NORMAL_NPM,t[Dt.ADD]=Dt.ADD_NPM,t[Dt.SCREEN]=Dt.SCREEN_NPM;const e=[];return e.push(t),e.push(n),e}const um=hb();function hm(n,t){return um[t?1:0][n]}function cb(n,t=null){const e=n*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let s=0,l=0;s<e;s+=6,l+=4)t[s+0]=l+0,t[s+1]=l+1,t[s+2]=l+2,t[s+3]=l+0,t[s+4]=l+2,t[s+5]=l+3;return t}function cm(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function Ll(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function fm(n){return!(n&n-1)&&!!n}function dm(n){let t=(n>65535?1:0)<<4;n>>>=t;let e=(n>255?1:0)<<3;return n>>>=e,t|=e,e=(n>15?1:0)<<2,n>>>=e,t|=e,e=(n>3?1:0)<<1,n>>>=e,t|=e,t|n>>1}function dn(n,t,e){const s=n.length;let l;if(t>=s||e===0)return;e=t+e>s?s-t:e;const o=s-e;for(l=t;l<o;++l)n[l]=n[l+e];n.length=o}function Gr(n){return n===0?0:n<0?-1:1}let fb=0;function ws(){return++fb}const ac=class{constructor(n,t,e,s){this.left=n,this.top=t,this.right=e,this.bottom=s}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};ac.EMPTY=new ac(0,0,0,0);let pm=ac;const mm={},Wi=Object.create(null),Hr=Object.create(null);class db{constructor(t,e,s){this._canvas=gt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=s||gt.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function gm(n,t,e){for(let s=0,l=4*e*t;s<t;++s,l+=4)if(n[l+3]!==0)return!1;return!0}function ym(n,t,e,s,l){const o=4*t;for(let h=s,c=s*o+4*e;h<=l;++h,c+=o)if(n[c+3]!==0)return!1;return!0}function pb(n){const{width:t,height:e}=n,s=n.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");const l=s.getImageData(0,0,t,e).data;let o=0,h=0,c=t-1,d=e-1;for(;h<e&&gm(l,t,h);)++h;if(h===e)return pm.EMPTY;for(;gm(l,t,d);)--d;for(;ym(l,t,o,h,d);)++o;for(;ym(l,t,c,h,d);)--c;return++c,++d,new pm(o,h,c,d)}function mb(n){const t=pb(n),{width:e,height:s}=t;let l=null;if(!t.isEmpty()){const o=n.getContext("2d");if(o===null)throw new TypeError("Failed to get canvas 2D context");l=o.getImageData(t.left,t.top,e,s)}return{width:e,height:s,data:l}}function gb(n,t=globalThis.location){if(n.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function fr(n,t=1){var s;const e=(s=gt.RETINA_PREFIX)==null?void 0:s.exec(n);return e?parseFloat(e[1]):t}var mt=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(mt||{});const lc=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},vm=(n,t)=>lc(n).priority??t,Et={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(lc).forEach(t=>{t.type.forEach(e=>{var s,l;return(l=(s=this._removeHandlers)[e])==null?void 0:l.call(s,t)})}),this},add(...n){return n.map(lc).forEach(t=>{t.type.forEach(e=>{var o,h;const s=this._addHandlers,l=this._queue;s[e]?(o=s[e])==null||o.call(s,t):(l[e]=l[e]||[],(h=l[e])==null||h.push(t))})}),this},handle(n,t,e){var h;const s=this._addHandlers,l=this._removeHandlers;if(s[n]||l[n])throw new Error(`Extension type ${n} already has a handler`);s[n]=t,l[n]=e;const o=this._queue;return o[n]&&((h=o[n])==null||h.forEach(c=>t(c)),delete o[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(n,t,e=-1){return this.handle(n,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((l,o)=>vm(o,e)-vm(l,e)))},s=>{const l=t.indexOf(s.ref);l!==-1&&t.splice(l,1)})}};class oc{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const yb=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function vb(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function _b(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const s=yb.replace(/%forloop%/gi,vb(n));if(t.shaderSource(e,s),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}return n}const uc=0,hc=1,cc=2,fc=3,dc=4,pc=5;class $i{constructor(){this.data=0,this.blendMode=Dt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<uc)}set blend(t){!!(this.data&1<<uc)!==t&&(this.data^=1<<uc)}get offsets(){return!!(this.data&1<<hc)}set offsets(t){!!(this.data&1<<hc)!==t&&(this.data^=1<<hc)}get culling(){return!!(this.data&1<<cc)}set culling(t){!!(this.data&1<<cc)!==t&&(this.data^=1<<cc)}get depthTest(){return!!(this.data&1<<fc)}set depthTest(t){!!(this.data&1<<fc)!==t&&(this.data^=1<<fc)}get depthMask(){return!!(this.data&1<<pc)}set depthMask(t){!!(this.data&1<<pc)!==t&&(this.data^=1<<pc)}get clockwiseFrontFace(){return!!(this.data&1<<dc)}set clockwiseFrontFace(t){!!(this.data&1<<dc)!==t&&(this.data^=1<<dc)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==Dt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new $i;return t.depthTest=!1,t.blend=!0,t}}$i.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const mc=[];function _m(n,t){if(!n)return null;let e="";if(typeof n=="string"){const s=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);s&&(e=s[1].toLowerCase())}for(let s=mc.length-1;s>=0;--s){const l=mc[s];if(l.test&&l.test(n,e))return new l(n,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class wi{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,s,l,o,h,c,d){if(arguments.length>8)throw new Error("max arguments reached");const{name:m,items:g}=this;this._aliasCount++;for(let y=0,_=g.length;y<_;y++)g[y][m](t,e,s,l,o,h,c,d);return g===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(wi.prototype,{dispatch:{value:wi.prototype.emit},run:{value:wi.prototype.emit}});class va{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new wi("setRealSize"),this.onUpdate=new wi("update"),this.onError=new wi("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,s){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Fl extends va{constructor(t,e){const{width:s,height:l}=e||{};if(!s||!l)throw new Error("BufferResource width or height invalid");super(s,l),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,s){const l=t.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,this.unpackAlignment),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===We.UNPACK);const o=e.realWidth,h=e.realHeight;return s.width===o&&s.height===h?l.texSubImage2D(e.target,0,0,0,o,h,e.format,s.type,this.data):(s.width=o,s.height=h,l.texImage2D(e.target,0,s.internalFormat,o,h,0,e.format,s.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const xb={scaleMode:Xi.NEAREST,alphaMode:We.NPM},gc=class oa extends pa{constructor(t=null,e=null){super(),e=Object.assign({},oa.defaultOptions,e);const{alphaMode:s,mipmap:l,anisotropicLevel:o,scaleMode:h,width:c,height:d,wrapMode:m,format:g,type:y,target:_,resolution:x,resourceOptions:A}=e;t&&!(t instanceof va)&&(t=_m(t,A),t.internal=!0),this.resolution=x||gt.RESOLUTION,this.width=Math.round((c||0)*this.resolution)/this.resolution,this.height=Math.round((d||0)*this.resolution)/this.resolution,this._mipmap=l,this.anisotropicLevel=o,this._wrapMode=m,this._scaleMode=h,this.format=g,this.type=y,this.target=_,this.alphaMode=s,this.uid=ws(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=c>0&&d>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let s;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,s=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,s=!0),s&&this.dirtyStyleId++,this}setSize(t,e,s){return s=s||this.resolution,this.setRealSize(t*s,e*s,s)}setRealSize(t,e,s){return this.resolution=s||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=fm(this.realWidth)&&fm(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Hr[this.cacheId],delete Wi[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),oa.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,s=gt.STRICT_TEXTURE_CACHE){const l=typeof t=="string";let o=null;if(l)o=t;else{if(!t._pixiId){const c=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${c}_${ws()}`}o=t._pixiId}let h=Hr[o];if(l&&s&&!h)throw new Error(`The cacheId "${o}" does not exist in BaseTextureCache.`);return h||(h=new oa(t,e),h.cacheId=o,oa.addToCache(h,o)),h}static fromBuffer(t,e,s,l){t=t||new Float32Array(e*s*4);const o=new Fl(t,{width:e,height:s,...l==null?void 0:l.resourceOptions});let h,c;return t instanceof Float32Array?(h=ct.RGBA,c=Rt.FLOAT):t instanceof Int32Array?(h=ct.RGBA_INTEGER,c=Rt.INT):t instanceof Uint32Array?(h=ct.RGBA_INTEGER,c=Rt.UNSIGNED_INT):t instanceof Int16Array?(h=ct.RGBA_INTEGER,c=Rt.SHORT):t instanceof Uint16Array?(h=ct.RGBA_INTEGER,c=Rt.UNSIGNED_SHORT):t instanceof Int8Array?(h=ct.RGBA,c=Rt.BYTE):(h=ct.RGBA,c=Rt.UNSIGNED_BYTE),o.internal=!0,new oa(o,Object.assign({},xb,{type:c,format:h},l))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Hr[e]&&Hr[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Hr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Hr[t];if(e){const s=e.textureCacheIds.indexOf(t);return s>-1&&e.textureCacheIds.splice(s,1),delete Hr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Hr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};gc.defaultOptions={mipmap:Yi.POW2,anisotropicLevel:0,scaleMode:Xi.LINEAR,wrapMode:Fr.CLAMP,alphaMode:We.UNPACK,target:un.TEXTURE_2D,format:ct.RGBA,type:Rt.UNSIGNED_BYTE},gc._globalBatch=0;let It=gc;class yc{constructor(){this.texArray=null,this.blend=0,this.type=zi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let bb=0;class ye{constructor(t,e=!0,s=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=s,this.static=e,this.id=bb++,this.disposeRunner=new wi("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?ji.ELEMENT_ARRAY_BUFFER:ji.ARRAY_BUFFER}get index(){return this.type===ji.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ye(t)}}class Gl{constructor(t,e=0,s=!1,l=Rt.FLOAT,o,h,c,d=1){this.buffer=t,this.size=e,this.normalized=s,this.type=l,this.stride=o,this.start=h,this.instance=c,this.divisor=d}destroy(){this.buffer=null}static from(t,e,s,l,o){return new Gl(t,e,s,l,o)}}const Eb={Float32Array,Uint32Array,Int32Array,Uint8Array};function Tb(n,t){let e=0,s=0;const l={};for(let d=0;d<n.length;d++)s+=t[d],e+=n[d].length;const o=new ArrayBuffer(e*4);let h=null,c=0;for(let d=0;d<n.length;d++){const m=t[d],g=n[d],y=cm(g);l[y]||(l[y]=new Eb[y](o)),h=l[y];for(let _=0;_<g.length;_++){const x=(_/m|0)*s+c,A=_%m;h[x+A]=g[_]}c+=m}return new Float32Array(o)}const xm={5126:4,5123:2,5121:1};let Ab=0;const Sb={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class kr{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Ab++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new wi("disposeGeometry"),this.refCount=0}addAttribute(t,e,s=0,l=!1,o,h,c,d=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ye||(e instanceof Array&&(e=new Float32Array(e)),e=new ye(e));const m=t.split("|");if(m.length>1){for(let y=0;y<m.length;y++)this.addAttribute(m[y],e,s,l,o);return this}let g=this.buffers.indexOf(e);return g===-1&&(this.buffers.push(e),g=this.buffers.length-1),this.attributes[t]=new Gl(g,s,l,o,h,c,d),this.instanced=this.instanced||d,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ye||(t instanceof Array&&(t=new Uint16Array(t)),t=new ye(t)),t.type=ji.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],s=new ye;let l;for(l in this.attributes){const o=this.attributes[l],h=this.buffers[o.buffer];t.push(h.data),e.push(o.size*xm[o.type]/4),o.buffer=0}for(s.data=Tb(t,e),l=0;l<this.buffers.length;l++)this.buffers[l]!==this.indexBuffer&&this.buffers[l].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new kr;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new ye(this.buffers[e].data.slice(0));for(const e in this.attributes){const s=this.attributes[e];t.attributes[e]=new Gl(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=ji.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new kr,s=[],l=[],o=[];let h;for(let c=0;c<t.length;c++){h=t[c];for(let d=0;d<h.buffers.length;d++)l[d]=l[d]||0,l[d]+=h.buffers[d].data.length,o[d]=0}for(let c=0;c<h.buffers.length;c++)s[c]=new Sb[cm(h.buffers[c].data)](l[c]),e.buffers[c]=new ye(s[c]);for(let c=0;c<t.length;c++){h=t[c];for(let d=0;d<h.buffers.length;d++)s[d].set(h.buffers[d].data,o[d]),o[d]+=h.buffers[d].data.length}if(e.attributes=h.attributes,h.indexBuffer){e.indexBuffer=e.buffers[h.buffers.indexOf(h.indexBuffer)],e.indexBuffer.type=ji.ELEMENT_ARRAY_BUFFER;let c=0,d=0,m=0,g=0;for(let y=0;y<h.buffers.length;y++)if(h.buffers[y]!==h.indexBuffer){g=y;break}for(const y in h.attributes){const _=h.attributes[y];(_.buffer|0)===g&&(d+=_.size*xm[_.type]/4)}for(let y=0;y<t.length;y++){const _=t[y].indexBuffer.data;for(let x=0;x<_.length;x++)e.indexBuffer.data[x+m]+=c;c+=t[y].buffers[g].data.length/d,m+=_.length}}return e}}class bm extends kr{constructor(t=!1){super(),this._buffer=new ye(null,t,!1),this._indexBuffer=new ye(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Rt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Rt.FLOAT).addAttribute("aColor",this._buffer,4,!0,Rt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Rt.FLOAT).addIndex(this._indexBuffer)}}const Hl=Math.PI*2,wb=180/Math.PI,Rb=Math.PI/180;var Pe=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(Pe||{});class Vt{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Vt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}}Vt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const kl=[new Vt,new Vt,new Vt,new Vt];class Pt{constructor(t=0,e=0,s=0,l=0){this.x=Number(t),this.y=Number(e),this.width=Number(s),this.height=Number(l),this.type=Pe.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Pt(0,0,0,0)}clone(){return new Pt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const q=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=q)return!1;const rt=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>rt}const s=this.left,l=this.right,o=this.top,h=this.bottom;if(l<=s||h<=o)return!1;const c=kl[0].set(t.left,t.top),d=kl[1].set(t.left,t.bottom),m=kl[2].set(t.right,t.top),g=kl[3].set(t.right,t.bottom);if(m.x<=c.x||d.y<=c.y)return!1;const y=Math.sign(e.a*e.d-e.b*e.c);if(y===0||(e.apply(c,c),e.apply(d,d),e.apply(m,m),e.apply(g,g),Math.max(c.x,d.x,m.x,g.x)<=s||Math.min(c.x,d.x,m.x,g.x)>=l||Math.max(c.y,d.y,m.y,g.y)<=o||Math.min(c.y,d.y,m.y,g.y)>=h))return!1;const _=y*(d.y-c.y),x=y*(c.x-d.x),A=_*s+x*o,w=_*l+x*o,v=_*s+x*h,E=_*l+x*h;if(Math.max(A,w,v,E)<=_*c.x+x*c.y||Math.min(A,w,v,E)>=_*g.x+x*g.y)return!1;const R=y*(c.y-m.y),D=y*(m.x-c.x),P=R*s+D*o,I=R*l+D*o,Y=R*s+D*h,U=R*l+D*h;return!(Math.max(P,I,Y,U)<=R*c.x+D*c.y||Math.min(P,I,Y,U)>=R*g.x+D*g.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),l=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(s-e,0),this.y=l,this.height=Math.max(o-l,0),this}ceil(t=1,e=.001){const s=Math.ceil((this.x+this.width-e)*t)/t,l=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=s-this.x,this.height=l-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),l=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=s-e,this.y=l,this.height=o-l,this}}Pt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class zl{constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.radius=s,this.type=Pe.CIRC}clone(){return new zl(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const s=this.radius*this.radius;let l=this.x-t,o=this.y-e;return l*=l,o*=o,l+o<=s}getBounds(){return new Pt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}zl.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Xl{constructor(t=0,e=0,s=0,l=0){this.x=t,this.y=e,this.width=s,this.height=l,this.type=Pe.ELIP}clone(){return new Xl(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let s=(t-this.x)/this.width,l=(e-this.y)/this.height;return s*=s,l*=l,s+l<=1}getBounds(){return new Pt(this.x-this.width,this.y-this.height,this.width,this.height)}}Xl.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Rs{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const s=[];for(let l=0,o=e.length;l<o;l++)s.push(e[l].x,e[l].y);e=s}this.points=e,this.type=Pe.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Rs(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let s=!1;const l=this.points.length/2;for(let o=0,h=l-1;o<l;h=o++){const c=this.points[o*2],d=this.points[o*2+1],m=this.points[h*2],g=this.points[h*2+1];d>e!=g>e&&t<(m-c)*((e-d)/(g-d))+c&&(s=!s)}return s}}Rs.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((n,t)=>`${n}, ${t}`,"")}]`};class Yl{constructor(t=0,e=0,s=0,l=0,o=20){this.x=t,this.y=e,this.width=s,this.height=l,this.radius=o,this.type=Pe.RREC}clone(){return new Yl(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+s&&e<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let l=t-(this.x+s),o=e-(this.y+s);const h=s*s;if(l*l+o*o<=h||(l=t-(this.x+this.width-s),l*l+o*o<=h)||(o=e-(this.y+this.height-s),l*l+o*o<=h)||(l=t-(this.x+s),l*l+o*o<=h))return!0}return!1}}Yl.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class ue{constructor(t=1,e=0,s=0,l=1,o=0,h=0){this.array=null,this.a=t,this.b=e,this.c=s,this.d=l,this.tx=o,this.ty=h}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,s,l,o,h){return this.a=t,this.b=e,this.c=s,this.d=l,this.tx=o,this.ty=h,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const s=e||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,e){e=e||new Vt;const s=t.x,l=t.y;return e.x=this.a*s+this.c*l+this.tx,e.y=this.b*s+this.d*l+this.ty,e}applyInverse(t,e){e=e||new Vt;const s=1/(this.a*this.d+this.c*-this.b),l=t.x,o=t.y;return e.x=this.d*s*l+-this.c*s*o+(this.ty*this.c-this.tx*this.d)*s,e.y=this.a*s*o+-this.b*s*l+(-this.ty*this.a+this.tx*this.b)*s,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),l=this.a,o=this.c,h=this.tx;return this.a=l*e-this.b*s,this.b=l*s+this.b*e,this.c=o*e-this.d*s,this.d=o*s+this.d*e,this.tx=h*e-this.ty*s,this.ty=h*s+this.ty*e,this}append(t){const e=this.a,s=this.b,l=this.c,o=this.d;return this.a=t.a*e+t.b*l,this.b=t.a*s+t.b*o,this.c=t.c*e+t.d*l,this.d=t.c*s+t.d*o,this.tx=t.tx*e+t.ty*l+this.tx,this.ty=t.tx*s+t.ty*o+this.ty,this}setTransform(t,e,s,l,o,h,c,d,m){return this.a=Math.cos(c+m)*o,this.b=Math.sin(c+m)*o,this.c=-Math.sin(c-d)*h,this.d=Math.cos(c-d)*h,this.tx=t-(s*this.a+l*this.c),this.ty=e-(s*this.b+l*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,l=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=l*t.a+this.d*t.c,this.d=l*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,s=this.b,l=this.c,o=this.d,h=t.pivot,c=-Math.atan2(-l,o),d=Math.atan2(s,e),m=Math.abs(c+d);return m<1e-5||Math.abs(Hl-m)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=c,t.skew.y=d),t.scale.x=Math.sqrt(e*e+s*s),t.scale.y=Math.sqrt(l*l+o*o),t.position.x=this.tx+(h.x*e+h.y*l),t.position.y=this.ty+(h.x*s+h.y*o),t}invert(){const t=this.a,e=this.b,s=this.c,l=this.d,o=this.tx,h=t*l-e*s;return this.a=l/h,this.b=-e/h,this.c=-s/h,this.d=t/h,this.tx=(s*this.ty-l*o)/h,this.ty=-(t*this.ty-e*o)/h,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new ue;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new ue}static get TEMP_MATRIX(){return new ue}}ue.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Cs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ms=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ds=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Os=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],vc=[],Em=[],Vl=Math.sign;function Cb(){for(let n=0;n<16;n++){const t=[];vc.push(t);for(let e=0;e<16;e++){const s=Vl(Cs[n]*Cs[e]+Ds[n]*Ms[e]),l=Vl(Ms[n]*Cs[e]+Os[n]*Ms[e]),o=Vl(Cs[n]*Ds[e]+Ds[n]*Os[e]),h=Vl(Ms[n]*Ds[e]+Os[n]*Os[e]);for(let c=0;c<16;c++)if(Cs[c]===s&&Ms[c]===l&&Ds[c]===o&&Os[c]===h){t.push(c);break}}}for(let n=0;n<16;n++){const t=new ue;t.set(Cs[n],Ms[n],Ds[n],Os[n],0,0),Em.push(t)}}Cb();const ce={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Cs[n],uY:n=>Ms[n],vX:n=>Ds[n],vY:n=>Os[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>vc[n][t],sub:(n,t)=>vc[n][ce.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?ce.S:ce.N:Math.abs(t)*2<=Math.abs(n)?n>0?ce.E:ce.W:t>0?n>0?ce.SE:ce.SW:n>0?ce.NE:ce.NW,matrixAppendRotationInv:(n,t,e=0,s=0)=>{const l=Em[ce.inv(t)];l.tx=e,l.ty=s,n.append(l)}};class dr{constructor(t,e,s=0,l=0){this._x=s,this._y=l,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new dr(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}dr.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _c=class{constructor(){this.worldTransform=new ue,this.localTransform=new ue,this.position=new dr(this.onChange,this,0,0),this.scale=new dr(this.onChange,this,1,1),this.pivot=new dr(this.onChange,this,0,0),this.skew=new dr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const e=n.worldTransform,s=this.worldTransform;s.a=t.a*e.a+t.b*e.c,s.b=t.a*e.b+t.b*e.d,s.c=t.c*e.a+t.d*e.c,s.d=t.c*e.b+t.d*e.d,s.tx=t.tx*e.a+t.ty*e.c+e.tx,s.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};_c.IDENTITY=new _c;let xc=_c;xc.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Mb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Db=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Tm(n,t,e){const s=n.createShader(t);return n.shaderSource(s,e),n.compileShader(s),s}function bc(n){const t=new Array(n);for(let e=0;e<t.length;e++)t[e]=!1;return t}function Am(n,t){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return bc(2*t);case"bvec3":return bc(3*t);case"bvec4":return bc(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const pn=[{test:n=>n.type==="float"&&n.size===1&&!n.isArray,code:n=>`
            if(uv["${n}"] !== ud["${n}"].value)
            {
                ud["${n}"].value = uv["${n}"]
                gl.uniform1f(ud["${n}"].location, uv["${n}"])
            }
            `},{test:(n,t)=>(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(t==null||t.castToBaseTexture!==void 0),code:n=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${n}"], t);

            if(ud["${n}"].value !== t)
            {
                ud["${n}"].value = t;
                gl.uniform1i(ud["${n}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(n,t)=>n.type==="mat3"&&n.size===1&&!n.isArray&&t.a!==void 0,code:n=>`
            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));
            `,codeUbo:n=>`
                var ${n}_matrix = uv.${n}.toArray(true);

                data[offset] = ${n}_matrix[0];
                data[offset+1] = ${n}_matrix[1];
                data[offset+2] = ${n}_matrix[2];
        
                data[offset + 4] = ${n}_matrix[3];
                data[offset + 5] = ${n}_matrix[4];
                data[offset + 6] = ${n}_matrix[5];
        
                data[offset + 8] = ${n}_matrix[6];
                data[offset + 9] = ${n}_matrix[7];
                data[offset + 10] = ${n}_matrix[8];
            `},{test:(n,t)=>n.type==="vec2"&&n.size===1&&!n.isArray&&t.x!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${n}"].location, v.x, v.y);
                }`,codeUbo:n=>`
                v = uv.${n};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:n=>n.type==="vec2"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);
                }
            `},{test:(n,t)=>n.type==="vec4"&&n.size===1&&!n.isArray&&t.width!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(n,t)=>n.type==="vec4"&&n.size===1&&!n.isArray&&t.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${n}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(n,t)=>n.type==="vec3"&&n.size===1&&!n.isArray&&t.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${n}"].location, v.red, v.green, v.blue)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:n=>n.type==="vec4"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])
                }`}],Ob={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Bb={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Nb(n,t){var s;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const l in n.uniforms){const o=t[l];if(!o){((s=n.uniforms[l])==null?void 0:s.group)===!0&&(n.uniforms[l].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${l}, '${l}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${l}, syncData);
                    `));continue}const h=n.uniforms[l];let c=!1;for(let d=0;d<pn.length;d++)if(pn[d].test(o,h)){e.push(pn[d].code(l,h)),c=!0;break}if(!c){const d=(o.size===1&&!o.isArray?Ob:Bb)[o.type].replace("location",`ud["${l}"].location`);e.push(`
            cu = ud["${l}"];
            cv = cu.value;
            v = uv["${l}"];
            ${d};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const Sm={};let mn=Sm;function Ib(){if(mn===Sm||mn!=null&&mn.isContextLost()){const n=gt.ADAPTER.createCanvas();let t;gt.PREFER_ENV>=As.WEBGL2&&(t=n.getContext("webgl2",{})),t||(t=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),mn=t}return mn}let jl;function Ub(){if(!jl){jl=ci.MEDIUM;const n=Ib();if(n&&n.getShaderPrecisionFormat){const t=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);t&&(jl=t.precision?ci.HIGH:ci.MEDIUM)}}return jl}function wm(n,t){const e=n.getShaderSource(t).split(`
`).map((m,g)=>`${g}: ${m}`),s=n.getShaderInfoLog(t),l=s.split(`
`),o={},h=l.map(m=>parseFloat(m.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(m=>m&&!o[m]?(o[m]=!0,!0):!1),c=[""];h.forEach(m=>{e[m-1]=`%c${e[m-1]}%c`,c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const d=e.join(`
`);c[0]=d,console.error(s),console.groupCollapsed("click to view full shader code"),console.warn(...c),console.groupEnd()}function Pb(n,t,e,s){n.getProgramParameter(t,n.LINK_STATUS)||(n.getShaderParameter(e,n.COMPILE_STATUS)||wm(n,e),n.getShaderParameter(s,n.COMPILE_STATUS)||wm(n,s),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(t)))}const Lb={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Rm(n){return Lb[n]}let ql=null;const Cm={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Mm(n,t){if(!ql){const e=Object.keys(Cm);ql={};for(let s=0;s<e.length;++s){const l=e[s];ql[n[l]]=Cm[l]}}return ql[t]}function Dm(n,t,e){if(n.substring(0,9)!=="precision"){let s=t;return t===ci.HIGH&&e!==ci.HIGH&&(s=ci.MEDIUM),`precision ${s} float;
${n}`}else if(e!==ci.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}let _a;function Fb(){if(typeof _a=="boolean")return _a;try{_a=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{_a=!1}return _a}let Gb=0;const Wl={},Ec=class ua{constructor(t,e,s="pixi-shader",l={}){this.extra={},this.id=Gb++,this.vertexSrc=t||ua.defaultVertexSrc,this.fragmentSrc=e||ua.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=l,this.vertexSrc.substring(0,8)!=="#version"&&(s=s.replace(/\s+/g,"-"),Wl[s]?(Wl[s]++,s+=`-${Wl[s]}`):Wl[s]=1,this.vertexSrc=`#define SHADER_NAME ${s}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${s}
${this.fragmentSrc}`,this.vertexSrc=Dm(this.vertexSrc,ua.defaultVertexPrecision,ci.HIGH),this.fragmentSrc=Dm(this.fragmentSrc,ua.defaultFragmentPrecision,Ub())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Db}static get defaultFragmentSrc(){return Mb}static from(t,e,s){const l=t+e;let o=mm[l];return o||(mm[l]=o=new ua(t,e,s)),o}};Ec.defaultVertexPrecision=ci.HIGH,Ec.defaultFragmentPrecision=hr.apple.device?ci.HIGH:ci.MEDIUM;let pr=Ec,Hb=0;class Ri{constructor(t,e,s){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Hb++,this.static=!!e,this.ubo=!!s,t instanceof ye?(this.buffer=t,this.buffer.type=ji.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ye(new Float32Array(1)),this.buffer.type=ji.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,s){if(!this.ubo)this.uniforms[t]=new Ri(e,s);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,s){return new Ri(t,e,s)}static uboFrom(t,e){return new Ri(t,e??!0,!0)}}class Zi{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Ri?this.uniformGroup=e:this.uniformGroup=new Ri(e):this.uniformGroup=new Ri({}),this.disposeRunner=new wi("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const s in e.uniforms){const l=e.uniforms[s];if(l.group===!0&&this.checkUniformExists(t,l))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,s){const l=pr.from(t,e);return new Zi(l,s)}}class kb{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const s=new Int32Array(t);for(let o=0;o<t;o++)s[o]=o;this.defaultGroupCache[t]=Ri.from({uSamplers:s},!0);let l=this.fragTemplate;l=l.replace(/%count%/gi,`${t}`),l=l.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new pr(this.vertexSrc,l)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new ue,default:this.defaultGroupCache[t]};return new Zi(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let s=0;s<t;s++)s>0&&(e+=`
else `),s<t-1&&(e+=`if(vTextureId < ${s}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${s}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class Tc{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function zb(){return!hr.apple.device}function Xb(n){let t=!0;const e=gt.ADAPTER.getNavigator();if(hr.tablet||hr.phone){if(hr.apple.device){const s=e.userAgent.match(/OS (\d+)_(\d+)?/);s&&parseInt(s[1],10)<11&&(t=!1)}if(hr.android.device){const s=e.userAgent.match(/Android\s([0-9.]*)/);s&&parseInt(s[1],10)<7&&(t=!1)}}return t?n:4}class $l{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var Yb=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Vb=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const xa=class Gi extends $l{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=bm,this.vertexSize=6,this.state=$i.for2d(),this.size=Gi.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??Xb(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??zb(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return zt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return Vb}static get defaultFragmentTemplate(){return Yb}setShaderGenerator({vertex:t=Gi.defaultVertexSrc,fragment:e=Gi.defaultFragmentTemplate}={}){this.shaderGenerator=new kb(t,e)}contextChange(){const t=this.renderer.gl;gt.PREFER_ENV===As.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Gi.defaultMaxTextures),this.maxTextures=_b(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=Gi,s=this.size/4,l=Math.floor(s/this.maxTextures)+1;for(;t.length<s;)t.push(new yc);for(;e.length<l;)e.push(new Tc);for(let o=0;o<this.maxTextures;o++)this._tempBoundTextures[o]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,s=Gi._textureArrayPool,l=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count;let c=++It._globalBatch,d=0,m=s[0],g=0;l.copyBoundTextures(o,e);for(let y=0;y<this._bufferSize;++y){const _=t[y];t[y]=null,_._batchEnabled!==c&&(m.count>=e&&(l.boundArray(m,o,c,e),this.buildDrawCalls(m,g,y),g=y,m=s[++d],++c),_._batchEnabled=c,_.touched=h,m.elements[m.count++]=_)}m.count>0&&(l.boundArray(m,o,c,e),this.buildDrawCalls(m,g,this._bufferSize),++d,++c);for(let y=0;y<o.length;y++)o[y]=null;It._globalBatch=c}buildDrawCalls(t,e,s){const{_bufferedElements:l,_attributeBuffer:o,_indexBuffer:h,vertexSize:c}=this,d=Gi._drawCallPool;let m=this._dcIndex,g=this._aIndex,y=this._iIndex,_=d[m];_.start=this._iIndex,_.texArray=t;for(let x=e;x<s;++x){const A=l[x],w=A._texture.baseTexture,v=um[w.alphaMode?1:0][A.blendMode];l[x]=null,e<x&&_.blend!==v&&(_.size=y-_.start,e=x,_=d[++m],_.texArray=t,_.start=y),this.packInterleavedGeometry(A,o,h,g,y),g+=A.vertexData.length/2*c,y+=A.indices.length,_.blend=v}e<s&&(_.size=y-_.start,++m),this._dcIndex=m,this._aIndex=g,this._iIndex=y}bindAndClearTexArray(t){const e=this.renderer.texture;for(let s=0;s<t.count;s++)e.bind(t.elements[s],t.ids[s]),t.elements[s]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:s}=this;Gi.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:s}=this.renderer,l=Gi._drawCallPool;let o=null;for(let h=0;h<t;h++){const{texArray:c,type:d,size:m,start:g,blend:y}=l[h];o!==c&&(o=c,this.bindAndClearTexArray(c)),this.state.blendMode=y,s.set(this.state),e.drawElements(d,m,e.UNSIGNED_SHORT,g*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Gi.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=Ll(Math.ceil(t/8)),s=dm(e),l=e*8;this._aBuffers.length<=s&&(this._iBuffers.length=s+1);let o=this._aBuffers[l];return o||(this._aBuffers[l]=o=new oc(l*this.vertexSize*4)),o}getIndexBuffer(t){const e=Ll(Math.ceil(t/12)),s=dm(e),l=e*12;this._iBuffers.length<=s&&(this._iBuffers.length=s+1);let o=this._iBuffers[s];return o||(this._iBuffers[s]=o=new Uint16Array(l)),o}packInterleavedGeometry(t,e,s,l,o){const{uint32View:h,float32View:c}=e,d=l/this.vertexSize,m=t.uvs,g=t.indices,y=t.vertexData,_=t._texture.baseTexture._batchLocation,x=Math.min(t.worldAlpha,1),A=oe.shared.setValue(t._tintRGB).toPremultiplied(x,t._texture.baseTexture.alphaMode>0);for(let w=0;w<y.length;w+=2)c[l++]=y[w],c[l++]=y[w+1],c[l++]=m[w],c[l++]=m[w+1],h[l++]=A,c[l++]=_;for(let w=0;w<g.length;w++)s[o++]=d+g[w]}};xa.defaultBatchSize=4096,xa.extension={name:"batch",type:mt.RendererPlugin},xa._drawCallPool=[],xa._textureArrayPool=[];let Bs=xa;Et.add(Bs);var jb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,qb=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Ac=class wl extends Zi{constructor(t,e,s){const l=pr.from(t||wl.defaultVertexSrc,e||wl.defaultFragmentSrc);super(l,s),this.padding=0,this.resolution=wl.defaultResolution,this.multisample=wl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new $i}apply(t,e,s,l,o){t.applyFilter(this,e,s,l)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return qb}static get defaultFragmentSrc(){return jb}};Ac.defaultResolution=1,Ac.defaultMultisample=be.NONE;let je=Ac;class Zl{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new oe(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:s,backgroundAlpha:l}=t,o=s??e;o!==void 0&&(this.color=o),this.alpha=l}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Zl.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Zl.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"background"},Et.add(Zl);class Om{constructor(t){this.renderer=t,this.emptyRenderer=new $l(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:s}=this.renderer.texture;for(let l=e-1;l>=0;--l)t[l]=s[l]||null,t[l]&&(t[l]._batchLocation=l)}boundArray(t,e,s,l){const{elements:o,ids:h,count:c}=t;let d=0;for(let m=0;m<c;m++){const g=o[m],y=g._batchLocation;if(y>=0&&y<l&&e[y]===g){h[m]=y;continue}for(;d<l;){const _=e[d];if(_&&_._batchEnabled===s&&_._batchLocation===d){d++;continue}h[m]=d,g._batchLocation=d,e[d]=g;break}}}destroy(){this.renderer=null}}Om.extension={type:mt.RendererSystem,name:"batch"},Et.add(Om);let Bm=0;class Kl{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Bm++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,s=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:s,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Bm++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let s;if(gt.PREFER_ENV>=As.WEBGL2&&(s=t.getContext("webgl2",e)),s)this.webGLVersion=2;else if(this.webGLVersion=1,s=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!s)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=s,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),s="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;s&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const l=s||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=l,l||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Kl.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Kl.extension={type:mt.RendererSystem,name:"context"},Et.add(Kl);class Sc{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new wi("disposeFramebuffer"),this.multisample=be.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new It(null,{scaleMode:Xi.NEAREST,resolution:1,mipmap:Yi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new It(null,{scaleMode:Xi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Yi.OFF,format:ct.DEPTH_COMPONENT,type:Rt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let s=0;s<this.colorTextures.length;s++){const l=this.colorTextures[s],o=l.resolution;l.setSize(t/o,e/o)}if(this.depthTexture){const s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Nm extends It{constructor(t={}){if(typeof t=="number"){const e=arguments[0],s=arguments[1],l=arguments[2],o=arguments[3];t={width:e,height:s,scaleMode:l,resolution:o}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=be.NONE),super(null,t),this.mipmap=Yi.OFF,this.valid=!0,this._clear=new oe([0,0,0,0]),this.framebuffer=new Sc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class mr extends va{constructor(t){const e=t,s=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,l=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(s,l),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,s){s===void 0&&!e.startsWith("data:")?t.crossOrigin=gb(e):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}upload(t,e,s,l){const o=t.gl,h=e.realWidth,c=e.realHeight;if(l=l||this.source,typeof HTMLImageElement<"u"&&l instanceof HTMLImageElement){if(!l.complete||l.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&l instanceof HTMLVideoElement&&l.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===We.UNPACK),!this.noSubImage&&e.target===o.TEXTURE_2D&&s.width===h&&s.height===c?o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,s.type,l):(s.width=h,s.height=c,o.texImage2D(e.target,0,s.internalFormat,e.format,s.type,l)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,s=t.naturalHeight||t.videoHeight||t.height;this.resize(e,s),super.update()}dispose(){this.source=null}}class Im extends mr{constructor(t,e){if(e=e||{},typeof t=="string"){const s=new Image;mr.crossOrigin(s,t,e.crossorigin),s.src=t,t=s}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??gt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,s)=>{const l=this.source;this.url=l.src;const o=()=>{this.destroyed||(l.onload=null,l.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};l.complete&&l.src?o():(l.onload=o,l.onerror=h=>{s(h),this.onError.emit(h)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,s=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:s?"cors":"no-cors"}).then(l=>l.blob()).then(l=>e(l,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===We.UNPACK?"premultiply":"none"})).then(l=>this.destroyed?Promise.reject():(this.bitmap=l,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,s){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,s,this.bitmap),!this.preserveBitmap){let l=!0;const o=e._glTextures;for(const h in o){const c=o[h];if(c!==s&&c.dirtyId!==e.dirtyId){l=!1;break}}l&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class wc{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,s){const l=e.width,o=e.height;if(s){const h=t.width/2/l,c=t.height/2/o,d=t.x/l+h,m=t.y/o+c;s=ce.add(s,ce.NW),this.x0=d+h*ce.uX(s),this.y0=m+c*ce.uY(s),s=ce.add(s,2),this.x1=d+h*ce.uX(s),this.y1=m+c*ce.uY(s),s=ce.add(s,2),this.x2=d+h*ce.uX(s),this.y2=m+c*ce.uY(s),s=ce.add(s,2),this.x3=d+h*ce.uX(s),this.y3=m+c*ce.uY(s)}else this.x0=t.x/l,this.y0=t.y/o,this.x1=(t.x+t.width)/l,this.y1=t.y/o,this.x2=(t.x+t.width)/l,this.y2=(t.y+t.height)/o,this.x3=t.x/l,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}wc.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Um=new wc;function Ql(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}class bt extends pa{constructor(t,e,s,l,o,h,c){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Pt(0,0,1,1)),t instanceof bt&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=l,this.valid=!1,this.destroyed=!1,this._uvs=Um,this.uvMatrix=null,this.orig=s||e,this._rotate=Number(o||0),o===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=h?new Vt(h.x,h.y):new Vt(0,0),this.defaultBorders=c,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&Wi[e.url]&&bt.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,bt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var l;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),s=new bt(this.baseTexture,!this.noFrame&&t,e,(l=this.trim)==null?void 0:l.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(s._frame=t),s}updateUvs(){this._uvs===Um&&(this._uvs=new wc),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},s=gt.STRICT_TEXTURE_CACHE){const l=typeof t=="string";let o=null;if(l)o=t;else if(t instanceof It){if(!t.cacheId){const c=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${c}-${ws()}`,It.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){const c=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${c}_${ws()}`}o=t._pixiId}let h=Wi[o];if(l&&s&&!h)throw new Error(`The cacheId "${o}" does not exist in TextureCache.`);return!h&&!(t instanceof It)?(e.resolution||(e.resolution=fr(t)),h=new bt(new It(t,e)),h.baseTexture.cacheId=o,It.addToCache(h.baseTexture,o),bt.addToCache(h,o)):!h&&t instanceof It&&(h=new bt(t),bt.addToCache(h,o)),h}static fromURL(t,e){const s=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),l=bt.from(t,Object.assign({resourceOptions:s},e),!1),o=l.baseTexture.resource;return l.baseTexture.valid?Promise.resolve(l):o.load().then(()=>Promise.resolve(l))}static fromBuffer(t,e,s,l){return new bt(It.fromBuffer(t,e,s,l))}static fromLoader(t,e,s,l){const o=new It(t,Object.assign({scaleMode:It.defaultOptions.scaleMode,resolution:fr(e)},l)),{resource:h}=o;h instanceof Im&&(h.url=e);const c=new bt(o);return s||(s=e),It.addToCache(c.baseTexture,s),bt.addToCache(c,s),s!==e&&(It.addToCache(c.baseTexture,e),bt.addToCache(c,e)),c.baseTexture.valid?Promise.resolve(c):new Promise(d=>{c.baseTexture.once("loaded",()=>d(c))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Wi[e]&&Wi[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),Wi[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Wi[t];if(e){const s=e.textureCacheIds.indexOf(t);return s>-1&&e.textureCacheIds.splice(s,1),delete Wi[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)Wi[t.textureCacheIds[e]]===t&&delete Wi[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:s,width:l,height:o}=t,h=e+l>this.baseTexture.width,c=s+o>this.baseTexture.height;if(h||c){const d=h&&c?"and":"or",m=`X: ${e} + ${l} = ${e+l} > ${this.baseTexture.width}`,g=`Y: ${s} + ${o} = ${s+o} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${m} ${d} ${g}`)}this.valid=l&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return bt._EMPTY||(bt._EMPTY=new bt(new It),Ql(bt._EMPTY),Ql(bt._EMPTY.baseTexture)),bt._EMPTY}static get WHITE(){if(!bt._WHITE){const t=gt.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),bt._WHITE=new bt(It.from(t)),Ql(bt._WHITE),Ql(bt._WHITE.baseTexture)}return bt._WHITE}}class Ns extends bt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,s=!0){const l=this.baseTexture.resolution,o=Math.round(t*l)/l,h=Math.round(e*l)/l;this.valid=o>0&&h>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=h,s&&this.baseTexture.resize(o,h),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Ns(new Nm(t))}}class Pm{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,s=be.NONE){const l=new Nm(Object.assign({width:t,height:e,resolution:1,multisample:s},this.textureOptions));return new Ns(l)}getOptimalTexture(t,e,s=1,l=be.NONE){let o;t=Math.max(Math.ceil(t*s-1e-6),1),e=Math.max(Math.ceil(e*s-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=Ll(t),e=Ll(e),o=((t&65535)<<16|e&65535)>>>0,l>1&&(o+=l*4294967296)):o=l>1?-l:-1,this.texturePool[o]||(this.texturePool[o]=[]);let h=this.texturePool[o].pop();return h||(h=this.createTexture(t,e,l)),h.filterPoolKey=o,h.setResolution(s),h}getFilterTexture(t,e,s){const l=this.getOptimalTexture(t.width,t.height,e||t.resolution,s||be.NONE);return l.filterFrame=t.filterFrame,l}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const s=this.texturePool[e];if(s)for(let l=0;l<s.length;l++)s[l].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const s=this.texturePool[e];if(s)for(let l=0;l<s.length;l++)s[l].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Pm.SCREEN_KEY=-1;class Wb extends kr{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Lm extends kr{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ye(this.vertices),this.uvBuffer=new ye(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let s=0,l=0;return this.uvs[0]=s,this.uvs[1]=l,this.uvs[2]=s+e.width/t.width,this.uvs[3]=l,this.uvs[4]=s+e.width/t.width,this.uvs[5]=l+e.height/t.height,this.uvs[6]=s,this.uvs[7]=l+e.height/t.height,s=e.x,l=e.y,this.vertices[0]=s,this.vertices[1]=l,this.vertices[2]=s+e.width,this.vertices[3]=l,this.vertices[4]=s+e.width,this.vertices[5]=l+e.height,this.vertices[6]=s,this.vertices[7]=l+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class $b{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=be.NONE,this.sourceFrame=new Pt,this.destinationFrame=new Pt,this.bindingSourceFrame=new Pt,this.bindingDestinationFrame=new Pt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Jl=[new Vt,new Vt,new Vt,new Vt],Rc=new ue;class Fm{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Pm,this.statePool=[],this.quad=new Wb,this.quadUv=new Lm,this.tempRect=new Pt,this.activeState={},this.globalUniforms=new Ri({outputFrame:new Pt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const s=this.renderer,l=this.defaultFilterStack,o=this.statePool.pop()||new $b,h=s.renderTexture;let c,d;if(h.current){const v=h.current;c=v.resolution,d=v.multisample}else c=s.resolution,d=s.multisample;let m=e[0].resolution||c,g=e[0].multisample??d,y=e[0].padding,_=e[0].autoFit,x=e[0].legacy??!0;for(let v=1;v<e.length;v++){const E=e[v];m=Math.min(m,E.resolution||c),g=Math.min(g,E.multisample??d),y=this.useMaxPadding?Math.max(y,E.padding):y+E.padding,_=_&&E.autoFit,x=x||(E.legacy??!0)}l.length===1&&(this.defaultFilterStack[0].renderTexture=h.current),l.push(o),o.resolution=m,o.multisample=g,o.legacy=x,o.target=t,o.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),o.sourceFrame.pad(y);const A=this.tempRect.copyFrom(h.sourceFrame);s.projection.transform&&this.transformAABB(Rc.copyFrom(s.projection.transform).invert(),A),_?(o.sourceFrame.fit(A),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(A)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,h.current?h.current.resolution:s.resolution,h.sourceFrame,h.destinationFrame,s.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,m,g),o.filters=e,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;const w=this.tempRect;w.x=0,w.y=0,w.width=o.sourceFrame.width,w.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(h.sourceFrame),o.bindingDestinationFrame.copyFrom(h.destinationFrame),o.transform=s.projection.transform,s.projection.transform=null,h.bind(o.renderTexture,o.sourceFrame,w),s.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),s=e.filters;this.activeState=e;const l=this.globalUniforms.uniforms;l.outputFrame=e.sourceFrame,l.resolution=e.resolution;const o=l.inputSize,h=l.inputPixel,c=l.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],h[0]=Math.round(o[0]*e.resolution),h[1]=Math.round(o[1]*e.resolution),h[2]=1/h[0],h[3]=1/h[1],c[0]=.5*h[2],c[1]=.5*h[3],c[2]=e.sourceFrame.width*o[2]-.5*h[2],c[3]=e.sourceFrame.height*o[3]-.5*h[3],e.legacy){const m=l.filterArea;m[0]=e.destinationFrame.width,m[1]=e.destinationFrame.height,m[2]=e.sourceFrame.x,m[3]=e.sourceFrame.y,l.filterClamp=l.inputClamp}this.globalUniforms.update();const d=t[t.length-1];if(this.renderer.framebuffer.blit(),s.length===1)s[0].apply(this,e.renderTexture,d.renderTexture,Vi.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let m=e.renderTexture,g=this.getOptimalFilterTexture(m.width,m.height,e.resolution);g.filterFrame=m.filterFrame;let y=0;for(y=0;y<s.length-1;++y){y===1&&e.multisample>1&&(g=this.getOptimalFilterTexture(m.width,m.height,e.resolution),g.filterFrame=m.filterFrame),s[y].apply(this,m,g,Vi.CLEAR,e);const _=m;m=g,g=_}s[y].apply(this,m,d.renderTexture,Vi.BLEND,e),y>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(m),this.returnFilterTexture(g)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=Vi.CLEAR){const{renderTexture:s,state:l}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const h=this.tempRect;h.x=0,h.y=0,h.width=t.filterFrame.width,h.height=t.filterFrame.height,s.bind(t,t.filterFrame,h)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const o=l.stateId&1||this.forceClear;(e===Vi.CLEAR||e===Vi.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,s,l){const o=this.renderer;o.state.set(t.state),this.bindAndClear(s,l),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(zi.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(zi.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:s,destinationFrame:l}=this.activeState,{orig:o}=e._texture,h=t.set(l.width,0,0,l.height,s.x,s.y),c=e.worldTransform.copyTo(ue.TEMP_MATRIX);return c.invert(),h.prepend(c),h.scale(1/o.width,1/o.height),h.translate(e.anchor.x,e.anchor.y),h}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,s=1,l=be.NONE){return this.texturePool.getOptimalTexture(t,e,s,l)}getFilterTexture(t,e,s){if(typeof t=="number"){const o=t;t=e,e=o}t=t||this.activeState.renderTexture;const l=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,s||be.NONE);return l.filterFrame=t.filterFrame,l}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const s=Jl[0],l=Jl[1],o=Jl[2],h=Jl[3];s.set(e.left,e.top),l.set(e.left,e.bottom),o.set(e.right,e.top),h.set(e.right,e.bottom),t.apply(s,s),t.apply(l,l),t.apply(o,o),t.apply(h,h);const c=Math.min(s.x,l.x,o.x,h.x),d=Math.min(s.y,l.y,o.y,h.y),m=Math.max(s.x,l.x,o.x,h.x),g=Math.max(s.y,l.y,o.y,h.y);e.x=c,e.y=d,e.width=m-c,e.height=g-d}roundFrame(t,e,s,l,o){if(!(t.width<=0||t.height<=0||s.width<=0||s.height<=0)){if(o){const{a:h,b:c,c:d,d:m}=o;if((Math.abs(c)>1e-4||Math.abs(d)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(m)>1e-4))return}o=o?Rc.copyFrom(o):Rc.identity(),o.translate(-s.x,-s.y).scale(l.width/s.width,l.height/s.height).translate(l.x,l.y),this.transformAABB(o,t),t.ceil(e),this.transformAABB(o.invert(),t)}}}Fm.extension={type:mt.RendererSystem,name:"filter"},Et.add(Fm);class Zb{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=be.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Kb=new Pt;class Gm{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Sc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Pt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,s=this.renderer.context.extensions.depthTexture;gt.PREFER_ENV===As.WEBGL_LEGACY&&(e=null,s=null),e?t.drawBuffers=l=>e.drawBuffersWEBGL(l):(this.hasMRT=!1,t.drawBuffers=()=>{}),s||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,s=0){const{gl:l}=this;if(t){const o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,l.bindFramebuffer(l.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==s&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=s),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,s)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let h=0;h<t.colorTextures.length;h++){const c=t.colorTextures[h];this.renderer.texture.unbind(c.parentTextureArray||c)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const h=e.width>>s,c=e.height>>s,d=h/e.width;this.setViewport(e.x*d,e.y*d,h,c)}else{const h=t.width>>s,c=t.height>>s;this.setViewport(0,0,h,c)}}else this.current&&(this.current=null,l.bindFramebuffer(l.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,s,l){const o=this.viewport;t=Math.round(t),e=Math.round(e),s=Math.round(s),l=Math.round(l),(o.width!==s||o.height!==l||o.x!==t||o.y!==e)&&(o.x=t,o.y=e,o.width=s,o.height=l,this.gl.viewport(t,e,s,l))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,s,l,o=th.COLOR|th.DEPTH){const{gl:h}=this;h.clearColor(t,e,s,l),h.clear(o)}initFramebuffer(t){const{gl:e}=this,s=new Zb(e.createFramebuffer());return s.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(t),t.disposeRunner.add(this),s}resizeFramebuffer(t){const{gl:e}=this,s=t.glFramebuffers[this.CONTEXT_UID];if(s.stencil){e.bindRenderbuffer(e.RENDERBUFFER,s.stencil);let h;this.renderer.context.webGLVersion===1?h=e.DEPTH_STENCIL:t.depth&&t.stencil?h=e.DEPTH24_STENCIL8:t.depth?h=e.DEPTH_COMPONENT24:h=e.STENCIL_INDEX8,s.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,h,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,h,t.width,t.height)}const l=t.colorTextures;let o=l.length;e.drawBuffers||(o=Math.min(o,1));for(let h=0;h<o;h++){const c=l[h],d=c.parentTextureArray||c;this.renderer.texture.bind(d,0),h===0&&s.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,s.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:s}=this,l=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures;let h=o.length;s.drawBuffers||(h=Math.min(h,1)),l.multisample>1&&this.canMultisampleFramebuffer(t)?l.msaaBuffer=l.msaaBuffer||s.createRenderbuffer():l.msaaBuffer&&(s.deleteRenderbuffer(l.msaaBuffer),l.msaaBuffer=null,l.blitFramebuffer&&(l.blitFramebuffer.dispose(),l.blitFramebuffer=null));const c=[];for(let d=0;d<h;d++){const m=o[d],g=m.parentTextureArray||m;this.renderer.texture.bind(g,0),d===0&&l.msaaBuffer?(s.bindRenderbuffer(s.RENDERBUFFER,l.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,l.multisample,g._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,l.msaaBuffer)):(s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+d,m.target,g._glTextures[this.CONTEXT_UID].texture,e),c.push(s.COLOR_ATTACHMENT0+d))}if(c.length>1&&s.drawBuffers(c),t.depthTexture&&this.writeDepthTexture){const d=t.depthTexture;this.renderer.texture.bind(d,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,d._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){l.stencil=l.stencil||s.createRenderbuffer();let d,m;this.renderer.context.webGLVersion===1?(d=s.DEPTH_STENCIL_ATTACHMENT,m=s.DEPTH_STENCIL):t.depth&&t.stencil?(d=s.DEPTH_STENCIL_ATTACHMENT,m=s.DEPTH24_STENCIL8):t.depth?(d=s.DEPTH_ATTACHMENT,m=s.DEPTH_COMPONENT24):(d=s.STENCIL_ATTACHMENT,m=s.STENCIL_INDEX8),s.bindRenderbuffer(s.RENDERBUFFER,l.stencil),l.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,l.multisample,m,t.width,t.height):s.renderbufferStorage(s.RENDERBUFFER,m,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,d,s.RENDERBUFFER,l.stencil)}else l.stencil&&(s.deleteRenderbuffer(l.stencil),l.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let s=be.NONE;if(t<=1||e===null)return s;for(let l=0;l<e.length;l++)if(e[l]<=t){s=e[l];break}return s===1&&(s=be.NONE),s}blit(t,e,s){const{current:l,renderer:o,gl:h,CONTEXT_UID:c}=this;if(o.context.webGLVersion!==2||!l)return;const d=l.glFramebuffers[c];if(!d)return;if(!t){if(!d.msaaBuffer)return;const g=l.colorTextures[0];if(!g)return;d.blitFramebuffer||(d.blitFramebuffer=new Sc(l.width,l.height),d.blitFramebuffer.addColorTexture(0,g)),t=d.blitFramebuffer,t.colorTextures[0]!==g&&(t.colorTextures[0]=g,t.dirtyId++,t.dirtyFormat++),(t.width!==l.width||t.height!==l.height)&&(t.width=l.width,t.height=l.height,t.dirtyId++,t.dirtySize++)}e||(e=Kb,e.width=l.width,e.height=l.height),s||(s=e);const m=e.width===s.width&&e.height===s.height;this.bind(t),h.bindFramebuffer(h.READ_FRAMEBUFFER,d.framebuffer),h.blitFramebuffer(e.left,e.top,e.right,e.bottom,s.left,s.top,s.right,s.bottom,h.COLOR_BUFFER_BIT,m?h.NEAREST:h.LINEAR),h.bindFramebuffer(h.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const s=t.glFramebuffers[this.CONTEXT_UID],l=this.gl;if(!s)return;delete t.glFramebuffers[this.CONTEXT_UID];const o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),e||(l.deleteFramebuffer(s.framebuffer),s.msaaBuffer&&l.deleteRenderbuffer(s.msaaBuffer),s.stencil&&l.deleteRenderbuffer(s.stencil)),s.blitFramebuffer&&this.disposeFramebuffer(s.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let s=0;s<e.length;s++)this.disposeFramebuffer(e[s],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const s=t.width,l=t.height,o=this.gl,h=e.stencil=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,h);let c,d;this.renderer.context.webGLVersion===1?(c=o.DEPTH_STENCIL_ATTACHMENT,d=o.DEPTH_STENCIL):t.depth?(c=o.DEPTH_STENCIL_ATTACHMENT,d=o.DEPTH24_STENCIL8):(c=o.STENCIL_ATTACHMENT,d=o.STENCIL_INDEX8),e.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,e.multisample,d,s,l):o.renderbufferStorage(o.RENDERBUFFER,d,s,l),o.framebufferRenderbuffer(o.FRAMEBUFFER,c,o.RENDERBUFFER,h)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Pt}destroy(){this.renderer=null}}Gm.extension={type:mt.RendererSystem,name:"framebuffer"},Et.add(Gm);const Cc={5126:4,5123:2,5121:1};class Hm{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let s=this.renderer.context.extensions.vertexArrayObject;gt.PREFER_ENV===As.WEBGL_LEGACY&&(s=null),s?(t.createVertexArray=()=>s.createVertexArrayOES(),t.bindVertexArray=l=>s.bindVertexArrayOES(l),t.deleteVertexArray=l=>s.deleteVertexArrayOES(l)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=(l,o)=>s.vertexAttribDivisorANGLE(l,o),t.drawElementsInstanced=(l,o,h,c,d)=>s.drawElementsInstancedANGLE(l,o,h,c,d),t.drawArraysInstanced=(l,o,h,c)=>s.drawArraysInstancedANGLE(l,o,h,c)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:s}=this;let l=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;l||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=l={},o=!0);const h=l[e.program.id]||this.initGeometryVao(t,e,o);this._activeGeometry=t,this._activeVao!==h&&(this._activeVao=h,this.hasVao?s.bindVertexArray(h):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let s=0;s<t.buffers.length;s++){const l=t.buffers[s];e.update(l)}}checkCompatibility(t,e){const s=t.attributes,l=e.attributeData;for(const o in l)if(!s[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(t,e){const s=t.attributes,l=e.attributeData,o=["g",t.id];for(const h in s)l[h]&&o.push(h,l[h].location);return o.join("-")}initGeometryVao(t,e,s=!0){const l=this.gl,o=this.CONTEXT_UID,h=this.renderer.buffer,c=e.program;c.glPrograms[o]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,c);const d=this.getSignature(t,c),m=t.glVertexArrayObjects[this.CONTEXT_UID];let g=m[d];if(g)return m[c.id]=g,g;const y=t.buffers,_=t.attributes,x={},A={};for(const w in y)x[w]=0,A[w]=0;for(const w in _)!_[w].size&&c.attributeData[w]?_[w].size=c.attributeData[w].size:_[w].size||console.warn(`PIXI Geometry attribute '${w}' size cannot be determined (likely the bound shader does not have the attribute)`),x[_[w].buffer]+=_[w].size*Cc[_[w].type];for(const w in _){const v=_[w],E=v.size;v.stride===void 0&&(x[v.buffer]===E*Cc[v.type]?v.stride=0:v.stride=x[v.buffer]),v.start===void 0&&(v.start=A[v.buffer],A[v.buffer]+=E*Cc[v.type])}g=l.createVertexArray(),l.bindVertexArray(g);for(let w=0;w<y.length;w++){const v=y[w];h.bind(v),s&&v._glBuffers[o].refCount++}return this.activateVao(t,c),m[c.id]=g,m[d]=g,l.bindVertexArray(null),h.unbind(ji.ARRAY_BUFFER),g}disposeGeometry(t,e){var c;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const s=t.glVertexArrayObjects[this.CONTEXT_UID],l=this.gl,o=t.buffers,h=(c=this.renderer)==null?void 0:c.buffer;if(t.disposeRunner.remove(this),!!s){if(h)for(let d=0;d<o.length;d++){const m=o[d]._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!e&&h.dispose(o[d],e))}if(!e){for(const d in s)if(d[0]==="g"){const m=s[d];this._activeVao===m&&this.unbind(),l.deleteVertexArray(m)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let s=0;s<e.length;s++)this.disposeGeometry(this.managedGeometries[e[s]],t)}activateVao(t,e){const s=this.gl,l=this.CONTEXT_UID,o=this.renderer.buffer,h=t.buffers,c=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);let d=null;for(const m in c){const g=c[m],y=h[g.buffer],_=y._glBuffers[l];if(e.attributeData[m]){d!==_&&(o.bind(y),d=_);const x=e.attributeData[m].location;if(s.enableVertexAttribArray(x),s.vertexAttribPointer(x,g.size,g.type||s.FLOAT,g.normalized,g.stride,g.start),g.instance)if(this.hasInstance)s.vertexAttribDivisor(x,g.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,s,l){const{gl:o}=this,h=this._activeGeometry;if(h.indexBuffer){const c=h.indexBuffer.data.BYTES_PER_ELEMENT,d=c===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;c===2||c===4&&this.canUseUInt32ElementIndex?h.instanced?o.drawElementsInstanced(t,e||h.indexBuffer.data.length,d,(s||0)*c,l||1):o.drawElements(t,e||h.indexBuffer.data.length,d,(s||0)*c):console.warn("unsupported index buffer type: uint32")}else h.instanced?o.drawArraysInstanced(t,s,e||h.getSize(),l||1):o.drawArrays(t,s,e||h.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Hm.extension={type:mt.RendererSystem,name:"geometry"},Et.add(Hm);const km=new ue;class zm{constructor(t,e){this._texture=t,this.mapCoord=new ue,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const s=this.mapCoord;for(let l=0;l<t.length;l+=2){const o=t[l],h=t[l+1];e[l]=o*s.a+h*s.c+s.tx,e[l+1]=o*s.b+h*s.d+s.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const s=e._uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const l=e.orig,o=e.trim;o&&(km.set(l.width/o.width,0,0,l.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(km));const h=e.baseTexture,c=this.uClampFrame,d=this.clampMargin/h.resolution,m=this.clampOffset;return c[0]=(e._frame.x+d+m)/h.width,c[1]=(e._frame.y+d+m)/h.height,c[2]=(e._frame.x+e._frame.width-d+m)/h.width,c[3]=(e._frame.y+e._frame.height-d+m)/h.height,this.uClampOffset[0]=m/h.realWidth,this.uClampOffset[1]=m/h.realHeight,this.isSimple=e._frame.width===h.width&&e._frame.height===h.height&&e.rotate===0,!0}}var Qb=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Jb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class tE extends je{constructor(t,e,s){let l=null;typeof t!="string"&&e===void 0&&s===void 0&&(l=t,t=void 0,e=void 0,s=void 0),super(t||Jb,e||Qb,s),this.maskSprite=l,this.maskMatrix=new ue}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,s,l){const o=this._maskSprite,h=o._texture;h.valid&&(h.uvMatrix||(h.uvMatrix=new zm(h,0)),h.uvMatrix.update(),this.uniforms.npmAlpha=h.baseTexture.alphaMode?0:1,this.uniforms.mask=h,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(h.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=h.uvMatrix.uClampFrame,t.applyFilter(this,e,s,l))}}class eE{constructor(t=null){this.type=we.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=je.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=we.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Xm{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let s=e;if(!s.isMaskData){const o=this.maskDataPool.pop()||new eE;o.pooled=!0,o.maskObject=e,s=o}const l=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(s.copyCountersOrReset(l),s._colorMask=l?l._colorMask:15,s.autoDetect&&this.detect(s),s._target=t,s.type!==we.SPRITE&&this.maskStack.push(s),s.enabled)switch(s.type){case we.SCISSOR:this.renderer.scissor.push(s);break;case we.STENCIL:this.renderer.stencil.push(s);break;case we.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s);break;case we.COLOR:this.pushColorMask(s);break}s.type===we.SPRITE&&this.maskStack.push(s)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case we.SCISSOR:this.renderer.scissor.pop(e);break;case we.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case we.SPRITE:this.popSpriteMask(e);break;case we.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const s=this.maskStack[this.maskStack.length-1];s.type===we.SPRITE&&s._filters&&(s._filters[0].maskSprite=s.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=we.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=we.SCISSOR:t.type=we.STENCIL:t.type=we.COLOR}pushSpriteMask(t){const{maskObject:e}=t,s=t._target;let l=t._filters;l||(l=this.alphaMaskPool[this.alphaMaskIndex],l||(l=this.alphaMaskPool[this.alphaMaskIndex]=[new tE])),l[0].resolution=t.resolution,l[0].multisample=t.multisample,l[0].maskSprite=e;const o=s.filterArea;s.filterArea=e.getBounds(!0),this.renderer.filter.push(s,l),s.filterArea=o,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,s=t._colorMask=e&t.colorMask;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}popColorMask(t){const e=t._colorMask,s=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}destroy(){this.renderer=null}}Xm.extension={type:mt.RendererSystem,name:"mask"},Et.add(Xm);class Ym{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,s=this.getStackLength();this.maskStack=t;const l=this.getStackLength();l!==s&&(l===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Vm=new ue,jm=[],qm=class zu extends Ym{constructor(t){super(t),this.glConst=gt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:s}=t,{renderer:l}=this,o=l.renderTexture,h=s.getBounds(!0,jm.pop()??new Pt);this.roundFrameToPixels(h,o.current?o.current.resolution:l.resolution,o.sourceFrame,o.destinationFrame,l.projection.transform),e&&h.fit(e),t._scissorRectLocal=h}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:s,c:l,d:o}=t;return(Math.abs(s)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(o)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||zu.isMatrixRotated(e.worldTransform)||zu.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const s=t._scissorRectLocal;return s.width>0&&s.height>0}roundFrameToPixels(t,e,s,l,o){zu.isMatrixRotated(o)||(o=o?Vm.copyFrom(o):Vm.identity(),o.translate(-s.x,-s.y).scale(l.width/s.width,l.height/s.height).translate(l.x,l.y),this.renderer.filter.transformAABB(o,t),t.fit(l),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&jm.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};qm.extension={type:mt.RendererSystem,name:"scissor"};let iE=qm;Et.add(iE);class Wm extends Ym{constructor(t){super(t),this.glConst=gt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:s}=this.renderer,l=t._stencilCounter;l===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),t._stencilCounter++;const o=t._colorMask;o!==0&&(t._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,l,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,o!==0&&(t._colorMask=o,s.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,l=s?s._colorMask:15;l!==0&&(s._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,l!==0&&(s._colorMask=l,e.colorMask((l&1)!==0,(l&2)!==0,(l&4)!==0,(l&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Wm.extension={type:mt.RendererSystem,name:"stencil"},Et.add(Wm);class $m{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return zt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return zt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return zt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}$m.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"_plugin"},Et.add($m);class Zm{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ue,this.transform=null}update(t,e,s,l){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,s,l),this.transform&&this.projectionMatrix.append(this.transform);const o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)}calculateProjection(t,e,s,l){const o=this.projectionMatrix,h=l?-1:1;o.identity(),o.a=1/e.width*2,o.d=h*(1/e.height*2),o.tx=-1-e.x*o.a,o.ty=-h-e.y*o.d}setTransform(t){}destroy(){this.renderer=null}}Zm.extension={type:mt.RendererSystem,name:"projection"},Et.add(Zm);const rE=new xc,Km=new Pt;class Qm{constructor(t){this.renderer=t,this._tempMatrix=new ue}generateTexture(t,e){const{region:s,...l}=e||{},o=(s==null?void 0:s.copyTo(Km))||t.getLocalBounds(Km,!0),h=l.resolution||this.renderer.resolution;o.width=Math.max(o.width,1/h),o.height=Math.max(o.height,1/h),l.width=o.width,l.height=o.height,l.resolution=h,l.multisample??(l.multisample=this.renderer.multisample);const c=Ns.create(l);this._tempMatrix.tx=-o.x,this._tempMatrix.ty=-o.y;const d=t.transform;return t.transform=rE,this.renderer.render(t,{renderTexture:c,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=d,c}destroy(){}}Qm.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"textureGenerator"},Et.add(Qm);const Is=new Pt,ba=new Pt;class Jm{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Pt,this.destinationFrame=new Pt,this.viewportFrame=new Pt}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,s){const l=this.renderer;this.current=t;let o,h,c;t?(o=t.baseTexture,c=o.resolution,e||(Is.width=t.frame.width,Is.height=t.frame.height,e=Is),s||(ba.x=t.frame.x,ba.y=t.frame.y,ba.width=e.width,ba.height=e.height,s=ba),h=o.framebuffer):(c=l.resolution,e||(Is.width=l._view.screen.width,Is.height=l._view.screen.height,e=Is),s||(s=Is,s.width=e.width,s.height=e.height));const d=this.viewportFrame;d.x=s.x*c,d.y=s.y*c,d.width=s.width*c,d.height=s.height*c,t||(d.y=l.view.height-(d.y+d.height)),d.ceil(),this.renderer.framebuffer.bind(h,d),this.renderer.projection.update(s,e,c,!h),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(s)}clear(t,e){const s=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,l=oe.shared.setValue(t||s);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&l.premultiply(l.alpha);const o=this.destinationFrame,h=this.current?this.current.baseTexture:this.renderer._view.screen,c=o.width!==h.width||o.height!==h.height;if(c){let{x:d,y:m,width:g,height:y}=this.viewportFrame;d=Math.round(d),m=Math.round(m),g=Math.round(g),y=Math.round(y),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(d,m,g,y)}this.renderer.framebuffer.clear(l.red,l.green,l.blue,l.alpha,e),c&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Jm.extension={type:mt.RendererSystem,name:"renderTexture"},Et.add(Jm);class sE{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function nE(n,t){const e={},s=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);for(let l=0;l<s;l++){const o=t.getActiveAttrib(n,l);if(o.name.startsWith("gl_"))continue;const h=Mm(t,o.type),c={type:h,name:o.name,size:Rm(h),location:t.getAttribLocation(n,o.name)};e[o.name]=c}return e}function aE(n,t){const e={},s=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let l=0;l<s;l++){const o=t.getActiveUniform(n,l),h=o.name.replace(/\[.*?\]$/,""),c=!!o.name.match(/\[.*?\]$/),d=Mm(t,o.type);e[h]={name:h,index:l,type:d,size:o.size,isArray:c,value:Am(d,o.size)}}return e}function lE(n,t){var c;const e=Tm(n,n.VERTEX_SHADER,t.vertexSrc),s=Tm(n,n.FRAGMENT_SHADER,t.fragmentSrc),l=n.createProgram();n.attachShader(l,e),n.attachShader(l,s);const o=(c=t.extra)==null?void 0:c.transformFeedbackVaryings;if(o&&(typeof n.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(l,o.names,o.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(l),n.getProgramParameter(l,n.LINK_STATUS)||Pb(n,l,e,s),t.attributeData=nE(l,n),t.uniformData=aE(l,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const d=Object.keys(t.attributeData);d.sort((m,g)=>m>g?1:-1);for(let m=0;m<d.length;m++)t.attributeData[d[m]].location=m,n.bindAttribLocation(l,m,d[m]);n.linkProgram(l)}n.deleteShader(e),n.deleteShader(s);const h={};for(const d in t.uniformData){const m=t.uniformData[d];h[d]={location:n.getUniformLocation(l,d),value:Am(m.type,m.size)}}return new sE(l,h)}function oE(n,t,e,s,l){e.buffer.update(l)}const uE={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},tg={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function hE(n){const t=n.map(o=>({data:o,offset:0,dataLen:0,dirty:0}));let e=0,s=0,l=0;for(let o=0;o<t.length;o++){const h=t[o];if(e=tg[h.data.type],h.data.size>1&&(e=Math.max(e,16)*h.data.size),h.dataLen=e,s%e!==0&&s<16){const c=s%e%16;s+=c,l+=c}s+e>16?(l=Math.ceil(l/16)*16,h.offset=l,l+=e,s=e):(h.offset=l,s+=e,l+=e)}return l=Math.ceil(l/16)*16,{uboElements:t,size:l}}function cE(n,t){const e=[];for(const s in n)t[s]&&e.push(t[s]);return e.sort((s,l)=>s.index-l.index),e}function fE(n,t){if(!n.autoManage)return{size:0,syncFunc:oE};const e=cE(n.uniforms,t),{uboElements:s,size:l}=hE(e),o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let h=0;h<s.length;h++){const c=s[h],d=n.uniforms[c.data.name],m=c.data.name;let g=!1;for(let y=0;y<pn.length;y++){const _=pn[y];if(_.codeUbo&&_.test(c.data,d)){o.push(`offset = ${c.offset/4};`,pn[y].codeUbo(c.data.name,d)),g=!0;break}}if(!g)if(c.data.size>1){const y=Rm(c.data.type),_=Math.max(tg[c.data.type]/16,1),x=y/_,A=(4-x%4)%4;o.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};

                t = 0;

                for(var i=0; i < ${c.data.size*_}; i++)
                {
                    for(var j = 0; j < ${x}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${A};
                }

                `)}else{const y=uE[c.data.type];o.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};
                ${y};
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:l,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}let dE=0;const to={textureCount:0,uboCount:0};class eg{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=dE++}systemCheck(){if(!Fb())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const s=t.program,l=s.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==s&&(this.program=s,this.gl.useProgram(l.program)),e||(to.textureCount=0,to.uboCount=0,this.syncUniformGroup(t.uniformGroup,to)),l}setUniforms(t){const e=this.shader.program,s=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(s.uniformData,t,this.renderer)}syncUniformGroup(t,e){const s=this.getGlProgram();(!t.static||t.dirtyId!==s.uniformDirtyGroups[t.id])&&(s.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,s,e))}syncUniforms(t,e,s){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,s)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=Nb(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const s=this.getGlProgram();if(!t.static||t.dirtyId!==0||!s.uniformGroups[t.id]){t.dirtyId=0;const l=s.uniformGroups[t.id]||this.createSyncBufferGroup(t,s,e);t.buffer.update(),l(s.uniformData,t.uniforms,this.renderer,to,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,s.uniformBufferBindings[e])}createSyncBufferGroup(t,e,s){const{gl:l}=this.renderer;this.renderer.buffer.bind(t.buffer);const o=this.gl.getUniformBlockIndex(e.program,s);e.uniformBufferBindings[s]=this.shader.uniformBindCount,l.uniformBlockBinding(e.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;const h=this.getSignature(t,this.shader.program.uniformData,"ubo");let c=this._uboCache[h];if(c||(c=this._uboCache[h]=fE(t,this.shader.program.uniformData)),t.autoManage){const d=new Float32Array(c.size/4);t.buffer.update(d)}return e.uniformGroups[t.id]=c.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,s){const l=t.uniforms,o=[`${s}-`];for(const h in l)o.push(h),e[h]&&o.push(e[h].type);return o.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,s=t.program,l=lE(e,s);return s.glPrograms[this.renderer.CONTEXT_UID]=l,l}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}eg.extension={type:mt.RendererSystem,name:"shader"},Et.add(eg);class eo{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.3 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}eo.defaultOptions={hello:!1},eo.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"startup"},Et.add(eo);function pE(n,t=[]){return t[Dt.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.ADD]=[n.ONE,n.ONE],t[Dt.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.NONE]=[0,0],t[Dt.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],t[Dt.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Dt.SRC_IN]=[n.DST_ALPHA,n.ZERO],t[Dt.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],t[Dt.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],t[Dt.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],t[Dt.DST_IN]=[n.ZERO,n.SRC_ALPHA],t[Dt.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],t[Dt.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],t[Dt.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],t[Dt.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],t}const mE=0,gE=1,yE=2,vE=3,_E=4,xE=5,ig=class _p{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Dt.NONE,this._blendEq=!1,this.map=[],this.map[mE]=this.setBlend,this.map[gE]=this.setOffset,this.map[yE]=this.setCullFace,this.map[vE]=this.setDepthTest,this.map[_E]=this.setFrontFace,this.map[xE]=this.setDepthMask,this.checks=[],this.defaultState=new $i,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=pE(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,s=0;for(;e;)e&1&&this.map[s].call(this,!!(t.data&1<<s)),e=e>>1,s++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(_p.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(_p.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],s=this.gl;e.length===2?s.blendFunc(e[0],e[1]):s.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,s.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const s=this.checks.indexOf(t);e&&s===-1?this.checks.push(t):!e&&s!==-1&&this.checks.splice(s,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};ig.extension={type:mt.RendererSystem,name:"state"};let bE=ig;Et.add(bE);class EE extends pa{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(l=>t.systems[l]),s=[...e,...Object.keys(t.systems).filter(l=>!e.includes(l))];for(const l of s)this.addSystem(t.systems[l],l)}addRunners(...t){t.forEach(e=>{this.runners[e]=new wi(e)})}addSystem(t,e){const s=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=s,this._systemsHash[e]=s;for(const l in this.runners)this.runners[l].add(s);return this}emitWithCustomOptions(t,e){const s=Object.keys(this._systemsHash);t.items.forEach(l=>{const o=s.find(h=>this._systemsHash[h]===l);l[t.name](e[o])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Ea=class Xu{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Xu.defaultMaxIdle,this.checkCountMax=Xu.defaultCheckCountMax,this.mode=Xu.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==eh.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let s=!1;for(let l=0;l<e.length;l++){const o=e[l];o.resource&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),e[l]=null,s=!0)}if(s){let l=0;for(let o=0;o<e.length;o++)e[o]!==null&&(e[l++]=e[o]);e.length=l}}unload(t){const e=this.renderer.texture,s=t._texture;s&&!s.framebuffer&&e.destroyTexture(s);for(let l=t.children.length-1;l>=0;l--)this.unload(t.children[l])}destroy(){this.renderer=null}};Ea.defaultMode=eh.AUTO,Ea.defaultMaxIdle=60*60,Ea.defaultCheckCountMax=60*10,Ea.extension={type:mt.RendererSystem,name:"textureGC"};let Us=Ea;Et.add(Us);class Mc{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Rt.UNSIGNED_BYTE,this.internalFormat=ct.RGBA,this.samplerType=0}}function TE(n){let t;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?t={[n.RGB]:yt.FLOAT,[n.RGBA]:yt.FLOAT,[n.ALPHA]:yt.FLOAT,[n.LUMINANCE]:yt.FLOAT,[n.LUMINANCE_ALPHA]:yt.FLOAT,[n.R8]:yt.FLOAT,[n.R8_SNORM]:yt.FLOAT,[n.RG8]:yt.FLOAT,[n.RG8_SNORM]:yt.FLOAT,[n.RGB8]:yt.FLOAT,[n.RGB8_SNORM]:yt.FLOAT,[n.RGB565]:yt.FLOAT,[n.RGBA4]:yt.FLOAT,[n.RGB5_A1]:yt.FLOAT,[n.RGBA8]:yt.FLOAT,[n.RGBA8_SNORM]:yt.FLOAT,[n.RGB10_A2]:yt.FLOAT,[n.RGB10_A2UI]:yt.FLOAT,[n.SRGB8]:yt.FLOAT,[n.SRGB8_ALPHA8]:yt.FLOAT,[n.R16F]:yt.FLOAT,[n.RG16F]:yt.FLOAT,[n.RGB16F]:yt.FLOAT,[n.RGBA16F]:yt.FLOAT,[n.R32F]:yt.FLOAT,[n.RG32F]:yt.FLOAT,[n.RGB32F]:yt.FLOAT,[n.RGBA32F]:yt.FLOAT,[n.R11F_G11F_B10F]:yt.FLOAT,[n.RGB9_E5]:yt.FLOAT,[n.R8I]:yt.INT,[n.R8UI]:yt.UINT,[n.R16I]:yt.INT,[n.R16UI]:yt.UINT,[n.R32I]:yt.INT,[n.R32UI]:yt.UINT,[n.RG8I]:yt.INT,[n.RG8UI]:yt.UINT,[n.RG16I]:yt.INT,[n.RG16UI]:yt.UINT,[n.RG32I]:yt.INT,[n.RG32UI]:yt.UINT,[n.RGB8I]:yt.INT,[n.RGB8UI]:yt.UINT,[n.RGB16I]:yt.INT,[n.RGB16UI]:yt.UINT,[n.RGB32I]:yt.INT,[n.RGB32UI]:yt.UINT,[n.RGBA8I]:yt.INT,[n.RGBA8UI]:yt.UINT,[n.RGBA16I]:yt.INT,[n.RGBA16UI]:yt.UINT,[n.RGBA32I]:yt.INT,[n.RGBA32UI]:yt.UINT,[n.DEPTH_COMPONENT16]:yt.FLOAT,[n.DEPTH_COMPONENT24]:yt.FLOAT,[n.DEPTH_COMPONENT32F]:yt.FLOAT,[n.DEPTH_STENCIL]:yt.FLOAT,[n.DEPTH24_STENCIL8]:yt.FLOAT,[n.DEPTH32F_STENCIL8]:yt.FLOAT}:t={[n.RGB]:yt.FLOAT,[n.RGBA]:yt.FLOAT,[n.ALPHA]:yt.FLOAT,[n.LUMINANCE]:yt.FLOAT,[n.LUMINANCE_ALPHA]:yt.FLOAT,[n.DEPTH_STENCIL]:yt.FLOAT},t}function AE(n){let t;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?t={[Rt.UNSIGNED_BYTE]:{[ct.RGBA]:n.RGBA8,[ct.RGB]:n.RGB8,[ct.RG]:n.RG8,[ct.RED]:n.R8,[ct.RGBA_INTEGER]:n.RGBA8UI,[ct.RGB_INTEGER]:n.RGB8UI,[ct.RG_INTEGER]:n.RG8UI,[ct.RED_INTEGER]:n.R8UI,[ct.ALPHA]:n.ALPHA,[ct.LUMINANCE]:n.LUMINANCE,[ct.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[Rt.BYTE]:{[ct.RGBA]:n.RGBA8_SNORM,[ct.RGB]:n.RGB8_SNORM,[ct.RG]:n.RG8_SNORM,[ct.RED]:n.R8_SNORM,[ct.RGBA_INTEGER]:n.RGBA8I,[ct.RGB_INTEGER]:n.RGB8I,[ct.RG_INTEGER]:n.RG8I,[ct.RED_INTEGER]:n.R8I},[Rt.UNSIGNED_SHORT]:{[ct.RGBA_INTEGER]:n.RGBA16UI,[ct.RGB_INTEGER]:n.RGB16UI,[ct.RG_INTEGER]:n.RG16UI,[ct.RED_INTEGER]:n.R16UI,[ct.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[Rt.SHORT]:{[ct.RGBA_INTEGER]:n.RGBA16I,[ct.RGB_INTEGER]:n.RGB16I,[ct.RG_INTEGER]:n.RG16I,[ct.RED_INTEGER]:n.R16I},[Rt.UNSIGNED_INT]:{[ct.RGBA_INTEGER]:n.RGBA32UI,[ct.RGB_INTEGER]:n.RGB32UI,[ct.RG_INTEGER]:n.RG32UI,[ct.RED_INTEGER]:n.R32UI,[ct.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[Rt.INT]:{[ct.RGBA_INTEGER]:n.RGBA32I,[ct.RGB_INTEGER]:n.RGB32I,[ct.RG_INTEGER]:n.RG32I,[ct.RED_INTEGER]:n.R32I},[Rt.FLOAT]:{[ct.RGBA]:n.RGBA32F,[ct.RGB]:n.RGB32F,[ct.RG]:n.RG32F,[ct.RED]:n.R32F,[ct.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[Rt.HALF_FLOAT]:{[ct.RGBA]:n.RGBA16F,[ct.RGB]:n.RGB16F,[ct.RG]:n.RG16F,[ct.RED]:n.R16F},[Rt.UNSIGNED_SHORT_5_6_5]:{[ct.RGB]:n.RGB565},[Rt.UNSIGNED_SHORT_4_4_4_4]:{[ct.RGBA]:n.RGBA4},[Rt.UNSIGNED_SHORT_5_5_5_1]:{[ct.RGBA]:n.RGB5_A1},[Rt.UNSIGNED_INT_2_10_10_10_REV]:{[ct.RGBA]:n.RGB10_A2,[ct.RGBA_INTEGER]:n.RGB10_A2UI},[Rt.UNSIGNED_INT_10F_11F_11F_REV]:{[ct.RGB]:n.R11F_G11F_B10F},[Rt.UNSIGNED_INT_5_9_9_9_REV]:{[ct.RGB]:n.RGB9_E5},[Rt.UNSIGNED_INT_24_8]:{[ct.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[Rt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ct.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:t={[Rt.UNSIGNED_BYTE]:{[ct.RGBA]:n.RGBA,[ct.RGB]:n.RGB,[ct.ALPHA]:n.ALPHA,[ct.LUMINANCE]:n.LUMINANCE,[ct.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[Rt.UNSIGNED_SHORT_5_6_5]:{[ct.RGB]:n.RGB},[Rt.UNSIGNED_SHORT_4_4_4_4]:{[ct.RGBA]:n.RGBA},[Rt.UNSIGNED_SHORT_5_5_5_1]:{[ct.RGBA]:n.RGBA}},t}class rg{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new It,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=AE(t),this.samplerTypes=TE(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let l=0;l<e;l++)this.boundTextures[l]=null;this.emptyTextures={};const s=new Mc(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Mc(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let l=0;l<6;l++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let l=0;l<this.boundTextures.length;l++)this.bind(null,l)}bind(t,e=0){const{gl:s}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const l=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(t.target,l.texture)),l.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),this.updateTexture(t)):l.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[s.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:s}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let l=0;l<s.length;l++)s[l]===this.unknownTexture&&this.bind(null,l)}for(let l=0;l<s.length;l++)s[l]===t&&(this.currentLocation!==l&&(e.activeTexture(e.TEXTURE0+l),this.currentLocation=l),e.bindTexture(t.target,this.emptyTextures[t.target].texture),s[l]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:s,CONTEXT_UID:l}=this;if(s)for(let o=t-1;o>=0;--o){const h=e[o];h&&h._glTextures[l].samplerType!==yt.FLOAT&&this.renderer.texture.unbind(h)}}initTexture(t){const e=new Mc(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var s;e.internalFormat=((s=this.internalFormats[t.type])==null?void 0:s[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??yt.FLOAT,this.webGLVersion===2&&t.type===Rt.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var l;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const s=this.renderer;if(this.initTextureType(t,e),(l=t.resource)==null?void 0:l.upload(s,t,e))e.samplerType!==yt.FLOAT&&(this.hasIntegerTextures=!0);else{const o=t.realWidth,h=t.realHeight,c=s.gl;(e.width!==o||e.height!==h||e.dirtyId<0)&&(e.width=o,e.height=h,c.texImage2D(t.target,0,e.internalFormat,o,h,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:s}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),s.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const l=this.managedTextures.indexOf(t);l!==-1&&dn(this.managedTextures,l,1)}}updateTextureStyle(t){var s;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Yi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Fr.CLAMP:e.wrapMode=t.wrapMode,(s=t.resource)!=null&&s.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const s=this.gl;if(e.mipmap&&t.mipmap!==Yi.ON_MANUAL&&s.generateMipmap(t.target),s.texParameteri(t.target,s.TEXTURE_WRAP_S,e.wrapMode),s.texParameteri(t.target,s.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===Xi.LINEAR?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST);const l=this.renderer.context.extensions.anisotropicFiltering;if(l&&t.anisotropicLevel>0&&t.scaleMode===Xi.LINEAR){const o=Math.min(t.anisotropicLevel,s.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT));s.texParameterf(t.target,l.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===Xi.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(t.target,s.TEXTURE_MAG_FILTER,t.scaleMode===Xi.LINEAR?s.LINEAR:s.NEAREST)}destroy(){this.renderer=null}}rg.extension={type:mt.RendererSystem,name:"texture"},Et.add(rg);class sg{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,l=t._glTransformFeedbacks[s]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,l)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:s,renderer:l}=this;e&&l.shader.bind(e),s.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:s,CONTEXT_UID:l}=this,o=e.createTransformFeedback();t._glTransformFeedbacks[l]=o,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,o);for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];c&&(s.buffer.update(c),c._glBuffers[l].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,h,c._glBuffers[l].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),o}disposeTransformFeedback(t,e){const s=t._glTransformFeedbacks[this.CONTEXT_UID],l=this.gl;t.disposeRunner.remove(this);const o=this.renderer.buffer;if(o)for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];if(!c)continue;const d=c._glBuffers[this.CONTEXT_UID];d&&(d.refCount--,d.refCount===0&&!e&&o.dispose(c,e))}s&&(e||l.deleteTransformFeedback(s),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}sg.extension={type:mt.RendererSystem,name:"transformFeedback"},Et.add(sg);class io{constructor(t){this.renderer=t}init(t){this.screen=new Pt(0,0,t.width,t.height),this.element=t.view||gt.ADAPTER.createCanvas(),this.resolution=t.resolution||gt.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const s=this.element.width/this.resolution,l=this.element.height/this.resolution;this.screen.width=s,this.screen.height=l,this.autoDensity&&(this.element.style.width=`${s}px`,this.element.style.height=`${l}px`),this.renderer.emit("resize",s,l),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}io.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},io.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"_view"},Et.add(io),gt.PREFER_ENV=As.WEBGL2,gt.STRICT_TEXTURE_CACHE=!1,gt.RENDER_OPTIONS={...Kl.defaultOptions,...Zl.defaultOptions,...io.defaultOptions,...eo.defaultOptions},Object.defineProperties(gt,{WRAP_MODE:{get(){return It.defaultOptions.wrapMode},set(n){zt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),It.defaultOptions.wrapMode=n}},SCALE_MODE:{get(){return It.defaultOptions.scaleMode},set(n){zt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),It.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get(){return It.defaultOptions.mipmap},set(n){zt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),It.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get(){return It.defaultOptions.anisotropicLevel},set(n){zt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),It.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get(){return zt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),je.defaultResolution},set(n){je.defaultResolution=n}},FILTER_MULTISAMPLE:{get(){return zt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),je.defaultMultisample},set(n){je.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get(){return Bs.defaultMaxTextures},set(n){zt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Bs.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get(){return Bs.defaultBatchSize},set(n){zt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Bs.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get(){return Bs.canUploadSameBuffer},set(n){zt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Bs.canUploadSameBuffer=n}},GC_MODE:{get(){return Us.defaultMode},set(n){zt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Us.defaultMode=n}},GC_MAX_IDLE:{get(){return Us.defaultMaxIdle},set(n){zt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Us.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get(){return Us.defaultCheckCountMax},set(n){zt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Us.defaultCheckCountMax=n}},PRECISION_VERTEX:{get(){return pr.defaultVertexPrecision},set(n){zt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),pr.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get(){return pr.defaultFragmentPrecision},set(n){zt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),pr.defaultFragmentPrecision=n}}});var Ps=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Ps||{});class Dc{constructor(t,e=null,s=0,l=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=s,this.once=l}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const ng=class ui{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Dc(null,null,1/0),this.deltaMS=1/ui.targetFPMS,this.elapsedMS=1/ui.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,s=Ps.NORMAL){return this._addListener(new Dc(t,e,s))}addOnce(t,e,s=Ps.NORMAL){return this._addListener(new Dc(t,e,s,!0))}_addListener(t){let e=this._head.next,s=this._head;if(!e)t.connect(s);else{for(;e;){if(t.priority>e.priority){t.connect(s);break}s=e,e=e.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,e){let s=this._head.next;for(;s;)s.match(t,e)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ui.targetFPMS;const s=this._head;let l=s.next;for(;l;)l=l.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,e)/1e3,ui.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!ui._shared){const t=ui._shared=new ui;t.autoStart=!0,t._protected=!0}return ui._shared}static get system(){if(!ui._system){const t=ui._system=new ui;t.autoStart=!0,t._protected=!0}return ui._system}};ng.targetFPMS=.06;let ei=ng;Object.defineProperties(gt,{TARGET_FPMS:{get(){return ei.targetFPMS},set(n){zt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),ei.targetFPMS=n}}});class ag{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Ps.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ei.shared:new ei,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}ag.extension=mt.Application,Et.add(ag);const lg=[];Et.handleByList(mt.Renderer,lg);function SE(n){for(const t of lg)if(t.test(n))return new t(n);throw new Error("Unable to auto-detect a suitable renderer.")}var wE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,RE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const CE=wE,og=RE;class ug{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const s=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,s)}else{const s=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,s)}e>=be.HIGH?this.multisample=be.HIGH:e>=be.MEDIUM?this.multisample=be.MEDIUM:e>=be.LOW?this.multisample=be.LOW:this.multisample=be.NONE}destroy(){}}ug.extension={type:mt.RendererSystem,name:"_multisample"},Et.add(ug);class ME{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class hg{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,l=t._glBuffers[s]||this.createGLBuffer(t);e.bindBuffer(t.type,l.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:s,CONTEXT_UID:l}=this;if(this.boundBufferBases[e]!==t){const o=t._glBuffers[l]||this.createGLBuffer(t);this.boundBufferBases[e]=t,s.bindBufferBase(s.UNIFORM_BUFFER,e,o.buffer)}}bindBufferRange(t,e,s){const{gl:l,CONTEXT_UID:o}=this;s=s||0;const h=t._glBuffers[o]||this.createGLBuffer(t);l.bindBufferRange(l.UNIFORM_BUFFER,e||0,h.buffer,s*256,256)}update(t){const{gl:e,CONTEXT_UID:s}=this,l=t._glBuffers[s]||this.createGLBuffer(t);if(t._updateID!==l.updateID)if(l.updateID=t._updateID,e.bindBuffer(t.type,l.buffer),l.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const o=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;l.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,o)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const s=t._glBuffers[this.CONTEXT_UID],l=this.gl;t.disposeRunner.remove(this),s&&(e||l.deleteBuffer(s.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let s=0;s<e.length;s++)this.dispose(this.managedBuffers[e[s]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:s}=this;return t._glBuffers[e]=new ME(s.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}hg.extension={type:mt.RendererSystem,name:"buffer"},Et.add(hg);class cg{constructor(t){this.renderer=t}render(t,e){const s=this.renderer;let l,o,h,c;if(e&&(l=e.renderTexture,o=e.clear,h=e.transform,c=e.skipUpdateTransform),this.renderingToScreen=!l,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=h,!s.context.isLost){if(l||(this.lastObjectRendered=t),!c){const d=t.enableTempParent();t.updateTransform(),t.disableTempParent(d)}s.renderTexture.bind(l),s.batch.currentRenderer.start(),(o??s.background.clearBeforeRender)&&s.renderTexture.clear(),t.render(s),s.batch.currentRenderer.flush(),l&&(e.blit&&s.framebuffer.blit(),l.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}cg.extension={type:mt.RendererSystem,name:"objectRenderer"},Et.add(cg);const ro=class xp extends EE{constructor(t){super(),this.type=Ju.WEBGL,t=Object.assign({},gt.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ri({projectionMatrix:new ue},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:xp.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(zt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=xp.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:Qx()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return zt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return zt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return zt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return zt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){zt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return zt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){zt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return zt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};ro.extension={type:mt.Renderer,priority:1},ro.__plugins={},ro.__systems={};let Oc=ro;Et.handleByMap(mt.RendererPlugin,Oc.__plugins),Et.handleByMap(mt.RendererSystem,Oc.__systems),Et.add(Oc);class fg extends va{constructor(t,e){const{width:s,height:l}=e||{};super(s,l),this.items=[],this.itemDirtyIds=[];for(let o=0;o<t;o++){const h=new It;this.items.push(h),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let s=0;s<this.length;s++)t[s]&&(t[s].castToBaseTexture?this.addBaseTextureAt(t[s].castToBaseTexture(),s):t[s]instanceof va?this.addResourceAt(t[s],s):this.addResourceAt(_m(t[s],e),s))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:s}=this.items[0];return this.resize(e,s),this.update(),Promise.resolve(this)}),this._load}}class DE extends fg{constructor(t,e){const{width:s,height:l}=e||{};let o,h;Array.isArray(t)?(o=t,h=t.length):h=t,super(h,{width:s,height:l}),o&&this.initFromArray(o,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=un.TEXTURE_2D_ARRAY}upload(t,e,s){const{length:l,itemDirtyIds:o,items:h}=this,{gl:c}=t;s.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,l,0,e.format,s.type,null);for(let d=0;d<l;d++){const m=h[d];o[d]<m.dirtyId&&(o[d]=m.dirtyId,m.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,d,m.resource.width,m.resource.height,1,e.format,s.type,m.resource.source))}return!0}}class OE extends mr{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const dg=class Rl extends fg{constructor(t,e){const{width:s,height:l,autoLoad:o,linkBaseTexture:h}=e||{};if(t&&t.length!==Rl.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:s,height:l});for(let c=0;c<Rl.SIDES;c++)this.items[c].target=un.TEXTURE_CUBE_MAP_POSITIVE_X+c;this.linkBaseTexture=h!==!1,t&&this.initFromArray(t,e),o!==!1&&this.load()}bind(t){super.bind(t),t.target=un.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,s){if(s===void 0&&(s=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=un.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,s){const l=this.itemDirtyIds;for(let o=0;o<Rl.SIDES;o++){const h=this.items[o];(l[o]<h.dirtyId||s.dirtyId<e.dirtyId)&&(h.valid&&h.resource?(h.resource.upload(t,h,s),l[o]=h.dirtyId):l[o]<-1&&(t.gl.texImage2D(h.target,0,s.internalFormat,e.realWidth,e.realHeight,0,e.format,s.type,null),l[o]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===Rl.SIDES}};dg.SIDES=6;let BE=dg;class gn extends mr{constructor(t,e){e=e||{};let s,l,o;typeof t=="string"?(s=gn.EMPTY,l=t,o=!0):(s=t,l=null,o=!1),super(s),this.url=l,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??o,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const s=await gt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const l=await s.blob();if(this.destroyed)return;const o=await createImageBitmap(l,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===We.UNPACK?"premultiply":"none"});if(this.destroyed){o.close();return}this.source=o,this.update(),t(this)}catch(s){if(this.destroyed)return;e(s),this.onError.emit(s)}}),this._load)}upload(t,e,s){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,s)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return gn._EMPTY=gn._EMPTY??gt.ADAPTER.createCanvas(0,0),gn._EMPTY}}const Bc=class Yu extends mr{constructor(t,e){e=e||{},super(gt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},Yu.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;mr.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,s=t.height;if(!e||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let l=e*this.scale,o=s*this.scale;(this._overrideWidth||this._overrideHeight)&&(l=this._overrideWidth||this._overrideHeight/s*e,o=this._overrideHeight||this._overrideWidth/e*s),l=Math.round(l),o=Math.round(o);const h=this.source;h.width=l,h.height=o,h._pixiId=`canvas_${ws()}`,h.getContext("2d").drawImage(t,0,0,e,s,0,0,l,o),this._resolve(),this._resolve=null}}static getSize(t){const e=Yu.SVG_SIZE.exec(t),s={};return e&&(s[e[1]]=Math.round(parseFloat(e[3])),s[e[5]]=Math.round(parseFloat(e[7]))),s}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Yu.SVG_XML.test(t)}};Bc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Bc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Nc=Bc;class NE extends mr{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const Ic=class bp extends mr{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const s=document.createElement("video");e.autoLoad!==!1&&s.setAttribute("preload","auto"),e.playsinline!==!1&&(s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline","")),e.muted===!0&&(s.setAttribute("muted",""),s.muted=!0),e.loop===!0&&s.setAttribute("loop",""),e.autoPlay!==!1&&s.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const l=t[0].src||t[0];mr.crossOrigin(s,l,e.crossorigin);for(let o=0;o<t.length;++o){const h=document.createElement("source");let{src:c,mime:d}=t[o];if(c=c||t[o],c.startsWith("data:"))d=c.slice(5,c.indexOf(";"));else if(!c.startsWith("blob:")){const m=c.split("?").shift().toLowerCase(),g=m.slice(m.lastIndexOf(".")+1);d=d||bp.MIME_TYPES[g]||`video/${g}`}h.src=c,d&&(h.type=d),s.appendChild(h)}t=s}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=ei.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,s)=>{this.valid?e(this):(this._resolve=e,this._reject=s,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(ei.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ei.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ei.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||bp.TYPES.includes(e)}};Ic.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Ic.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let pg=Ic;mc.push(gn,Im,OE,pg,NE,Nc,Fl,BE,DE);class so{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Pt.EMPTY:(t=t||new Pt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:s,b:l,c:o,d:h,tx:c,ty:d}=t,m=s*e.x+o*e.y+c,g=l*e.x+h*e.y+d;this.minX=Math.min(this.minX,m),this.maxX=Math.max(this.maxX,m),this.minY=Math.min(this.minY,g),this.maxY=Math.max(this.maxY,g)}addQuad(t){let e=this.minX,s=this.minY,l=this.maxX,o=this.maxY,h=t[0],c=t[1];e=h<e?h:e,s=c<s?c:s,l=h>l?h:l,o=c>o?c:o,h=t[2],c=t[3],e=h<e?h:e,s=c<s?c:s,l=h>l?h:l,o=c>o?c:o,h=t[4],c=t[5],e=h<e?h:e,s=c<s?c:s,l=h>l?h:l,o=c>o?c:o,h=t[6],c=t[7],e=h<e?h:e,s=c<s?c:s,l=h>l?h:l,o=c>o?c:o,this.minX=e,this.minY=s,this.maxX=l,this.maxY=o}addFrame(t,e,s,l,o){this.addFrameMatrix(t.worldTransform,e,s,l,o)}addFrameMatrix(t,e,s,l,o){const h=t.a,c=t.b,d=t.c,m=t.d,g=t.tx,y=t.ty;let _=this.minX,x=this.minY,A=this.maxX,w=this.maxY,v=h*e+d*s+g,E=c*e+m*s+y;_=v<_?v:_,x=E<x?E:x,A=v>A?v:A,w=E>w?E:w,v=h*l+d*s+g,E=c*l+m*s+y,_=v<_?v:_,x=E<x?E:x,A=v>A?v:A,w=E>w?E:w,v=h*e+d*o+g,E=c*e+m*o+y,_=v<_?v:_,x=E<x?E:x,A=v>A?v:A,w=E>w?E:w,v=h*l+d*o+g,E=c*l+m*o+y,_=v<_?v:_,x=E<x?E:x,A=v>A?v:A,w=E>w?E:w,this.minX=_,this.minY=x,this.maxX=A,this.maxY=w}addVertexData(t,e,s){let l=this.minX,o=this.minY,h=this.maxX,c=this.maxY;for(let d=e;d<s;d+=2){const m=t[d],g=t[d+1];l=m<l?m:l,o=g<o?g:o,h=m>h?m:h,c=g>c?g:c}this.minX=l,this.minY=o,this.maxX=h,this.maxY=c}addVertices(t,e,s,l){this.addVerticesMatrix(t.worldTransform,e,s,l)}addVerticesMatrix(t,e,s,l,o=0,h=o){const c=t.a,d=t.b,m=t.c,g=t.d,y=t.tx,_=t.ty;let x=this.minX,A=this.minY,w=this.maxX,v=this.maxY;for(let E=s;E<l;E+=2){const R=e[E],D=e[E+1],P=c*R+m*D+y,I=g*D+d*R+_;x=Math.min(x,P-o),w=Math.max(w,P+o),A=Math.min(A,I-h),v=Math.max(v,I+h)}this.minX=x,this.minY=A,this.maxX=w,this.maxY=v}addBounds(t){const e=this.minX,s=this.minY,l=this.maxX,o=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<s?t.minY:s,this.maxX=t.maxX>l?t.maxX:l,this.maxY=t.maxY>o?t.maxY:o}addBoundsMask(t,e){const s=t.minX>e.minX?t.minX:e.minX,l=t.minY>e.minY?t.minY:e.minY,o=t.maxX<e.maxX?t.maxX:e.maxX,h=t.maxY<e.maxY?t.maxY:e.maxY;if(s<=o&&l<=h){const c=this.minX,d=this.minY,m=this.maxX,g=this.maxY;this.minX=s<c?s:c,this.minY=l<d?l:d,this.maxX=o>m?o:m,this.maxY=h>g?h:g}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const s=t.minX>e.x?t.minX:e.x,l=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,h=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(s<=o&&l<=h){const c=this.minX,d=this.minY,m=this.maxX,g=this.maxY;this.minX=s<c?s:c,this.minY=l<d?l:d,this.maxX=o>m?o:m,this.maxY=h>g?h:g}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,s,l,o,h){t-=o,e-=h,s+=o,l+=h,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>s?this.maxX:s,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>l?this.maxY:l}}class fe extends pa{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new xc,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new so,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let s=0;s<e.length;++s){const l=e[s];Object.defineProperty(fe.prototype,l,Object.getOwnPropertyDescriptor(t,l))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Pt),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Pt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new so);const e=this.transform,s=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(s==null?void 0:s.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const l=this._bounds,o=this._boundsID;this._bounds=this._localBounds;const h=this.getBounds(!1,t);return this.parent=s,this.transform=e,this._bounds=l,this._bounds.updateID+=this._boundsID-o,h}toGlobal(t,e,s=!1){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,s,l){return e&&(t=e.toGlobal(t,s,l)),l||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,s=1,l=1,o=0,h=0,c=0,d=0,m=0){return this.position.x=t,this.position.y=e,this.scale.x=s||1,this.scale.y=l||1,this.rotation=o,this.skew.x=h,this.skew.y=c,this.pivot.x=d,this.pivot.y=m,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new IE),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*wb}set angle(t){this.transform.rotation=t*Rb}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class IE extends fe{constructor(){super(...arguments),this.sortDirty=null}}fe.prototype.displayObjectUpdateTransform=fe.prototype.updateTransform;const UE=new ue;function PE(n,t){return n.zIndex===t.zIndex?n._lastSortedIndex-t._lastSortedIndex:n.zIndex-t.zIndex}const mg=class Ep extends fe{constructor(){super(),this.children=[],this.sortableChildren=Ep.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const s=this.getChildIndex(t),l=this.getChildIndex(e);this.children[s]=e,this.children[l]=t,this.onChildrenChange(s<l?s:l)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const s=this.getChildIndex(t);dn(this.children,s,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],s=this.children.indexOf(e);if(s===-1)return null;e.parent=null,e.transform._parentID=-1,dn(this.children,s,1),this._boundsID++,this.onChildrenChange(s),e.emit("removed",this),this.emit("childRemoved",e,this,s)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,dn(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const s=t,l=e,o=l-s;let h;if(o>0&&o<=l){h=this.children.splice(s,o);for(let c=0;c<h.length;++c)h[c].parent=null,h[c].transform&&(h[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let c=0;c<h.length;++c)h[c].emit("removed",this),this.emit("childRemoved",h[c],this,c);return h}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,s=this.children.length;e<s;++e){const l=this.children[e];l._lastSortedIndex=e,!t&&l.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(PE),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const s=this.children[t];s.visible&&s.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const s=e._mask.isMaskData?e._mask.maskObject:e._mask;s?(s.calculateBounds(),this._bounds.addBoundsMask(e._bounds,s._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const s=super.getLocalBounds(t);if(!e)for(let l=0,o=this.children.length;l<o;++l){const h=this.children[l];h.visible&&h.updateTransform()}return s}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let s,l;this.cullArea?(s=this.cullArea,l=this.worldTransform):this._render!==Ep.prototype._render&&(s=this.getBounds(!0));const o=t.projection.transform;if(o&&(l?(l=UE.copyFrom(l),l.prepend(o)):l=o),s&&e.intersects(s,l))this._render(t);else if(this.cullArea)return;for(let h=0,c=this.children.length;h<c;++h){const d=this.children[h],m=d.cullable;d.cullable=m||!this.cullArea,d.render(t),d.cullable=m}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let s=0,l=this.children.length;s<l;++s)this.children[s].render(t)}}renderAdvanced(t){var o,h,c;const e=this.filters,s=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let d=0;d<e.length;d++)e[d].enabled&&this._enabledFilters.push(e[d])}const l=e&&((o=this._enabledFilters)==null?void 0:o.length)||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==we.NONE));if(l&&t.batch.flush(),e&&((h=this._enabledFilters)!=null&&h.length)&&t.filter.push(this,this._enabledFilters),s&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let d=0,m=this.children.length;d<m;++d)this.children[d].render(t)}l&&t.batch.flush(),s&&t.mask.pop(this),e&&((c=this._enabledFilters)!=null&&c.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,s=this.removeChildren(0,this.children.length);if(e)for(let l=0;l<s.length;++l)s[l].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};mg.defaultSortableChildren=!1;let di=mg;di.prototype.containerUpdateTransform=di.prototype.updateTransform,Object.defineProperties(gt,{SORTABLE_CHILDREN:{get(){return di.defaultSortableChildren},set(n){zt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),di.defaultSortableChildren=n}}});const Ta=new Vt,LE=new Uint16Array([0,1,2,0,2,3]);class ae extends di{constructor(t){super(),this._anchor=new dr(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new oe(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Dt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||bt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=LE,this.pluginName="batch",this.isSprite=!0,this._roundPixels=gt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Gr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Gr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,s=e.a,l=e.b,o=e.c,h=e.d,c=e.tx,d=e.ty,m=this.vertexData,g=t.trim,y=t.orig,_=this._anchor;let x=0,A=0,w=0,v=0;if(g?(A=g.x-_._x*y.width,x=A+g.width,v=g.y-_._y*y.height,w=v+g.height):(A=-_._x*y.width,x=A+y.width,v=-_._y*y.height,w=v+y.height),m[0]=s*A+o*v+c,m[1]=h*v+l*A+d,m[2]=s*x+o*v+c,m[3]=h*v+l*x+d,m[4]=s*x+o*w+c,m[5]=h*w+l*x+d,m[6]=s*A+o*w+c,m[7]=h*w+l*A+d,this._roundPixels){const E=gt.RESOLUTION;for(let R=0;R<m.length;++R)m[R]=Math.round(m[R]*E)/E}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,s=t.orig,l=this._anchor,o=this.transform.worldTransform,h=o.a,c=o.b,d=o.c,m=o.d,g=o.tx,y=o.ty,_=-l._x*s.width,x=_+s.width,A=-l._y*s.height,w=A+s.height;if(e[0]=h*_+d*A+g,e[1]=m*A+c*_+y,e[2]=h*x+d*A+g,e[3]=m*A+c*x+y,e[4]=h*x+d*w+g,e[5]=m*w+c*x+y,e[6]=h*_+d*w+g,e[7]=m*w+c*_+y,this._roundPixels){const v=gt.RESOLUTION;for(let E=0;E<e.length;++E)e[E]=Math.round(e[E]*v)/v}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new so),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Pt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Ta);const e=this._texture.orig.width,s=this._texture.orig.height,l=-e*this.anchor.x;let o=0;return Ta.x>=l&&Ta.x<l+e&&(o=-s*this.anchor.y,Ta.y>=o&&Ta.y<o+s)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const s=t instanceof bt?t:bt.from(t,e);return new ae(s)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Gr(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Gr(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||bt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const gg=new ue;fe.prototype._cacheAsBitmap=!1,fe.prototype._cacheData=null,fe.prototype._cacheAsBitmapResolution=null,fe.prototype._cacheAsBitmapMultisample=null;class FE{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(fe.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;this._cacheAsBitmap=n;let t;n?(this._cacheData||(this._cacheData=new FE),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}),fe.prototype._renderCached=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(n))},fe.prototype._initCachedDisplayObject=function(n){var _,x;if((_=this._cacheData)!=null&&_.sprite)return;const t=this.alpha;this.alpha=1,n.batch.flush();const e=this.getLocalBounds(new Pt,!0);if((x=this.filters)!=null&&x.length){const A=this.filters[0].padding;e.pad(A)}const s=this.cacheAsBitmapResolution||n.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const l=n.renderTexture.current,o=n.renderTexture.sourceFrame.clone(),h=n.renderTexture.destinationFrame.clone(),c=n.projection.transform,d=Ns.create({width:e.width,height:e.height,resolution:s,multisample:this.cacheAsBitmapMultisample??n.multisample}),m=`cacheAsBitmap_${ws()}`;this._cacheData.textureCacheId=m,It.addToCache(d.baseTexture,m),bt.addToCache(d,m);const g=this.transform.localTransform.copyTo(gg).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,n.render(this,{renderTexture:d,clear:!0,transform:g,skipUpdateTransform:!1}),n.framebuffer.blit(),n.projection.transform=c,n.renderTexture.bind(l,o,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const y=new ae(d);y.transform.worldTransform=this.transform.worldTransform,y.anchor.x=-(e.x/e.width),y.anchor.y=-(e.y/e.height),y.alpha=t,y._bounds=this._bounds,this._cacheData.sprite=y,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=y.containsPoint.bind(y)},fe.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(n))},fe.prototype._initCachedDisplayObjectCanvas=function(n){var g;if((g=this._cacheData)!=null&&g.sprite)return;const t=this.getLocalBounds(new Pt,!0),e=this.alpha;this.alpha=1;const s=n.canvasContext.activeContext,l=n._projTransform,o=this.cacheAsBitmapResolution||n.resolution;t.ceil(o),t.width=Math.max(t.width,1/o),t.height=Math.max(t.height,1/o);const h=Ns.create({width:t.width,height:t.height,resolution:o}),c=`cacheAsBitmap_${ws()}`;this._cacheData.textureCacheId=c,It.addToCache(h.baseTexture,c),bt.addToCache(h,c);const d=gg;this.transform.localTransform.copyTo(d),d.invert(),d.tx-=t.x,d.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,n.render(this,{renderTexture:h,clear:!0,transform:d,skipUpdateTransform:!1}),n.canvasContext.activeContext=s,n._projTransform=l,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const m=new ae(h);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(t.x/t.width),m.anchor.y=-(t.y/t.height),m.alpha=e,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=m.containsPoint.bind(m)},fe.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},fe.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},fe.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,It.removeFromCache(this._cacheData.textureCacheId),bt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},fe.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1,this.destroy(n)},fe.prototype.name=null,di.prototype.getChildByName=function(n,t){for(let e=0,s=this.children.length;e<s;e++)if(this.children[e].name===n)return this.children[e];if(t)for(let e=0,s=this.children.length;e<s;e++){const l=this.children[e];if(!l.getChildByName)continue;const o=l.getChildByName(n,!0);if(o)return o}return null},fe.prototype.getGlobalPosition=function(n=new Vt,t=!1){return this.parent?this.parent.toGlobal(this.position,n,t):(n.x=this.position.x,n.y=this.position.y),n};var GE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class HE extends je{constructor(t=1){super(CE,GE,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const kE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},zE=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function XE(n){const t=kE[n],e=t.length;let s=zE,l="";const o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let h;for(let c=0;c<n;c++){let d=o.replace("%index%",c.toString());h=c,c>=e&&(h=n-c-1),d=d.replace("%value%",t[h].toString()),l+=d,l+=`
`}return s=s.replace("%blur%",l),s=s.replace("%size%",n.toString()),s}const YE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function VE(n,t){const e=Math.ceil(n/2);let s=YE,l="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let h=0;h<n;h++){let c=o.replace("%index%",h.toString());c=c.replace("%sampleIndex%",`${h-(e-1)}.0`),l+=c,l+=`
`}return s=s.replace("%blur%",l),s=s.replace("%size%",n.toString()),s}class Uc extends je{constructor(t,e=8,s=4,l=je.defaultResolution,o=5){const h=VE(o,t),c=XE(o);super(h,c),this.horizontal=t,this.resolution=l,this._quality=0,this.quality=s,this.blur=e}apply(t,e,s,l){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/e.width):this.uniforms.strength=1/s.height*(s.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,s,l);else{const o=t.getFilterTexture(),h=t.renderer;let c=e,d=o;this.state.blend=!1,t.applyFilter(this,c,d,Vi.CLEAR);for(let m=1;m<this.passes-1;m++){t.bindAndClear(c,Vi.BLIT),this.uniforms.uSampler=d;const g=d;d=c,c=g,h.shader.bind(this),h.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,d,s,l),t.returnFilterTexture(o)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class jE extends je{constructor(t=8,e=4,s=je.defaultResolution,l=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Uc(!0,t,e,s,l),this.blurYFilter=new Uc(!1,t,e,s,l),this.resolution=s,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,s,l){const o=Math.abs(this.blurXFilter.strength),h=Math.abs(this.blurYFilter.strength);if(o&&h){const c=t.getFilterTexture();this.blurXFilter.apply(t,e,c,Vi.CLEAR),this.blurYFilter.apply(t,c,s,l),t.returnFilterTexture(c)}else h?this.blurYFilter.apply(t,e,s,l):this.blurXFilter.apply(t,e,s,l)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var qE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Pc extends je{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(og,qE,t),this.alpha=1}_loadMatrix(t,e=!1){let s=t;e&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s}_multiply(t,e,s){return t[0]=e[0]*s[0]+e[1]*s[5]+e[2]*s[10]+e[3]*s[15],t[1]=e[0]*s[1]+e[1]*s[6]+e[2]*s[11]+e[3]*s[16],t[2]=e[0]*s[2]+e[1]*s[7]+e[2]*s[12]+e[3]*s[17],t[3]=e[0]*s[3]+e[1]*s[8]+e[2]*s[13]+e[3]*s[18],t[4]=e[0]*s[4]+e[1]*s[9]+e[2]*s[14]+e[3]*s[19]+e[4],t[5]=e[5]*s[0]+e[6]*s[5]+e[7]*s[10]+e[8]*s[15],t[6]=e[5]*s[1]+e[6]*s[6]+e[7]*s[11]+e[8]*s[16],t[7]=e[5]*s[2]+e[6]*s[7]+e[7]*s[12]+e[8]*s[17],t[8]=e[5]*s[3]+e[6]*s[8]+e[7]*s[13]+e[8]*s[18],t[9]=e[5]*s[4]+e[6]*s[9]+e[7]*s[14]+e[8]*s[19]+e[9],t[10]=e[10]*s[0]+e[11]*s[5]+e[12]*s[10]+e[13]*s[15],t[11]=e[10]*s[1]+e[11]*s[6]+e[12]*s[11]+e[13]*s[16],t[12]=e[10]*s[2]+e[11]*s[7]+e[12]*s[12]+e[13]*s[17],t[13]=e[10]*s[3]+e[11]*s[8]+e[12]*s[13]+e[13]*s[18],t[14]=e[10]*s[4]+e[11]*s[9]+e[12]*s[14]+e[13]*s[19]+e[14],t[15]=e[15]*s[0]+e[16]*s[5]+e[17]*s[10]+e[18]*s[15],t[16]=e[15]*s[1]+e[16]*s[6]+e[17]*s[11]+e[18]*s[16],t[17]=e[15]*s[2]+e[16]*s[7]+e[17]*s[12]+e[18]*s[17],t[18]=e[15]*s[3]+e[16]*s[8]+e[17]*s[13]+e[18]*s[18],t[19]=e[15]*s[4]+e[16]*s[9]+e[17]*s[14]+e[18]*s[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const s=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}tint(t,e){const[s,l,o]=oe.shared.setValue(t).toArray(),h=[s,0,0,0,0,0,l,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(h,e)}greyscale(t,e){const s=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const s=Math.cos(t),l=Math.sin(t),o=Math.sqrt,h=1/3,c=o(h),d=s+(1-s)*h,m=h*(1-s)-c*l,g=h*(1-s)+c*l,y=h*(1-s)+c*l,_=s+h*(1-s),x=h*(1-s)-c*l,A=h*(1-s)-c*l,w=h*(1-s)+c*l,v=s+h*(1-s),E=[d,m,g,0,0,y,_,x,0,0,A,w,v,0,0,0,0,0,1,0];this._loadMatrix(E,e)}contrast(t,e){const s=(t||0)+1,l=-.5*(s-1),o=[s,0,0,0,l,0,s,0,0,l,0,0,s,0,l,0,0,0,1,0];this._loadMatrix(o,e)}saturate(t=0,e){const s=t*2/3+1,l=(s-1)*-.5,o=[s,l,l,0,0,l,s,l,0,0,l,l,s,0,0,0,0,0,1,0];this._loadMatrix(o,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,s,l,o){t=t||.2,e=e||.15,s=s||16770432,l=l||3375104;const h=oe.shared,[c,d,m]=h.setValue(s).toArray(),[g,y,_]=h.setValue(l).toArray(),x=[.3,.59,.11,0,0,c,d,m,t,0,g,y,_,e,0,c-g,d-y,m-_,0,0];this._loadMatrix(x,o)}night(t,e){t=t||.1;const s=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(s,e)}predator(t,e){const s=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(s,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Pc.prototype.grayscale=Pc.prototype.greyscale;var WE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,$E=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class ZE extends je{constructor(t,e){const s=new ue;t.renderable=!1,super($E,WE,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=s,e==null&&(e=20),this.scale=new Vt(e,e)}apply(t,e,s,l){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const o=this.maskSprite.worldTransform,h=Math.sqrt(o.a*o.a+o.b*o.b),c=Math.sqrt(o.c*o.c+o.d*o.d);h!==0&&c!==0&&(this.uniforms.rotation[0]=o.a/h,this.uniforms.rotation[1]=o.b/h,this.uniforms.rotation[2]=o.c/c,this.uniforms.rotation[3]=o.d/c),t.applyFilter(this,e,s,l)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var KE=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,QE=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class JE extends je{constructor(){super(QE,KE)}}var tT=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class eT extends je{constructor(t=.5,e=Math.random()){super(og,tT,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const yg={AlphaFilter:HE,BlurFilter:jE,BlurFilterPass:Uc,ColorMatrixFilter:Pc,DisplacementFilter:ZE,FXAAFilter:JE,NoiseFilter:eT};Object.entries(yg).forEach(([n,t])=>{Object.defineProperty(yg,n,{get(){return zt("7.1.0",`filters.${n} has moved to ${n}`),t}})});class iT{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(ei.system.add(this.tickerUpdate,this,Ps.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(ei.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const zr=new iT;class Aa{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Aa.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Vt,this.page=new Vt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,s,l,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class no extends Aa{constructor(){super(...arguments),this.client=new Vt,this.movement=new Vt,this.offset=new Vt,this.global=new Vt,this.screen=new Vt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,s){return t.worldTransform.applyInverse(s||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,s,l,o,h,c,d,m,g,y,_,x,A,w){throw new Error("Method not implemented.")}}class Ci extends no{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class yn extends no{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}yn.DOM_DELTA_PIXEL=0,yn.DOM_DELTA_LINE=1,yn.DOM_DELTA_PAGE=2;const rT=2048,sT=new Vt,Lc=new Vt;class nT{constructor(t){this.dispatch=new pa,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((s,l)=>s.priority-l.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let s=0,l=e.length;s<l;s++)e[s].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){zr.pauseUpdate=!0;const s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",l=this[s](this.rootTarget,this.rootTarget.eventMode,sT.set(t,e),this.hitTestFn,this.hitPruneFn);return l&&l[0]}propagate(t,e){if(!t.target)return;const s=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let l=0,o=s.length-1;l<o;l++)if(t.currentTarget=s[l],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let l=s.length-2;l>=0;l--)if(t.currentTarget=s[l],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,s=this._allInteractiveElements){if(s.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const l=Array.isArray(e)?e:[e];for(let o=s.length-1;o>=0;o--)l.forEach(h=>{t.currentTarget=s[o],this.notifyTarget(t,h)})}propagationPath(t){const e=[t];for(let s=0;s<rT&&t!==this.rootTarget;s++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,s,l,o,h=!1){let c=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(zr.pauseUpdate=!1),t.interactiveChildren&&t.children){const g=t.children;for(let y=g.length-1;y>=0;y--){const _=g[y],x=this.hitTestMoveRecursive(_,this._isInteractive(e)?e:_.eventMode,s,l,o,h||o(t,s));if(x){if(x.length>0&&!x[x.length-1].parent)continue;const A=t.isInteractive();(x.length>0||A)&&(A&&this._allInteractiveElements.push(t),x.push(t)),this._hitElements.length===0&&(this._hitElements=x),c=!0}}}const d=this._isInteractive(e),m=t.isInteractive();return d&&m&&this._allInteractiveElements.push(t),h||this._hitElements.length>0?null:c?this._hitElements:d&&!o(t,s)&&l(t,s)?m?[t]:[]:null}hitTestRecursive(t,e,s,l,o){if(this._interactivePrune(t)||o(t,s))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(zr.pauseUpdate=!1),t.interactiveChildren&&t.children){const d=t.children;for(let m=d.length-1;m>=0;m--){const g=d[m],y=this.hitTestRecursive(g,this._isInteractive(e)?e:g.eventMode,s,l,o);if(y){if(y.length>0&&!y[y.length-1].parent)continue;const _=t.isInteractive();return(y.length>0||_)&&y.push(t),y}}}const h=this._isInteractive(e),c=t.isInteractive();return h&&l(t,s)?c?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var s;if(t.hitArea&&(t.worldTransform.applyInverse(e,Lc),!t.hitArea.contains(Lc.x,Lc.y)))return!0;if(t._mask){const l=t._mask.isMaskData?t._mask.maskObject:t._mask;if(l&&!((s=l.containsPoint)!=null&&s.call(l,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var o,h;e=e??t.type;const s=`on${e}`;(h=(o=t.currentTarget)[s])==null||h.call(o,t);const l=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,l),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const l=e.button===2;this.dispatchEvent(e,l?"rightdown":"mousedown")}const s=this.trackingData(t.pointerId);s.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var d,m;if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const s=e.pointerType==="mouse"||e.pointerType==="pen",l=this.trackingData(t.pointerId),o=this.findMountedTarget(l.overTargets);if(((d=l.overTargets)==null?void 0:d.length)>0&&o!==e.target){const g=t.type==="mousemove"?"mouseout":"pointerout",y=this.createPointerEvent(t,g,o);if(this.dispatchEvent(y,"pointerout"),s&&this.dispatchEvent(y,"mouseout"),!e.composedPath().includes(o)){const _=this.createPointerEvent(t,"pointerleave",o);for(_.eventPhase=_.AT_TARGET;_.target&&!e.composedPath().includes(_.target);)_.currentTarget=_.target,this.notifyTarget(_),s&&this.notifyTarget(_,"mouseleave"),_.target=_.target.parent;this.freeEvent(_)}this.freeEvent(y)}if(o!==e.target){const g=t.type==="mousemove"?"mouseover":"pointerover",y=this.clonePointerEvent(e,g);this.dispatchEvent(y,"pointerover"),s&&this.dispatchEvent(y,"mouseover");let _=o==null?void 0:o.parent;for(;_&&_!==this.rootTarget.parent&&_!==e.target;)_=_.parent;if(!_||_===this.rootTarget.parent){const x=this.clonePointerEvent(e,"pointerenter");for(x.eventPhase=x.AT_TARGET;x.target&&x.target!==o&&x.target!==this.rootTarget.parent;)x.currentTarget=x.target,this.notifyTarget(x),s&&this.notifyTarget(x,"mouseenter"),x.target=x.target.parent;this.freeEvent(x)}this.freeEvent(y)}const h=[],c=this.enableGlobalMoveEvents??!0;this.moveOnAll?h.push("pointermove"):this.dispatchEvent(e,"pointermove"),c&&h.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?h.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),c&&h.push("globaltouchmove")),s&&(this.moveOnAll?h.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),c&&h.push("globalmousemove"),this.cursor=(m=e.target)==null?void 0:m.cursor),h.length>0&&this.all(e,h),this._allInteractiveElements.length=0,this._hitElements.length=0,l.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var h;if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.createPointerEvent(t),l=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),l&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(h=s.target)==null?void 0:h.cursor);const o=this.clonePointerEvent(s,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),l&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;e.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(o)}mapPointerOut(t){if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const s=t.pointerType==="mouse"||t.pointerType==="pen",l=this.findMountedTarget(e.overTargets),o=this.createPointerEvent(t,"pointerout",l);this.dispatchEvent(o),s&&this.dispatchEvent(o,"mouseout");const h=this.createPointerEvent(t,"pointerleave",l);for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),s&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;e.overTargets=null,this.freeEvent(o),this.freeEvent(h)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),s=this.createPointerEvent(t);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const c=s.button===2;this.dispatchEvent(s,c?"rightup":"mouseup")}const l=this.trackingData(t.pointerId),o=this.findMountedTarget(l.pressTargetsByButton[t.button]);let h=o;if(o&&!s.composedPath().includes(o)){let c=o;for(;c&&!s.composedPath().includes(c);){if(s.currentTarget=c,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const d=s.button===2;this.notifyTarget(s,d?"rightupoutside":"mouseupoutside")}c=c.parent}delete l.pressTargetsByButton[t.button],h=c}if(h){const c=this.clonePointerEvent(s,"click");c.target=h,c.path=null,l.clicksByButton[t.button]||(l.clicksByButton[t.button]={clickCount:0,target:c.target,timeStamp:e});const d=l.clicksByButton[t.button];if(d.target===c.target&&e-d.timeStamp<200?++d.clickCount:d.clickCount=1,d.target=c.target,d.timeStamp=e,c.detail=d.clickCount,c.pointerType==="mouse"){const m=c.button===2;this.dispatchEvent(c,m?"rightclick":"click")}else c.pointerType==="touch"&&this.dispatchEvent(c,"tap");this.dispatchEvent(c,"pointertap"),this.freeEvent(c)}this.freeEvent(s)}mapPointerUpOutside(t){if(!(t instanceof Ci)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.findMountedTarget(e.pressTargetsByButton[t.button]),l=this.createPointerEvent(t);if(s){let o=s;for(;o;)l.currentTarget=o,this.notifyTarget(l,"pointerupoutside"),l.pointerType==="touch"?this.notifyTarget(l,"touchendoutside"):(l.pointerType==="mouse"||l.pointerType==="pen")&&this.notifyTarget(l,l.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(l)}mapWheel(t){if(!(t instanceof yn)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let s=1;s<t.length&&t[s].parent===e;s++)e=t[s];return e}createPointerEvent(t,e,s){const l=this.allocateEvent(Ci);return this.copyPointerData(t,l),this.copyMouseData(t,l),this.copyData(t,l),l.nativeEvent=t.nativeEvent,l.originalEvent=t,l.target=s??this.hitTest(l.global.x,l.global.y)??this._hitElements[0],typeof e=="string"&&(l.type=e),l}createWheelEvent(t){const e=this.allocateEvent(yn);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const s=this.allocateEvent(Ci);return s.nativeEvent=t.nativeEvent,s.originalEvent=t.originalEvent,this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.target=t.target,s.path=t.composedPath().slice(),s.type=e??s.type,s}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof Ci&&e instanceof Ci&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof no&&e instanceof no&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const s=t.currentTarget._events[e];if(s&&t.currentTarget.isInteractive())if("fn"in s)s.once&&t.currentTarget.removeListener(e,s.fn,void 0,!0),s.fn.call(s.context,t);else for(let l=0,o=s.length;l<o&&!t.propagationImmediatelyStopped;l++)s[l].once&&t.currentTarget.removeListener(e,s[l].fn,void 0,!0),s[l].fn.call(s[l].context,t)}}const aT=1,lT={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Fc=class Tp{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new nT(null),zr.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ci(null),this.rootWheelEvent=new yn(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Tp.defaultEventFeatures},{set:(e,s,l)=>(s==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=l),e[s]=l,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:s}=this.renderer;this.setTargetElement(e),this.resolution=s,Tp._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const s=this.cursorStyles[t];if(s)switch(typeof s){case"string":e&&(this.domElement.style.cursor=s);break;case"function":s(t);break;case"object":e&&Object.assign(this.domElement.style,s);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let s=0,l=e.length;s<l;s++){const o=e[s],h=this.bootstrapEvent(this.rootPointerEvent,o);this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,zr.pointerMoved();const e=this.normalizeToPointerData(t);for(let s=0,l=e.length;s<l;s++){const o=this.bootstrapEvent(this.rootPointerEvent,e[s]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const s=e!==this.domElement?"outside":"",l=this.normalizeToPointerData(t);for(let o=0,h=l.length;o<h;o++){const c=this.bootstrapEvent(this.rootPointerEvent,l[o]);c.type+=s,this.rootBoundary.mapEvent(c)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let s=0,l=e.length;s<l;s++){const o=this.bootstrapEvent(this.rootPointerEvent,e[s]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,zr.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;zr.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;zr.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,s){const l=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;t.x=(e-l.left)*(this.domElement.width/l.width)*o,t.y=(s-l.top)*(this.domElement.height/l.height)*o}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let s=0,l=t.changedTouches.length;s<l;s++){const o=t.changedTouches[s];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=t.type,e.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const s=t;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=aT),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=lT[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};Fc.extension={name:"events",type:[mt.RendererSystem,mt.CanvasRendererSystem]},Fc.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Gc=Fc;Et.add(Gc);function vg(n){return n==="dynamic"||n==="static"}const oT={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??vg(Gc.defaultEventMode)},set interactive(n){zt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=n,this.eventMode=n?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Gc.defaultEventMode},set eventMode(n){this._internalInteractive=vg(n),this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,l=typeof e=="object"?e.signal:void 0,o=typeof e=="object"?e.once===!0:!1,h=typeof t=="function"?void 0:t;n=s?`${n}capture`:n;const c=typeof t=="function"?t:t.handleEvent,d=this;l&&l.addEventListener("abort",()=>{d.off(n,c,h)}),o?d.once(n,c,h):d.on(n,c,h)},removeEventListener(n,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,l=typeof t=="function"?void 0:t;n=s?`${n}capture`:n,t=typeof t=="function"?t:t.handleEvent,this.off(n,t,l)},dispatchEvent(n){if(!(n instanceof Aa))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};fe.mixin(oT);const uT={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};fe.mixin(uT);const hT=9,ao=100,cT=0,fT=0,_g=2,xg=1,dT=-1e3,pT=-1e3,mT=2;class bg{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(hr.tablet||hr.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${ao}px`,e.style.height=`${ao}px`,e.style.position="absolute",e.style.top=`${cT}px`,e.style.left=`${fT}px`,e.style.zIndex=_g.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${xg}px`,t.style.height=`${xg}px`,t.style.position="absolute",t.style.top=`${dT}px`,t.style.left=`${pT}px`,t.style.zIndex=mT.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let s=0;s<e.length;s++)this.updateAccessibleObjects(e[s])}update(){const t=performance.now();if(hr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:s,width:l,height:o}=this.renderer.view.getBoundingClientRect(),{width:h,height:c,resolution:d}=this.renderer,m=l/h*d,g=o/c*d;let y=this.div;y.style.left=`${e}px`,y.style.top=`${s}px`,y.style.width=`${h}px`,y.style.height=`${c}px`;for(let _=0;_<this.children.length;_++){const x=this.children[_];if(x.renderId!==this.renderId)x._accessibleActive=!1,dn(this.children,_,1),this.div.removeChild(x._accessibleDiv),this.pool.push(x._accessibleDiv),x._accessibleDiv=null,_--;else{y=x._accessibleDiv;let A=x.hitArea;const w=x.worldTransform;x.hitArea?(y.style.left=`${(w.tx+A.x*w.a)*m}px`,y.style.top=`${(w.ty+A.y*w.d)*g}px`,y.style.width=`${A.width*w.a*m}px`,y.style.height=`${A.height*w.d*g}px`):(A=x.getBounds(),this.capHitArea(A),y.style.left=`${A.x*m}px`,y.style.top=`${A.y*g}px`,y.style.width=`${A.width*m}px`,y.style.height=`${A.height*g}px`,y.title!==x.accessibleTitle&&x.accessibleTitle!==null&&(y.title=x.accessibleTitle),y.getAttribute("aria-label")!==x.accessibleHint&&x.accessibleHint!==null&&y.setAttribute("aria-label",x.accessibleHint)),(x.accessibleTitle!==y.title||x.tabIndex!==y.tabIndex)&&(y.title=x.accessibleTitle,y.tabIndex=x.tabIndex,this.debug&&this.updateDebugHTML(y))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:s}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>s&&(t.height=s-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${ao}px`,e.style.height=`${ao}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=_g.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:s}=t.target,l=this.renderer.events.rootBoundary,o=Object.assign(new Aa(l),{target:s});l.rootTarget=this.renderer.lastObjectRendered,e.forEach(h=>l.dispatchEvent(o,h))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===hT&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}bg.extension={name:"accessibility",type:[mt.RendererPlugin,mt.CanvasRendererPlugin]},Et.add(bg);const Eg=class Ap{constructor(t){this.stage=new di,t=Object.assign({forceCanvas:!1},t),this.renderer=SE(t),Ap._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const s=Ap._plugins.slice(0);s.reverse(),s.forEach(l=>{l.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Eg._plugins=[];let Tg=Eg;Et.handleByList(mt.Application,Tg._plugins);class Ag{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,s;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:l,clientHeight:o}=this._resizeTo;e=l,s=o}this.renderer.resize(e,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Ag.extension=mt.Application,Et.add(Ag);const Sg={loader:mt.LoadParser,resolver:mt.ResolveParser,cache:mt.CacheParser,detection:mt.DetectionParser};Et.handle(mt.Asset,n=>{const t=n.ref;Object.entries(Sg).filter(([e])=>!!t[e]).forEach(([e,s])=>Et.add(Object.assign(t[e],{extension:t[e].extension??s})))},n=>{const t=n.ref;Object.keys(Sg).filter(e=>!!t[e]).forEach(e=>Et.remove(t[e]))});class gT{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<e;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function vn(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function Xr(n,t){const e=n.split("?")[0],s=Oe.extname(e).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const Mi=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(s=>typeof s=="string"||e?t(s):s):n),Hc=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n};function wg(n,t,e,s,l){const o=t[e];for(let h=0;h<o.length;h++){const c=o[h];e<t.length-1?wg(n.replace(s[e],c),t,e+1,s,l):l.push(n.replace(s[e],c))}}function yT(n){const t=/\{(.*?)\}/g,e=n.match(t),s=[];if(e){const l=[];e.forEach(o=>{const h=o.substring(1,o.length-1).split(",");l.push(h)}),wg(n,l,0,e,s)}else s.push(n);return s}const lo=n=>!Array.isArray(n);class vT{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const s=Mi(t);let l;for(let c=0;c<this.parsers.length;c++){const d=this.parsers[c];if(d.test(e)){l=d.getCacheableAssets(s,e);break}}l||(l={},s.forEach(c=>{l[c]=e}));const o=Object.keys(l),h={cacheKeys:o,keys:s};if(s.forEach(c=>{this._cacheMap.set(c,h)}),o.forEach(c=>{const d=l?l[c]:e;this._cache.has(c)&&this._cache.get(c)!==d&&console.warn("[Cache] already has key:",c),this._cache.set(c,l[c])}),e instanceof bt){const c=e;s.forEach(d=>{c.baseTexture!==bt.EMPTY.baseTexture&&It.addToCache(c.baseTexture,d),bt.addToCache(c,d)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(s=>{this._cache.delete(s)}),e.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const Ls=new vT;class _T{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,s)=>(this._parsersValidated=!1,t[e]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const s={promise:null,parser:null};return s.promise=(async()=>{var h,c;let l=null,o=null;if(e.loadParser&&(o=this._parserHash[e.loadParser],o||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!o){for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];if(m.load&&((h=m.test)!=null&&h.call(m,t,e,this))){o=m;break}}if(!o)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}l=await o.load(t,e,this),s.parser=o;for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];m.parse&&m.parse&&await((c=m.testParse)==null?void 0:c.call(m,l,e,this))&&(l=await m.parse(l,e,this)||l,s.parser=m)}return l})(),s}async load(t,e){this._parsersValidated||this._validateParsers();let s=0;const l={},o=lo(t),h=Mi(t,m=>({alias:[m],src:m})),c=h.length,d=h.map(async m=>{const g=Oe.toAbsolute(m.src);if(!l[m.src])try{this.promiseCache[g]||(this.promiseCache[g]=this._getLoadPromiseAndParser(g,m)),l[m.src]=await this.promiseCache[g].promise,e&&e(++s/c)}catch(y){throw delete this.promiseCache[g],delete l[m.src],new Error(`[Loader.load] Failed to load ${g}.
${y}`)}});return await Promise.all(d),o?l[h[0].src]:l}async unload(t){const e=Mi(t,s=>({alias:[s],src:s})).map(async s=>{var h,c;const l=Oe.toAbsolute(s.src),o=this.promiseCache[l];if(o){const d=await o.promise;delete this.promiseCache[l],(c=(h=o.parser)==null?void 0:h.unload)==null||c.call(h,d,s,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var Di=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Di||{});const xT=".json",bT="application/json",ET={extension:{type:mt.LoadParser,priority:Di.Low},name:"loadJson",test(n){return vn(n,bT)||Xr(n,xT)},async load(n){return await(await gt.ADAPTER.fetch(n)).json()}};Et.add(ET);const TT=".txt",AT="text/plain",ST={name:"loadTxt",extension:{type:mt.LoadParser,priority:Di.Low},test(n){return vn(n,AT)||Xr(n,TT)},async load(n){return await(await gt.ADAPTER.fetch(n)).text()}};Et.add(ST);const wT=["normal","bold","100","200","300","400","500","600","700","800","900"],RT=[".ttf",".otf",".woff",".woff2"],CT=["font/ttf","font/otf","font/woff","font/woff2"],MT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function DT(n){const t=Oe.extname(n),e=Oe.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let s=e.length>0;for(const o of e)if(!o.match(MT)){s=!1;break}let l=e.join(" ");return s||(l=`"${l.replace(/[\\"]/g,"\\$&")}"`),l}const OT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function BT(n){return OT.test(n)?n:encodeURI(n)}const NT={extension:{type:mt.LoadParser,priority:Di.Low},name:"loadWebFont",test(n){return vn(n,CT)||Xr(n,RT)},async load(n,t){var s,l,o;const e=gt.ADAPTER.getFontFaceSet();if(e){const h=[],c=((s=t.data)==null?void 0:s.family)??DT(n),d=((o=(l=t.data)==null?void 0:l.weights)==null?void 0:o.filter(g=>wT.includes(g)))??["normal"],m=t.data??{};for(let g=0;g<d.length;g++){const y=d[g],_=new FontFace(c,`url(${BT(n)})`,{...m,weight:y});await _.load(),e.add(_),h.push(_)}return h.length===1?h[0]:h}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(t=>gt.ADAPTER.getFontFaceSet().delete(t))}};Et.add(NT);const IT=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let _n=null,kc=class{constructor(){_n||(_n=URL.createObjectURL(new Blob([IT],{type:"application/javascript"}))),this.worker=new Worker(_n)}};kc.revokeObjectURL=function(){_n&&(URL.revokeObjectURL(_n),_n=null)};const UT=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let xn=null;class Rg{constructor(){xn||(xn=URL.createObjectURL(new Blob([UT],{type:"application/javascript"}))),this.worker=new Worker(xn)}}Rg.revokeObjectURL=function(){xn&&(URL.revokeObjectURL(xn),xn=null)};let Cg=0,zc;class PT{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new kc;e.addEventListener("message",s=>{e.terminate(),kc.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){zc===void 0&&(zc=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<zc&&(this._createdWorkers++,t=new Rg().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const s=new Promise((l,o)=>{this.queue.push({id:t,arguments:e,resolve:l,reject:o})});return this.next(),s}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),s=e.id;this.resolveHash[Cg]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Cg++,id:s})}}const Mg=new PT;function Sa(n,t,e){n.resource.internal=!0;const s=new bt(n),l=()=>{delete t.promiseCache[e],Ls.has(e)&&Ls.remove(e)};return s.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),l())}),s.once("destroyed",()=>{n.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),l())}),s}const LT=[".jpeg",".jpg",".png",".webp",".avif"],FT=["image/jpeg","image/png","image/webp","image/avif"];async function GT(n){const t=await gt.ADAPTER.fetch(n);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const oo={name:"loadTextures",extension:{type:mt.LoadParser,priority:Di.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return vn(n,FT)||Xr(n,LT)},async load(n,t,e){var c;const s=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let l;s?this.config.preferWorkers&&await Mg.isImageBitmapSupported()?l=await Mg.loadImageBitmap(n):l=await GT(n):l=await new Promise((d,m)=>{const g=new Image;g.crossOrigin=this.config.crossOrigin,g.src=n,g.complete?d(g):(g.onload=()=>d(g),g.onerror=y=>m(y))});const o={...t.data};o.resolution??(o.resolution=fr(n)),s&&((c=o.resourceOptions)==null?void 0:c.ownsImageBitmap)===void 0&&(o.resourceOptions={...o.resourceOptions},o.resourceOptions.ownsImageBitmap=!0);const h=new It(l,o);return h.resource.src=n,Sa(h,e,n)},unload(n){n.destroy(!0)}};Et.add(oo);const HT=".svg",kT="image/svg+xml",zT={extension:{type:mt.LoadParser,priority:Di.High},name:"loadSVG",test(n){return vn(n,kT)||Xr(n,HT)},async testParse(n){return Nc.test(n)},async parse(n,t,e){var o;const s=new Nc(n,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);await s.load();const l=new It(s,{resolution:fr(n),...t==null?void 0:t.data});return l.resource.src=t.src,Sa(l,e,t.src)},async load(n,t){return(await gt.ADAPTER.fetch(n)).text()},unload:oo.unload};Et.add(zT);const XT=[".mp4",".m4v",".webm",".ogv"],YT=["video/mp4","video/webm","video/ogg"],VT={name:"loadVideo",extension:{type:mt.LoadParser,priority:Di.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(n){return vn(n,YT)||Xr(n,XT)},async load(n,t,e){var h;let s;const l=await(await gt.ADAPTER.fetch(n)).blob(),o=URL.createObjectURL(l);try{const c={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(h=t==null?void 0:t.data)==null?void 0:h.resourceOptions,autoLoad:!0},d=new pg(o,c);await d.load();const m=new It(d,{alphaMode:await Kx(),resolution:fr(n),...t==null?void 0:t.data});m.resource.src=n,s=Sa(m,e,n),s.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(o)})}catch(c){throw URL.revokeObjectURL(o),c}return s},unload(n){n.destroy(!0)}};Et.add(VT);class jT{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`).join("&")}}getAlias(t){const{alias:e,name:s,src:l,srcs:o}=t;return Mi(e||s||l||o,h=>typeof h=="string"?h:Array.isArray(h)?h.map(c=>(c==null?void 0:c.src)??(c==null?void 0:c.srcs)??c):h!=null&&h.src||h!=null&&h.srcs?h.src??h.srcs:h,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const s=[];Array.isArray(e)?e.forEach(l=>{const o=l.src??l.srcs,h=l.alias??l.name;let c;if(typeof h=="string"){const d=this._createBundleAssetId(t,h);s.push(d),c=[h,d]}else{const d=h.map(m=>this._createBundleAssetId(t,m));s.push(...d),c=[...h,...d]}this.add({...l,alias:c,src:o})}):Object.keys(e).forEach(l=>{const o=[l,this._createBundleAssetId(t,l)];if(typeof e[l]=="string")this.add({alias:o,src:e[l]});else if(Array.isArray(e[l]))this.add({alias:o,src:e[l]});else{const h=e[l],c=h.src??h.srcs;this.add({...h,alias:o,src:Array.isArray(c)?c:[c]})}s.push(...o)}),this._bundles[t]=s}add(t,e,s,l,o){const h=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(zt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),h.push({alias:t,src:e,data:s,format:l,loadParser:o})):Array.isArray(t)?h.push(...t):h.push(t);let c;c=d=>{this.hasKey(d)&&console.warn(`[Resolver] already has key: ${d} overwriting`)},Mi(h).forEach(d=>{const{src:m,srcs:g}=d;let{data:y,format:_,loadParser:x}=d;const A=Mi(m||g).map(E=>typeof E=="string"?yT(E):Array.isArray(E)?E:[E]),w=this.getAlias(d);Array.isArray(w)?w.forEach(c):c(w);const v=[];A.forEach(E=>{E.forEach(R=>{let D={};if(typeof R!="object"){D.src=R;for(let P=0;P<this._parsers.length;P++){const I=this._parsers[P];if(I.test(R)){D=I.parse(R);break}}}else y=R.data??y,_=R.format??_,x=R.loadParser??x,D={...D,...R};if(!w)throw new Error(`[Resolver] alias is undefined for this asset: ${D.src}`);D=this.buildResolvedAsset(D,{aliases:w,data:y,format:_,loadParser:x}),v.push(D)})}),w.forEach(E=>{this._assetMap[E]=v})})}resolveBundle(t){const e=lo(t);t=Mi(t);const s={};return t.forEach(l=>{const o=this._bundles[l];if(o){const h=this.resolve(o),c={};for(const d in h){const m=h[d];c[this._extractAssetIdFromBundle(l,d)]=m}s[l]=c}}),e?s[t[0]]:s}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const s={};for(const l in e)s[l]=e[l].src;return s}return e.src}resolve(t){const e=lo(t);t=Mi(t);const s={};return t.forEach(l=>{if(!this._resolverHash[l])if(this._assetMap[l]){let o=this._assetMap[l];const h=o[0],c=this._getPreferredOrder(o);c==null||c.priority.forEach(d=>{c.params[d].forEach(m=>{const g=o.filter(y=>y[d]?y[d]===m:!1);g.length&&(o=g)})}),this._resolverHash[l]=o[0]??h}else this._resolverHash[l]=this.buildResolvedAsset({alias:[l],src:l},{});s[l]=this._resolverHash[l]}),e?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const s=t[0],l=this._preferredOrder.find(o=>o.params.format.includes(s.format));if(l)return l}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:s,data:l,loadParser:o,format:h}=e;return(this._basePath||this._rootPath)&&(t.src=Oe.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...l||{},...t.data},t.loadParser=o??t.loadParser,t.format=h??t.format??Oe.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class qT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new jT,this.loader=new _T,this.cache=Ls,this._backgroundLoader=new gT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var o,h;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let c=t.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const e=((o=t.texturePreference)==null?void 0:o.resolution)??1,s=typeof e=="number"?[e]:e,l=await this._detectFormats({preferredFormats:(h=t.texturePreference)==null?void 0:h.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:l,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,s,l,o){this.resolver.add(t,e,s,l,o)}async load(t,e){this._initialized||await this.init();const s=lo(t),l=Mi(t).map(c=>{if(typeof c!="string"){const d=this.resolver.getAlias(c);return d.some(m=>!this.resolver.hasKey(m))&&this.add(c),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),o=this.resolver.resolve(l),h=await this._mapLoadToResolve(o,e);return s?h[l[0]]:h}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const l=this.resolver.resolveBundle(t),o={},h=Object.keys(l);let c=0,d=0;const m=()=>{e==null||e(++c/d)},g=h.map(y=>{const _=l[y];return d+=Object.keys(_).length,this._mapLoadToResolve(_,m).then(x=>{o[y]=x})});return await Promise.all(g),s?o[t[0]]:o}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Ls.get(t);const e={};for(let s=0;s<t.length;s++)e[s]=Ls.get(t[s]);return e}async _mapLoadToResolve(t,e){const s=Object.values(t),l=Object.keys(t);this._backgroundLoader.active=!1;const o=await this.loader.load(s,e);this._backgroundLoader.active=!0;const h={};return s.forEach((c,d)=>{const m=o[c.src],g=[c.src];c.alias&&g.push(...c.alias),h[l[d]]=m,Ls.set(g,m)}),h}async unload(t){this._initialized||await this.init();const e=Mi(t).map(l=>typeof l!="string"?l.src:l),s=this.resolver.resolve(e);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=Mi(t);const e=this.resolver.resolveBundle(t),s=Object.keys(e).map(l=>this._unloadFromResolved(e[l]));await Promise.all(s)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(s=>{Ls.remove(s.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?e=await s.add(e):t.skipDetections||(e=await s.remove(e));return e=e.filter((s,l)=>e.indexOf(s)===l),e}get detections(){return this._detections}get preferWorkers(){return oo.config.preferWorkers}set preferWorkers(t){zt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(s=>s in t).forEach(s=>{e.config[s]=t[s]})})}}const wa=new qT;Et.handleByList(mt.LoadParser,wa.loader.parsers).handleByList(mt.ResolveParser,wa.resolver.parsers).handleByList(mt.CacheParser,wa.cache.parsers).handleByList(mt.DetectionParser,wa.detections);const WT={extension:mt.CacheParser,test:n=>Array.isArray(n)&&n.every(t=>t instanceof bt),getCacheableAssets:(n,t)=>{const e={};return n.forEach(s=>{t.forEach((l,o)=>{e[s+(o===0?"":o+1)]=l})}),e}};Et.add(WT);async function Dg(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const $T={extension:{type:mt.DetectionParser,priority:1},test:async()=>Dg("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")};Et.add($T);const ZT={extension:{type:mt.DetectionParser,priority:0},test:async()=>Dg("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")};Et.add(ZT);const Og=["png","jpg","jpeg"],KT={extension:{type:mt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...Og],remove:async n=>n.filter(t=>!Og.includes(t))};Et.add(KT);const QT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Xc(n){return QT?!1:document.createElement("video").canPlayType(n)!==""}const JT={extension:{type:mt.DetectionParser,priority:0},test:async()=>Xc("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")};Et.add(JT);const tA={extension:{type:mt.DetectionParser,priority:0},test:async()=>Xc("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")};Et.add(tA);const eA={extension:{type:mt.DetectionParser,priority:0},test:async()=>Xc("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")};Et.add(eA);const iA={extension:mt.ResolveParser,test:oo.test,parse:n=>{var t;return{resolution:parseFloat(((t=gt.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:Oe.extname(n).slice(1),src:n}}};Et.add(iA);var Le=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))(Le||{});const uo={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Ki,bn;function Bg(){bn={bptc:Ki.getExtension("EXT_texture_compression_bptc"),astc:Ki.getExtension("WEBGL_compressed_texture_astc"),etc:Ki.getExtension("WEBGL_compressed_texture_etc"),s3tc:Ki.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ki.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Ki.getExtension("WEBGL_compressed_texture_pvrtc")||Ki.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Ki.getExtension("WEBGL_compressed_texture_etc1"),atc:Ki.getExtension("WEBGL_compressed_texture_atc")}}const rA={extension:{type:mt.DetectionParser,priority:2},test:async()=>{const n=gt.ADAPTER.createCanvas().getContext("webgl");return n?(Ki=n,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async n=>{bn||Bg();const t=[];for(const e in bn)bn[e]&&t.push(e);return[...t,...n]},remove:async n=>(bn||Bg(),n.filter(t=>!(t in bn)))};Et.add(rA);class sA extends Fl{constructor(t,e={width:1,height:1,autoLoad:!0}){let s,l;typeof t=="string"?(s=t,l=new Uint8Array):(s=null,l=t),super(l,e),this.origin=s,this.buffer=l?new oc(l):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new oc(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Fs extends sA{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Fs._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Fs._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,s){const l=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;l.pixelStorei(l.UNPACK_ALIGNMENT,4);for(let o=0,h=this.levels;o<h;o++){const{levelID:c,levelWidth:d,levelHeight:m,levelBuffer:g}=this._levelBuffers[o];l.compressedTexImage2D(l.TEXTURE_2D,c,this.format,d,m,0,g)}return!0}onBlobLoaded(){this._levelBuffers=Fs._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,e,s,l,o,h,c){const d=new Array(s);let m=t.byteOffset,g=h,y=c,_=g+l-1&~(l-1),x=y+o-1&~(o-1),A=_*x*uo[e];for(let w=0;w<s;w++)d[w]={levelID:w,levelWidth:s>1?g:_,levelHeight:s>1?y:x,levelBuffer:new Uint8Array(t.buffer,m,A)},m+=A,g=g>>1||1,y=y>>1||1,_=g+l-1&~(l-1),x=y+o-1&~(o-1),A=_*x*uo[e];return d}}const Yc=4,ho=124,nA=32,Ng=20,aA=542327876,co={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},lA={FOURCC:2},fo={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},oA=1,uA=2,hA=4,cA=64,fA=512,dA=131072,pA=827611204,mA=861165636,gA=894720068,yA=808540228,vA=4,_A={[pA]:Le.COMPRESSED_RGBA_S3TC_DXT1_EXT,[mA]:Le.COMPRESSED_RGBA_S3TC_DXT3_EXT,[gA]:Le.COMPRESSED_RGBA_S3TC_DXT5_EXT},xA={70:Le.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Le.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Le.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Le.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Le.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Le.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Le.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Le.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Le.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Le.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function bA(n){const t=new Uint32Array(n);if(t[0]!==aA)throw new Error("Invalid DDS file magic word");const e=new Uint32Array(n,0,ho/Uint32Array.BYTES_PER_ELEMENT),s=e[co.HEIGHT],l=e[co.WIDTH],o=e[co.MIPMAP_COUNT],h=new Uint32Array(n,co.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,nA/Uint32Array.BYTES_PER_ELEMENT),c=h[oA];if(c&hA){const d=h[lA.FOURCC];if(d!==yA){const R=_A[d],D=Yc+ho,P=new Uint8Array(n,D);return[new Fs(P,{format:R,width:l,height:s,levels:o})]}const m=Yc+ho,g=new Uint32Array(t.buffer,m,Ng/Uint32Array.BYTES_PER_ELEMENT),y=g[fo.DXGI_FORMAT],_=g[fo.RESOURCE_DIMENSION],x=g[fo.MISC_FLAG],A=g[fo.ARRAY_SIZE],w=xA[y];if(w===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${y}`);if(x===vA)throw new Error("DDSParser does not support cubemap textures");if(_===6)throw new Error("DDSParser does not supported 3D texture data");const v=new Array,E=Yc+ho+Ng;if(A===1)v.push(new Uint8Array(n,E));else{const R=uo[w];let D=0,P=l,I=s;for(let U=0;U<o;U++){const q=Math.max(1,P+3&-4),rt=Math.max(1,I+3&-4),lt=q*rt*R;D+=lt,P=P>>>1,I=I>>>1}let Y=E;for(let U=0;U<A;U++)v.push(new Uint8Array(n,Y,D)),Y+=D}return v.map(R=>new Fs(R,{format:w,width:l,height:s,levels:o}))}throw c&cA?new Error("DDSParser does not support uncompressed texture data."):c&fA?new Error("DDSParser does not supported YUV uncompressed texture data."):c&dA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&uA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Ig=[171,75,84,88,32,49,49,187,13,10,26,10],EA=67305985,Oi={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Vc=64,Ug={[Rt.UNSIGNED_BYTE]:1,[Rt.UNSIGNED_SHORT]:2,[Rt.INT]:4,[Rt.UNSIGNED_INT]:4,[Rt.FLOAT]:4,[Rt.HALF_FLOAT]:8},TA={[ct.RGBA]:4,[ct.RGB]:3,[ct.RG]:2,[ct.RED]:1,[ct.LUMINANCE]:1,[ct.LUMINANCE_ALPHA]:2,[ct.ALPHA]:1},AA={[Rt.UNSIGNED_SHORT_4_4_4_4]:2,[Rt.UNSIGNED_SHORT_5_5_5_1]:2,[Rt.UNSIGNED_SHORT_5_6_5]:2};function SA(n,t,e=!1){const s=new DataView(t);if(!wA(n,s))return null;const l=s.getUint32(Oi.ENDIANNESS,!0)===EA,o=s.getUint32(Oi.GL_TYPE,l),h=s.getUint32(Oi.GL_FORMAT,l),c=s.getUint32(Oi.GL_INTERNAL_FORMAT,l),d=s.getUint32(Oi.PIXEL_WIDTH,l),m=s.getUint32(Oi.PIXEL_HEIGHT,l)||1,g=s.getUint32(Oi.PIXEL_DEPTH,l)||1,y=s.getUint32(Oi.NUMBER_OF_ARRAY_ELEMENTS,l)||1,_=s.getUint32(Oi.NUMBER_OF_FACES,l),x=s.getUint32(Oi.NUMBER_OF_MIPMAP_LEVELS,l),A=s.getUint32(Oi.BYTES_OF_KEY_VALUE_DATA,l);if(m===0||g!==1)throw new Error("Only 2D textures are supported");if(_!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(y!==1)throw new Error("WebGL does not support array textures");const w=4,v=4,E=d+3&-4,R=m+3&-4,D=new Array(y);let P=d*m;o===0&&(P=E*R);let I;if(o!==0?Ug[o]?I=Ug[o]*TA[h]:I=AA[o]:I=uo[c],I===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const Y=e?CA(s,A,l):null;let U=P*I,q=d,rt=m,lt=E,dt=R,z=Vc+A;for(let W=0;W<x;W++){const tt=s.getUint32(z,l);let ht=z+4;for(let S=0;S<y;S++){let O=D[S];O||(O=D[S]=new Array(x)),O[W]={levelID:W,levelWidth:x>1||o!==0?q:lt,levelHeight:x>1||o!==0?rt:dt,levelBuffer:new Uint8Array(t,ht,U)},ht+=U}z+=tt+4,z=z%4!==0?z+4-z%4:z,q=q>>1||1,rt=rt>>1||1,lt=q+w-1&-4,dt=rt+v-1&-4,U=lt*dt*I}return o!==0?{uncompressed:D.map(W=>{let tt=W[0].levelBuffer,ht=!1;return o===Rt.FLOAT?tt=new Float32Array(W[0].levelBuffer.buffer,W[0].levelBuffer.byteOffset,W[0].levelBuffer.byteLength/4):o===Rt.UNSIGNED_INT?(ht=!0,tt=new Uint32Array(W[0].levelBuffer.buffer,W[0].levelBuffer.byteOffset,W[0].levelBuffer.byteLength/4)):o===Rt.INT&&(ht=!0,tt=new Int32Array(W[0].levelBuffer.buffer,W[0].levelBuffer.byteOffset,W[0].levelBuffer.byteLength/4)),{resource:new Fl(tt,{width:W[0].levelWidth,height:W[0].levelHeight}),type:o,format:ht?RA(h):h}}),kvData:Y}:{compressed:D.map(W=>new Fs(null,{format:c,width:d,height:m,levels:x,levelBuffers:W})),kvData:Y}}function wA(n,t){for(let e=0;e<Ig.length;e++)if(t.getUint8(e)!==Ig[e])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}function RA(n){switch(n){case ct.RGBA:return ct.RGBA_INTEGER;case ct.RGB:return ct.RGB_INTEGER;case ct.RG:return ct.RG_INTEGER;case ct.RED:return ct.RED_INTEGER;default:return n}}function CA(n,t,e){const s=new Map;let l=0;for(;l<t;){const o=n.getUint32(Vc+l,e),h=Vc+l+4,c=3-(o+3)%4;if(o===0||o>t-l){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let d=0;for(;d<o&&n.getUint8(h+d)!==0;d++);if(d===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const m=new TextDecoder().decode(new Uint8Array(n.buffer,h,d)),g=new DataView(n.buffer,h+d+1,o-d-1);s.set(m,g),l+=4+o+c}return s}const MA={extension:{type:mt.LoadParser,priority:Di.High},name:"loadDDS",test(n){return Xr(n,".dds")},async load(n,t,e){const s=await(await gt.ADAPTER.fetch(n)).arrayBuffer(),l=bA(s).map(o=>{const h=new It(o,{mipmap:Yi.OFF,alphaMode:We.NO_PREMULTIPLIED_ALPHA,resolution:fr(n),...t.data});return Sa(h,e,n)});return l.length===1?l[0]:l},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};Et.add(MA);const DA={extension:{type:mt.LoadParser,priority:Di.High},name:"loadKTX",test(n){return Xr(n,".ktx")},async load(n,t,e){const s=await(await gt.ADAPTER.fetch(n)).arrayBuffer(),{compressed:l,uncompressed:o,kvData:h}=SA(n,s),c=l??o,d={mipmap:Yi.OFF,alphaMode:We.NO_PREMULTIPLIED_ALPHA,resolution:fr(n),...t.data},m=c.map(g=>{c===o&&Object.assign(d,{type:g.type,format:g.format});const y=g.resource??g,_=new It(y,d);return _.ktxKeyValueData=h,Sa(_,e,n)});return m.length===1?m[0]:m},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};Et.add(DA);const OA=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],BA={extension:mt.ResolveParser,test:n=>{const t=Oe.extname(n).slice(1);return["basis","ktx","dds"].includes(t)},parse:n=>{var s,l;const t=n.split("."),e=t.pop();if(["ktx","dds"].includes(e)){const o=t.pop();if(OA.includes(o))return{resolution:parseFloat(((s=gt.RETINA_PREFIX.exec(n))==null?void 0:s[1])??"1"),format:o,src:n}}return{resolution:parseFloat(((l=gt.RETINA_PREFIX.exec(n))==null?void 0:l[1])??"1"),format:e,src:n}}};Et.add(BA);const po=new Pt,NA=4,Pg=class Cl{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,e,s,l){const o=new Image;return o.src=await this.base64(t,e,s,l),o}async base64(t,e,s,l){const o=this.canvas(t,l);if(o.toBlob!==void 0)return new Promise((h,c)=>{o.toBlob(d=>{if(!d){c(new Error("ICanvas.toBlob failed!"));return}const m=new FileReader;m.onload=()=>h(m.result),m.onerror=c,m.readAsDataURL(d)},e,s)});if(o.toDataURL!==void 0)return o.toDataURL(e,s);if(o.convertToBlob!==void 0){const h=await o.convertToBlob({type:e,quality:s});return new Promise((c,d)=>{const m=new FileReader;m.onload=()=>c(m.result),m.onerror=d,m.readAsDataURL(h)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:s,width:l,height:o,flipY:h,premultipliedAlpha:c}=this._rawPixels(t,e);h&&Cl._flipY(s,l,o),c&&Cl._unpremultiplyAlpha(s);const d=new db(l,o,1),m=new ImageData(new Uint8ClampedArray(s.buffer),l,o);return d.context.putImageData(m,0,0),d.canvas}pixels(t,e){const{pixels:s,width:l,height:o,flipY:h,premultipliedAlpha:c}=this._rawPixels(t,e);return h&&Cl._flipY(s,l,o),c&&Cl._unpremultiplyAlpha(s),s}_rawPixels(t,e){const s=this.renderer;if(!s)throw new Error("The Extract has already been destroyed");let l,o=!1,h=!1,c,d=!1;t&&(t instanceof Ns?c=t:(c=s.generateTexture(t,{region:e,resolution:s.resolution,multisample:s.multisample}),d=!0,e&&(po.width=e.width,po.height=e.height,e=po)));const m=s.gl;if(c){if(l=c.baseTexture.resolution,e=e??c.frame,o=!1,h=c.baseTexture.alphaMode>0&&c.baseTexture.format===ct.RGBA,!d){s.renderTexture.bind(c);const x=c.framebuffer.glFramebuffers[s.CONTEXT_UID];x.blitFramebuffer&&s.framebuffer.bind(x.blitFramebuffer)}}else l=s.resolution,e||(e=po,e.width=s.width/l,e.height=s.height/l),o=!0,h=this._rendererPremultipliedAlpha,s.renderTexture.bind();const g=Math.max(Math.round(e.width*l),1),y=Math.max(Math.round(e.height*l),1),_=new Uint8Array(NA*g*y);return m.readPixels(Math.round(e.x*l),Math.round(e.y*l),g,y,m.RGBA,m.UNSIGNED_BYTE,_),d&&(c==null||c.destroy(!0)),{pixels:_,width:g,height:y,flipY:o,premultipliedAlpha:h}}destroy(){this.renderer=null}static _flipY(t,e,s){const l=e<<2,o=s>>1,h=new Uint8Array(l);for(let c=0;c<o;c++){const d=c*l,m=(s-c-1)*l;h.set(t.subarray(d,d+l)),t.copyWithin(d,m,m+l),t.set(h,m)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let s=0;s<e;s+=4){const l=t[s+3];if(l!==0){const o=255.001/l;t[s]=t[s]*o+.5,t[s+1]=t[s+1]*o+.5,t[s+2]=t[s+2]*o+.5}}}};Pg.extension={name:"extract",type:mt.RendererSystem};let IA=Pg;Et.add(IA);const mo={build(n){const t=n.points;let e,s,l,o,h,c;if(n.type===Pe.CIRC){const A=n.shape;e=A.x,s=A.y,h=c=A.radius,l=o=0}else if(n.type===Pe.ELIP){const A=n.shape;e=A.x,s=A.y,h=A.width,c=A.height,l=o=0}else{const A=n.shape,w=A.width/2,v=A.height/2;e=A.x+w,s=A.y+v,h=c=Math.max(0,Math.min(A.radius,Math.min(w,v))),l=w-h,o=v-c}if(!(h>=0&&c>=0&&l>=0&&o>=0)){t.length=0;return}const d=Math.ceil(2.3*Math.sqrt(h+c)),m=d*8+(l?4:0)+(o?4:0);if(t.length=m,m===0)return;if(d===0){t.length=8,t[0]=t[6]=e+l,t[1]=t[3]=s+o,t[2]=t[4]=e-l,t[5]=t[7]=s-o;return}let g=0,y=d*4+(l?2:0)+2,_=y,x=m;{const A=l+h,w=o,v=e+A,E=e-A,R=s+w;if(t[g++]=v,t[g++]=R,t[--y]=R,t[--y]=E,o){const D=s-w;t[_++]=E,t[_++]=D,t[--x]=D,t[--x]=v}}for(let A=1;A<d;A++){const w=Math.PI/2*(A/d),v=l+Math.cos(w)*h,E=o+Math.sin(w)*c,R=e+v,D=e-v,P=s+E,I=s-E;t[g++]=R,t[g++]=P,t[--y]=P,t[--y]=D,t[_++]=D,t[_++]=I,t[--x]=I,t[--x]=R}{const A=l,w=o+c,v=e+A,E=e-A,R=s+w,D=s-w;t[g++]=v,t[g++]=R,t[--x]=D,t[--x]=v,l&&(t[g++]=E,t[g++]=R,t[--x]=D,t[--x]=E)}},triangulate(n,t){const e=n.points,s=t.points,l=t.indices;if(e.length===0)return;let o=s.length/2;const h=o;let c,d;if(n.type!==Pe.RREC){const g=n.shape;c=g.x,d=g.y}else{const g=n.shape;c=g.x+g.width/2,d=g.y+g.height/2}const m=n.matrix;s.push(n.matrix?m.a*c+m.c*d+m.tx:c,n.matrix?m.b*c+m.d*d+m.ty:d),o++,s.push(e[0],e[1]);for(let g=2;g<e.length;g+=2)s.push(e[g],e[g+1]),l.push(o++,h,o);l.push(h+1,h,o)}};function Lg(n,t=!1){const e=n.length;if(e<6)return;let s=0;for(let l=0,o=n[e-2],h=n[e-1];l<e;l+=2){const c=n[l],d=n[l+1];s+=(c-o)*(d+h),o=c,h=d}if(!t&&s>0||t&&s<=0){const l=e/2;for(let o=l+l%2;o<e;o+=2){const h=e-o-2,c=e-o-1,d=o,m=o+1;[n[h],n[d]]=[n[d],n[h]],[n[c],n[m]]=[n[m],n[c]]}}}const Fg={build(n){n.points=n.shape.points.slice()},triangulate(n,t){let e=n.points;const s=n.holes,l=t.points,o=t.indices;if(e.length>=6){Lg(e,!1);const h=[];for(let m=0;m<s.length;m++){const g=s[m];Lg(g.points,!0),h.push(e.length/2),e=e.concat(g.points)}const c=dx(e,h,2);if(!c)return;const d=l.length/2;for(let m=0;m<c.length;m+=3)o.push(c[m]+d),o.push(c[m+1]+d),o.push(c[m+2]+d);for(let m=0;m<e.length;m++)l.push(e[m])}}},UA={build(n){const t=n.shape,e=t.x,s=t.y,l=t.width,o=t.height,h=n.points;h.length=0,l>=0&&o>=0&&h.push(e,s,e+l,s,e+l,s+o,e,s+o)},triangulate(n,t){const e=n.points,s=t.points;if(e.length===0)return;const l=s.length/2;s.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(l,l+1,l+2,l+1,l+2,l+3)}},PA={build(n){mo.build(n)},triangulate(n,t){mo.triangulate(n,t)}};var pi=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(pi||{}),Yr=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(Yr||{});const En={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,t=20){if(!this.adaptive||!n||isNaN(n))return t;let e=Math.ceil(n/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class Gg{static curveTo(t,e,s,l,o,h){const c=h[h.length-2],d=h[h.length-1]-e,m=c-t,g=l-e,y=s-t,_=Math.abs(d*y-m*g);if(_<1e-8||o===0)return(h[h.length-2]!==t||h[h.length-1]!==e)&&h.push(t,e),null;const x=d*d+m*m,A=g*g+y*y,w=d*g+m*y,v=o*Math.sqrt(x)/_,E=o*Math.sqrt(A)/_,R=v*w/x,D=E*w/A,P=v*y+E*m,I=v*g+E*d,Y=m*(E+R),U=d*(E+R),q=y*(v+D),rt=g*(v+D),lt=Math.atan2(U-I,Y-P),dt=Math.atan2(rt-I,q-P);return{cx:P+t,cy:I+e,radius:o,startAngle:lt,endAngle:dt,anticlockwise:m*g>y*d}}static arc(t,e,s,l,o,h,c,d,m){const g=c-h,y=En._segmentsCount(Math.abs(g)*o,Math.ceil(Math.abs(g)/Hl)*40),_=g/(y*2),x=_*2,A=Math.cos(_),w=Math.sin(_),v=y-1,E=v%1/v;for(let R=0;R<=v;++R){const D=R+E*R,P=_+h+x*D,I=Math.cos(P),Y=-Math.sin(P);m.push((A*I+w*Y)*o+s,(A*-Y+w*I)*o+l)}}}class LA{constructor(){this.reset()}begin(t,e,s){this.reset(),this.style=t,this.start=e,this.attribStart=s}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class jc{static curveLength(t,e,s,l,o,h,c,d){let m=0,g=0,y=0,_=0,x=0,A=0,w=0,v=0,E=0,R=0,D=0,P=t,I=e;for(let Y=1;Y<=10;++Y)g=Y/10,y=g*g,_=y*g,x=1-g,A=x*x,w=A*x,v=w*t+3*A*g*s+3*x*y*o+_*c,E=w*e+3*A*g*l+3*x*y*h+_*d,R=P-v,D=I-E,P=v,I=E,m+=Math.sqrt(R*R+D*D);return m}static curveTo(t,e,s,l,o,h,c){const d=c[c.length-2],m=c[c.length-1];c.length-=2;const g=En._segmentsCount(jc.curveLength(d,m,t,e,s,l,o,h));let y=0,_=0,x=0,A=0,w=0;c.push(d,m);for(let v=1,E=0;v<=g;++v)E=v/g,y=1-E,_=y*y,x=_*y,A=E*E,w=A*E,c.push(x*d+3*_*E*t+3*y*A*s+w*o,x*m+3*_*E*e+3*y*A*l+w*h)}}function Hg(n,t,e,s,l,o,h,c){const d=n-e*l,m=t-s*l,g=n+e*o,y=t+s*o;let _,x;h?(_=s,x=-e):(_=-s,x=e);const A=d+_,w=m+x,v=g+_,E=y+x;return c.push(A,w,v,E),2}function Gs(n,t,e,s,l,o,h,c){const d=e-n,m=s-t;let g=Math.atan2(d,m),y=Math.atan2(l-n,o-t);c&&g<y?g+=Math.PI*2:!c&&g>y&&(y+=Math.PI*2);let _=g;const x=y-g,A=Math.abs(x),w=Math.sqrt(d*d+m*m),v=(15*A*Math.sqrt(w)/Math.PI>>0)+1,E=x/v;if(_+=E,c){h.push(n,t,e,s);for(let R=1,D=_;R<v;R++,D+=E)h.push(n,t,n+Math.sin(D)*w,t+Math.cos(D)*w);h.push(n,t,l,o)}else{h.push(e,s,n,t);for(let R=1,D=_;R<v;R++,D+=E)h.push(n+Math.sin(D)*w,t+Math.cos(D)*w,n,t);h.push(l,o,n,t)}return v*2}function FA(n,t){const e=n.shape;let s=n.points||e.points.slice();const l=t.closePointEps;if(s.length===0)return;const o=n.lineStyle,h=new Vt(s[0],s[1]),c=new Vt(s[s.length-2],s[s.length-1]),d=e.type!==Pe.POLY||e.closeStroke,m=Math.abs(h.x-c.x)<l&&Math.abs(h.y-c.y)<l;if(d){s=s.slice(),m&&(s.pop(),s.pop(),c.set(s[s.length-2],s[s.length-1]));const O=(h.x+c.x)*.5,M=(c.y+h.y)*.5;s.unshift(O,M),s.push(O,M)}const g=t.points,y=s.length/2;let _=s.length;const x=g.length/2,A=o.width/2,w=A*A,v=o.miterLimit*o.miterLimit;let E=s[0],R=s[1],D=s[2],P=s[3],I=0,Y=0,U=-(R-P),q=E-D,rt=0,lt=0,dt=Math.sqrt(U*U+q*q);U/=dt,q/=dt,U*=A,q*=A;const z=o.alignment,W=(1-z)*2,tt=z*2;d||(o.cap===Yr.ROUND?_+=Gs(E-U*(W-tt)*.5,R-q*(W-tt)*.5,E-U*W,R-q*W,E+U*tt,R+q*tt,g,!0)+2:o.cap===Yr.SQUARE&&(_+=Hg(E,R,U,q,W,tt,!0,g))),g.push(E-U*W,R-q*W,E+U*tt,R+q*tt);for(let O=1;O<y-1;++O){E=s[(O-1)*2],R=s[(O-1)*2+1],D=s[O*2],P=s[O*2+1],I=s[(O+1)*2],Y=s[(O+1)*2+1],U=-(R-P),q=E-D,dt=Math.sqrt(U*U+q*q),U/=dt,q/=dt,U*=A,q*=A,rt=-(P-Y),lt=D-I,dt=Math.sqrt(rt*rt+lt*lt),rt/=dt,lt/=dt,rt*=A,lt*=A;const M=D-E,k=R-P,T=D-I,B=Y-P,G=M*T+k*B,F=k*T-B*M,Z=F<0;if(Math.abs(F)<.001*Math.abs(G)){g.push(D-U*W,P-q*W,D+U*tt,P+q*tt),G>=0&&(o.join===pi.ROUND?_+=Gs(D,P,D-U*W,P-q*W,D-rt*W,P-lt*W,g,!1)+4:_+=2,g.push(D-rt*tt,P-lt*tt,D+rt*W,P+lt*W));continue}const it=(-U+E)*(-q+P)-(-U+D)*(-q+R),nt=(-rt+I)*(-lt+P)-(-rt+D)*(-lt+Y),pt=(M*nt-T*it)/F,ft=(B*it-k*nt)/F,vt=(pt-D)*(pt-D)+(ft-P)*(ft-P),ut=D+(pt-D)*W,_t=P+(ft-P)*W,Tt=D-(pt-D)*tt,Bt=P-(ft-P)*tt,Gt=Math.min(M*M+k*k,T*T+B*B),At=Z?W:tt,wt=Gt+At*At*w,Wt=vt<=wt;let ve=o.join;if(ve===pi.MITER&&vt/w>v&&(ve=pi.BEVEL),Wt)switch(ve){case pi.MITER:{g.push(ut,_t,Tt,Bt);break}case pi.BEVEL:{Z?g.push(ut,_t,D+U*tt,P+q*tt,ut,_t,D+rt*tt,P+lt*tt):g.push(D-U*W,P-q*W,Tt,Bt,D-rt*W,P-lt*W,Tt,Bt),_+=2;break}case pi.ROUND:{Z?(g.push(ut,_t,D+U*tt,P+q*tt),_+=Gs(D,P,D+U*tt,P+q*tt,D+rt*tt,P+lt*tt,g,!0)+4,g.push(ut,_t,D+rt*tt,P+lt*tt)):(g.push(D-U*W,P-q*W,Tt,Bt),_+=Gs(D,P,D-U*W,P-q*W,D-rt*W,P-lt*W,g,!1)+4,g.push(D-rt*W,P-lt*W,Tt,Bt));break}}else{switch(g.push(D-U*W,P-q*W,D+U*tt,P+q*tt),ve){case pi.MITER:{Z?g.push(Tt,Bt,Tt,Bt):g.push(ut,_t,ut,_t),_+=2;break}case pi.ROUND:{Z?_+=Gs(D,P,D+U*tt,P+q*tt,D+rt*tt,P+lt*tt,g,!0)+2:_+=Gs(D,P,D-U*W,P-q*W,D-rt*W,P-lt*W,g,!1)+2;break}}g.push(D-rt*W,P-lt*W,D+rt*tt,P+lt*tt),_+=2}}E=s[(y-2)*2],R=s[(y-2)*2+1],D=s[(y-1)*2],P=s[(y-1)*2+1],U=-(R-P),q=E-D,dt=Math.sqrt(U*U+q*q),U/=dt,q/=dt,U*=A,q*=A,g.push(D-U*W,P-q*W,D+U*tt,P+q*tt),d||(o.cap===Yr.ROUND?_+=Gs(D-U*(W-tt)*.5,P-q*(W-tt)*.5,D-U*W,P-q*W,D+U*tt,P+q*tt,g,!1)+2:o.cap===Yr.SQUARE&&(_+=Hg(D,P,U,q,W,tt,!1,g)));const ht=t.indices,S=En.epsilon*En.epsilon;for(let O=x;O<_+x-2;++O)E=g[O*2],R=g[O*2+1],D=g[(O+1)*2],P=g[(O+1)*2+1],I=g[(O+2)*2],Y=g[(O+2)*2+1],!(Math.abs(E*(P-Y)+D*(Y-R)+I*(R-P))<S)&&ht.push(O,O+1,O+2)}function GA(n,t){let e=0;const s=n.shape,l=n.points||s.points,o=s.type!==Pe.POLY||s.closeStroke;if(l.length===0)return;const h=t.points,c=t.indices,d=l.length/2,m=h.length/2;let g=m;for(h.push(l[0],l[1]),e=1;e<d;e++)h.push(l[e*2],l[e*2+1]),c.push(g,g+1),g++;o&&c.push(g,m)}function kg(n,t){n.lineStyle.native?GA(n,t):FA(n,t)}class qc{static curveLength(t,e,s,l,o,h){const c=t-2*s+o,d=e-2*l+h,m=2*s-2*t,g=2*l-2*e,y=4*(c*c+d*d),_=4*(c*m+d*g),x=m*m+g*g,A=2*Math.sqrt(y+_+x),w=Math.sqrt(y),v=2*y*w,E=2*Math.sqrt(x),R=_/w;return(v*A+w*_*(A-E)+(4*x*y-_*_)*Math.log((2*w+R+A)/(R+E)))/(4*v)}static curveTo(t,e,s,l,o){const h=o[o.length-2],c=o[o.length-1],d=En._segmentsCount(qc.curveLength(h,c,t,e,s,l));let m=0,g=0;for(let y=1;y<=d;++y){const _=y/d;m=h+(t-h)*_,g=c+(e-c)*_,o.push(m+(t+(s-t)*_-m)*_,g+(e+(l-e)*_-g)*_)}}}const Wc={[Pe.POLY]:Fg,[Pe.CIRC]:mo,[Pe.ELIP]:mo,[Pe.RECT]:UA,[Pe.RREC]:PA},zg=[],go=[];class yo{constructor(t,e=null,s=null,l=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=s,this.fillStyle=e,this.matrix=l,this.type=t.type}clone(){return new yo(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Tn=new Vt,Xg=class V1 extends bm{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new so,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),go.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),zg.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,s=null,l=null){const o=new yo(t,e,s,l);return this.graphicsData.push(o),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const s=new yo(t,null,null,e),l=this.graphicsData[this.graphicsData.length-1];return s.lineStyle=l.lineStyle,l.holes.push(s),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let s=0;s<e.length;++s){const l=e[s];if(l.fillStyle.visible&&l.shape&&(l.matrix?l.matrix.applyInverse(t,Tn):Tn.copyFrom(t),l.shape.contains(Tn.x,Tn.y))){let o=!1;if(l.holes){for(let h=0;h<l.holes.length;h++)if(l.holes[h].shape.contains(Tn.x,Tn.y)){o=!0;break}}if(!o)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let s=null,l=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],l=s.style);for(let d=this.shapeIndex;d<e.length;d++){this.shapeIndex++;const m=e[d],g=m.fillStyle,y=m.lineStyle;Wc[m.type].build(m),m.matrix&&this.transformPoints(m.points,m.matrix),(g.visible||y.visible)&&this.processHoles(m.holes);for(let _=0;_<2;_++){const x=_===0?g:y;if(!x.visible)continue;const A=x.texture.baseTexture,w=this.indices.length,v=this.points.length/2;A.wrapMode=Fr.REPEAT,_===0?this.processFill(m):this.processLine(m);const E=this.points.length/2-v;E!==0&&(s&&!this._compareStyles(l,x)&&(s.end(w,v),s=null),s||(s=zg.pop()||new LA,s.begin(x,w,v),this.batches.push(s),l=x),this.addUvs(this.points,t,x.texture,v,E,x.matrix))}}const o=this.indices.length,h=this.points.length/2;if(s&&s.end(o,h),this.batches.length===0){this.batchable=!0;return}const c=h>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&c===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=c?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const s=this.graphicsData[t],l=s.fillStyle,o=s.lineStyle;if(l&&!l.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,s=t.length;e<s;e++){const l=t[e];for(let o=0;o<l.size;o++){const h=l.start+o;this.indicesUint16[h]=this.indicesUint16[h]-l.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<V1.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++It._globalBatch;for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].texArray.clear(),go.push(this.drawCalls[y]);this.drawCalls.length=0;const e=this.colors,s=this.textureIds;let l=go.pop();l||(l=new yc,l.texArray=new Tc),l.texArray.count=0,l.start=0,l.size=0,l.type=zi.TRIANGLES;let o=0,h=null,c=0,d=!1,m=zi.TRIANGLES,g=0;this.drawCalls.push(l);for(let y=0;y<this.batches.length;y++){const _=this.batches[y],x=8,A=_.style,w=A.texture.baseTexture;d!==!!A.native&&(d=!!A.native,m=d?zi.LINES:zi.TRIANGLES,h=null,o=x,t++),h!==w&&(h=w,w._batchEnabled!==t&&(o===x&&(t++,o=0,l.size>0&&(l=go.pop(),l||(l=new yc,l.texArray=new Tc),this.drawCalls.push(l)),l.start=g,l.size=0,l.texArray.count=0,l.type=m),w.touched=1,w._batchEnabled=t,w._batchLocation=o,w.wrapMode=Fr.REPEAT,l.texArray.elements[l.texArray.count++]=w,o++)),l.size+=_.size,g+=_.size,c=w._batchLocation,this.addColors(e,A.color,A.alpha,_.attribSize,_.attribStart),this.addTextureIds(s,c,_.attribSize,_.attribStart)}It._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,s=this.colors,l=this.textureIds,o=new ArrayBuffer(t.length*3*4),h=new Float32Array(o),c=new Uint32Array(o);let d=0;for(let m=0;m<t.length/2;m++)h[d++]=t[m*2],h[d++]=t[m*2+1],h[d++]=e[m*2],h[d++]=e[m*2+1],c[d++]=s[m],h[d++]=l[m];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Fg.triangulate(t,this):Wc[t.type].triangulate(t,this)}processLine(t){kg(t,this);for(let e=0;e<t.holes.length;e++)kg(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const s=t[e];Wc[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let s=0;s<t.length/2;s++){const l=t[s*2],o=t[s*2+1];t[s*2]=e.a*l+e.c*o+e.tx,t[s*2+1]=e.b*l+e.d*o+e.ty}}addColors(t,e,s,l,o=0){const h=oe.shared.setValue(e).toLittleEndianNumber(),c=oe.shared.setValue(h).toPremultiplied(s);t.length=Math.max(t.length,o+l);for(let d=0;d<l;d++)t[o+d]=c}addTextureIds(t,e,s,l=0){t.length=Math.max(t.length,l+s);for(let o=0;o<s;o++)t[l+o]=e}addUvs(t,e,s,l,o,h=null){let c=0;const d=e.length,m=s.frame;for(;c<o;){let y=t[(l+c)*2],_=t[(l+c)*2+1];if(h){const x=h.a*y+h.c*_+h.tx;_=h.b*y+h.d*_+h.ty,y=x}c++,e.push(y/m.width,_/m.height)}const g=s.baseTexture;(m.width<g.width||m.height<g.height)&&this.adjustUvs(e,s,d,o)}adjustUvs(t,e,s,l){const o=e.baseTexture,h=1e-6,c=s+l*2,d=e.frame,m=d.width/o.width,g=d.height/o.height;let y=d.x/d.width,_=d.y/d.height,x=Math.floor(t[s]+h),A=Math.floor(t[s+1]+h);for(let w=s+2;w<c;w+=2)x=Math.min(x,Math.floor(t[w]+h)),A=Math.min(A,Math.floor(t[w+1]+h));y-=x,_-=A;for(let w=s;w<c;w+=2)t[w]=(t[w]+y)*m,t[w+1]=(t[w+1]+_)*g}};Xg.BATCHABLE_SIZE=100;let HA=Xg;class vo{constructor(){this.color=16777215,this.alpha=1,this.texture=bt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new vo;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=bt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class $c extends vo{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Yr.BUTT,this.join=pi.MITER,this.miterLimit=10}clone(){const t=new $c;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Yr.BUTT,this.join=pi.MITER,this.miterLimit=10}}const Zc={},Kc=class Vu extends di{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new vo,this._lineStyle=new $c,this._matrix=null,this._holeMode=!1,this.state=$i.for2d(),this._geometry=t||new HA,this._geometry.refCount++,this._transformID=-1,this._tintColor=new oe(16777215),this.blendMode=Dt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Vu(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,s,l=.5,o=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:s,alignment:l,native:o}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:bt.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Yr.BUTT,join:pi.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const s=t.width>0&&t.alpha>0;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:s},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Rs,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Rs,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const s=this.currentPath.points,l=s[s.length-2],o=s[s.length-1];return(l!==t||o!==e)&&s.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,s,l){this._initCurve();const o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),qc.curveTo(t,e,s,l,o),this}bezierCurveTo(t,e,s,l,o,h){return this._initCurve(),jc.curveTo(t,e,s,l,o,h,this.currentPath.points),this}arcTo(t,e,s,l,o){this._initCurve(t,e);const h=this.currentPath.points,c=Gg.curveTo(t,e,s,l,o,h);if(c){const{cx:d,cy:m,radius:g,startAngle:y,endAngle:_,anticlockwise:x}=c;this.arc(d,m,g,y,_,x)}return this}arc(t,e,s,l,o,h=!1){if(l===o)return this;if(!h&&o<=l?o+=Hl:h&&l<=o&&(l+=Hl),o-l===0)return this;const c=t+Math.cos(l)*s,d=e+Math.sin(l)*s,m=this._geometry.closePointEps;let g=this.currentPath?this.currentPath.points:null;if(g){const y=Math.abs(g[g.length-2]-c),_=Math.abs(g[g.length-1]-d);y<m&&_<m||g.push(c,d)}else this.moveTo(c,d),g=this.currentPath.points;return Gg.arc(c,d,t,e,s,l,o,h,g),this}beginFill(t=0,e){return this.beginTextureFill({texture:bt.WHITE,color:t,alpha:e})}normalizeColor(t){const e=oe.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:bt.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const s=t.alpha>0;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:s},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,s,l){return this.drawShape(new Pt(t,e,s,l))}drawRoundedRect(t,e,s,l,o){return this.drawShape(new Yl(t,e,s,l,o))}drawCircle(t,e,s){return this.drawShape(new zl(t,e,s))}drawEllipse(t,e,s,l){return this.drawShape(new Xl(t,e,s,l))}drawPolygon(...t){let e,s=!0;const l=t[0];l.points?(s=l.closeStroke,e=l.points):Array.isArray(t[0])?e=t[0]:e=t;const o=new Rs(e);return o.closeStroke=s,this.drawShape(o),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Pe.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,s=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=s,this.vertexData=new Float32Array(t.points);for(let l=0;l<s;l++){const o=t.batches[l],h=o.style.color,c=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),d=new Float32Array(t.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),m=new Uint16Array(t.indicesUint16.buffer,o.start*2,o.size),g={vertexData:c,blendMode:e,indices:m,uvs:d,_batchRGB:oe.shared.setValue(h).toRgbArray(),_tintRGB:h,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[l]=g}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,s=this.batches.length;e<s;e++){const l=this.batches[e];l.worldAlpha=this.worldAlpha*l.alpha,t.plugins[this.pluginName].render(l)}}}_renderDirect(t){const e=this._resolveDirectShader(t),s=this._geometry,l=this.worldAlpha,o=e.uniforms,h=s.drawCalls;o.translationMatrix=this.transform.worldTransform,oe.shared.setValue(this._tintColor).premultiply(l).toArray(o.tint),t.shader.bind(e),t.geometry.bind(s,e),t.state.set(this.state);for(let c=0,d=h.length;c<d;c++)this._renderDrawCallDirect(t,s.drawCalls[c])}_renderDrawCallDirect(t,e){const{texArray:s,type:l,size:o,start:h}=e,c=s.count;for(let d=0;d<c;d++)t.texture.bind(s.elements[d],d);t.geometry.draw(l,o,h)}_resolveDirectShader(t){let e=this.shader;const s=this.pluginName;if(!e){if(!Zc[s]){const{maxTextures:l}=t.plugins[s],o=new Int32Array(l);for(let d=0;d<l;d++)o[d]=d;const h={tint:new Float32Array([1,1,1,1]),translationMatrix:new ue,default:Ri.from({uSamplers:o},!0)},c=t.plugins[s]._shader.program;Zc[s]=new Zi(c,h)}e=Zc[s]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:s,maxX:l,maxY:o}=t.bounds;this._bounds.addFrame(this.transform,e,s,l,o)}containsPoint(t){return this.worldTransform.applyInverse(t,Vu._TEMP_POINT),this._geometry.containsPoint(Vu._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=oe.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,s=e.a,l=e.b,o=e.c,h=e.d,c=e.tx,d=e.ty,m=this._geometry.points,g=this.vertexData;let y=0;for(let _=0;_<m.length;_+=2){const x=m[_],A=m[_+1];g[y++]=s*x+o*A+c,g[y++]=h*A+l*x+d}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Kc.curves=En,Kc._TEMP_POINT=new Vt;let Yg=Kc;class kA{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const Qc=new Vt,Vg=new Rs,jg=class j1 extends di{constructor(t,e,s,l=zi.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=s||$i.for2d(),this.drawMode=l,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=gt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===zi.TRIANGLES&&e.length<j1.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,s=this.shader;s.uvMatrix&&(s.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=s._tintRGB,this._texture=s.texture;const l=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[l]),t.plugins[l].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,s=t._updateID;if(s===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const l=this.transform.worldTransform,o=l.a,h=l.b,c=l.c,d=l.d,m=l.tx,g=l.ty,y=this.vertexData;for(let _=0;_<y.length/2;_++){const x=e[_*2],A=e[_*2+1];y[_*2]=o*x+c*A+m,y[_*2+1]=h*x+d*A+g}if(this._roundPixels){const _=gt.RESOLUTION;for(let x=0;x<y.length;++x)y[x]=Math.round(y[x]*_)/_}this.vertexDirty=s}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new kA(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Qc);const e=this.geometry.getBuffer("aVertexPosition").data,s=Vg.points,l=this.geometry.getIndex().data,o=l.length,h=this.drawMode===4?3:1;for(let c=0;c+2<o;c+=h){const d=l[c]*2,m=l[c+1]*2,g=l[c+2]*2;if(s[0]=e[d],s[1]=e[d+1],s[2]=e[m],s[3]=e[m+1],s[4]=e[g],s[5]=e[g+1],Vg.contains(Qc.x,Qc.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};jg.BATCHABLE_SIZE=100;let qg=jg;class zA extends kr{constructor(t,e,s){super();const l=new ye(t),o=new ye(e,!0),h=new ye(s,!0,!0);this.addAttribute("aVertexPosition",l,2,!1,Rt.FLOAT).addAttribute("aTextureCoord",o,2,!1,Rt.FLOAT).addIndex(h),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var XA=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,YA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Wg extends Zi{constructor(t,e){const s={uSampler:t,alpha:1,uTextureMatrix:ue.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(s,e.uniforms),super(e.program||pr.from(YA,XA),s),this._colorDirty=!1,this.uvMatrix=new zm(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new oe(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;oe.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class $g{constructor(t,e,s){this.geometry=new kr,this.indexBuffer=null,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(let l=0;l<t.length;++l){let o=t[l];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||Rt.FLOAT,offset:o.offset},e[l]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new ye(cb(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];c.offset=e,e+=c.size,this.dynamicStride+=c.size}const s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new ye(this.dynamicData,!1,!1);let l=0;this.staticStride=0;for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];c.offset=l,l+=c.size,this.staticStride+=c.size}const o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new ye(this.staticData,!0,!1);for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];t.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===Rt.UNSIGNED_BYTE,c.type,this.dynamicStride*4,c.offset*4)}for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];t.addAttribute(c.attributeName,this.staticBuffer,0,c.type===Rt.UNSIGNED_BYTE,c.type,this.staticStride*4,c.offset*4)}}uploadDynamic(t,e,s){for(let l=0;l<this.dynamicProperties.length;l++){const o=this.dynamicProperties[l];o.uploadFunction(t,e,s,o.type===Rt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,s){for(let l=0;l<this.staticProperties.length;l++){const o=this.staticProperties[l];o.uploadFunction(t,e,s,o.type===Rt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var VA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,jA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Zg extends $l{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new ue,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Rt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Zi.from(jA,VA,{}),this.state=$i.for2d()}render(t){const e=t.children,s=t._maxSize,l=t._batchSize,o=this.renderer;let h=e.length;if(h===0)return;h>s&&!t.autoResize&&(h=s);let c=t._buffers;c||(c=t._buffers=this.generateBuffers(t));const d=e[0]._texture.baseTexture,m=d.alphaMode>0;this.state.blendMode=hm(t.blendMode,m),o.state.set(this.state);const g=o.gl,y=t.worldTransform.copyTo(this.tempMatrix);y.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=y.toArray(!0),this.shader.uniforms.uColor=oe.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,m).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=d,this.renderer.shader.bind(this.shader);let _=!1;for(let x=0,A=0;x<h;x+=l,A+=1){let w=h-x;w>l&&(w=l),A>=c.length&&c.push(this._generateOneMoreBuffer(t));const v=c[A];v.uploadDynamic(e,x,w);const E=t._bufferUpdateIDs[A]||0;_=_||v._updateID<E,_&&(v._updateID=t._updateID,v.uploadStatic(e,x,w)),o.geometry.bind(v.geometry),g.drawElements(g.TRIANGLES,w*6,g.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],s=t._maxSize,l=t._batchSize,o=t._properties;for(let h=0;h<s;h+=l)e.push(new $g(this.properties,o,l));return e}_generateOneMoreBuffer(t){const e=t._batchSize,s=t._properties;return new $g(this.properties,s,e)}uploadVertices(t,e,s,l,o,h){let c=0,d=0,m=0,g=0;for(let y=0;y<s;++y){const _=t[e+y],x=_._texture,A=_.scale.x,w=_.scale.y,v=x.trim,E=x.orig;v?(d=v.x-_.anchor.x*E.width,c=d+v.width,g=v.y-_.anchor.y*E.height,m=g+v.height):(c=E.width*(1-_.anchor.x),d=E.width*-_.anchor.x,m=E.height*(1-_.anchor.y),g=E.height*-_.anchor.y),l[h]=d*A,l[h+1]=g*w,l[h+o]=c*A,l[h+o+1]=g*w,l[h+o*2]=c*A,l[h+o*2+1]=m*w,l[h+o*3]=d*A,l[h+o*3+1]=m*w,h+=o*4}}uploadPosition(t,e,s,l,o,h){for(let c=0;c<s;c++){const d=t[e+c].position;l[h]=d.x,l[h+1]=d.y,l[h+o]=d.x,l[h+o+1]=d.y,l[h+o*2]=d.x,l[h+o*2+1]=d.y,l[h+o*3]=d.x,l[h+o*3+1]=d.y,h+=o*4}}uploadRotation(t,e,s,l,o,h){for(let c=0;c<s;c++){const d=t[e+c].rotation;l[h]=d,l[h+o]=d,l[h+o*2]=d,l[h+o*3]=d,h+=o*4}}uploadUvs(t,e,s,l,o,h){for(let c=0;c<s;++c){const d=t[e+c]._texture._uvs;d?(l[h]=d.x0,l[h+1]=d.y0,l[h+o]=d.x1,l[h+o+1]=d.y1,l[h+o*2]=d.x2,l[h+o*2+1]=d.y2,l[h+o*3]=d.x3,l[h+o*3+1]=d.y3,h+=o*4):(l[h]=0,l[h+1]=0,l[h+o]=0,l[h+o+1]=0,l[h+o*2]=0,l[h+o*2+1]=0,l[h+o*3]=0,l[h+o*3+1]=0,h+=o*4)}}uploadTint(t,e,s,l,o,h){for(let c=0;c<s;++c){const d=t[e+c],m=oe.shared.setValue(d._tintRGB).toPremultiplied(d.alpha,d.texture.baseTexture.alphaMode>0);l[h]=m,l[h+o]=m,l[h+o*2]=m,l[h+o*3]=m,h+=o*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Zg.extension={name:"particle",type:mt.RendererPlugin},Et.add(Zg);var _o=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(_o||{});const xo={willReadFrequently:!0},Qi=class St{static get experimentalLetterSpacingSupported(){let t=St._experimentalLetterSpacingSupported;if(t!==void 0){const e=gt.ADAPTER.getCanvasRenderingContext2D().prototype;t=St._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,s,l,o,h,c,d,m){this.text=t,this.style=e,this.width=s,this.height=l,this.lines=o,this.lineWidths=h,this.lineHeight=c,this.maxLineWidth=d,this.fontProperties=m}static measureText(t,e,s,l=St._canvas){s=s??e.wordWrap;const o=e.toFontString(),h=St.measureFont(o);h.fontSize===0&&(h.fontSize=e.fontSize,h.ascent=e.fontSize);const c=l.getContext("2d",xo);c.font=o;const d=(s?St.wordWrap(t,e,l):t).split(/(?:\r\n|\r|\n)/),m=new Array(d.length);let g=0;for(let A=0;A<d.length;A++){const w=St._measureText(d[A],e.letterSpacing,c);m[A]=w,g=Math.max(g,w)}let y=g+e.strokeThickness;e.dropShadow&&(y+=e.dropShadowDistance);const _=e.lineHeight||h.fontSize+e.strokeThickness;let x=Math.max(_,h.fontSize+e.strokeThickness*2)+e.leading+(d.length-1)*(_+e.leading);return e.dropShadow&&(x+=e.dropShadowDistance),new St(t,e,y,x,d,m,_+e.leading,g,h)}static _measureText(t,e,s){let l=!1;St.experimentalLetterSpacingSupported&&(St.experimentalLetterSpacing?(s.letterSpacing=`${e}px`,s.textLetterSpacing=`${e}px`,l=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));let o=s.measureText(t).width;return o>0&&(l?o-=e:o+=(St.graphemeSegmenter(t).length-1)*e),o}static wordWrap(t,e,s=St._canvas){const l=s.getContext("2d",xo);let o=0,h="",c="";const d=Object.create(null),{letterSpacing:m,whiteSpace:g}=e,y=St.collapseSpaces(g),_=St.collapseNewlines(g);let x=!y;const A=e.wordWrapWidth+m,w=St.tokenize(t);for(let v=0;v<w.length;v++){let E=w[v];if(St.isNewline(E)){if(!_){c+=St.addLine(h),x=!y,h="",o=0;continue}E=" "}if(y){const D=St.isBreakingSpace(E),P=St.isBreakingSpace(h[h.length-1]);if(D&&P)continue}const R=St.getFromCache(E,m,d,l);if(R>A)if(h!==""&&(c+=St.addLine(h),h="",o=0),St.canBreakWords(E,e.breakWords)){const D=St.wordWrapSplit(E);for(let P=0;P<D.length;P++){let I=D[P],Y=I,U=1;for(;D[P+U];){const rt=D[P+U];if(!St.canBreakChars(Y,rt,E,P,e.breakWords))I+=rt;else break;Y=rt,U++}P+=U-1;const q=St.getFromCache(I,m,d,l);q+o>A&&(c+=St.addLine(h),x=!1,h="",o=0),h+=I,o+=q}}else{h.length>0&&(c+=St.addLine(h),h="",o=0);const D=v===w.length-1;c+=St.addLine(E,!D),x=!1,h="",o=0}else R+o>A&&(x=!1,c+=St.addLine(h),h="",o=0),(h.length>0||!St.isBreakingSpace(E)||x)&&(h+=E,o+=R)}return c+=St.addLine(h,!1),c}static addLine(t,e=!0){return t=St.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,s,l){let o=s[t];return typeof o!="number"&&(o=St._measureText(t,e,l)+e,s[t]=o),o}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const s=t[e];if(!St.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:St._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:St._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let s="";if(typeof t!="string")return e;for(let l=0;l<t.length;l++){const o=t[l],h=t[l+1];if(St.isBreakingSpace(o,h)||St.isNewline(o)){s!==""&&(e.push(s),s=""),e.push(o);continue}s+=o}return s!==""&&e.push(s),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,s,l,o){return!0}static wordWrapSplit(t){return St.graphemeSegmenter(t)}static measureFont(t){if(St._fonts[t])return St._fonts[t];const e={ascent:0,descent:0,fontSize:0},s=St._canvas,l=St._context;l.font=t;const o=St.METRICS_STRING+St.BASELINE_SYMBOL,h=Math.ceil(l.measureText(o).width);let c=Math.ceil(l.measureText(St.BASELINE_SYMBOL).width);const d=Math.ceil(St.HEIGHT_MULTIPLIER*c);if(c=c*St.BASELINE_MULTIPLIER|0,h===0||d===0)return St._fonts[t]=e,e;s.width=h,s.height=d,l.fillStyle="#f00",l.fillRect(0,0,h,d),l.font=t,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(o,0,c);const m=l.getImageData(0,0,h,d).data,g=m.length,y=h*4;let _=0,x=0,A=!1;for(_=0;_<c;++_){for(let w=0;w<y;w+=4)if(m[x+w]!==255){A=!0;break}if(!A)x+=y;else break}for(e.ascent=c-_,x=g-y,A=!1,_=d;_>c;--_){for(let w=0;w<y;w+=4)if(m[x+w]!==255){A=!0;break}if(!A)x-=y;else break}return e.descent=_-c,e.fontSize=e.ascent+e.descent,St._fonts[t]=e,e}static clearMetrics(t=""){t?delete St._fonts[t]:St._fonts={}}static get _canvas(){var t;if(!St.__canvas){let e;try{const s=new OffscreenCanvas(0,0);if((t=s.getContext("2d",xo))!=null&&t.measureText)return St.__canvas=s,s;e=gt.ADAPTER.createCanvas()}catch{e=gt.ADAPTER.createCanvas()}e.width=e.height=10,St.__canvas=e}return St.__canvas}static get _context(){return St.__context||(St.__context=St._canvas.getContext("2d",xo)),St.__context}};Qi.METRICS_STRING="|q",Qi.BASELINE_SYMBOL="M",Qi.BASELINE_MULTIPLIER=1.4,Qi.HEIGHT_MULTIPLIER=2,Qi.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return t=>[...n.segment(t)].map(e=>e.segment)}return n=>[...n]})(),Qi.experimentalLetterSpacing=!1,Qi._fonts={},Qi._newlines=[10,13],Qi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Vr=Qi;const qA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Kg=class Ml{constructor(t){this.styleID=0,this.reset(),tf(this,t,t)}clone(){const t={};return tf(t,this,Ml.defaultStyle),new Ml(t)}reset(){tf(this,Ml.defaultStyle,Ml.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Jc(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Jc(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){WA(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Jc(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let s=e.length-1;s>=0;s--){let l=e[s].trim();!/([\"\'])[^\'\"]+\1/.test(l)&&!qA.includes(l)&&(l=`"${l}"`),e[s]=l}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};Kg.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:_o.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let jr=Kg;function Jc(n){const t=oe.shared,e=s=>{const l=t.setValue(s);return l.alpha===1?l.toHex():l.toRgbaString()};return Array.isArray(n)?n.map(e):e(n)}function WA(n,t){if(!Array.isArray(n)||!Array.isArray(t)||n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(n[e]!==t[e])return!1;return!0}function tf(n,t,e){for(const s in e)Array.isArray(t[s])?n[s]=t[s].slice():n[s]=t[s]}const $A={texture:!0,children:!1,baseTexture:!0},Qg=class Sp extends ae{constructor(t,e,s){let l=!1;s||(s=gt.ADAPTER.createCanvas(),l=!0),s.width=3,s.height=3;const o=bt.from(s);o.orig=new Pt,o.trim=new Pt,super(o),this._ownCanvas=l,this.canvas=s,this.context=s.getContext("2d",{willReadFrequently:!0}),this._resolution=Sp.defaultResolution??gt.RESOLUTION,this._autoResolution=Sp.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Vr.experimentalLetterSpacing}static set experimentalLetterSpacing(t){zt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Vr.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const s=this.context,l=Vr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=l.width,h=l.height,c=l.lines,d=l.lineHeight,m=l.lineWidths,g=l.maxLineWidth,y=l.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,h)+e.padding*2)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=e.strokeThickness,s.textBaseline=e.textBaseline,s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit;let _,x;const A=e.dropShadow?2:1;for(let w=0;w<A;++w){const v=e.dropShadow&&w===0,E=v?Math.ceil(Math.max(1,h)+e.padding*2):0,R=E*this._resolution;if(v){s.fillStyle="black",s.strokeStyle="black";const P=e.dropShadowColor,I=e.dropShadowBlur*this._resolution,Y=e.dropShadowDistance*this._resolution;s.shadowColor=oe.shared.setValue(P).setAlpha(e.dropShadowAlpha).toRgbaString(),s.shadowBlur=I,s.shadowOffsetX=Math.cos(e.dropShadowAngle)*Y,s.shadowOffsetY=Math.sin(e.dropShadowAngle)*Y+R}else s.fillStyle=this._generateFillStyle(e,c,l),s.strokeStyle=e.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;let D=(d-y.fontSize)/2;d-y.fontSize<0&&(D=0);for(let P=0;P<c.length;P++)_=e.strokeThickness/2,x=e.strokeThickness/2+P*d+y.ascent+D,e.align==="right"?_+=g-m[P]:e.align==="center"&&(_+=(g-m[P])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(c[P],_+e.padding,x+e.padding-E,!0),e.fill&&this.drawLetterSpacing(c[P],_+e.padding,x+e.padding-E)}this.updateTexture()}drawLetterSpacing(t,e,s,l=!1){const o=this._style.letterSpacing;let h=!1;if(Vr.experimentalLetterSpacingSupported&&(Vr.experimentalLetterSpacing?(this.context.letterSpacing=`${o}px`,this.context.textLetterSpacing=`${o}px`,h=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),o===0||h){l?this.context.strokeText(t,e,s):this.context.fillText(t,e,s);return}let c=e;const d=Vr.graphemeSegmenter(t);let m=this.context.measureText(t).width,g=0;for(let y=0;y<d.length;++y){const _=d[y];l?this.context.strokeText(_,c,s):this.context.fillText(_,c,s);let x="";for(let A=y+1;A<d.length;++A)x+=d[A];g=this.context.measureText(x).width,c+=m-g+o,m=g}}updateTexture(){const t=this.canvas;if(this._style.trim){const h=mb(t);h.data&&(t.width=h.width,t.height=h.height,this.context.putImageData(h.data,0,0))}const e=this._texture,s=this._style,l=s.trim?0:s.padding,o=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-l,e.trim.y=-l,e.orig.width=e._frame.width-l*2,e.orig.height=e._frame.height-l*2,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,s){const l=t.fill;if(Array.isArray(l)){if(l.length===1)return l[0]}else return l;let o;const h=t.dropShadow?t.dropShadowDistance:0,c=t.padding||0,d=this.canvas.width/this._resolution-h-c*2,m=this.canvas.height/this._resolution-h-c*2,g=l.slice(),y=t.fillGradientStops.slice();if(!y.length){const _=g.length+1;for(let x=1;x<_;++x)y.push(x/_)}if(g.unshift(l[0]),y.unshift(0),g.push(l[l.length-1]),y.push(1),t.fillGradientType===_o.LINEAR_VERTICAL){o=this.context.createLinearGradient(d/2,c,d/2,m+c);const _=s.fontProperties.fontSize+t.strokeThickness;for(let x=0;x<e.length;x++){const A=s.lineHeight*(x-1)+_,w=s.lineHeight*x;let v=w;x>0&&A>w&&(v=(w+A)/2);const E=w+_,R=s.lineHeight*(x+1);let D=E;x+1<e.length&&R<E&&(D=(E+R)/2);const P=(D-v)/m;for(let I=0;I<g.length;I++){let Y=0;typeof y[I]=="number"?Y=y[I]:Y=I/g.length;let U=Math.min(1,Math.max(0,v/m+Y*P));U=Number(U.toFixed(5)),o.addColorStop(U,g[I])}}}else{o=this.context.createLinearGradient(c,m/2,d+c,m/2);const _=g.length+1;let x=1;for(let A=0;A<g.length;A++){let w;typeof y[A]=="number"?w=y[A]:w=x/_,o.addColorStop(w,g[A]),x++}}return o}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},$A,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Gr(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Gr(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof jr?this._style=t:this._style=new jr(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};Qg.defaultAutoResolution=!0;let ef=Qg;class ZA{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function KA(n,t){var s;let e=!1;if((s=n==null?void 0:n._textures)!=null&&s.length){for(let l=0;l<n._textures.length;l++)if(n._textures[l]instanceof bt){const o=n._textures[l].baseTexture;t.includes(o)||(t.push(o),e=!0)}}return e}function QA(n,t){if(n.baseTexture instanceof It){const e=n.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function JA(n,t){if(n._texture&&n._texture instanceof bt){const e=n._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function tS(n,t){return t instanceof ef?(t.updateText(!0),!0):!1}function eS(n,t){if(t instanceof jr){const e=t.toFontString();return Vr.measureFont(e),!0}return!1}function iS(n,t){if(n instanceof ef){t.includes(n.style)||t.push(n.style),t.includes(n)||t.push(n);const e=n._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function rS(n,t){return n instanceof jr?(t.includes(n)||t.push(n),!0):!1}const Jg=class q1{constructor(t){this.limiter=new ZA(q1.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(iS),this.registerFindHook(rS),this.registerFindHook(KA),this.registerFindHook(QA),this.registerFindHook(JA),this.registerUploadHook(tS),this.registerUploadHook(eS)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,ei.system.addOnce(this.tick,this,Ps.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let s=0,l=this.uploadHooks.length;s<l;s++)if(this.uploadHooks[s](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)ei.system.addOnce(this.tick,this,Ps.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,s=t.length;e<s;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,s=this.addHooks.length;e<s&&!this.addHooks[e](t,this.queue);e++);if(t instanceof di)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&ei.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Jg.uploadsPerFrame=4;let rf=Jg;Object.defineProperties(gt,{UPLOADS_PER_FRAME:{get(){return rf.uploadsPerFrame},set(n){zt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),rf.uploadsPerFrame=n}}});function ty(n,t){return t instanceof It?(t._glTextures[n.CONTEXT_UID]||n.texture.bind(t),!0):!1}function sS(n,t){if(!(t instanceof Yg))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:s}=e;for(let l=0;l<s.length;l++){const{texture:o}=s[l].style;o&&ty(n,o.baseTexture)}return e.batchable||n.geometry.bind(e,t._resolveDirectShader(n)),!0}function nS(n,t){return n instanceof Yg?(t.push(n),!0):!1}class ey extends rf{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(nS),this.registerUploadHook(ty),this.registerUploadHook(sS)}}ey.extension={name:"prepare",type:mt.RendererSystem},Et.add(ey);var aS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,lS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,oS=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,iy=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,uS=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const bo=new ue;class ry extends $l{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Lm,this.state=$i.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=Zi.from(iy,uS,e),this.shader=t.context.webGLVersion>1?Zi.from(lS,aS,e):Zi.from(iy,oS,e)}render(t){const e=this.renderer,s=this.quad;let l=s.vertices;l[0]=l[6]=t._width*-t.anchor.x,l[1]=l[3]=t._height*-t.anchor.y,l[2]=l[4]=t._width*(1-t.anchor.x),l[5]=l[7]=t._height*(1-t.anchor.y);const o=t.uvRespectAnchor?t.anchor.x:0,h=t.uvRespectAnchor?t.anchor.y:0;l=s.uvs,l[0]=l[6]=-o,l[1]=l[3]=-h,l[2]=l[4]=1-o,l[5]=l[7]=1-h,s.invalidate();const c=t._texture,d=c.baseTexture,m=d.alphaMode>0,g=t.tileTransform.localTransform,y=t.uvMatrix;let _=d.isPowerOfTwo&&c.frame.width===d.width&&c.frame.height===d.height;_&&(d._glTextures[e.CONTEXT_UID]?_=d.wrapMode!==Fr.CLAMP:d.wrapMode===Fr.CLAMP&&(d.wrapMode=Fr.REPEAT));const x=_?this.simpleShader:this.shader,A=c.width,w=c.height,v=t._width,E=t._height;bo.set(g.a*A/v,g.b*A/E,g.c*w/v,g.d*w/E,g.tx/v,g.ty/E),bo.invert(),_?bo.prepend(y.mapCoord):(x.uniforms.uMapCoord=y.mapCoord.toArray(!0),x.uniforms.uClampFrame=y.uClampFrame,x.uniforms.uClampOffset=y.uClampOffset),x.uniforms.uTransform=bo.toArray(!0),x.uniforms.uColor=oe.shared.setValue(t.tint).premultiply(t.worldAlpha,m).toArray(x.uniforms.uColor),x.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),x.uniforms.uSampler=c,e.shader.bind(x),e.geometry.bind(s),this.state.blendMode=hm(t.blendMode,m),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}ry.extension={name:"tilingSprite",type:mt.RendererPlugin},Et.add(ry);const sy=class Dl{constructor(t,e,s){this.linkedSheets=[],(t instanceof It||t instanceof bt)&&(t={texture:t,data:e,resolutionFilename:s});const{texture:l,data:o,resolutionFilename:h=null,cachePrefix:c=""}=t;this.cachePrefix=c,this._texture=l instanceof bt?l:null,this.baseTexture=l instanceof It?l:this._texture.baseTexture,this.textures={},this.animations={},this.data=o;const d=this.baseTexture.resource;this.resolution=this._updateResolution(h||(d?d.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let s=fr(t,null);return s===null&&(s=typeof e=="number"?e:parseFloat(e??"1")),s!==1&&this.baseTexture.setResolution(s),s}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Dl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const s=Dl.BATCH_SIZE;for(;e-t<s&&e<this._frameKeys.length;){const l=this._frameKeys[e],o=this._frames[l],h=o.frame;if(h){let c=null,d=null;const m=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,g=new Pt(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);o.rotated?c=new Pt(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):c=new Pt(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(d=new Pt(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[l]=new bt(this.baseTexture,c,g,d,o.rotated?2:0,o.anchor,o.borders),bt.addToCache(this.textures[l],this.cachePrefix+l.toString())}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let s=0;s<t[e].length;s++){const l=t[e][s];this.animations[e].push(this.textures[l])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Dl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Dl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};sy.BATCH_SIZE=1e3;let sf=sy;const hS=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function ny(n,t,e){const s={};if(n.forEach(l=>{s[l]=t}),Object.keys(t.textures).forEach(l=>{s[`${t.cachePrefix}${l}`]=t.textures[l]}),!e){const l=Oe.dirname(n[0]);t.linkedSheets.forEach((o,h)=>{Object.assign(s,ny([`${l}/${t.data.meta.related_multi_packs[h]}`],o,!0))})}return s}const cS={extension:mt.Asset,cache:{test:n=>n instanceof sf,getCacheableAssets:(n,t)=>ny(n,t,!1)},resolver:{test:n=>{const t=n.split("?")[0].split("."),e=t.pop(),s=t.pop();return e==="json"&&hS.includes(s)},parse:n=>{var e;const t=n.split(".");return{resolution:parseFloat(((e=gt.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:mt.LoadParser,priority:Di.Normal},async testParse(n,t){return Oe.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){var g,y;const{texture:s,imageFilename:l,cachePrefix:o}=(t==null?void 0:t.data)??{};let h=Oe.dirname(t.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let c;if(s&&s.baseTexture)c=s;else{const _=Hc(h+(l??n.meta.image),t.src);c=(await e.load([_]))[_]}const d=new sf({texture:c.baseTexture,data:n,resolutionFilename:t.src,cachePrefix:o});await d.parse();const m=(g=n==null?void 0:n.meta)==null?void 0:g.related_multi_packs;if(Array.isArray(m)){const _=[];for(const A of m){if(typeof A!="string")continue;let w=h+A;(y=t.data)!=null&&y.ignoreMultiPack||(w=Hc(w,t.src),_.push(e.load({src:w,data:{ignoreMultiPack:!0}})))}const x=await Promise.all(_);d.linkedSheets=x,x.forEach(A=>{A.linkedSheets=[d].concat(d.linkedSheets.filter(w=>w!==A))})}return d},unload(n){n.destroy(!0)}}};Et.add(cS);class Eo{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class To{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const o in e){const h=e[o].match(/^[a-z]+/gm)[0],c=e[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),d={};for(const m in c){const g=c[m].split("="),y=g[0],_=g[1].replace(/"/gm,""),x=parseFloat(_),A=isNaN(x)?_:x;d[y]=A}s[h].push(d)}const l=new Eo;return s.info.forEach(o=>l.info.push({face:o.face,size:parseInt(o.size,10)})),s.common.forEach(o=>l.common.push({lineHeight:parseInt(o.lineHeight,10)})),s.page.forEach(o=>l.page.push({id:parseInt(o.id,10),file:o.file})),s.char.forEach(o=>l.char.push({id:parseInt(o.id,10),page:parseInt(o.page,10),x:parseInt(o.x,10),y:parseInt(o.y,10),width:parseInt(o.width,10),height:parseInt(o.height,10),xoffset:parseInt(o.xoffset,10),yoffset:parseInt(o.yoffset,10),xadvance:parseInt(o.xadvance,10)})),s.kerning.forEach(o=>l.kerning.push({first:parseInt(o.first,10),second:parseInt(o.second,10),amount:parseInt(o.amount,10)})),s.distanceField.forEach(o=>l.distanceField.push({distanceRange:parseInt(o.distanceRange,10),fieldType:o.fieldType})),l}}class nf{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new Eo,s=t.getElementsByTagName("info"),l=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),h=t.getElementsByTagName("char"),c=t.getElementsByTagName("kerning"),d=t.getElementsByTagName("distanceField");for(let m=0;m<s.length;m++)e.info.push({face:s[m].getAttribute("face"),size:parseInt(s[m].getAttribute("size"),10)});for(let m=0;m<l.length;m++)e.common.push({lineHeight:parseInt(l[m].getAttribute("lineHeight"),10)});for(let m=0;m<o.length;m++)e.page.push({id:parseInt(o[m].getAttribute("id"),10)||0,file:o[m].getAttribute("file")});for(let m=0;m<h.length;m++){const g=h[m];e.char.push({id:parseInt(g.getAttribute("id"),10),page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xoffset:parseInt(g.getAttribute("xoffset"),10),yoffset:parseInt(g.getAttribute("yoffset"),10),xadvance:parseInt(g.getAttribute("xadvance"),10)})}for(let m=0;m<c.length;m++)e.kerning.push({first:parseInt(c[m].getAttribute("first"),10),second:parseInt(c[m].getAttribute("second"),10),amount:parseInt(c[m].getAttribute("amount"),10)});for(let m=0;m<d.length;m++)e.distanceField.push({fieldType:d[m].getAttribute("fieldType"),distanceRange:parseInt(d[m].getAttribute("distanceRange"),10)});return e}}class af{static test(t){return typeof t=="string"&&t.includes("<font>")?nf.test(gt.ADAPTER.parseXML(t)):!1}static parse(t){return nf.parse(gt.ADAPTER.parseXML(t))}}const lf=[To,nf,af];function fS(n){for(let t=0;t<lf.length;t++)if(lf[t].test(n))return lf[t];return null}function dS(n,t,e,s,l,o){const h=e.fill;if(Array.isArray(h)){if(h.length===1)return h[0]}else return h;let c;const d=e.dropShadow?e.dropShadowDistance:0,m=e.padding||0,g=n.width/s-d-m*2,y=n.height/s-d-m*2,_=h.slice(),x=e.fillGradientStops.slice();if(!x.length){const A=_.length+1;for(let w=1;w<A;++w)x.push(w/A)}if(_.unshift(h[0]),x.unshift(0),_.push(h[h.length-1]),x.push(1),e.fillGradientType===_o.LINEAR_VERTICAL){c=t.createLinearGradient(g/2,m,g/2,y+m);let A=0;const w=(o.fontProperties.fontSize+e.strokeThickness)/y;for(let v=0;v<l.length;v++){const E=o.lineHeight*v;for(let R=0;R<_.length;R++){let D=0;typeof x[R]=="number"?D=x[R]:D=R/_.length;const P=E/y+D*w;let I=Math.max(A,P);I=Math.min(I,1),c.addColorStop(I,_[R]),A=I}}}else{c=t.createLinearGradient(m,y/2,g+m,y/2);const A=_.length+1;let w=1;for(let v=0;v<_.length;v++){let E;typeof x[v]=="number"?E=x[v]:E=w/A,c.addColorStop(E,_[v]),w++}}return c}function pS(n,t,e,s,l,o,h){const c=e.text,d=e.fontProperties;t.translate(s,l),t.scale(o,o);const m=h.strokeThickness/2,g=-(h.strokeThickness/2);if(t.font=h.toFontString(),t.lineWidth=h.strokeThickness,t.textBaseline=h.textBaseline,t.lineJoin=h.lineJoin,t.miterLimit=h.miterLimit,t.fillStyle=dS(n,t,h,o,[c],e),t.strokeStyle=h.stroke,h.dropShadow){const y=h.dropShadowColor,_=h.dropShadowBlur*o,x=h.dropShadowDistance*o;t.shadowColor=oe.shared.setValue(y).setAlpha(h.dropShadowAlpha).toRgbaString(),t.shadowBlur=_,t.shadowOffsetX=Math.cos(h.dropShadowAngle)*x,t.shadowOffsetY=Math.sin(h.dropShadowAngle)*x}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;h.stroke&&h.strokeThickness&&t.strokeText(c,m,g+e.lineHeight-d.descent),h.fill&&t.fillText(c,m,g+e.lineHeight-d.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Ao(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}function ay(n){return Array.from?Array.from(n):n.split("")}function mS(n){typeof n=="string"&&(n=[n]);const t=[];for(let e=0,s=n.length;e<s;e++){const l=n[e];if(Array.isArray(l)){if(l.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${l.length}.`);const o=l[0].charCodeAt(0),h=l[1].charCodeAt(0);if(h<o)throw new Error("[BitmapFont]: Invalid character range.");for(let c=o,d=h;c<=d;c++)t.push(String.fromCharCode(c))}else t.push(...ay(l))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const qr=class or{constructor(t,e,s){var g;const[l]=t.info,[o]=t.common,[h]=t.page,[c]=t.distanceField,d=fr(h.file),m={};this._ownsTextures=s,this.font=l.face,this.size=l.size,this.lineHeight=o.lineHeight/d,this.chars={},this.pageTextures=m;for(let y=0;y<t.page.length;y++){const{id:_,file:x}=t.page[y];m[_]=e instanceof Array?e[y]:e[x],c!=null&&c.fieldType&&c.fieldType!=="none"&&(m[_].baseTexture.alphaMode=We.NO_PREMULTIPLIED_ALPHA,m[_].baseTexture.mipmap=Yi.OFF)}for(let y=0;y<t.char.length;y++){const{id:_,page:x}=t.char[y];let{x:A,y:w,width:v,height:E,xoffset:R,yoffset:D,xadvance:P}=t.char[y];A/=d,w/=d,v/=d,E/=d,R/=d,D/=d,P/=d;const I=new Pt(A+m[x].frame.x/d,w+m[x].frame.y/d,v,E);this.chars[_]={xOffset:R,yOffset:D,xAdvance:P,kerning:{},texture:new bt(m[x].baseTexture,I),page:x}}for(let y=0;y<t.kerning.length;y++){let{first:_,second:x,amount:A}=t.kerning[y];_/=d,x/=d,A/=d,this.chars[x]&&(this.chars[x].kerning[_]=A)}this.distanceFieldRange=c==null?void 0:c.distanceRange,this.distanceFieldType=((g=c==null?void 0:c.fieldType)==null?void 0:g.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,s){let l;if(t instanceof Eo)l=t;else{const h=fS(t);if(!h)throw new Error("Unrecognized data format for font.");l=h.parse(t)}e instanceof bt&&(e=[e]);const o=new or(l,e,s);return or.available[o.font]=o,o}static uninstall(t){const e=or.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete or.available[t]}static from(t,e,s){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:l,padding:o,resolution:h,textureWidth:c,textureHeight:d,...m}=Object.assign({},or.defaultOptions,s),g=mS(l),y=e instanceof jr?e:new jr(e),_=c,x=new Eo;x.info[0]={face:y.fontFamily,size:y.fontSize},x.common[0]={lineHeight:y.fontSize};let A=0,w=0,v,E,R,D=0;const P=[];for(let Y=0;Y<g.length;Y++){v||(v=gt.ADAPTER.createCanvas(),v.width=c,v.height=d,E=v.getContext("2d"),R=new It(v,{resolution:h,...m}),P.push(new bt(R)),x.page.push({id:P.length-1,file:""}));const U=g[Y],q=Vr.measureText(U,y,!1,v),rt=q.width,lt=Math.ceil(q.height),dt=Math.ceil((y.fontStyle==="italic"?2:1)*rt);if(w>=d-lt*h){if(w===0)throw new Error(`[BitmapFont] textureHeight ${d}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${U}')`);--Y,v=null,E=null,R=null,w=0,A=0,D=0;continue}if(D=Math.max(lt+q.fontProperties.descent,D),dt*h+A>=_){if(A===0)throw new Error(`[BitmapFont] textureWidth ${c}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${U}')`);--Y,w+=D*h,w=Math.ceil(w),A=0,D=0;continue}pS(v,E,q,A,w,h,y);const z=Ao(q.text);x.char.push({id:z,page:P.length-1,x:A/h,y:w/h,width:dt,height:lt,xoffset:0,yoffset:0,xadvance:rt-(y.dropShadow?y.dropShadowDistance:0)-(y.stroke?y.strokeThickness:0)}),A+=(dt+2*o)*h,A=Math.ceil(A)}if(!(s!=null&&s.skipKerning))for(let Y=0,U=g.length;Y<U;Y++){const q=g[Y];for(let rt=0;rt<U;rt++){const lt=g[rt],dt=E.measureText(q).width,z=E.measureText(lt).width,W=E.measureText(q+lt).width-(dt+z);W&&x.kerning.push({first:Ao(q),second:Ao(lt),amount:W})}}const I=new or(x,P,!0);return or.available[t]!==void 0&&or.uninstall(t),or.available[t]=I,I}};qr.ALPHA=[["a","z"],["A","Z"]," "],qr.NUMERIC=[["0","9"]],qr.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],qr.ASCII=[[" ","~"]],qr.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:qr.ALPHANUMERIC},qr.available={};let Wr=qr;var gS=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,yS=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const ly=[],oy=[],uy=[],vS=class W1 extends di{constructor(t,e={}){super();const{align:s,tint:l,maxWidth:o,letterSpacing:h,fontName:c,fontSize:d}=Object.assign({},W1.styleDefaults,e);if(!Wr.available[c])throw new Error(`Missing BitmapFont "${c}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=s,this._tintColor=new oe(l),this._font=void 0,this._fontName=c,this._fontSize=d,this.text=t,this._maxWidth=o,this._maxLineHeight=0,this._letterSpacing=h,this._anchor=new dr(()=>{this.dirty=!0},this,0,0),this._roundPixels=gt.ROUND_PIXELS,this.dirty=!0,this._resolution=gt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var dt;const t=Wr.available[this._fontName],e=this.fontSize,s=e/t.size,l=new Vt,o=[],h=[],c=[],d=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",m=ay(d),g=this._maxWidth*t.size/e,y=t.distanceFieldType==="none"?ly:oy;let _=null,x=0,A=0,w=0,v=-1,E=0,R=0,D=0,P=0;for(let z=0;z<m.length;z++){const W=m[z],tt=Ao(W);if(/(?:\s)/.test(W)&&(v=z,E=x,P++),W==="\r"||W===`
`){h.push(x),c.push(-1),A=Math.max(A,x),++w,++R,l.x=0,l.y+=t.lineHeight,_=null,P=0;continue}const ht=t.chars[tt];if(!ht)continue;_&&ht.kerning[_]&&(l.x+=ht.kerning[_]);const S=uy.pop()||{texture:bt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Vt};S.texture=ht.texture,S.line=w,S.charCode=tt,S.position.x=Math.round(l.x+ht.xOffset+this._letterSpacing/2),S.position.y=Math.round(l.y+ht.yOffset),S.prevSpaces=P,o.push(S),x=S.position.x+Math.max(ht.xAdvance-ht.xOffset,ht.texture.orig.width),l.x+=ht.xAdvance+this._letterSpacing,D=Math.max(D,ht.yOffset+ht.texture.height),_=tt,v!==-1&&g>0&&l.x>g&&(++R,dn(o,1+v-R,1+z-v),z=v,v=-1,h.push(E),c.push(o.length>0?o[o.length-1].prevSpaces:0),A=Math.max(A,E),w++,l.x=0,l.y+=t.lineHeight,_=null,P=0)}const I=m[m.length-1];I!=="\r"&&I!==`
`&&(/(?:\s)/.test(I)&&(x=E),h.push(x),A=Math.max(A,x),c.push(-1));const Y=[];for(let z=0;z<=w;z++){let W=0;this._align==="right"?W=A-h[z]:this._align==="center"?W=(A-h[z])/2:this._align==="justify"&&(W=c[z]<0?0:(A-h[z])/c[z]),Y.push(W)}const U=o.length,q={},rt=[],lt=this._activePagesMeshData;y.push(...lt);for(let z=0;z<U;z++){const W=o[z].texture,tt=W.baseTexture.uid;if(!q[tt]){let ht=y.pop();if(!ht){const O=new zA;let M,k;t.distanceFieldType==="none"?(M=new Wg(bt.EMPTY),k=Dt.NORMAL):(M=new Wg(bt.EMPTY,{program:pr.from(yS,gS),uniforms:{uFWidth:0}}),k=Dt.NORMAL_NPM);const T=new qg(O,M);T.blendMode=k,ht={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:T,vertices:null,uvs:null,indices:null}}ht.index=0,ht.indexCount=0,ht.vertexCount=0,ht.uvsCount=0,ht.total=0;const{_textureCache:S}=this;S[tt]=S[tt]||new bt(W.baseTexture),ht.mesh.texture=S[tt],ht.mesh.tint=this._tintColor.value,rt.push(ht),q[tt]=ht}q[tt].total++}for(let z=0;z<lt.length;z++)rt.includes(lt[z])||this.removeChild(lt[z].mesh);for(let z=0;z<rt.length;z++)rt[z].mesh.parent!==this&&this.addChild(rt[z].mesh);this._activePagesMeshData=rt;for(const z in q){const W=q[z],tt=W.total;if(!(((dt=W.indices)==null?void 0:dt.length)>6*tt)||W.vertices.length<qg.BATCHABLE_SIZE*2)W.vertices=new Float32Array(4*2*tt),W.uvs=new Float32Array(4*2*tt),W.indices=new Uint16Array(6*tt);else{const ht=W.total,S=W.vertices;for(let O=ht*4*2;O<S.length;O++)S[O]=0}W.mesh.size=6*tt}for(let z=0;z<U;z++){const W=o[z];let tt=W.position.x+Y[W.line]*(this._align==="justify"?W.prevSpaces:1);this._roundPixels&&(tt=Math.round(tt));const ht=tt*s,S=W.position.y*s,O=W.texture,M=q[O.baseTexture.uid],k=O.frame,T=O._uvs,B=M.index++;M.indices[B*6+0]=0+B*4,M.indices[B*6+1]=1+B*4,M.indices[B*6+2]=2+B*4,M.indices[B*6+3]=0+B*4,M.indices[B*6+4]=2+B*4,M.indices[B*6+5]=3+B*4,M.vertices[B*8+0]=ht,M.vertices[B*8+1]=S,M.vertices[B*8+2]=ht+k.width*s,M.vertices[B*8+3]=S,M.vertices[B*8+4]=ht+k.width*s,M.vertices[B*8+5]=S+k.height*s,M.vertices[B*8+6]=ht,M.vertices[B*8+7]=S+k.height*s,M.uvs[B*8+0]=T.x0,M.uvs[B*8+1]=T.y0,M.uvs[B*8+2]=T.x1,M.uvs[B*8+3]=T.y1,M.uvs[B*8+4]=T.x2,M.uvs[B*8+5]=T.y2,M.uvs[B*8+6]=T.x3,M.uvs[B*8+7]=T.y3}this._textWidth=A*s,this._textHeight=(l.y+t.lineHeight)*s;for(const z in q){const W=q[z];if(this.anchor.x!==0||this.anchor.y!==0){let O=0;const M=this._textWidth*this.anchor.x,k=this._textHeight*this.anchor.y;for(let T=0;T<W.total;T++)W.vertices[O++]-=M,W.vertices[O++]-=k,W.vertices[O++]-=M,W.vertices[O++]-=k,W.vertices[O++]-=M,W.vertices[O++]-=k,W.vertices[O++]-=M,W.vertices[O++]-=k}this._maxLineHeight=D*s;const tt=W.mesh.geometry.getBuffer("aVertexPosition"),ht=W.mesh.geometry.getBuffer("aTextureCoord"),S=W.mesh.geometry.getIndex();tt.data=W.vertices,ht.data=W.uvs,S.data=W.indices,tt.update(),ht.update(),S.update()}for(let z=0;z<o.length;z++)uy.push(o[z]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:s,size:l}=Wr.available[this._fontName];if(s!=="none"){const{a:o,b:h,c,d}=this.worldTransform,m=Math.sqrt(o*o+h*h),g=Math.sqrt(c*c+d*d),y=(Math.abs(m)+Math.abs(g))/2,_=this.fontSize/l,x=t._view.resolution;for(const A of this._activePagesMeshData)A.mesh.shader.uniforms.uFWidth=y*e*_*x}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=Wr.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!Wr.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??Wr.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,s=Wr.available[this._fontName].distanceFieldType==="none"?ly:oy;s.push(...this._activePagesMeshData);for(const l of this._activePagesMeshData)this.removeChild(l.mesh);this._activePagesMeshData=[],s.filter(l=>e[l.mesh.texture.baseTexture.uid]).forEach(l=>{l.mesh.texture=bt.EMPTY});for(const l in e)e[l].destroy(),delete e[l];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};vS.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const _S=[".xml",".fnt"],xS={extension:{type:mt.LoadParser,priority:Di.Normal},name:"loadBitmapFont",test(n){return _S.includes(Oe.extname(n).toLowerCase())},async testParse(n){return To.test(n)||af.test(n)},async parse(n,t,e){const s=To.test(n)?To.parse(n):af.parse(n),{src:l}=t,{page:o}=s,h=[];for(let m=0;m<o.length;++m){const g=o[m].file;let y=Oe.join(Oe.dirname(l),g);y=Hc(y,l),h.push(y)}const c=await e.load(h),d=h.map(m=>c[m]);return Wr.install(s,d,!0)},async load(n,t){return(await gt.ADAPTER.fetch(n)).text()},unload(n){n.destroy()}};Et.add(xS);const of=class ha extends jr{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new ha(Object.keys(ha.defaultOptions).reduce((e,s)=>({...e,[s]:t[s]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete ha.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:s}=ha;if(s[t]){const l=s[t];return this._fonts.push(l),l.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return gt.ADAPTER.fetch(t).then(l=>l.blob()).then(async l=>new Promise((o,h)=>{const c=URL.createObjectURL(l),d=new FileReader;d.onload=()=>o([c,d.result]),d.onerror=h,d.readAsDataURL(l)})).then(async([l,o])=>{const h=Object.assign({family:Oe.basename(t,Oe.extname(t)),weight:"normal",style:"normal",display:"auto",src:l,dataSrc:o,refs:1,originalUrl:t,fontFace:null},e);s[t]=h,this._fonts.push(h),this.styleID++;const c=new FontFace(h.family,`url(${h.src})`,{weight:h.weight,style:h.style,display:h.display});h.fontFace=c,await c.load(),document.fonts.add(c),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(s=>!this._overrides.includes(s));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(s=>this._overrides.includes(s));e.length>0&&(this._overrides=this._overrides.filter(s=>!e.includes(s)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=ub(t)),typeof t=="number"?ob(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,s=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),l=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const o=`${s}px ${l}px`;return this.dropShadowBlur>0?`text-shadow: ${o} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${o} ${t}`}reset(){Object.assign(this,ha.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=gt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};of.availableFonts={},of.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let uf=of;const So=class ca extends ae{constructor(t="",e={}){super(bt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const s=new Image,l=bt.from(s,{scaleMode:gt.SCALE_MODE,resourceOptions:{autoLoad:!1}});l.orig=new Pt,l.trim=new Pt,this.texture=l;const o="http://www.w3.org/2000/svg",h="http://www.w3.org/1999/xhtml",c=document.createElementNS(o,"svg"),d=document.createElementNS(o,"foreignObject"),m=document.createElementNS(h,"div"),g=document.createElementNS(h,"style");d.setAttribute("width","10000"),d.setAttribute("height","10000"),d.style.overflow="hidden",c.appendChild(d),this.maxWidth=ca.defaultMaxWidth,this.maxHeight=ca.defaultMaxHeight,this._domElement=m,this._styleElement=g,this._svgRoot=c,this._foreignObject=d,this._foreignObject.appendChild(g),this._foreignObject.appendChild(m),this._image=s,this._loadImage=new Image,this._autoResolution=ca.defaultAutoResolution,this._resolution=ca.defaultResolution??gt.RESOLUTION,this.text=t,this.style=e}measureText(t){var g,y;const{text:e,style:s,resolution:l}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:s.toCSS(l)}),this._styleElement.textContent=s.toGlobalCSS(),document.body.appendChild(this._svgRoot);const o=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:h,height:c}=o;(h>this.maxWidth||c>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const d=Math.min(this.maxWidth,Math.ceil(h)),m=Math.min(this.maxHeight,Math.ceil(c));return this._svgRoot.setAttribute("width",d.toString()),this._svgRoot.setAttribute("height",m.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),s!==this._style&&(Object.assign(this._domElement,{style:(g=this._style)==null?void 0:g.toCSS(l)}),this._styleElement.textContent=(y=this._style)==null?void 0:y.toGlobalCSS()),{width:d+s.padding*2,height:m+s.padding*2}}async updateText(t=!0){const{style:e,_image:s,_loadImage:l}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:o,height:h}=this.measureText();s.width=l.width=Math.ceil(Math.max(1,o)),s.height=l.height=Math.ceil(Math.max(1,h)),this._updateID++;const c=this._updateID;await new Promise(d=>{l.onload=async()=>{if(c<this._updateID){d();return}await e.onBeforeDraw(),s.src=l.src,l.onload=null,l.src="",this.updateTexture(),d()};const m=new XMLSerializer().serializeToString(this._svgRoot);l.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(m)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:s,resolution:l}=this,{padding:o}=t,{baseTexture:h}=e;e.trim.width=e._frame.width=s.width/l,e.trim.height=e._frame.height=s.height/l,e.trim.x=-o,e.trim.y=-o,e.orig.width=e._frame.width-o*2,e.orig.height=e._frame.height-o*2,this._onTextureUpdate(),h.setRealSize(s.width,s.height,l),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var s,l,o,h,c;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},ca.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((s=this._style)==null||s.cleanFonts()),this._style=e,(l=this._svgRoot)==null||l.remove(),this._svgRoot=e,(o=this._domElement)==null||o.remove(),this._domElement=e,(h=this._foreignObject)==null||h.remove(),this._foreignObject=e,(c=this._styleElement)==null||c.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=Gr(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=Gr(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof uf?(this.ownsStyle=!1,this._style=t):t instanceof jr?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=uf.from(t)):(this.ownsStyle=!0,this._style=new uf(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};So.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},So.defaultMaxWidth=2024,So.defaultMaxHeight=2024,So.defaultAutoResolution=!0;const An={levels:[{name:"000",tutorial:!0,blocks:[[0,0,0,0,0,0,0],[0,9,1,5,1,3,0],[0,0,0,0,0,0,0]]},{name:"001",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,9,1,1,3,0],[0,1,1,0,0,0],[0,1,5,0,0,0],[0,1,1,0,0,0],[0,0,0,0,0,0]]},{name:"002",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,1,1,1,9,0],[0,1,1,5,1,1,0],[0,3,1,1,1,0,0],[0,0,0,0,0,0,0]]},{name:"003",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,1,1,1,0],[0,0,1,5,1,0],[0,0,1,0,9,0],[0,1,1,3,1,0],[0,1,1,1,1,0],[0,0,0,0,0,0]]},{name:"004",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,1,1,1,0,0],[0,1,0,1,0,0],[0,1,5,1,0,0],[0,1,0,1,1,0],[0,1,9,1,3,0],[0,0,0,0,0,0]]},{name:"005",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,0,0,0],[0,1,0,1,0,0,0],[0,1,1,1,3,1,0],[0,0,1,0,0,1,0],[0,0,1,5,1,1,0],[0,0,1,1,9,1,0],[0,0,0,0,0,0,0]]},{name:"006",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,1,1,1,0,1,1,0],[0,1,1,1,1,5,9,0],[0,0,0,0,0,0,3,0],[0,0,0,0,0,0,0,0]]},{name:"007",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,3,1,0,1,3,0],[0,1,5,1,5,1,0],[0,1,1,1,1,1,0],[0,0,1,9,1,0,0],[0,0,0,0,0,0,0]]},{name:"008",tutorial:!1,blocks:[[0,0,0,0],[0,0,9,0],[0,1,7,0],[0,1,1,0],[0,1,3,0],[0,1,5,0],[0,1,1,0],[0,0,0,0]]},{name:"009",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,1,1,3,0,0],[0,9,5,3,0,0],[0,0,0,1,0,0],[0,1,1,1,1,0],[0,1,0,1,1,0],[0,1,1,5,1,0],[0,1,1,1,1,0],[0,0,0,0,0,0]]},{name:"010",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0,0],[0,1,3,1,1,1,1,0,0],[0,1,5,0,1,1,1,0,0],[0,1,9,0,0,0,1,0,0],[0,0,0,0,1,1,3,1,0],[0,0,0,0,1,1,0,1,0],[0,0,0,0,1,1,5,1,0],[0,0,0,0,1,1,1,1,0],[0,0,0,0,0,0,0,0,0]]},{name:"011",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,1,9,0,1,1,1,0],[0,7,5,1,1,1,1,0],[0,3,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},{name:"012",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,0,1,9,0],[0,0,0,3,1,0],[0,1,1,5,5,0],[0,1,1,1,3,0],[0,0,0,0,0,0]]},{name:"013",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,1,1,5,5,0,0],[0,1,3,1,3,1,0],[0,0,0,1,1,9,0],[0,0,0,0,0,0,0]]},{name:"014",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,1,9,0,0],[0,0,3,5,0,0],[0,0,7,1,1,0],[0,1,1,1,1,0],[0,1,1,1,0,0],[0,0,0,0,0,0]]},{name:"015",tutorial:!1,blocks:[[0,0,0,0,0],[0,0,1,1,0],[0,0,1,1,0],[0,0,5,1,0],[0,0,1,3,0],[0,1,5,3,0],[0,1,1,9,0],[0,0,0,0,0]]},{name:"016",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0],[0,0,0,0,0,7,1,0],[0,1,5,1,1,1,1,0],[0,1,1,1,3,1,9,0],[0,0,0,0,0,0,0,0]]},{name:"017",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,1,1,3,3,0],[0,0,5,1,0,1,0],[0,1,1,1,5,1,0],[0,1,9,1,0,0,0],[0,0,0,0,0,0,0]]},{name:"018",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,9,0,0],[0,1,1,1,1,3,7,1,0],[0,1,1,1,0,1,1,1,0],[0,0,0,0,0,5,0,1,0],[0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,0,0]]},{name:"019",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,1,1,0],[0,1,0,1,0,1,0],[0,3,1,5,7,9,0],[0,1,1,1,1,0,0],[0,0,0,0,0,0,0]]},{name:"020",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,0,1,1,1,0],[0,0,0,5,5,9,0],[0,1,1,1,0,0,0],[0,1,1,1,1,1,0],[0,1,3,1,3,1,0],[0,0,0,0,0,0,0]]},{name:"021",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,0,0,1,1,0],[0,1,1,0,1,1,0],[0,1,3,1,3,1,0],[0,1,9,5,5,1,0],[0,1,0,1,0,0,0],[0,1,1,1,0,0,0],[0,0,0,0,0,0,0]]},{name:"022",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0],[0,1,1,1,5,1,1,0],[0,1,7,3,0,1,1,0],[0,0,1,0,0,1,0,0],[0,1,1,9,1,1,1,0],[0,1,1,0,1,1,1,0],[0,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},{name:"023",tutorial:!1,blocks:[[0,0,0,0,0],[0,9,5,3,0],[0,1,5,3,0],[0,0,5,3,0],[0,1,1,1,0],[0,1,1,1,0],[0,0,0,0,0]]},{name:"024",tutorial:!1,blocks:[[0,0,0,0,0],[0,3,1,3,0],[0,1,5,1,0],[0,1,7,1,0],[0,1,5,1,0],[0,0,9,1,0],[0,0,0,0,0]]},{name:"025",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,3,5,3,0],[0,1,1,0,1,0],[0,1,5,5,1,0],[0,3,1,1,9,0],[0,0,0,0,0,0]]},{name:"026",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,1,1,0,0,0],[0,1,1,3,1,0],[0,7,5,5,1,0],[0,1,1,3,9,0],[0,0,0,0,0,0]]},{name:"027",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,0,1,1,1,0],[0,0,1,1,5,0],[0,1,7,7,3,0],[0,9,1,1,0,0],[0,0,0,0,0,0]]},{name:"028",tutorial:!1,blocks:[[0,0,0,0,0,0],[0,1,9,1,0,0],[0,3,3,3,0,0],[0,5,5,5,0,0],[0,1,1,1,1,0],[0,1,1,1,1,0],[0,0,0,0,0,0]]},{name:"029",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,0,1,1,0],[0,1,1,0,1,1,0],[0,9,5,5,5,1,0],[0,1,1,3,3,3,0],[0,0,0,0,0,0,0]]},{name:"030",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,1,1,0],[0,7,0,0,1,3,0],[0,3,5,1,1,1,0],[0,1,1,0,5,1,0],[0,1,1,0,9,1,0],[0,0,0,0,0,0,0]]},{name:"031",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,3,0,0,0],[0,0,0,9,1,0,0,0],[0,0,0,1,5,0,0,0],[0,1,1,1,1,7,1,0],[0,1,1,5,1,1,1,0],[0,0,0,0,0,3,1,0],[0,0,0,0,0,0,0,0]]},{name:"032",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,3,1,0],[0,1,0,1,0,1,0],[0,1,5,9,5,1,0],[0,1,0,1,0,3,0],[0,1,1,7,1,1,0],[0,0,0,0,0,0,0]]},{name:"033",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,1,1,1,1,0,0],[0,1,5,3,1,0,0],[0,0,5,3,5,1,0],[0,0,1,3,1,9,0],[0,0,0,0,0,0,0]]},{name:"034",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0],[0,0,0,0,0,5,3,0],[0,0,0,1,1,3,1,0],[0,0,0,1,1,0,3,0],[0,9,5,1,5,1,1,0],[0,1,1,1,0,1,1,0],[0,0,0,0,0,0,0,0]]},{name:"035",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0],[0,1,1,1,7,5,1,0],[0,1,0,1,1,0,9,0],[0,1,0,1,7,3,1,0],[0,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0]]},{name:"036",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,0,3,3,0,0,0],[0,0,5,3,1,9,0],[0,1,1,5,5,1,0],[0,1,1,0,1,1,0],[0,1,1,0,1,1,0],[0,0,0,0,0,0,0]]},{name:"037",tutorial:!1,blocks:[[0,0,0,0,0,0,0],[0,3,1,0,1,1,0],[0,1,1,5,1,1,0],[0,3,1,5,0,9,0],[0,1,1,5,1,1,0],[0,3,1,0,1,1,0],[0,0,0,0,0,0,0]]},{name:"end",tutorial:!1,blocks:[[0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,0,1,1,1,3,0],[0,1,0,0,0,0,1,0,0,0,0],[0,1,0,9,1,0,1,0,5,1,0],[0,1,0,0,1,0,1,0,0,1,0],[0,1,1,1,1,0,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]]}]},N=3,Lt=8*N,ot=16*N,hf="./jeu_assets_x"+N+".png",Co=class Co{constructor(t){this.n=t;let e=t%2;t-=e;let s=t%4;t-=s;let l=t%8;t-=l;let o=t%16;this.space=e!=0,this.solid=!this.space,this.goal=s!=0,this.box=l!=0,this.player=o!=0}};ln(Co,"DEFAULT",new Co(0));let wo=Co;const Bi=new Image;Bi.src=hf;const Ro={frames:{player1:{frame:{x:0*N,y:0,w:16*N,h:16*N},sourceSize:{w:16*N,h:16*N},spriteSourceSize:{x:0,y:0,w:16*N,h:16*N}},player2:{frame:{x:16*N,y:0,w:16*N,h:16*N},sourceSize:{w:16*N,h:16*N},spriteSourceSize:{x:0,y:0,w:16*N,h:16*N}},box:{frame:{x:32*N,y:0,w:16*N,h:16*N},sourceSize:{w:16*N,h:16*N},spriteSourceSize:{x:0,y:0,w:16*N,h:16*N}},box2:{frame:{x:48*N,y:0,w:16*N,h:16*N},sourceSize:{w:16*N,h:16*N},spriteSourceSize:{x:0,y:0,w:16*N,h:16*N}},partA0:{frame:{x:56*N,y:16*N,w:6*N,h:4*N},sourceSize:{w:6*N,h:4*N},spriteSourceSize:{x:0,y:0,w:6*N,h:4*N}},partA1:{frame:{x:56*N,y:20*N,w:6*N,h:4*N},sourceSize:{w:6*N,h:4*N},spriteSourceSize:{x:0,y:0,w:6*N,h:4*N}},partA2:{frame:{x:56*N,y:24*N,w:6*N,h:4*N},sourceSize:{w:6*N,h:4*N},spriteSourceSize:{x:0,y:0,w:6*N,h:4*N}},partA3:{frame:{x:62*N,y:16*N,w:6*N,h:4*N},sourceSize:{w:6*N,h:4*N},spriteSourceSize:{x:0,y:0,w:6*N,h:4*N}},partA4:{frame:{x:62*N,y:20*N,w:6*N,h:4*N},sourceSize:{w:6*N,h:4*N},spriteSourceSize:{x:0,y:0,w:6*N,h:4*N}},partA5:{frame:{x:62*N,y:24*N,w:6*N,h:4*N},sourceSize:{w:6*N,h:4*N},spriteSourceSize:{x:0,y:0,w:6*N,h:4*N}},recommencer:{frame:{x:0*N,y:40*N,w:76*N,h:10*N},sourceSize:{w:76*N,h:10*N},spriteSourceSize:{x:0,y:0,w:76*N,h:10*N}},recommencer2:{frame:{x:0*N,y:69*N,w:76*N,h:10*N},sourceSize:{w:76*N,h:10*N},spriteSourceSize:{x:0,y:0,w:76*N,h:10*N}},bouger:{frame:{x:0*N,y:50*N,w:53*N,h:19*N},sourceSize:{w:53*N,h:19*N},spriteSourceSize:{x:0,y:0,w:53*N,h:19*N}},bouger2:{frame:{x:53*N,y:50*N,w:53*N,h:19*N},sourceSize:{w:53*N,h:19*N},spriteSourceSize:{x:0,y:0,w:53*N,h:19*N}},pause:{frame:{x:76*N,y:79*N,w:41*N,h:10*N},sourceSize:{w:41*N,h:10*N},spriteSourceSize:{x:0,y:0,w:41*N,h:10*N}},pause2:{frame:{x:76*N,y:69*N,w:41*N,h:10*N},sourceSize:{w:41*N,h:10*N},spriteSourceSize:{x:0,y:0,w:41*N,h:10*N}},jouer:{frame:{x:63*N,y:128*N,w:48*N,h:10*N},sourceSize:{w:48*N,h:10*N},spriteSourceSize:{x:0,y:0,w:48*N,h:10*N}},jouer2:{frame:{x:76*N,y:89*N,w:41*N,h:10*N},sourceSize:{w:41*N,h:10*N},spriteSourceSize:{x:0,y:0,w:41*N,h:10*N}},suivantbtn:{frame:{x:0*N,y:128*N,w:63*N,h:16*N},sourceSize:{w:63*N,h:16*N},spriteSourceSize:{x:0,y:0,w:63*N,h:16*N}},niveauxbtn:{frame:{x:0*N,y:144*N,w:63*N,h:16*N},sourceSize:{w:63*N,h:16*N},spriteSourceSize:{x:0,y:0,w:63*N,h:16*N}},jouerbtn:{frame:{x:0*N,y:160*N,w:63*N,h:16*N},sourceSize:{w:63*N,h:16*N},spriteSourceSize:{x:0,y:0,w:63*N,h:16*N}},suivantbtn2:{frame:{x:0*N,y:80*N,w:48*N,h:16*N},sourceSize:{w:48*N,h:16*N},spriteSourceSize:{x:0,y:0,w:48*N,h:16*N}},niveauxbtn2:{frame:{x:0*N,y:96*N,w:48*N,h:16*N},sourceSize:{w:48*N,h:16*N},spriteSourceSize:{x:0,y:0,w:48*N,h:16*N}},jouerbtn2:{frame:{x:0*N,y:112*N,w:48*N,h:16*N},sourceSize:{w:48*N,h:16*N},spriteSourceSize:{x:0,y:0,w:48*N,h:16*N}},levelA:{frame:{x:48*N,y:80*N,w:48*N,h:16*N},sourceSize:{w:48*N,h:16*N},spriteSourceSize:{x:0,y:0,w:48*N,h:16*N}},levelB:{frame:{x:48*N,y:96*N,w:48*N,h:16*N},sourceSize:{w:48*N,h:16*N},spriteSourceSize:{x:0,y:0,w:48*N,h:16*N}},levelC:{frame:{x:48*N,y:112*N,w:48*N,h:16*N},sourceSize:{w:48*N,h:16*N},spriteSourceSize:{x:0,y:0,w:48*N,h:16*N}},pauselbl:{frame:{x:92*N,y:31*N,w:36*N,h:12*N},sourceSize:{w:36*N,h:12*N},spriteSourceSize:{x:0,y:0,w:36*N,h:12*N}},bravolbl:{frame:{x:88*N,y:19*N,w:40*N,h:12*N},sourceSize:{w:40*N,h:12*N},spriteSourceSize:{x:0,y:0,w:40*N,h:12*N}},sokobanlbl:{frame:{x:77*N,y:7*N,w:51*N,h:12*N},sourceSize:{w:51*N,h:12*N},spriteSourceSize:{x:0,y:0,w:51*N,h:12*N}},levelselect:{frame:{x:69*N,y:108*N,w:25*N,h:20*N},sourceSize:{w:25*N,h:20*N},spriteSourceSize:{x:0,y:0,w:25*N,h:20*N}},tutorial1:{frame:{x:63*N,y:138*N,w:65*N,h:23*N},sourceSize:{w:65*N,h:23*N},spriteSourceSize:{x:0,y:0,w:65*N,h:23*N}},tutorial2:{frame:{x:63*N,y:161*N,w:63*N,h:15*N},sourceSize:{w:63*N,h:15*N},spriteSourceSize:{x:0,y:0,w:63*N,h:15*N}}},meta:{image:hf,format:"RGBA8888",size:{w:128*N,h:176*N},scale:1}},Sn=8*N,wn=An.levels.length,te=6,Ra=Math.ceil(wn/te),Ca=21*N,Ma=16*N;function bS(){const n=new OffscreenCanvas(Ca*te+Sn*(te-1),Ma*Ra+Sn*(Ra-1)),t=n.getContext("2d");for(let e=0;e<wn;e++){const s=An.levels[e].name,l=e%te,o=Math.floor(e/te);let h=(Sn+Ca)*l,c=(Sn+Ma)*o,d=Ro.frames.levelA.frame;e>=24?d=Ro.frames.levelC.frame:e>=12&&(d=Ro.frames.levelB.frame);let m=4*N,g=5*N,y=7*N,_=4*N;const x={0:123,1:83,2:88,3:92,4:97,5:101,6:105,7:110,8:114,9:119,e:69,n:73,d:78};t.drawImage(Bi,d.x,d.y,Ca,Ma,h,c,Ca,Ma),t.drawImage(Bi,x[s[0]]*N,0,g,y,h+m+0*_,c+m,g,y),t.drawImage(Bi,x[s[1]]*N,0,g,y,h+m+1*_,c+m,g,y),t.drawImage(Bi,x[s[2]]*N,0,g,y,h+m+2*_,c+m,g,y)}return n}async function ES(){return new Promise((n,t)=>{let e;e=setInterval(()=>{Bi.complete&&(clearInterval(e),n(Bi))},20)})}function Ee(n,t,e,s=1e-6){let o=(e-t)*Math.pow(s,n);return e-o}const TS=()=>{const n=ki.useRef(null),t=ki.useRef(null);ki.useRef(null);const e=ki.useRef(new ef("init")),s=ki.useRef(null),l=ki.useRef(null),o=ki.useRef(null),h=ki.useRef(null);function c(){return[Math.round(window.innerWidth/2),Math.round(window.innerHeight/2)]}const A=class A{static updateAll(v){let E=[];for(let R=0;R<this.PARTICLES.length;R++){const D=this.PARTICLES[R];D.update(v),D.alive?E.push(D):D.destroy()}this.PARTICLES=E}static add(v,E,R,D,P,I,Y,U){this.PARTICLES.push(new A(v,E,R,D,P,I,Y,U))}constructor(v,E,R,D,P,I,Y,U){this.lifetime=E,this.startX=R,this.startY=D,this.endX=R+P,this.endY=D+I,this.currentX=R,this.currentY=D,this.currentRot=U,this.start=performance.now(),this.end=performance.now()+this.lifetime,this.alive=this.lifetime>0,this.spriteFG=new ae(s.current.textures.partA0),this.spriteFG.anchor.set(.5,.5),this.spriteBG=new ae(s.current.textures.partA1),this.spriteBG.anchor.set(.5,.5),this.spriteDS=new ae(s.current.textures[Y]),this.spriteDS.anchor.set(.5,.5),this.container=v,this.apply(),this.container.addChild(this.spriteBG),this.container.addChild(this.spriteDS),this.container.addChild(this.spriteFG)}update(v){performance.now()>this.end?this.alive=!1:(this.currentX=Ee(v,this.currentX,this.endX,1e-5),this.currentY=Ee(v,this.currentY,this.endY,1e-5),this.apply())}apply(){this.spriteFG.x=this.currentX,this.spriteFG.y=this.currentY,this.spriteFG.angle=this.currentRot,this.spriteBG.x=this.currentX,this.spriteBG.y=this.currentY,this.spriteBG.angle=this.currentRot,this.spriteDS.x=this.currentX,this.spriteDS.y=this.currentY+N,this.spriteDS.angle=this.currentRot}destroy(){this.spriteBG.destroy(),this.spriteDS.destroy(),this.spriteFG.destroy()}};ln(A,"TYPE1","partA2"),ln(A,"TYPE2","partA3"),ln(A,"TYPE3","partA4"),ln(A,"TYPE4","partA5"),ln(A,"PARTICLES",[]);let d=A;class m{static me(){return l.current}constructor(v,E,R){this.level=R,l.current=this,this.frame=0,this.gridX=v,this.gridY=E;let[D,P]=this.level.gridToScreen(v,E);this.screenX=D,this.screenY=P,this.targetX=D,this.targetY=P,this.targetAngle=0,this.screenAngle=0}place(v,E){this.gridX=v,this.gridY=E}move(v,E){this.gridX+=v,this.gridY+=E}destroy(){this.sprite.destroy()}init(){this.sprite=new ae(s.current.textures.player1),this.sprite.anchor.set(.5),this.sprite.x=this.screenX,this.sprite.y=this.screenY,this.sprite.width=ot,this.sprite.height=ot,this.sprite.angle=this.screenAngle,this.level.sprite.addChild(this.sprite)}update(v){let[E,R]=this.level.gridToScreen(this.gridX,this.gridY);this.targetX=E,this.targetY=R,this.screenX=Ee(v,this.screenX,this.targetX),this.screenY=Ee(v,this.screenY,this.targetY),this.screenAngle-this.targetAngle>2?this.screenAngle=this.screenAngle-4:this.targetAngle-this.screenAngle>2&&(this.screenAngle=this.screenAngle+4),this.screenAngle=Ee(v,this.screenAngle,this.targetAngle,1e-9),this.sprite.x=this.screenX,this.sprite.y=this.screenY,this.sprite.angle=this.screenAngle*90,this.frame++%120<5?this.sprite.texture=s.current.textures.player2:this.sprite.texture=s.current.textures.player1}pushleft(){if(this.level.getAt(this.gridX-1,this.gridY).space){let v;for(let E=0;E<this.level.boxes.length;E++){let R=this.level.boxes[E];if(this.gridX-1==R.gridX&&this.gridY==R.gridY){v=R;break}}if(v){if(v.pushleft())return this.move(-1,0),!0;d.add(this.level.sprite,400,this.screenX+ot*-1.5,this.screenY,ot*-1,ot*0,d.TYPE2,0),d.add(this.level.sprite,400,this.screenX+ot*-1.5,this.screenY,ot*-.8,ot*-.6,d.TYPE2,30),d.add(this.level.sprite,400,this.screenX+ot*-1.5,this.screenY,ot*-.8,ot*.6,d.TYPE2,-30),this.screenX-=N*4}else return this.move(-1,0),!0}else d.add(this.level.sprite,400,this.screenX+ot*-.5,this.screenY,ot*-1,ot*0,d.TYPE2,0),d.add(this.level.sprite,400,this.screenX+ot*-.5,this.screenY,ot*-.8,ot*-.6,d.TYPE2,30),d.add(this.level.sprite,400,this.screenX+ot*-.5,this.screenY,ot*-.8,ot*.6,d.TYPE2,-30),this.screenX-=N*4;return!1}pushright(){if(this.level.getAt(this.gridX+1,this.gridY).space){let v;for(let E=0;E<this.level.boxes.length;E++){let R=this.level.boxes[E];if(this.gridX+1==R.gridX&&this.gridY==R.gridY){v=R;break}}if(v){if(v.pushright())return this.move(1,0),!0;d.add(this.level.sprite,400,this.screenX+ot*1.5,this.screenY,ot*1,ot*0,d.TYPE2,0),d.add(this.level.sprite,400,this.screenX+ot*1.5,this.screenY,ot*.8,ot*-.6,d.TYPE2,-30),d.add(this.level.sprite,400,this.screenX+ot*1.5,this.screenY,ot*.8,ot*.6,d.TYPE2,30),this.screenX+=N*4}else return this.move(1,0),!0}else d.add(this.level.sprite,400,this.screenX+ot*.5,this.screenY,ot*1,ot*0,d.TYPE2,0),d.add(this.level.sprite,400,this.screenX+ot*.5,this.screenY,ot*.8,ot*-.6,d.TYPE2,-30),d.add(this.level.sprite,400,this.screenX+ot*.5,this.screenY,ot*.8,ot*.6,d.TYPE2,30),this.screenX+=N*4;return!1}pushup(){if(this.level.getAt(this.gridX,this.gridY-1).space){let v;for(let E=0;E<this.level.boxes.length;E++){let R=this.level.boxes[E];if(this.gridX==R.gridX&&this.gridY-1==R.gridY){v=R;break}}if(v){if(v.pushup())return this.move(0,-1),!0;d.add(this.level.sprite,400,this.screenX,this.screenY+ot*-1.5,ot*0,ot*-1,d.TYPE2,90),d.add(this.level.sprite,400,this.screenX,this.screenY+ot*-1.5,ot*-.6,ot*-.8,d.TYPE2,60),d.add(this.level.sprite,400,this.screenX,this.screenY+ot*-1.5,ot*.6,ot*-.8,d.TYPE2,120),this.screenY-=N*4}else return this.move(0,-1),!0}else d.add(this.level.sprite,400,this.screenX,this.screenY+ot*-.5,ot*0,ot*-1,d.TYPE2,90),d.add(this.level.sprite,400,this.screenX,this.screenY+ot*-.5,ot*-.6,ot*-.8,d.TYPE2,60),d.add(this.level.sprite,400,this.screenX,this.screenY+ot*-.5,ot*.6,ot*-.8,d.TYPE2,120),this.screenY-=N*4;return!1}pushdown(){if(this.level.getAt(this.gridX,this.gridY+1).space){let v;for(let E=0;E<this.level.boxes.length;E++){let R=this.level.boxes[E];if(this.gridX==R.gridX&&this.gridY+1==R.gridY){v=R;break}}if(v){if(v.pushdown())return this.move(0,1),!0;d.add(this.level.sprite,400,this.screenX,this.screenY+ot*1.5,ot*0,ot*1,d.TYPE2,90),d.add(this.level.sprite,400,this.screenX,this.screenY+ot*1.5,ot*-.6,ot*.8,d.TYPE2,120),d.add(this.level.sprite,400,this.screenX,this.screenY+ot*1.5,ot*.6,ot*.8,d.TYPE2,60),this.screenY+=N*4}else return this.move(0,1),!0}else d.add(this.level.sprite,400,this.screenX,this.screenY+ot*.5,ot*0,ot*1,d.TYPE2,90),d.add(this.level.sprite,400,this.screenX,this.screenY+ot*.5,ot*-.6,ot*.8,d.TYPE2,120),d.add(this.level.sprite,400,this.screenX,this.screenY+ot*.5,ot*.6,ot*.8,d.TYPE2,60),this.screenY+=N*4;return!1}}class g{constructor(v,E,R){this.level=R,this.gridX=v,this.gridY=E;let[D,P]=this.level.gridToScreen(v,E);this.screenX=D,this.screenY=P,this.targetX=D,this.targetY=P}init(){this.sprite=new ae(s.current.textures.box),this.sprite.anchor.set(.5),this.sprite.x=this.screenX,this.sprite.y=this.screenY,this.sprite.width=ot,this.sprite.height=ot,this.level.sprite.addChild(this.sprite)}place(v,E){this.gridX=v,this.gridY=E}move(v,E){this.gridX+=v,this.gridY+=E}update(v){let[E,R]=this.level.gridToScreen(this.gridX,this.gridY);this.targetX=E,this.targetY=R,this.screenX=Ee(v,this.screenX,this.targetX),this.screenY=Ee(v,this.screenY,this.targetY);let D=this.level.getAt(this.gridX,this.gridY).goal?"box":"box2";this.sprite.texture=s.current.textures[D],this.sprite.x=this.screenX,this.sprite.y=this.screenY}destroy(){this.sprite.destroy()}pushleft(){if(this.level.getAt(this.gridX-1,this.gridY).space){let v;for(let E=0;E<this.level.boxes.length;E++){let R=this.level.boxes[E];if(this.gridX-1==R.gridX&&this.gridY==R.gridY){v=R;break}}if(v)this.screenX-=N*2;else return this.move(-1,0),!0}else this.screenX-=N*2;return!1}pushright(){if(this.level.getAt(this.gridX+1,this.gridY).space){let v;for(let E=0;E<this.level.boxes.length;E++){let R=this.level.boxes[E];if(this.gridX+1==R.gridX&&this.gridY==R.gridY){v=R;break}}if(v)this.screenX+=N*2;else return this.move(1,0),!0}else this.screenX+=N*2;return!1}pushup(){if(this.level.getAt(this.gridX,this.gridY-1).space){let v;for(let E=0;E<this.level.boxes.length;E++){let R=this.level.boxes[E];if(this.gridX==R.gridX&&this.gridY-1==R.gridY){v=R;break}}if(v)this.screenY-=N*2;else return this.move(0,-1),!0}else this.screenY-=N*2;return!1}pushdown(){if(this.level.getAt(this.gridX,this.gridY+1).space){let v;for(let E=0;E<this.level.boxes.length;E++){let R=this.level.boxes[E];if(this.gridX==R.gridX&&this.gridY+1==R.gridY){v=R;break}}if(v)this.screenY+=N*2;else return this.move(0,1),!0}else this.screenY+=N*2;return!1}}class y{constructor(v,E,R){this.level=R,this.gridX=v,this.gridY=E}}class _{constructor(v,E){this.game=v,h.current=this,this.originalData=E,this.name=E.name,this.gridH=E.blocks.length,this.gridW=E.blocks[0].length,this.screenW=this.gridW*ot,this.screenH=this.gridH*ot,this.blocks=[],this.boxes=[],this.goals=[];for(let R=0;R<this.gridH;R++){this.blocks.push([]);for(let D=0;D<this.gridW;D++){let P=new wo(E.blocks[R][D]);P.player&&(this.player=new m(D,R,this)),P.box&&this.boxes.push(new g(D,R,this)),P.goal&&this.goals.push(new y(D,R,this)),this.blocks[R].push(P)}}}init(){this.drawTilemap(),this.texture=bt.from(this.cvx),this.sprite=new ae(this.texture),this.sprite.anchor.set(.5);let[v,E]=c();this.sprite.x=v,this.sprite.y=E,this.sprite.width=this.screenW,this.sprite.height=this.screenH,this.game.gamecontainer.addChild(this.sprite);for(let R=0;R<this.boxes.length;R++)this.boxes[R].init();this.player.init(),this.tutorial=null,this.name=="000"?(this.tutorial=new ae(s.current.textures.tutorial1),this.tutorial.anchor.set(.5,0),this.tutorial.x=0,this.tutorial.y=this.gridH*Lt,this.sprite.addChild(this.tutorial)):this.name=="007"&&(this.tutorial=new ae(s.current.textures.tutorial2),this.tutorial.anchor.set(.5,0),this.tutorial.x=0,this.tutorial.y=this.gridH*Lt,this.sprite.addChild(this.tutorial))}destroy(){for(let v=0;v<this.boxes.length;v++)this.boxes[v].destroy();this.player.destroy(),this.tutorial&&this.tutorial.destroy(),this.sprite.destroy()}update(v){let[E,R]=c();this.sprite.x=E+this.game.showNiveaux,this.sprite.y=R,this.player.update(v);for(let D=0;D<this.boxes.length;D++)this.boxes[D].update(v)}getAt(v,E){return v<0||E<0||v>=this.gridW||E>=this.gridH?wo.DEFAULT:this.blocks[E][v]}drawTilemap(){this.cvx=new OffscreenCanvas(this.gridW*ot,this.gridH*ot);let v=this.cvx.getContext("2d");for(let E=0;E<this.gridW;E++)for(let R=0;R<this.gridH;R++){let D=this.getAt(E,R),P=this.getAt(E,R-1),I=this.getAt(E,R+1),Y=this.getAt(E-1,R),U=this.getAt(E+1,R),q=this.getAt(E-1,R-1),rt=this.getAt(E+1,R-1),lt=this.getAt(E-1,R+1),dt=this.getAt(E+1,R+1),[z,W]=this.fitTile("tl",D,Y,P,q),[tt,ht]=this.fitTile("tr",D,U,P,rt),[S,O]=this.fitTile("bl",D,Y,I,lt),[M,k]=this.fitTile("br",D,U,I,dt);v.drawImage(Bi,z*Lt,W*Lt,Lt,Lt,E*ot+Lt*0,R*ot+Lt*0,Lt,Lt),v.drawImage(Bi,tt*Lt,ht*Lt,Lt,Lt,E*ot+Lt*1,R*ot+Lt*0,Lt,Lt),v.drawImage(Bi,S*Lt,O*Lt,Lt,Lt,E*ot+Lt*0,R*ot+Lt*1,Lt,Lt),v.drawImage(Bi,M*Lt,k*Lt,Lt,Lt,E*ot+Lt*1,R*ot+Lt*1,Lt,Lt)}v.strokeStyle="#f00",v.lineWidth=2}fitTile(v,E,R,D,P){if(E.goal){if(v=="tl")return[5,2];if(v=="tr")return[6,2];if(v=="bl")return[5,3];if(v=="br")return[6,3]}else{if(E.space)return[1,3];if(R.solid&&D.solid&&P.solid)return[6,4];if(v=="tl")return R.solid&&D.solid?[2,4]:R.solid?[1,4]:D.solid?[2,3]:[4,3];if(v=="tr")return R.solid&&D.solid?[0,4]:R.solid?[1,4]:D.solid?[0,3]:[3,3];if(v=="bl")return R.solid&&D.solid?[2,2]:R.solid?[1,2]:D.solid?[2,3]:[4,2];if(v=="br")return R.solid&&D.solid?[0,2]:R.solid?[1,2]:D.solid?[0,3]:[3,2]}}screenToGrid(v,E,R=!0){let[D,P]=c(),I=h.current.gridW*Lt+D,Y=h.current.gridH*Lt+P;return R?[Math.floor((v-I)/ot),Math.floor((E-Y)/ot)]:[(v-I)/ot-Lt,(E-Y)/ot-Lt]}gridToScreen(v,E){let R=-h.current.gridW*Lt,D=-h.current.gridH*Lt;return[R+v*ot+Lt,D+E*ot+Lt]}receiveEvent(v,E){if(v=="left")return this.player.targetAngle=-1,this.player.pushleft();if(v=="right")return this.player.targetAngle=1,this.player.pushright();if(v=="up")return this.player.targetAngle=0,this.player.pushup();if(v=="down")return this.player.targetAngle=2,this.player.pushdown()}hasWon(){let v=!0;for(let E=0;E<this.boxes.length;E++){const R=this.boxes[E];v=v&&this.goals.some(D=>R.gridX==D.gridX&&R.gridY==D.gridY)}return v}}class x{constructor(){let v=this;o.current=this,this.app=new Tg({view:n.current,width:1920,height:1080,backgroundAlpha:0,backgroundColor:"#8e3ce1"}),this.state="niveaux",this.frame=0,this.frameSinceWin=0,this.levelNumber=0,this.recommencerAngle=0,this.recommencerAngle2=0,this.pauseAngle=0,this.pauseAngle2=0,this.jouerAngle=0,this.jouerAngle2=0,this.showControl=200,this.showLevelControl=200,this.showPause=200,this.showBravo=200,this.showNiveaux=window.innerWidth,this.selectGridX=this.levelNumber%te,this.selectGridY=Math.floor(this.levelNumber/te),this.app.renderer.resize(window.innerWidth,window.innerHeight),this.app.renderer.type=Ju.CANVAS,gt.RENDER_OPTIONS.antialias=!1,gt.SCALE_MODE=Xi.NEAREST,t.current=this.app,this.gamecontainer=new di,this.gamecontainer.x=0,this.gamecontainer.y=0,wa.load(hf).then(async E=>{s.current=new sf(E,Ro),await s.current.parse(),this.level=new _(this,An.levels[this.levelNumber]),this.app.stage.addChild(this.gamecontainer),v.init();let[R,D]=c();this.recommencer=new ae(s.current.textures.recommencer),this.recommencer.anchor.set(0,1),this.recommencer.x=36,this.recommencer.y=window.innerHeight-24+this.showControl,this.app.stage.addChild(this.recommencer),this.pause=new ae(s.current.textures.pause),this.pause.anchor.set(0,1),this.pause.x=36*2+76*N,this.pause.y=window.innerHeight-24+this.showControl,this.app.stage.addChild(this.pause),this.bouger=new ae(s.current.textures.bouger),this.bouger.anchor.set(1,1),this.bouger.x=window.innerWidth-36,this.bouger.y=window.innerHeight-24+this.showControl,this.app.stage.addChild(this.bouger),this.jouer=new ae(s.current.textures.jouer),this.jouer.anchor.set(0,1),this.jouer.x=36,this.jouer.y=window.innerHeight-24+this.showLevelControl,this.app.stage.addChild(this.jouer),this.pauselbl=new ae(s.current.textures.pauselbl),this.pauselbl.anchor.set(.5,0),this.pauselbl.x=R+window.innerWidth,this.pauselbl.y=64-this.showPause,this.app.stage.addChild(this.pauselbl),this.bravolbl=new ae(s.current.textures.bravolbl),this.bravolbl.anchor.set(.5,0),this.bravolbl.x=R+window.innerWidth,this.bravolbl.y=64-this.showBravo,this.app.stage.addChild(this.bravolbl),this.jouerbtn=new ae(s.current.textures.jouerbtn),this.jouerbtn.anchor.set(0,1),this.jouerbtn.x=R+12+window.innerWidth,this.jouerbtn.y=window.innerHeight-64+this.showPause,this.app.stage.addChild(this.jouerbtn),this.suivantbtn=new ae(s.current.textures.suivantbtn),this.suivantbtn.anchor.set(0,1),this.suivantbtn.x=R+12+window.innerWidth,this.suivantbtn.y=window.innerHeight-64+this.showBravo,this.app.stage.addChild(this.suivantbtn),this.niveauxbtn=new ae(s.current.textures.niveauxbtn),this.niveauxbtn.anchor.set(1,1),this.niveauxbtn.x=R-12+window.innerWidth,this.niveauxbtn.y=window.innerHeight-64+Math.min(this.showPause,this.showBravo),this.app.stage.addChild(this.niveauxbtn),this.niveauxtexture=bt.from(bS()),this.niveaux=new ae(this.niveauxtexture),this.niveaux.anchor.set(.5,.5),this.niveaux.x=R,this.niveaux.y=D,this.app.stage.addChild(this.niveaux),this.levelselect=new ae(s.current.textures.levelselect),this.levelselect.anchor.set(0,0),this.levelselect.x=-2*N-this.niveaux.width/2,this.levelselect.y=-2*N-this.niveaux.height/2,this.niveaux.addChild(this.levelselect),this.sokobanlbl=new ae(s.current.textures.sokobanlbl),this.sokobanlbl.anchor.set(.5,1),this.sokobanlbl.x=0,this.sokobanlbl.y=-64-this.niveaux.height/2,this.niveaux.addChild(this.sokobanlbl),this.basicText=e.current,this.basicText.x=100,this.basicText.y=100})}init(){this.level.init();let v=this;this.app.ticker.add(E=>{v.frame++;let R=E/60;v.update(R)})}update(v){this.level.hasWon()&&(this.frameSinceWin++,this.frameSinceWin==20&&(this.state="bravo"));let[E,R]=c();this.app.renderer.resize(window.innerWidth,window.innerHeight),this.recommencerAngle=Ee(v,this.recommencerAngle,0),this.recommencerAngle2=Ee(v,this.recommencerAngle2,this.recommencerAngle),this.pauseAngle=Ee(v,this.pauseAngle,0),this.pauseAngle2=Ee(v,this.pauseAngle2,this.pauseAngle),this.jouerAngle=Ee(v,this.jouerAngle,0),this.jouerAngle2=Ee(v,this.jouerAngle2,this.jouerAngle),this.showControl=Ee(v,this.showControl,this.state=="ingame"?0:200),this.showPause=Ee(v,this.showPause,this.state=="pause"?0:200),this.showBravo=Ee(v,this.showBravo,this.state=="bravo"?0:200),this.showLevelControl=Ee(v,this.showLevelControl,this.state=="niveaux"?0:200),this.showNiveaux=Ee(v,this.showNiveaux,this.state=="niveaux"?window.innerWidth:0,.001),this.selectGridX=Ee(v,this.selectGridX,this.levelNumber%te,1e-9),this.selectGridY=Ee(v,this.selectGridY,Math.floor(this.levelNumber/te),1e-9),this.recommencer.y=window.innerHeight-24+this.recommencerAngle2*2+this.showControl,this.pause.y=window.innerHeight-24+this.pauseAngle2*8+this.showControl,this.bouger.y=window.innerHeight-24+this.showControl,this.jouer.y=window.innerHeight-24+this.jouerAngle2*8+this.showLevelControl,this.bouger.x=window.innerWidth-36,this.recommencer.angle=this.recommencerAngle2*.5,this.pause.angle=this.pauseAngle2*.5,this.jouer.angle=this.jouerAngle2*.5,this.pauselbl.y=64-this.showPause,this.pause.x=36*2+76*N,this.recommencer.x=36,this.pauselbl.x=E+this.showNiveaux,this.bravolbl.x=E+this.showNiveaux,this.jouerbtn.x=E+12+this.showNiveaux,this.suivantbtn.x=E+12+this.showNiveaux,this.niveauxbtn.x=E-12+this.showNiveaux,this.bravolbl.y=64-this.showBravo,this.jouerbtn.y=window.innerHeight-64+this.showPause,this.suivantbtn.y=window.innerHeight-64+this.showBravo,this.niveauxbtn.y=window.innerHeight-64+Math.min(this.showPause,this.showBravo),this.niveaux.x=E-window.innerWidth+this.showNiveaux,this.niveaux.y=R,this.levelselect.x=this.selectGridX*(Ca+Sn)-2*N-this.niveaux.width/2,this.levelselect.y=this.selectGridY*(Ma+Sn)-2*N-this.niveaux.height/2,this.level.update(v),d.updateAll(v)}receiveEvent(v,E){if(this.state=="ingame")this.level.hasWon()||(v=="b"?(this.state="pause",this.pauseAngle=-90):v=="a"?(this.level.destroy(),this.level=new _(this,An.levels[this.levelNumber]),this.level.init(),this.recommencerAngle=-90):this.level.receiveEvent(v,E));else if(this.state=="pause")v=="a"?this.state="ingame":v=="b"&&(this.state="niveaux");else if(this.state=="bravo")v=="a"?(this.state="ingame",this.level.destroy(),this.levelNumber++,this.level=new _(this,An.levels[this.levelNumber]),this.level.init(),this.frameSinceWin=0):v=="b"&&(this.levelNumber++,this.state="niveaux");else if(this.state=="niveaux")if(v=="a")this.jouerAngle=-90,this.state="ingame",this.level.destroy(),this.level=new _(this,An.levels[this.levelNumber]),this.level.init(),this.frameSinceWin=0;else if(v=="left"){let R=this.levelNumber%te,D=Math.floor(this.levelNumber/te);R==0?D==Ra-1?this.levelNumber+=(wn-1)%te:this.levelNumber+=te-1:this.levelNumber-=1}else if(v=="right"){let R=this.levelNumber%te;Math.floor(this.levelNumber/te),R==te-1?this.levelNumber-=te-1:this.levelNumber==wn-1?this.levelNumber-=this.levelNumber%te:this.levelNumber+=1}else v=="up"?(this.levelNumber%te,Math.floor(this.levelNumber/te),this.levelNumber-=te,this.levelNumber<0&&(this.levelNumber+=Ra*te),this.levelNumber>=wn&&(this.levelNumber-=te)):v=="down"&&(this.levelNumber%te,Math.floor(this.levelNumber/te),this.levelNumber+=te,this.levelNumber>=wn&&(this.levelNumber-=Ra*te),this.levelNumber<0&&(this.levelNumber+=te))}}return ki.useEffect(()=>(ES().then(()=>{new x}),()=>{app.destroy(!0,!0)}),[]),ki.useEffect(()=>{document.addEventListener("keydown",function(w){w.repeat||(w.key==" "?(w.preventDefault(),o.current.receiveEvent("a","press")):w.key=="Escape"?(w.preventDefault(),o.current.receiveEvent("b","press")):w.key=="ArrowLeft"?(w.preventDefault(),o.current.receiveEvent("left","press")):w.key=="ArrowRight"?(w.preventDefault(),o.current.receiveEvent("right","press")):w.key=="ArrowUp"?(w.preventDefault(),o.current.receiveEvent("up","press")):w.key=="ArrowDown"?(w.preventDefault(),o.current.receiveEvent("down","press")):w.key=="a"?(w.preventDefault(),o.current.receiveEvent("left","press")):w.key=="d"?(w.preventDefault(),o.current.receiveEvent("right","press")):w.key=="w"?(w.preventDefault(),o.current.receiveEvent("up","press")):w.key=="s"&&(w.preventDefault(),o.current.receiveEvent("down","press")))})},[]),Ol.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Ol.jsx("canvas",{ref:n})})};function AS(){return Ol.jsx(TS,{})}ax.createRoot(document.getElementById("root")).render(Ol.jsx(AS,{}))})();
